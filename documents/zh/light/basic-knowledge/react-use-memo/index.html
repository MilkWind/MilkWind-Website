<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/MilkWind-Website/_next/static/css/f034c804622acb16.css" data-precedence="next"/><link rel="stylesheet" href="/MilkWind-Website/_next/static/css/276b387d8ca46690.css" data-precedence="next"/><link rel="stylesheet" href="/MilkWind-Website/_next/static/css/5eacd01f773eed7f.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/MilkWind-Website/_next/static/chunks/webpack-4924e903218f1830.js"/><script src="/MilkWind-Website/_next/static/chunks/4bd1b696-5119e10e90c1bd1b.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/1684-794bcba02d6f7373.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/main-app-c5f95d71e93250dc.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/46-268e24d727b280ef.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/app/layout-af4a6e723c0ff668.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/app/error-dda32be1d095a86c.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/6874-fbe9a08eb79b991c.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/app/not-found-9ff98b2ccf24cac7.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/206-4f4cbf4d7156f437.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/app/documents/layout-28408791defde09e.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/2415-689c103fb3d2c28d.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/8610-7bd3f91f3cf2a4d6.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/app/documents/loading-1fa3f98b6e5a8e78.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/app/loading-68f227fb49b3ac8c.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/b498d07c-095637f0f10883c6.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/9554-b714f9de28e85d30.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/app/documents/%5B...slug%5D/page-8f3efa7e6c6c5377.js" async=""></script><title>useMemo | Interactive Portfolio</title><meta name="description" content="React基础知识篇-useMemo"/><meta name="author" content="Developer"/><meta name="keywords" content="portfolio,3D,interactive,web development,Three.js,Next.js"/><meta property="og:title" content="useMemo | Interactive Portfolio"/><meta property="og:description" content="React基础知识篇-useMemo"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2025-06-22"/><meta property="article:tag" content="React"/><meta property="article:tag" content="基础知识"/><meta property="article:tag" content="useMemo"/><meta property="article:tag" content="React Hook"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="useMemo | Interactive Portfolio"/><meta name="twitter:description" content="React基础知识篇-useMemo"/><link rel="icon" href="/MilkWind-Website/favicon.ico" type="image/x-icon" sizes="32x32"/><script>document.querySelectorAll('body link[rel="icon"], body link[rel="apple-touch-icon"]').forEach(el => document.head.appendChild(el))</script><script src="/MilkWind-Website/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__variable_9b7fb1 __variable_ca2a15 __variable_591dcc font-sans antialiased min-h-screen bg-background text-foreground"><div class="fixed inset-0 w-full h-full overflow-hidden pointer-events-none z-0" style="background:linear-gradient(135deg, hsl(210, 80%, 60%), hsl(180, 40%, 50%))"></div><div class="fixed top-20 right-5 z-50"><div class="w-16 h-16 rounded-full backdrop-blur-md border animate-pulse bg-surface/60 border-surface/40"></div></div><!--$--><style>
:root {
  --bprogress-color: #0066cc;
  --bprogress-height: 4px;
  --bprogress-spinner-size: 18px;
  --bprogress-spinner-animation-duration: 400ms;
  --bprogress-spinner-border-size: 2px;
  --bprogress-box-shadow: 0 0 10px #0066cc, 0 0 5px #0066cc;
  --bprogress-z-index: 99999;
  --bprogress-spinner-top: 15px;
  --bprogress-spinner-bottom: auto;
  --bprogress-spinner-right: 15px;
  --bprogress-spinner-left: auto;
}

.bprogress {
  width: 0;
  height: 0;
  pointer-events: none;
  z-index: var(--bprogress-z-index);
}

.bprogress .bar {
  background: var(--bprogress-color);
  position: fixed;
  z-index: var(--bprogress-z-index);
  top: 0;
  left: 0;
  width: 100%;
  height: var(--bprogress-height);
}

/* Fancy blur effect */
.bprogress .peg {
  display: block;
  position: absolute;
  right: 0;
  width: 100px;
  height: 100%;
  box-shadow: var(--bprogress-box-shadow);
  opacity: 1.0;
  transform: rotate(3deg) translate(0px, -4px);
}

/* Remove these to get rid of the spinner */
.bprogress .spinner {
  display: block;
  position: fixed;
  z-index: var(--bprogress-z-index);
  top: var(--bprogress-spinner-top);
  bottom: var(--bprogress-spinner-bottom);
  right: var(--bprogress-spinner-right);
  left: var(--bprogress-spinner-left);
}

.bprogress .spinner-icon {
  width: var(--bprogress-spinner-size);
  height: var(--bprogress-spinner-size);
  box-sizing: border-box;
  border: solid var(--bprogress-spinner-border-size) transparent;
  border-top-color: var(--bprogress-color);
  border-left-color: var(--bprogress-color);
  border-radius: 50%;
  -webkit-animation: bprogress-spinner var(--bprogress-spinner-animation-duration) linear infinite;
  animation: bprogress-spinner var(--bprogress-spinner-animation-duration) linear infinite;
}

.bprogress-custom-parent {
  overflow: hidden;
  position: relative;
}

.bprogress-custom-parent .bprogress .spinner,
.bprogress-custom-parent .bprogress .bar {
  position: absolute;
}

.bprogress .indeterminate {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--bprogress-height);
  overflow: hidden;
}

.bprogress .indeterminate .inc,
.bprogress .indeterminate .dec {
  position: absolute;
  top: 0;
  height: 100%;
  background-color: var(--bprogress-color);
}

.bprogress .indeterminate .inc {
  animation: bprogress-indeterminate-increase 2s infinite;
}

.bprogress .indeterminate .dec {
  animation: bprogress-indeterminate-decrease 2s 0.5s infinite;
}

@-webkit-keyframes bprogress-spinner {
  0%   { -webkit-transform: rotate(0deg); transform: rotate(0deg); }
  100% { -webkit-transform: rotate(360deg); transform: rotate(360deg); }
}

@keyframes bprogress-spinner {
  0%   { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes bprogress-indeterminate-increase {
  from { left: -5%; width: 5%; }
  to { left: 130%; width: 100%; }
}

@keyframes bprogress-indeterminate-decrease {
  from { left: -80%; width: 80%; }
  to { left: 110%; width: 10%; }
}
</style><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--><!--$--><div class="relative z-30 min-h-screen bg-background "><div class="container mx-auto px-4 py-8 max-w-4xl"><div class="mb-8"><a class="inline-flex items-center text-primary hover:text-primary/80 transition-colors" href="/MilkWind-Website/documents/">documents.backToDocuments</a></div><header class="mb-12"><div class="flex items-center gap-4 mb-4 text-sm text-foreground/60"><span class="px-3 py-1 bg-primary/20 text-primary rounded-full capitalize">basic knowledge</span><span>14 min read</span></div><h1 class="font-bold mb-4 bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent text-4xl md:text-5xl">useMemo</h1><p class="text-xl text-foreground/80 max-w-3xl">React基础知识篇-useMemo</p><div class="flex flex-wrap gap-2 mt-6"><span class="px-3 py-1 text-sm bg-accent/20 text-accent rounded-full">React</span><span class="px-3 py-1 text-sm bg-accent/20 text-accent rounded-full">基础知识</span><span class="px-3 py-1 text-sm bg-accent/20 text-accent rounded-full">useMemo</span><span class="px-3 py-1 text-sm bg-accent/20 text-accent rounded-full">React Hook</span></div></header><article class="prose prose-headings:mt-8 prose-headings:font-semibold prose-headings:text-foreground prose-h1:text-5xl prose-h2:text-4xl prose-h3:text-3xl prose-h4:text-2xl prose-h5:text-xl prose-h6:text-lg max-w-none "><div class="prose-pre:p-4 prose-pre:bg-surface w-full"><p class="text-base leading-7 mb-4 text-foreground"><code>useMemo</code> 是 React 提供的性能优化 Hook，用于缓存计算结果，避免在每次渲染时重复执行昂贵的计算。它会返回一个记忆化的值，只有当依赖项改变时才会重新计算。</p>
<h3 id="基本作用" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#基本作用" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 基本作用">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">基本作用</strong>
        </h3>
<p class="text-base leading-7 mb-4 text-foreground"><code>useMemo</code> 的主要作用是：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">缓存计算结果，避免重复的昂贵计算</li>
<li class="text-foreground leading-relaxed">优化组件性能，减少不必要的重新渲染</li>
<li class="text-foreground leading-relaxed">在依赖项不变的情况下，返回相同的引用值</li>
<li class="text-foreground leading-relaxed">与 <code>React.memo</code> 配合使用，优化子组件传值</li>
</ul>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="import%20React%2C%20%7B%20useMemo%2C%20useState%20%7D%20from%20'react'%3B%0Afunction%20MyComponent(%7B%20items%20%7D)%20%7B%0Aconst%20%5Bfilter%2C%20setFilter%5D%20%3D%20useState('')%3B%0A%2F%2F%20%E4%BD%BF%E7%94%A8%20useMemo%20%E7%BC%93%E5%AD%98%E8%BF%87%E6%BB%A4%E7%BB%93%E6%9E%9C%0Aconst%20filteredItems%20%3D%20useMemo(()%20%3D%3E%20%7B%0Aconsole.log('%E6%89%A7%E8%A1%8C%E8%BF%87%E6%BB%A4%E8%AE%A1%E7%AE%97')%3B%0Areturn%20items.filter(item%20%3D%3E%0Aitem.name.toLowerCase().includes(filter.toLowerCase())%0A)%3B%0A%7D%2C%20%5Bitems%2C%20filter%5D)%3B%20%2F%2F%20%E4%BE%9D%E8%B5%96%20items%20%E5%92%8C%20filter%0Areturn%20(%0Adiv%3E%0Ainput%0Avalue%3D%7Bfilter%7D%0AonChange%3D%7B(e)%20%3D%3E%20setFilter(e.target.value)%7D%0Aplaceholder%3D%22%E6%90%9C%E7%B4%A2...%22%0A%2F%3E%0Aul%3E%0A%7BfilteredItems.map(item%20%3D%3E%20(%0Ali%20key%3D%7Bitem.id%7D%3E%7Bitem.name%7Dli%3E%0A))%7D%0Aul%3E%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">import</span> <span class="hljs-title class_ inline">React</span>, { useMemo, useState } <span class="hljs-keyword inline">from</span> <span class="hljs-string inline">&#x27;react&#x27;</span>;

<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">MyComponent</span>(<span class="hljs-params inline">{ items }</span>) {
  <span class="hljs-keyword inline">const</span> [filter, setFilter] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-string inline">&#x27;&#x27;</span>);

  <span class="hljs-comment inline">// 使用 useMemo 缓存过滤结果</span>
  <span class="hljs-keyword inline">const</span> filteredItems = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;执行过滤计算&#x27;</span>);
    <span class="hljs-keyword inline">return</span> items.<span class="hljs-title function_ inline">filter</span>(<span class="hljs-function inline"><span class="hljs-params inline">item</span> =&gt;</span> 
      item.<span class="hljs-property inline">name</span>.<span class="hljs-title function_ inline">toLowerCase</span>().<span class="hljs-title function_ inline">includes</span>(filter.<span class="hljs-title function_ inline">toLowerCase</span>())
    );
  }, [items, filter]); <span class="hljs-comment inline">// 依赖 items 和 filter</span>

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">input</span> 
        <span class="hljs-attr inline">value</span>=<span class="hljs-string inline">{filter}</span>
        <span class="hljs-attr inline">onChange</span>=<span class="hljs-string inline">{(e)</span> =&gt;</span> setFilter(e.target.value)}
        placeholder=&quot;搜索...&quot;
      /&gt;
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">ul</span>&gt;</span>
        {filteredItems.map(item =&gt; (
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">li</span> <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{item.id}</span>&gt;</span>{item.name}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">li</span>&gt;</span>
        ))}
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">ul</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="基本语法" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#基本语法" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 基本语法">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">基本语法</strong>
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="const%20memoizedValue%20%3D%20useMemo(()%20%3D%3E%20%7B%0A%2F%2F%20%E8%AE%A1%E7%AE%97%E9%80%BB%E8%BE%91%0Areturn%20expensiveCalculation(a%2C%20b)%3B%0A%7D%2C%20%5Ba%2C%20b%5D)%3B%20%2F%2F%20%E4%BE%9D%E8%B5%96%E6%95%B0%E7%BB%84">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">const</span> memoizedValue = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> {
  <span class="hljs-comment inline">// 计算逻辑</span>
  <span class="hljs-keyword inline">return</span> <span class="hljs-title function_ inline">expensiveCalculation</span>(a, b);
}, [a, b]); <span class="hljs-comment inline">// 依赖数组</span>
</code></pre>
            </div>
        
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">第一个参数</strong>：计算函数，返回要缓存的值</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">第二个参数</strong>：依赖数组，当数组中的值改变时，重新计算</li>
</ul>
<h3 id="与普通计算的对比" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#与普通计算的对比" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 与普通计算的对比">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">与普通计算的对比</strong>
        </h3>
<h4 id="不使用-usememo（问题示例）" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#不使用-usememo（问题示例）" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 不使用 useMemo（问题示例）">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">不使用 useMemo（问题示例）</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20ExpensiveComponent(%7B%20data%2C%20threshold%20%7D)%20%7B%0Aconst%20%5Bcount%2C%20setCount%5D%20%3D%20useState(0)%3B%0A%2F%2F%20%E6%AF%8F%E6%AC%A1%E6%B8%B2%E6%9F%93%E9%83%BD%E4%BC%9A%E6%89%A7%E8%A1%8C%E8%BF%99%E4%B8%AA%E6%98%82%E8%B4%B5%E7%9A%84%E8%AE%A1%E7%AE%97%0Aconst%20expensiveValue%20%3D%20data%0A.filter(item%20%3D%3E%20item.value%20%3E%20threshold)%0A.reduce((sum%2C%20item)%20%3D%3E%20sum%20%2B%20item.value%2C%200)%3B%0Aconsole.log('%E8%AE%A1%E7%AE%97%E6%89%A7%E8%A1%8C%E4%BA%86')%3B%20%2F%2F%20%E6%AF%8F%E6%AC%A1%E6%B8%B2%E6%9F%93%E9%83%BD%E4%BC%9A%E6%89%93%E5%8D%B0%0Areturn%20(%0Adiv%3E%0Ap%3E%E6%98%82%E8%B4%B5%E8%AE%A1%E7%AE%97%E7%BB%93%E6%9E%9C%3A%20%7BexpensiveValue%7Dp%3E%0Ap%3E%E8%AE%A1%E6%95%B0%3A%20%7Bcount%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20setCount(count%20%2B%201)%7D%3E%E5%A2%9E%E5%8A%A0%E8%AE%A1%E6%95%B0button%3E%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">ExpensiveComponent</span>(<span class="hljs-params inline">{ data, threshold }</span>) {
  <span class="hljs-keyword inline">const</span> [count, setCount] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-number inline">0</span>);

  <span class="hljs-comment inline">// 每次渲染都会执行这个昂贵的计算</span>
  <span class="hljs-keyword inline">const</span> expensiveValue = data
    .<span class="hljs-title function_ inline">filter</span>(<span class="hljs-function inline"><span class="hljs-params inline">item</span> =&gt;</span> item.<span class="hljs-property inline">value</span> &gt; threshold)
    .<span class="hljs-title function_ inline">reduce</span>(<span class="hljs-function inline">(<span class="hljs-params inline">sum, item</span>) =&gt;</span> sum + item.<span class="hljs-property inline">value</span>, <span class="hljs-number inline">0</span>);

  <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;计算执行了&#x27;</span>); <span class="hljs-comment inline">// 每次渲染都会打印</span>

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>昂贵计算结果: {expensiveValue}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>计数: {count}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> setCount(count + 1)}&gt;增加计数<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h4 id="使用-usememo（优化后）" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#使用-usememo（优化后）" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 使用 useMemo（优化后）">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">使用 useMemo（优化后）</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20OptimizedComponent(%7B%20data%2C%20threshold%20%7D)%20%7B%0Aconst%20%5Bcount%2C%20setCount%5D%20%3D%20useState(0)%3B%0A%2F%2F%20%E5%8F%AA%E6%9C%89%E5%BD%93%20data%20%E6%88%96%20threshold%20%E5%8F%98%E5%8C%96%E6%97%B6%E6%89%8D%E9%87%8D%E6%96%B0%E8%AE%A1%E7%AE%97%0Aconst%20expensiveValue%20%3D%20useMemo(()%20%3D%3E%20%7B%0Aconsole.log('%E8%AE%A1%E7%AE%97%E6%89%A7%E8%A1%8C%E4%BA%86')%3B%20%2F%2F%20%E5%8F%AA%E5%9C%A8%E4%BE%9D%E8%B5%96%E5%8F%98%E5%8C%96%E6%97%B6%E6%89%93%E5%8D%B0%0Areturn%20data%0A.filter(item%20%3D%3E%20item.value%20%3E%20threshold)%0A.reduce((sum%2C%20item)%20%3D%3E%20sum%20%2B%20item.value%2C%200)%3B%0A%7D%2C%20%5Bdata%2C%20threshold%5D)%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E6%98%82%E8%B4%B5%E8%AE%A1%E7%AE%97%E7%BB%93%E6%9E%9C%3A%20%7BexpensiveValue%7Dp%3E%0Ap%3E%E8%AE%A1%E6%95%B0%3A%20%7Bcount%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20setCount(count%20%2B%201)%7D%3E%E5%A2%9E%E5%8A%A0%E8%AE%A1%E6%95%B0button%3E%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">OptimizedComponent</span>(<span class="hljs-params inline">{ data, threshold }</span>) {
  <span class="hljs-keyword inline">const</span> [count, setCount] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-number inline">0</span>);

  <span class="hljs-comment inline">// 只有当 data 或 threshold 变化时才重新计算</span>
  <span class="hljs-keyword inline">const</span> expensiveValue = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;计算执行了&#x27;</span>); <span class="hljs-comment inline">// 只在依赖变化时打印</span>
    <span class="hljs-keyword inline">return</span> data
      .<span class="hljs-title function_ inline">filter</span>(<span class="hljs-function inline"><span class="hljs-params inline">item</span> =&gt;</span> item.<span class="hljs-property inline">value</span> &gt; threshold)
      .<span class="hljs-title function_ inline">reduce</span>(<span class="hljs-function inline">(<span class="hljs-params inline">sum, item</span>) =&gt;</span> sum + item.<span class="hljs-property inline">value</span>, <span class="hljs-number inline">0</span>);
  }, [data, threshold]);

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>昂贵计算结果: {expensiveValue}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>计数: {count}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> setCount(count + 1)}&gt;增加计数<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="实际应用场景" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#实际应用场景" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 实际应用场景">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">实际应用场景</strong>
        </h3>
<h4 id="复杂数据处理" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#复杂数据处理" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 复杂数据处理">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">复杂数据处理</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20DataAnalytics(%7B%20salesData%2C%20dateRange%2C%20category%20%7D)%20%7B%0A%2F%2F%20%E6%95%B0%E6%8D%AE%E8%BF%87%E6%BB%A4%E5%92%8C%E8%81%9A%E5%90%88%0Aconst%20processedData%20%3D%20useMemo(()%20%3D%3E%20%7B%0Aconsole.log('%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE...')%3B%0Areturn%20salesData%0A.filter(sale%20%3D%3E%20%7B%0Aconst%20saleDate%20%3D%20new%20Date(sale.date)%3B%0Areturn%20saleDate%20%3E%3D%20dateRange.start%20%26%26%0AsaleDate%20end%20%26%26%0Asale.category%20%3D%3D%3D%20category%3B%0A%7D)%0A.reduce((acc%2C%20sale)%20%3D%3E%20%7B%0Aconst%20month%20%3D%20sale.date.substr(0%2C%207)%3B%0Aacc%5Bmonth%5D%20%3D%20(acc%5Bmonth%5D%20%7C%7C%200)%20%2B%20sale.amount%3B%0Areturn%20acc%3B%0A%7D%2C%20%7B%7D)%3B%0A%7D%2C%20%5BsalesData%2C%20dateRange%2C%20category%5D)%3B%0A%2F%2F%20%E8%AE%A1%E7%AE%97%E7%BB%9F%E8%AE%A1%E6%95%B0%E6%8D%AE%0Aconst%20statistics%20%3D%20useMemo(()%20%3D%3E%20%7B%0Aconst%20values%20%3D%20Object.values(processedData)%3B%0Areturn%20%7B%0Atotal%3A%20values.reduce((sum%2C%20val)%20%3D%3E%20sum%20%2B%20val%2C%200)%2C%0Aaverage%3A%20values.length%20%3F%20values.reduce((sum%2C%20val)%20%3D%3E%20sum%20%2B%20val%2C%200)%20%2F%20values.length%20%3A%200%2C%0Amax%3A%20Math.max(...values)%2C%0Amin%3A%20Math.min(...values)%0A%7D%3B%0A%7D%2C%20%5BprocessedData%5D)%3B%0Areturn%20(%0Adiv%3E%0Ah3%3E%E9%94%80%E5%94%AE%E5%88%86%E6%9E%90h3%3E%0Ap%3E%E6%80%BB%E8%AE%A1%3A%20%7Bstatistics.total%7Dp%3E%0Ap%3E%E5%B9%B3%E5%9D%87%3A%20%7Bstatistics.average.toFixed(2)%7Dp%3E%0Ap%3E%E6%9C%80%E9%AB%98%3A%20%7Bstatistics.max%7Dp%3E%0Ap%3E%E6%9C%80%E4%BD%8E%3A%20%7Bstatistics.min%7Dp%3E%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">DataAnalytics</span>(<span class="hljs-params inline">{ salesData, dateRange, category }</span>) {
  <span class="hljs-comment inline">// 数据过滤和聚合</span>
  <span class="hljs-keyword inline">const</span> processedData = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;处理数据...&#x27;</span>);
    
    <span class="hljs-keyword inline">return</span> salesData
      .<span class="hljs-title function_ inline">filter</span>(<span class="hljs-function inline"><span class="hljs-params inline">sale</span> =&gt;</span> {
        <span class="hljs-keyword inline">const</span> saleDate = <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">Date</span>(sale.<span class="hljs-property inline">date</span>);
        <span class="hljs-keyword inline">return</span> saleDate &gt;= dateRange.<span class="hljs-property inline">start</span> &amp;&amp; 
               saleDate &lt;= dateRange.<span class="hljs-property inline">end</span> &amp;&amp;
               sale.<span class="hljs-property inline">category</span> === category;
      })
      .<span class="hljs-title function_ inline">reduce</span>(<span class="hljs-function inline">(<span class="hljs-params inline">acc, sale</span>) =&gt;</span> {
        <span class="hljs-keyword inline">const</span> month = sale.<span class="hljs-property inline">date</span>.<span class="hljs-title function_ inline">substr</span>(<span class="hljs-number inline">0</span>, <span class="hljs-number inline">7</span>);
        acc[month] = (acc[month] || <span class="hljs-number inline">0</span>) + sale.<span class="hljs-property inline">amount</span>;
        <span class="hljs-keyword inline">return</span> acc;
      }, {});
  }, [salesData, dateRange, category]);

  <span class="hljs-comment inline">// 计算统计数据</span>
  <span class="hljs-keyword inline">const</span> statistics = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-keyword inline">const</span> values = <span class="hljs-title class_ inline">Object</span>.<span class="hljs-title function_ inline">values</span>(processedData);
    <span class="hljs-keyword inline">return</span> {
      <span class="hljs-attr inline">total</span>: values.<span class="hljs-title function_ inline">reduce</span>(<span class="hljs-function inline">(<span class="hljs-params inline">sum, val</span>) =&gt;</span> sum + val, <span class="hljs-number inline">0</span>),
      <span class="hljs-attr inline">average</span>: values.<span class="hljs-property inline">length</span> ? values.<span class="hljs-title function_ inline">reduce</span>(<span class="hljs-function inline">(<span class="hljs-params inline">sum, val</span>) =&gt;</span> sum + val, <span class="hljs-number inline">0</span>) / values.<span class="hljs-property inline">length</span> : <span class="hljs-number inline">0</span>,
      <span class="hljs-attr inline">max</span>: <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">max</span>(...values),
      <span class="hljs-attr inline">min</span>: <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">min</span>(...values)
    };
  }, [processedData]);

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">h3</span>&gt;</span>销售分析<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">h3</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>总计: {statistics.total}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>平均: {statistics.average.toFixed(2)}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>最高: {statistics.max}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>最低: {statistics.min}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h4 id="搜索和排序" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#搜索和排序" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 搜索和排序">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">搜索和排序</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20ProductList(%7B%20products%2C%20searchTerm%2C%20sortBy%2C%20sortOrder%20%7D)%20%7B%0A%2F%2F%20%E6%90%9C%E7%B4%A2%E8%BF%87%E6%BB%A4%0Aconst%20filteredProducts%20%3D%20useMemo(()%20%3D%3E%20%7B%0Aif%20(!searchTerm)%20return%20products%3B%0Areturn%20products.filter(product%20%3D%3E%0Aproduct.name.toLowerCase().includes(searchTerm.toLowerCase())%20%7C%7C%0Aproduct.description.toLowerCase().includes(searchTerm.toLowerCase())%0A)%3B%0A%7D%2C%20%5Bproducts%2C%20searchTerm%5D)%3B%0A%2F%2F%20%E6%8E%92%E5%BA%8F%0Aconst%20sortedProducts%20%3D%20useMemo(()%20%3D%3E%20%7B%0Aconst%20sorted%20%3D%20%5B...filteredProducts%5D.sort((a%2C%20b)%20%3D%3E%20%7B%0Alet%20aValue%20%3D%20a%5BsortBy%5D%3B%0Alet%20bValue%20%3D%20b%5BsortBy%5D%3B%0Aif%20(typeof%20aValue%20%3D%3D%3D%20'string')%20%7B%0AaValue%20%3D%20aValue.toLowerCase()%3B%0AbValue%20%3D%20bValue.toLowerCase()%3B%0A%7D%0Aif%20(aValue%20return%20sortOrder%20%3D%3D%3D%20'asc'%20%3F%20-1%20%3A%201%3B%0Aif%20(aValue%20%3E%20bValue)%20return%20sortOrder%20%3D%3D%3D%20'asc'%20%3F%201%20%3A%20-1%3B%0Areturn%200%3B%0A%7D)%3B%0Areturn%20sorted%3B%0A%7D%2C%20%5BfilteredProducts%2C%20sortBy%2C%20sortOrder%5D)%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E6%89%BE%E5%88%B0%20%7BsortedProducts.length%7D%20%E4%B8%AA%E4%BA%A7%E5%93%81p%3E%0A%7BsortedProducts.map(product%20%3D%3E%20(%0Adiv%20key%3D%7Bproduct.id%7D%3E%0Ah4%3E%7Bproduct.name%7Dh4%3E%0Ap%3E%7Bproduct.description%7Dp%3E%0Ap%3E%E4%BB%B7%E6%A0%BC%3A%20%C2%A5%7Bproduct.price%7Dp%3E%0Adiv%3E%0A))%7D%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">ProductList</span>(<span class="hljs-params inline">{ products, searchTerm, sortBy, sortOrder }</span>) {
  <span class="hljs-comment inline">// 搜索过滤</span>
  <span class="hljs-keyword inline">const</span> filteredProducts = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-keyword inline">if</span> (!searchTerm) <span class="hljs-keyword inline">return</span> products;
    
    <span class="hljs-keyword inline">return</span> products.<span class="hljs-title function_ inline">filter</span>(<span class="hljs-function inline"><span class="hljs-params inline">product</span> =&gt;</span>
      product.<span class="hljs-property inline">name</span>.<span class="hljs-title function_ inline">toLowerCase</span>().<span class="hljs-title function_ inline">includes</span>(searchTerm.<span class="hljs-title function_ inline">toLowerCase</span>()) ||
      product.<span class="hljs-property inline">description</span>.<span class="hljs-title function_ inline">toLowerCase</span>().<span class="hljs-title function_ inline">includes</span>(searchTerm.<span class="hljs-title function_ inline">toLowerCase</span>())
    );
  }, [products, searchTerm]);

  <span class="hljs-comment inline">// 排序</span>
  <span class="hljs-keyword inline">const</span> sortedProducts = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-keyword inline">const</span> sorted = [...filteredProducts].<span class="hljs-title function_ inline">sort</span>(<span class="hljs-function inline">(<span class="hljs-params inline">a, b</span>) =&gt;</span> {
      <span class="hljs-keyword inline">let</span> aValue = a[sortBy];
      <span class="hljs-keyword inline">let</span> bValue = b[sortBy];

      <span class="hljs-keyword inline">if</span> (<span class="hljs-keyword inline">typeof</span> aValue === <span class="hljs-string inline">&#x27;string&#x27;</span>) {
        aValue = aValue.<span class="hljs-title function_ inline">toLowerCase</span>();
        bValue = bValue.<span class="hljs-title function_ inline">toLowerCase</span>();
      }

      <span class="hljs-keyword inline">if</span> (aValue &lt; bValue) <span class="hljs-keyword inline">return</span> sortOrder === <span class="hljs-string inline">&#x27;asc&#x27;</span> ? -<span class="hljs-number inline">1</span> : <span class="hljs-number inline">1</span>;
      <span class="hljs-keyword inline">if</span> (aValue &gt; bValue) <span class="hljs-keyword inline">return</span> sortOrder === <span class="hljs-string inline">&#x27;asc&#x27;</span> ? <span class="hljs-number inline">1</span> : -<span class="hljs-number inline">1</span>;
      <span class="hljs-keyword inline">return</span> <span class="hljs-number inline">0</span>;
    });

    <span class="hljs-keyword inline">return</span> sorted;
  }, [filteredProducts, sortBy, sortOrder]);

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>找到 {sortedProducts.length} 个产品<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      {sortedProducts.map(product =&gt; (
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span> <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{product.id}</span>&gt;</span>
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">h4</span>&gt;</span>{product.name}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">h4</span>&gt;</span>
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>{product.description}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>价格: ¥{product.price}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
      ))}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h4 id="避免子组件重新渲染" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#避免子组件重新渲染" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 避免子组件重新渲染">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">避免子组件重新渲染</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20ParentComponent()%20%7B%0Aconst%20%5Bcount%2C%20setCount%5D%20%3D%20useState(0)%3B%0Aconst%20%5Busers%2C%20setUsers%5D%20%3D%20useState(%5B%5D)%3B%0A%2F%2F%20%E6%B2%A1%E6%9C%89%20useMemo%EF%BC%9A%E6%AF%8F%E6%AC%A1%E6%B8%B2%E6%9F%93%E9%83%BD%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84%E9%85%8D%E7%BD%AE%E5%AF%B9%E8%B1%A1%0Aconst%20badConfig%20%3D%20%7B%0ApageSize%3A%2010%2C%0AsortBy%3A%20'name'%0A%7D%3B%0A%2F%2F%20%E4%BD%BF%E7%94%A8%20useMemo%EF%BC%9A%E9%85%8D%E7%BD%AE%E5%AF%B9%E8%B1%A1%E5%BC%95%E7%94%A8%E7%A8%B3%E5%AE%9A%0Aconst%20config%20%3D%20useMemo(()%20%3D%3E%20(%7B%0ApageSize%3A%2010%2C%0AsortBy%3A%20'name'%0A%7D)%2C%20%5B%5D)%3B%20%2F%2F%20%E7%A9%BA%E4%BE%9D%E8%B5%96%EF%BC%8C%E9%85%8D%E7%BD%AE%E6%B0%B8%E4%B8%8D%E5%8F%98%E5%8C%96%0A%2F%2F%20%E7%94%A8%E6%88%B7%E5%88%97%E8%A1%A8%E7%9A%84%E8%AE%A1%E7%AE%97%E9%80%BB%E8%BE%91%0Aconst%20processedUsers%20%3D%20useMemo(()%20%3D%3E%20%7B%0Areturn%20users.map(user%20%3D%3E%20(%7B%0A...user%2C%0AdisplayName%3A%20%60%24%7Buser.firstName%7D%20%24%7Buser.lastName%7D%60%2C%0AisActive%3A%20user.lastLogin%20%3E%20Date.now()%20-%2030%20*%2024%20*%2060%20*%2060%20*%201000%0A%7D))%3B%0A%7D%2C%20%5Busers%5D)%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E8%AE%A1%E6%95%B0%3A%20%7Bcount%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20setCount(count%20%2B%201)%7D%3E%E5%A2%9E%E5%8A%A0button%3E%0A%7B%2F*%20%E4%BD%BF%E7%94%A8%20badConfig%20%E4%BC%9A%E5%AF%BC%E8%87%B4%20UserList%20%E6%AF%8F%E6%AC%A1%E9%83%BD%E9%87%8D%E6%96%B0%E6%B8%B2%E6%9F%93%20*%2F%7D%0AUserList%20users%3D%7BprocessedUsers%7D%20config%3D%7Bconfig%7D%20%2F%3E%0Adiv%3E%0A)%3B%0A%7D%0Aconst%20UserList%20%3D%20React.memo((%7B%20users%2C%20config%20%7D)%20%3D%3E%20%7B%0Aconsole.log('UserList%20%E6%B8%B2%E6%9F%93')%3B%0Areturn%20(%0Adiv%3E%0A%7Busers.slice(0%2C%20config.pageSize).map(user%20%3D%3E%20(%0Adiv%20key%3D%7Buser.id%7D%3E%0A%7Buser.displayName%7D%20%7Buser.isActive%20%3F%20'%F0%9F%9F%A2'%20%3A%20'%F0%9F%94%B4'%7D%0Adiv%3E%0A))%7D%0Adiv%3E%0A)%3B%0A%7D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">ParentComponent</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> [count, setCount] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-number inline">0</span>);
  <span class="hljs-keyword inline">const</span> [users, setUsers] = <span class="hljs-title function_ inline">useState</span>([]);

  <span class="hljs-comment inline">// 没有 useMemo：每次渲染都创建新的配置对象</span>
  <span class="hljs-keyword inline">const</span> badConfig = {
    <span class="hljs-attr inline">pageSize</span>: <span class="hljs-number inline">10</span>,
    <span class="hljs-attr inline">sortBy</span>: <span class="hljs-string inline">&#x27;name&#x27;</span>
  };

  <span class="hljs-comment inline">// 使用 useMemo：配置对象引用稳定</span>
  <span class="hljs-keyword inline">const</span> config = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> ({
    <span class="hljs-attr inline">pageSize</span>: <span class="hljs-number inline">10</span>,
    <span class="hljs-attr inline">sortBy</span>: <span class="hljs-string inline">&#x27;name&#x27;</span>
  }), []); <span class="hljs-comment inline">// 空依赖，配置永不变化</span>

  <span class="hljs-comment inline">// 用户列表的计算逻辑</span>
  <span class="hljs-keyword inline">const</span> processedUsers = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-keyword inline">return</span> users.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline"><span class="hljs-params inline">user</span> =&gt;</span> ({
      ...user,
      <span class="hljs-attr inline">displayName</span>: <span class="hljs-string inline">`<span class="hljs-subst inline">${user.firstName}</span> <span class="hljs-subst inline">${user.lastName}</span>`</span>,
      <span class="hljs-attr inline">isActive</span>: user.<span class="hljs-property inline">lastLogin</span> &gt; <span class="hljs-title class_ inline">Date</span>.<span class="hljs-title function_ inline">now</span>() - <span class="hljs-number inline">30</span> * <span class="hljs-number inline">24</span> * <span class="hljs-number inline">60</span> * <span class="hljs-number inline">60</span> * <span class="hljs-number inline">1000</span>
    }));
  }, [users]);

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>计数: {count}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> setCount(count + 1)}&gt;增加<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
      
      {/* 使用 badConfig 会导致 UserList 每次都重新渲染 */}
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">UserList</span> <span class="hljs-attr inline">users</span>=<span class="hljs-string inline">{processedUsers}</span> <span class="hljs-attr inline">config</span>=<span class="hljs-string inline">{config}</span> /&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword inline">const</span> <span class="hljs-title class_ inline">UserList</span> = <span class="hljs-title class_ inline">React</span>.<span class="hljs-title function_ inline">memo</span>(<span class="hljs-function inline">(<span class="hljs-params inline">{ users, config }</span>) =&gt;</span> {
  <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;UserList 渲染&#x27;</span>);
  
  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      {users.slice(0, config.pageSize).map(user =&gt; (
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span> <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{user.id}</span>&gt;</span>
          {user.displayName} {user.isActive ? &#x27;🟢&#x27; : &#x27;🔴&#x27;}
        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
      ))}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
});
</code></pre>
            </div>
        
<h3 id="与-usecallback-的对比" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#与-usecallback-的对比" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 与 useCallback 的对比">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">与 useCallback 的对比</strong>
        </h3>
<h4 id="usememo-vs-usecallback" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#usememo-vs-usecallback" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to useMemo vs useCallback">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">useMemo vs useCallback</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20ComparisonExample(%7B%20items%20%7D)%20%7B%0A%2F%2F%20useMemo%EF%BC%9A%E7%BC%93%E5%AD%98%E8%AE%A1%E7%AE%97%E7%BB%93%E6%9E%9C%EF%BC%88%E5%80%BC%EF%BC%89%0Aconst%20expensiveValue%20%3D%20useMemo(()%20%3D%3E%20%7B%0Areturn%20items.reduce((sum%2C%20item)%20%3D%3E%20sum%20%2B%20item.value%2C%200)%3B%0A%7D%2C%20%5Bitems%5D)%3B%0A%2F%2F%20useCallback%EF%BC%9A%E7%BC%93%E5%AD%98%E5%87%BD%E6%95%B0%E5%AE%9A%E4%B9%89%0Aconst%20handleClick%20%3D%20useCallback(()%20%3D%3E%20%7B%0Aconsole.log('%E6%8C%89%E9%92%AE%E8%A2%AB%E7%82%B9%E5%87%BB')%3B%0A%7D%2C%20%5B%5D)%3B%0A%2F%2F%20%E7%AD%89%E4%BB%B7%E5%86%99%E6%B3%95%0Aconst%20memoizedCallback%20%3D%20useMemo(()%20%3D%3E%20%7B%0Areturn%20()%20%3D%3E%20console.log('%E6%8C%89%E9%92%AE%E8%A2%AB%E7%82%B9%E5%87%BB')%3B%0A%7D%2C%20%5B%5D)%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E6%80%BB%E8%AE%A1%3A%20%7BexpensiveValue%7Dp%3E%0Abutton%20onClick%3D%7BhandleClick%7D%3E%E7%82%B9%E5%87%BBbutton%3E%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">ComparisonExample</span>(<span class="hljs-params inline">{ items }</span>) {
  <span class="hljs-comment inline">// useMemo：缓存计算结果（值）</span>
  <span class="hljs-keyword inline">const</span> expensiveValue = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-keyword inline">return</span> items.<span class="hljs-title function_ inline">reduce</span>(<span class="hljs-function inline">(<span class="hljs-params inline">sum, item</span>) =&gt;</span> sum + item.<span class="hljs-property inline">value</span>, <span class="hljs-number inline">0</span>);
  }, [items]);

  <span class="hljs-comment inline">// useCallback：缓存函数定义</span>
  <span class="hljs-keyword inline">const</span> handleClick = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;按钮被点击&#x27;</span>);
  }, []);

  <span class="hljs-comment inline">// 等价写法</span>
  <span class="hljs-keyword inline">const</span> memoizedCallback = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-keyword inline">return</span> <span class="hljs-function inline">() =&gt;</span> <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;按钮被点击&#x27;</span>);
  }, []);

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>总计: {expensiveValue}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{handleClick}</span>&gt;</span>点击<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="与-reactmemo-的区别" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#与-reactmemo-的区别" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 与 React.memo 的区别">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">与 <code>React.memo</code> 的区别</strong>
        </h3>
<p class="text-base leading-7 mb-4 text-foreground"><code>useMemo</code> 和 <code>React.memo</code> 都是性能优化工具，但它们解决的问题和使用方式完全不同：</p>
<table class="w-full border-collapse mb-4 shadow-sm rounded-lg overflow-hidden">
<thead class="bg-surface">
<tr class="border-b border-gray-200"><th class="px-4 py-3 text-left text-xs font-medium text-foreground uppercase tracking-wider bg-surface">特性</th><th class="px-4 py-3 text-left text-xs font-medium text-foreground uppercase tracking-wider bg-surface">useMemo</th><th class="px-4 py-3 text-left text-xs font-medium text-foreground uppercase tracking-wider bg-surface">React.memo</th></tr>
</thead>
<tbody class="bg-background divide-y divide-gray-200">
<tr class="border-b border-gray-200"><td class="px-4 py-3 text-sm text-foreground"><strong class="font-bold text-foreground">优化目标</strong></td><td class="px-4 py-3 text-sm text-foreground">计算过程</td><td class="px-4 py-3 text-sm text-foreground">组件渲染</td></tr>
<tr class="border-b border-gray-200"><td class="px-4 py-3 text-sm text-foreground"><strong class="font-bold text-foreground">作用范围</strong></td><td class="px-4 py-3 text-sm text-foreground">组件内部的值</td><td class="px-4 py-3 text-sm text-foreground">整个组件</td></tr>
<tr class="border-b border-gray-200"><td class="px-4 py-3 text-sm text-foreground"><strong class="font-bold text-foreground">使用位置</strong></td><td class="px-4 py-3 text-sm text-foreground">组件内部（Hook）</td><td class="px-4 py-3 text-sm text-foreground">组件定义外部（HOC）</td></tr>
<tr class="border-b border-gray-200"><td class="px-4 py-3 text-sm text-foreground"><strong class="font-bold text-foreground">触发条件</strong></td><td class="px-4 py-3 text-sm text-foreground">依赖数组变化</td><td class="px-4 py-3 text-sm text-foreground">props 变化</td></tr>
<tr class="border-b border-gray-200"><td class="px-4 py-3 text-sm text-foreground"><strong class="font-bold text-foreground">返回类型</strong></td><td class="px-4 py-3 text-sm text-foreground">任意值</td><td class="px-4 py-3 text-sm text-foreground">React 组件</td></tr>
</tbody>
</table>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="%2F%2F%20React.memo%EF%BC%9A%E7%BB%84%E4%BB%B6%E7%BA%A7%E5%88%AB%E7%9A%84%E4%BC%98%E5%8C%96%0Aconst%20ProductCard%20%3D%20React.memo((%7B%20product%2C%20onAddToCart%20%7D)%20%3D%3E%20%7B%0Aconsole.log('ProductCard%20%E6%B8%B2%E6%9F%93')%3B%0Areturn%20(%0Adiv%3E%0Ah3%3E%7Bproduct.name%7Dh3%3E%0Ap%3E%E4%BB%B7%E6%A0%BC%3A%20%C2%A5%7Bproduct.price%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20onAddToCart(product.id)%7D%3E%0A%E5%8A%A0%E5%85%A5%E8%B4%AD%E7%89%A9%E8%BD%A6%0Abutton%3E%0Adiv%3E%0A)%3B%0A%7D)%3B%0A%2F%2F%20useMemo%EF%BC%9A%E5%80%BC%E7%BA%A7%E5%88%AB%E7%9A%84%E4%BC%98%E5%8C%96%0Afunction%20ProductList(%7B%20products%2C%20category%2C%20searchTerm%20%7D)%20%7B%0Aconsole.log('ProductList%20%E6%B8%B2%E6%9F%93')%3B%0A%2F%2F%20useMemo%20%E7%BC%93%E5%AD%98%E8%BF%87%E6%BB%A4%E7%BB%93%E6%9E%9C%0Aconst%20filteredProducts%20%3D%20useMemo(()%20%3D%3E%20%7B%0Aconsole.log('%E6%89%A7%E8%A1%8C%E8%BF%87%E6%BB%A4%E8%AE%A1%E7%AE%97')%3B%0Areturn%20products%0A.filter(p%20%3D%3E%20p.category%20%3D%3D%3D%20category)%0A.filter(p%20%3D%3E%20p.name.includes(searchTerm))%3B%0A%7D%2C%20%5Bproducts%2C%20category%2C%20searchTerm%5D)%3B%0A%2F%2F%20useMemo%20%E7%BC%93%E5%AD%98%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%EF%BC%8C%E9%85%8D%E5%90%88%20React.memo%20%E4%BD%BF%E7%94%A8%0Aconst%20handleAddToCart%20%3D%20useMemo(()%20%3D%3E%20%7B%0Areturn%20(productId)%20%3D%3E%20%7B%0Aconsole.log('%E6%B7%BB%E5%8A%A0%E5%88%B0%E8%B4%AD%E7%89%A9%E8%BD%A6%3A'%2C%20productId)%3B%0A%7D%3B%0A%7D%2C%20%5B%5D)%3B%20%2F%2F%20%E6%88%96%E8%80%85%E4%BD%BF%E7%94%A8%20useCallback%0Areturn%20(%0Adiv%3E%0Ap%3E%E6%89%BE%E5%88%B0%20%7BfilteredProducts.length%7D%20%E4%B8%AA%E4%BA%A7%E5%93%81p%3E%0A%7BfilteredProducts.map(product%20%3D%3E%20(%0AProductCard%0Akey%3D%7Bproduct.id%7D%0Aproduct%3D%7Bproduct%7D%0AonAddToCart%3D%7BhandleAddToCart%7D%0A%2F%3E%0A))%7D%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-comment inline">// React.memo：组件级别的优化</span>
<span class="hljs-keyword inline">const</span> <span class="hljs-title class_ inline">ProductCard</span> = <span class="hljs-title class_ inline">React</span>.<span class="hljs-title function_ inline">memo</span>(<span class="hljs-function inline">(<span class="hljs-params inline">{ product, onAddToCart }</span>) =&gt;</span> {
  <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;ProductCard 渲染&#x27;</span>);
  
  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">h3</span>&gt;</span>{product.name}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">h3</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>价格: ¥{product.price}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> onAddToCart(product.id)}&gt;
        加入购物车
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
});

<span class="hljs-comment inline">// useMemo：值级别的优化</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">ProductList</span>(<span class="hljs-params inline">{ products, category, searchTerm }</span>) {
  <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;ProductList 渲染&#x27;</span>);

  <span class="hljs-comment inline">// useMemo 缓存过滤结果</span>
  <span class="hljs-keyword inline">const</span> filteredProducts = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;执行过滤计算&#x27;</span>);
    <span class="hljs-keyword inline">return</span> products
      .<span class="hljs-title function_ inline">filter</span>(<span class="hljs-function inline"><span class="hljs-params inline">p</span> =&gt;</span> p.<span class="hljs-property inline">category</span> === category)
      .<span class="hljs-title function_ inline">filter</span>(<span class="hljs-function inline"><span class="hljs-params inline">p</span> =&gt;</span> p.<span class="hljs-property inline">name</span>.<span class="hljs-title function_ inline">includes</span>(searchTerm));
  }, [products, category, searchTerm]);

  <span class="hljs-comment inline">// useMemo 缓存回调函数，配合 React.memo 使用</span>
  <span class="hljs-keyword inline">const</span> handleAddToCart = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-keyword inline">return</span> <span class="hljs-function inline">(<span class="hljs-params inline">productId</span>) =&gt;</span> {
      <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;添加到购物车:&#x27;</span>, productId);
    };
  }, []); <span class="hljs-comment inline">// 或者使用 useCallback</span>

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>找到 {filteredProducts.length} 个产品<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      {filteredProducts.map(product =&gt; (
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">ProductCard</span>
          <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{product.id}</span>
          <span class="hljs-attr inline">product</span>=<span class="hljs-string inline">{product}</span>
          <span class="hljs-attr inline">onAddToCart</span>=<span class="hljs-string inline">{handleAddToCart}</span>
        /&gt;</span>
      ))}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">组合使用的最佳实践</strong>：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20ShoppingApp()%20%7B%0Aconst%20%5Bcart%2C%20setCart%5D%20%3D%20useState(%5B%5D)%3B%0Aconst%20%5BsearchTerm%2C%20setSearchTerm%5D%20%3D%20useState('')%3B%0Aconst%20%5Bproducts%5D%20%3D%20useState(%5B%0A%7B%20id%3A%201%2C%20name%3A%20'iPhone'%2C%20category%3A%20'electronics'%2C%20price%3A%20999%20%7D%2C%0A%7B%20id%3A%202%2C%20name%3A%20'T-Shirt'%2C%20category%3A%20'clothing'%2C%20price%3A%2029%20%7D%0A%5D)%3B%0A%2F%2F%20useMemo%EF%BC%9A%E7%BC%93%E5%AD%98%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C%0Aconst%20searchResults%20%3D%20useMemo(()%20%3D%3E%20%7B%0Aif%20(!searchTerm)%20return%20products%3B%0Areturn%20products.filter(p%20%3D%3E%0Ap.name.toLowerCase().includes(searchTerm.toLowerCase())%0A)%3B%0A%7D%2C%20%5Bproducts%2C%20searchTerm%5D)%3B%0A%2F%2F%20useMemo%EF%BC%9A%E7%BC%93%E5%AD%98%E8%B4%AD%E7%89%A9%E8%BD%A6%E7%BB%9F%E8%AE%A1%0Aconst%20cartStats%20%3D%20useMemo(()%20%3D%3E%20%7B%0Areturn%20%7B%0AitemCount%3A%20cart.length%2C%0Atotal%3A%20cart.reduce((sum%2C%20item)%20%3D%3E%20sum%20%2B%20item.price%2C%200)%0A%7D%3B%0A%7D%2C%20%5Bcart%5D)%3B%0A%2F%2F%20useCallback%EF%BC%9A%E7%A8%B3%E5%AE%9A%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%0Aconst%20addToCart%20%3D%20useCallback((productId)%20%3D%3E%20%7B%0Aconst%20product%20%3D%20products.find(p%20%3D%3E%20p.id%20%3D%3D%3D%20productId)%3B%0AsetCart(prev%20%3D%3E%20%5B...prev%2C%20product%5D)%3B%0A%7D%2C%20%5Bproducts%5D)%3B%0Areturn%20(%0Adiv%3E%0Ainput%0Avalue%3D%7BsearchTerm%7D%0AonChange%3D%7B(e)%20%3D%3E%20setSearchTerm(e.target.value)%7D%0Aplaceholder%3D%22%E6%90%9C%E7%B4%A2%E4%BA%A7%E5%93%81...%22%0A%2F%3E%0A%7B%2F*%20CartSummary%20%E4%BD%BF%E7%94%A8%20React.memo%20%E4%BC%98%E5%8C%96%20*%2F%7D%0ACartSummary%20stats%3D%7BcartStats%7D%20%2F%3E%0A%7B%2F*%20ProductGrid%20%E4%BD%BF%E7%94%A8%20React.memo%20%E4%BC%98%E5%8C%96%20*%2F%7D%0AProductGrid%0Aproducts%3D%7BsearchResults%7D%0AonAddToCart%3D%7BaddToCart%7D%0A%2F%3E%0Adiv%3E%0A)%3B%0A%7D%0A%2F%2F%20React.memo%20%E4%BC%98%E5%8C%96%E7%9A%84%E7%BB%84%E4%BB%B6%0Aconst%20CartSummary%20%3D%20React.memo((%7B%20stats%20%7D)%20%3D%3E%20%7B%0Aconsole.log('CartSummary%20%E6%B8%B2%E6%9F%93')%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E8%B4%AD%E7%89%A9%E8%BD%A6%3A%20%7Bstats.itemCount%7D%20%E4%BB%B6%E5%95%86%E5%93%81p%3E%0Ap%3E%E6%80%BB%E8%AE%A1%3A%20%C2%A5%7Bstats.total%7Dp%3E%0Adiv%3E%0A)%3B%0A%7D)%3B%0Aconst%20ProductGrid%20%3D%20React.memo((%7B%20products%2C%20onAddToCart%20%7D)%20%3D%3E%20%7B%0Aconsole.log('ProductGrid%20%E6%B8%B2%E6%9F%93')%3B%0Areturn%20(%0Adiv%3E%0A%7Bproducts.map(product%20%3D%3E%20(%0AProductItem%0Akey%3D%7Bproduct.id%7D%0Aproduct%3D%7Bproduct%7D%0AonAddToCart%3D%7BonAddToCart%7D%0A%2F%3E%0A))%7D%0Adiv%3E%0A)%3B%0A%7D)%3B%0Aconst%20ProductItem%20%3D%20React.memo((%7B%20product%2C%20onAddToCart%20%7D)%20%3D%3E%20%7B%0Areturn%20(%0Adiv%3E%0Ah4%3E%7Bproduct.name%7Dh4%3E%0Ap%3E%C2%A5%7Bproduct.price%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20onAddToCart(product.id)%7D%3E%0A%E5%8A%A0%E5%85%A5%E8%B4%AD%E7%89%A9%E8%BD%A6%0Abutton%3E%0Adiv%3E%0A)%3B%0A%7D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">ShoppingApp</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> [cart, setCart] = <span class="hljs-title function_ inline">useState</span>([]);
  <span class="hljs-keyword inline">const</span> [searchTerm, setSearchTerm] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-string inline">&#x27;&#x27;</span>);
  <span class="hljs-keyword inline">const</span> [products] = <span class="hljs-title function_ inline">useState</span>([
    { <span class="hljs-attr inline">id</span>: <span class="hljs-number inline">1</span>, <span class="hljs-attr inline">name</span>: <span class="hljs-string inline">&#x27;iPhone&#x27;</span>, <span class="hljs-attr inline">category</span>: <span class="hljs-string inline">&#x27;electronics&#x27;</span>, <span class="hljs-attr inline">price</span>: <span class="hljs-number inline">999</span> },
    { <span class="hljs-attr inline">id</span>: <span class="hljs-number inline">2</span>, <span class="hljs-attr inline">name</span>: <span class="hljs-string inline">&#x27;T-Shirt&#x27;</span>, <span class="hljs-attr inline">category</span>: <span class="hljs-string inline">&#x27;clothing&#x27;</span>, <span class="hljs-attr inline">price</span>: <span class="hljs-number inline">29</span> }
  ]);

  <span class="hljs-comment inline">// useMemo：缓存搜索结果</span>
  <span class="hljs-keyword inline">const</span> searchResults = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-keyword inline">if</span> (!searchTerm) <span class="hljs-keyword inline">return</span> products;
    <span class="hljs-keyword inline">return</span> products.<span class="hljs-title function_ inline">filter</span>(<span class="hljs-function inline"><span class="hljs-params inline">p</span> =&gt;</span> 
      p.<span class="hljs-property inline">name</span>.<span class="hljs-title function_ inline">toLowerCase</span>().<span class="hljs-title function_ inline">includes</span>(searchTerm.<span class="hljs-title function_ inline">toLowerCase</span>())
    );
  }, [products, searchTerm]);

  <span class="hljs-comment inline">// useMemo：缓存购物车统计</span>
  <span class="hljs-keyword inline">const</span> cartStats = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-keyword inline">return</span> {
      <span class="hljs-attr inline">itemCount</span>: cart.<span class="hljs-property inline">length</span>,
      <span class="hljs-attr inline">total</span>: cart.<span class="hljs-title function_ inline">reduce</span>(<span class="hljs-function inline">(<span class="hljs-params inline">sum, item</span>) =&gt;</span> sum + item.<span class="hljs-property inline">price</span>, <span class="hljs-number inline">0</span>)
    };
  }, [cart]);

  <span class="hljs-comment inline">// useCallback：稳定的事件处理函数</span>
  <span class="hljs-keyword inline">const</span> addToCart = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">(<span class="hljs-params inline">productId</span>) =&gt;</span> {
    <span class="hljs-keyword inline">const</span> product = products.<span class="hljs-title function_ inline">find</span>(<span class="hljs-function inline"><span class="hljs-params inline">p</span> =&gt;</span> p.<span class="hljs-property inline">id</span> === productId);
    <span class="hljs-title function_ inline">setCart</span>(<span class="hljs-function inline"><span class="hljs-params inline">prev</span> =&gt;</span> [...prev, product]);
  }, [products]);

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">input</span>
        <span class="hljs-attr inline">value</span>=<span class="hljs-string inline">{searchTerm}</span>
        <span class="hljs-attr inline">onChange</span>=<span class="hljs-string inline">{(e)</span> =&gt;</span> setSearchTerm(e.target.value)}
        placeholder=&quot;搜索产品...&quot;
      /&gt;
      
      {/* CartSummary 使用 React.memo 优化 */}
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">CartSummary</span> <span class="hljs-attr inline">stats</span>=<span class="hljs-string inline">{cartStats}</span> /&gt;</span>
      
      {/* ProductGrid 使用 React.memo 优化 */}
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">ProductGrid</span> 
        <span class="hljs-attr inline">products</span>=<span class="hljs-string inline">{searchResults}</span> 
        <span class="hljs-attr inline">onAddToCart</span>=<span class="hljs-string inline">{addToCart}</span> 
      /&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}

<span class="hljs-comment inline">// React.memo 优化的组件</span>
<span class="hljs-keyword inline">const</span> <span class="hljs-title class_ inline">CartSummary</span> = <span class="hljs-title class_ inline">React</span>.<span class="hljs-title function_ inline">memo</span>(<span class="hljs-function inline">(<span class="hljs-params inline">{ stats }</span>) =&gt;</span> {
  <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;CartSummary 渲染&#x27;</span>);
  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>购物车: {stats.itemCount} 件商品<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>总计: ¥{stats.total}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
});

<span class="hljs-keyword inline">const</span> <span class="hljs-title class_ inline">ProductGrid</span> = <span class="hljs-title class_ inline">React</span>.<span class="hljs-title function_ inline">memo</span>(<span class="hljs-function inline">(<span class="hljs-params inline">{ products, onAddToCart }</span>) =&gt;</span> {
  <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;ProductGrid 渲染&#x27;</span>);
  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      {products.map(product =&gt; (
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">ProductItem</span>
          <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{product.id}</span>
          <span class="hljs-attr inline">product</span>=<span class="hljs-string inline">{product}</span>
          <span class="hljs-attr inline">onAddToCart</span>=<span class="hljs-string inline">{onAddToCart}</span>
        /&gt;</span>
      ))}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
});

<span class="hljs-keyword inline">const</span> <span class="hljs-title class_ inline">ProductItem</span> = <span class="hljs-title class_ inline">React</span>.<span class="hljs-title function_ inline">memo</span>(<span class="hljs-function inline">(<span class="hljs-params inline">{ product, onAddToCart }</span>) =&gt;</span> {
  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">h4</span>&gt;</span>{product.name}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">h4</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>¥{product.price}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> onAddToCart(product.id)}&gt;
        加入购物车
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
});
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">何时使用哪个</strong>：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">使用 <code>useMemo</code></strong>：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">昂贵的计算需要缓存结果</li>
<li class="text-foreground leading-relaxed">需要为子组件提供稳定的 props 引用</li>
<li class="text-foreground leading-relaxed">避免在每次渲染时重新创建对象/数组</li>
</ul></li>
<li class="text-foreground leading-relaxed"><p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">使用 <code>React.memo</code></strong>：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">组件经常接收相同的 props</li>
<li class="text-foreground leading-relaxed">组件渲染成本较高</li>
<li class="text-foreground leading-relaxed">父组件频繁重新渲染，但子组件 props 变化较少</li>
</ul></li>
<li class="text-foreground leading-relaxed"><p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">配合使用</strong>：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">用 <code>useMemo</code> 创建稳定的 props</li>
<li class="text-foreground leading-relaxed">用 <code>React.memo</code> 防止子组件不必要的重新渲染</li>
</ul></li>
</ul>
<h3 id="条件计算" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#条件计算" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 条件计算">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">条件计算</strong>
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20ConditionalMemo(%7B%20data%2C%20shouldProcess%2C%20processingType%20%7D)%20%7B%0Aconst%20processedData%20%3D%20useMemo(()%20%3D%3E%20%7B%0A%2F%2F%20%E5%8F%AA%E6%9C%89%E5%9C%A8%E9%9C%80%E8%A6%81%E5%A4%84%E7%90%86%E6%97%B6%E6%89%8D%E8%BF%9B%E8%A1%8C%E8%AE%A1%E7%AE%97%0Aif%20(!shouldProcess)%20return%20data%3B%0Aconsole.log('%E6%89%A7%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86...')%3B%0Aswitch%20(processingType)%20%7B%0Acase%20'sort'%3A%0Areturn%20%5B...data%5D.sort((a%2C%20b)%20%3D%3E%20a.value%20-%20b.value)%3B%0Acase%20'filter'%3A%0Areturn%20data.filter(item%20%3D%3E%20item.active)%3B%0Acase%20'transform'%3A%0Areturn%20data.map(item%20%3D%3E%20(%7B%20...item%2C%20processed%3A%20true%20%7D))%3B%0Adefault%3A%0Areturn%20data%3B%0A%7D%0A%7D%2C%20%5Bdata%2C%20shouldProcess%2C%20processingType%5D)%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E6%95%B0%E6%8D%AE%E9%A1%B9%E6%95%B0%E9%87%8F%3A%20%7BprocessedData.length%7Dp%3E%0A%7BprocessedData.map(item%20%3D%3E%20(%0Adiv%20key%3D%7Bitem.id%7D%3E%7Bitem.name%7Ddiv%3E%0A))%7D%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">ConditionalMemo</span>(<span class="hljs-params inline">{ data, shouldProcess, processingType }</span>) {
  <span class="hljs-keyword inline">const</span> processedData = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-comment inline">// 只有在需要处理时才进行计算</span>
    <span class="hljs-keyword inline">if</span> (!shouldProcess) <span class="hljs-keyword inline">return</span> data;

    <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;执行数据处理...&#x27;</span>);
    
    <span class="hljs-keyword inline">switch</span> (processingType) {
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;sort&#x27;</span>:
        <span class="hljs-keyword inline">return</span> [...data].<span class="hljs-title function_ inline">sort</span>(<span class="hljs-function inline">(<span class="hljs-params inline">a, b</span>) =&gt;</span> a.<span class="hljs-property inline">value</span> - b.<span class="hljs-property inline">value</span>);
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;filter&#x27;</span>:
        <span class="hljs-keyword inline">return</span> data.<span class="hljs-title function_ inline">filter</span>(<span class="hljs-function inline"><span class="hljs-params inline">item</span> =&gt;</span> item.<span class="hljs-property inline">active</span>);
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;transform&#x27;</span>:
        <span class="hljs-keyword inline">return</span> data.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline"><span class="hljs-params inline">item</span> =&gt;</span> ({ ...item, <span class="hljs-attr inline">processed</span>: <span class="hljs-literal inline">true</span> }));
      <span class="hljs-attr inline">default</span>:
        <span class="hljs-keyword inline">return</span> data;
    }
  }, [data, shouldProcess, processingType]);

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>数据项数量: {processedData.length}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      {processedData.map(item =&gt; (
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span> <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{item.id}</span>&gt;</span>{item.name}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
      ))}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="复杂对象的记忆化" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#复杂对象的记忆化" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 复杂对象的记忆化">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">复杂对象的记忆化</strong>
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20FormValidator(%7B%20formData%2C%20validationRules%20%7D)%20%7B%0A%2F%2F%20%E9%AA%8C%E8%AF%81%E7%BB%93%E6%9E%9C%E7%9A%84%E8%AE%A1%E7%AE%97%0Aconst%20validationResults%20%3D%20useMemo(()%20%3D%3E%20%7B%0Aconst%20results%20%3D%20%7B%7D%3B%0AObject.keys(validationRules).forEach(field%20%3D%3E%20%7B%0Aconst%20value%20%3D%20formData%5Bfield%5D%3B%0Aconst%20rules%20%3D%20validationRules%5Bfield%5D%3B%0Aresults%5Bfield%5D%20%3D%20%7B%0AisValid%3A%20true%2C%0Aerrors%3A%20%5B%5D%0A%7D%3B%0Arules.forEach(rule%20%3D%3E%20%7B%0Aif%20(!rule.validator(value))%20%7B%0Aresults%5Bfield%5D.isValid%20%3D%20false%3B%0Aresults%5Bfield%5D.errors.push(rule.message)%3B%0A%7D%0A%7D)%3B%0A%7D)%3B%0Areturn%20results%3B%0A%7D%2C%20%5BformData%2C%20validationRules%5D)%3B%0A%2F%2F%20%E6%95%B4%E4%BD%93%E8%A1%A8%E5%8D%95%E7%8A%B6%E6%80%81%0Aconst%20formStatus%20%3D%20useMemo(()%20%3D%3E%20%7B%0Aconst%20allFields%20%3D%20Object.values(validationResults)%3B%0Aconst%20hasErrors%20%3D%20allFields.some(field%20%3D%3E%20!field.isValid)%3B%0Aconst%20totalErrors%20%3D%20allFields.reduce((sum%2C%20field)%20%3D%3E%20sum%20%2B%20field.errors.length%2C%200)%3B%0Areturn%20%7B%0AisValid%3A%20!hasErrors%2C%0AerrorCount%3A%20totalErrors%2C%0AcanSubmit%3A%20!hasErrors%20%26%26%20Object.keys(formData).length%20%3E%200%0A%7D%3B%0A%7D%2C%20%5BvalidationResults%2C%20formData%5D)%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E8%A1%A8%E5%8D%95%E7%8A%B6%E6%80%81%3A%20%7BformStatus.isValid%20%3F%20'%E6%9C%89%E6%95%88'%20%3A%20'%E6%97%A0%E6%95%88'%7Dp%3E%0Ap%3E%E9%94%99%E8%AF%AF%E6%95%B0%E9%87%8F%3A%20%7BformStatus.errorCount%7Dp%3E%0Abutton%20disabled%3D%7B!formStatus.canSubmit%7D%3E%0A%E6%8F%90%E4%BA%A4%E8%A1%A8%E5%8D%95%0Abutton%3E%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">FormValidator</span>(<span class="hljs-params inline">{ formData, validationRules }</span>) {
  <span class="hljs-comment inline">// 验证结果的计算</span>
  <span class="hljs-keyword inline">const</span> validationResults = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-keyword inline">const</span> results = {};
    
    <span class="hljs-title class_ inline">Object</span>.<span class="hljs-title function_ inline">keys</span>(validationRules).<span class="hljs-title function_ inline">forEach</span>(<span class="hljs-function inline"><span class="hljs-params inline">field</span> =&gt;</span> {
      <span class="hljs-keyword inline">const</span> value = formData[field];
      <span class="hljs-keyword inline">const</span> rules = validationRules[field];
      
      results[field] = {
        <span class="hljs-attr inline">isValid</span>: <span class="hljs-literal inline">true</span>,
        <span class="hljs-attr inline">errors</span>: []
      };

      rules.<span class="hljs-title function_ inline">forEach</span>(<span class="hljs-function inline"><span class="hljs-params inline">rule</span> =&gt;</span> {
        <span class="hljs-keyword inline">if</span> (!rule.<span class="hljs-title function_ inline">validator</span>(value)) {
          results[field].<span class="hljs-property inline">isValid</span> = <span class="hljs-literal inline">false</span>;
          results[field].<span class="hljs-property inline">errors</span>.<span class="hljs-title function_ inline">push</span>(rule.<span class="hljs-property inline">message</span>);
        }
      });
    });

    <span class="hljs-keyword inline">return</span> results;
  }, [formData, validationRules]);

  <span class="hljs-comment inline">// 整体表单状态</span>
  <span class="hljs-keyword inline">const</span> formStatus = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-keyword inline">const</span> allFields = <span class="hljs-title class_ inline">Object</span>.<span class="hljs-title function_ inline">values</span>(validationResults);
    <span class="hljs-keyword inline">const</span> hasErrors = allFields.<span class="hljs-title function_ inline">some</span>(<span class="hljs-function inline"><span class="hljs-params inline">field</span> =&gt;</span> !field.<span class="hljs-property inline">isValid</span>);
    <span class="hljs-keyword inline">const</span> totalErrors = allFields.<span class="hljs-title function_ inline">reduce</span>(<span class="hljs-function inline">(<span class="hljs-params inline">sum, field</span>) =&gt;</span> sum + field.<span class="hljs-property inline">errors</span>.<span class="hljs-property inline">length</span>, <span class="hljs-number inline">0</span>);

    <span class="hljs-keyword inline">return</span> {
      <span class="hljs-attr inline">isValid</span>: !hasErrors,
      <span class="hljs-attr inline">errorCount</span>: totalErrors,
      <span class="hljs-attr inline">canSubmit</span>: !hasErrors &amp;&amp; <span class="hljs-title class_ inline">Object</span>.<span class="hljs-title function_ inline">keys</span>(formData).<span class="hljs-property inline">length</span> &gt; <span class="hljs-number inline">0</span>
    };
  }, [validationResults, formData]);

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>表单状态: {formStatus.isValid ? &#x27;有效&#x27; : &#x27;无效&#x27;}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>错误数量: {formStatus.errorCount}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">disabled</span>=<span class="hljs-string inline">{!formStatus.canSubmit}</span>&gt;</span>
        提交表单
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="常见陷阱和解决方案" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#常见陷阱和解决方案" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 常见陷阱和解决方案">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">常见陷阱和解决方案</strong>
        </h3>
<h4 id="依赖数组不正确" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#依赖数组不正确" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 依赖数组不正确">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">依赖数组不正确</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20BadExample(%7B%20items%2C%20filter%20%7D)%20%7B%0Aconst%20%5Bmultiplier%2C%20setMultiplier%5D%20%3D%20useState(1)%3B%0A%2F%2F%20%E9%94%99%E8%AF%AF%EF%BC%9A%E7%BC%BA%E5%B0%91%20multiplier%20%E4%BE%9D%E8%B5%96%0Aconst%20processedItems%20%3D%20useMemo(()%20%3D%3E%20%7B%0Areturn%20items%0A.filter(item%20%3D%3E%20item.category%20%3D%3D%3D%20filter)%0A.map(item%20%3D%3E%20(%7B%20...item%2C%20value%3A%20item.value%20*%20multiplier%20%7D))%3B%0A%7D%2C%20%5Bitems%2C%20filter%5D)%3B%20%2F%2F%20%E5%BA%94%E8%AF%A5%E5%8C%85%E5%90%AB%20%5Bitems%2C%20filter%2C%20multiplier%5D%0Areturn%20(%0Adiv%3E%0Ainput%0Atype%3D%22number%22%0Avalue%3D%7Bmultiplier%7D%0AonChange%3D%7B(e)%20%3D%3E%20setMultiplier(Number(e.target.value))%7D%0A%2F%3E%0A%7B%2F*%20multiplier%20%E5%8F%98%E5%8C%96%E6%97%B6%EF%BC%8CprocessedItems%20%E4%B8%8D%E4%BC%9A%E6%9B%B4%E6%96%B0%20*%2F%7D%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">BadExample</span>(<span class="hljs-params inline">{ items, filter }</span>) {
  <span class="hljs-keyword inline">const</span> [multiplier, setMultiplier] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-number inline">1</span>);

  <span class="hljs-comment inline">// 错误：缺少 multiplier 依赖</span>
  <span class="hljs-keyword inline">const</span> processedItems = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-keyword inline">return</span> items
      .<span class="hljs-title function_ inline">filter</span>(<span class="hljs-function inline"><span class="hljs-params inline">item</span> =&gt;</span> item.<span class="hljs-property inline">category</span> === filter)
      .<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline"><span class="hljs-params inline">item</span> =&gt;</span> ({ ...item, <span class="hljs-attr inline">value</span>: item.<span class="hljs-property inline">value</span> * multiplier }));
  }, [items, filter]); <span class="hljs-comment inline">// 应该包含 [items, filter, multiplier]</span>

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">input</span> 
        <span class="hljs-attr inline">type</span>=<span class="hljs-string inline">&quot;number&quot;</span> 
        <span class="hljs-attr inline">value</span>=<span class="hljs-string inline">{multiplier}</span>
        <span class="hljs-attr inline">onChange</span>=<span class="hljs-string inline">{(e)</span> =&gt;</span> setMultiplier(Number(e.target.value))}
      /&gt;
      {/* multiplier 变化时，processedItems 不会更新 */}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h4 id="过度使用-usememo" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#过度使用-usememo" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 过度使用 useMemo">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">过度使用 useMemo</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="%2F%2F%20%E4%B8%8D%E5%BF%85%E8%A6%81%E7%9A%84%E4%BC%98%E5%8C%96%0Afunction%20OverOptimized()%20%7B%0Aconst%20%5Bname%2C%20setName%5D%20%3D%20useState('')%3B%0A%2F%2F%20%E7%AE%80%E5%8D%95%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%93%8D%E4%BD%9C%E4%B8%8D%E9%9C%80%E8%A6%81%20useMemo%0Aconst%20uppercaseName%20%3D%20useMemo(()%20%3D%3E%20%7B%0Areturn%20name.toUpperCase()%3B%0A%7D%2C%20%5Bname%5D)%3B%0Areturn%20div%3E%7BuppercaseName%7Ddiv%3E%3B%0A%7D%0A%2F%2F%20%E7%AE%80%E5%8D%95%E7%9B%B4%E6%8E%A5%E7%9A%84%E5%86%99%E6%B3%95%0Afunction%20Simple()%20%7B%0Aconst%20%5Bname%2C%20setName%5D%20%3D%20useState('')%3B%0Areturn%20div%3E%7Bname.toUpperCase()%7Ddiv%3E%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-comment inline">// 不必要的优化</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">OverOptimized</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> [name, setName] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-string inline">&#x27;&#x27;</span>);

  <span class="hljs-comment inline">// 简单的字符串操作不需要 useMemo</span>
  <span class="hljs-keyword inline">const</span> uppercaseName = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-keyword inline">return</span> name.<span class="hljs-title function_ inline">toUpperCase</span>();
  }, [name]);

  <span class="hljs-keyword inline">return</span> <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>{uppercaseName}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>;
}

<span class="hljs-comment inline">// 简单直接的写法</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">Simple</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> [name, setName] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-string inline">&#x27;&#x27;</span>);

  <span class="hljs-keyword inline">return</span> <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>{name.toUpperCase()}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>;
}
</code></pre>
            </div>
        
<h4 id="引用类型的陷阱" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#引用类型的陷阱" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 引用类型的陷阱">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">引用类型的陷阱</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20ReferenceTypeExample(%7B%20config%20%7D)%20%7B%0A%2F%2F%20%E9%94%99%E8%AF%AF%EF%BC%9Aconfig%20%E6%98%AF%E5%AF%B9%E8%B1%A1%EF%BC%8C%E6%AF%8F%E6%AC%A1%E9%83%BD%E8%A2%AB%E8%AE%A4%E4%B8%BA%E6%98%AF%E6%96%B0%E7%9A%84%0Aconst%20processedConfig%20%3D%20useMemo(()%20%3D%3E%20%7B%0Areturn%20%7B%0A...config%2C%0Aprocessed%3A%20true%0A%7D%3B%0A%7D%2C%20%5Bconfig%5D)%3B%20%2F%2F%20config%20%E5%AF%B9%E8%B1%A1%E5%BC%95%E7%94%A8%E5%8F%AF%E8%83%BD%E6%AF%8F%E6%AC%A1%E9%83%BD%E4%B8%8D%E5%90%8C%0A%2F%2F%20%E6%AD%A3%E7%A1%AE%EF%BC%9A%E4%BD%BF%E7%94%A8%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%85%B7%E4%BD%93%E5%B1%9E%E6%80%A7%E4%BD%9C%E4%B8%BA%E4%BE%9D%E8%B5%96%0Aconst%20processedConfigCorrect%20%3D%20useMemo(()%20%3D%3E%20%7B%0Areturn%20%7B%0A...config%2C%0Aprocessed%3A%20true%0A%7D%3B%0A%7D%2C%20%5Bconfig.apiUrl%2C%20config.timeout%2C%20config.retries%5D)%3B%20%2F%2F%20%E5%85%B7%E4%BD%93%E5%B1%9E%E6%80%A7%0Areturn%20div%3E%E9%85%8D%E7%BD%AE%E5%B7%B2%E5%A4%84%E7%90%86div%3E%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">ReferenceTypeExample</span>(<span class="hljs-params inline">{ config }</span>) {
  <span class="hljs-comment inline">// 错误：config 是对象，每次都被认为是新的</span>
  <span class="hljs-keyword inline">const</span> processedConfig = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-keyword inline">return</span> {
      ...config,
      <span class="hljs-attr inline">processed</span>: <span class="hljs-literal inline">true</span>
    };
  }, [config]); <span class="hljs-comment inline">// config 对象引用可能每次都不同</span>

  <span class="hljs-comment inline">// 正确：使用对象的具体属性作为依赖</span>
  <span class="hljs-keyword inline">const</span> processedConfigCorrect = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-keyword inline">return</span> {
      ...config,
      <span class="hljs-attr inline">processed</span>: <span class="hljs-literal inline">true</span>
    };
  }, [config.<span class="hljs-property inline">apiUrl</span>, config.<span class="hljs-property inline">timeout</span>, config.<span class="hljs-property inline">retries</span>]); <span class="hljs-comment inline">// 具体属性</span>

  <span class="hljs-keyword inline">return</span> <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>配置已处理<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>;
}
</code></pre>
            </div>
        
<h3 id="性能测试示例" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#性能测试示例" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 性能测试示例">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">性能测试示例</strong>
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20PerformanceTest(%7B%20data%20%7D)%20%7B%0Aconst%20%5BrerenderCount%2C%20setRerenderCount%5D%20%3D%20useState(0)%3B%0A%2F%2F%20%E6%98%82%E8%B4%B5%E7%9A%84%E8%AE%A1%E7%AE%97%EF%BC%88%E6%A8%A1%E6%8B%9F%EF%BC%89%0Aconst%20expensiveCalculation%20%3D%20(items)%20%3D%3E%20%7B%0Aconsole.log('%E6%89%A7%E8%A1%8C%E6%98%82%E8%B4%B5%E8%AE%A1%E7%AE%97...')%3B%0Alet%20result%20%3D%200%3B%0Afor%20(let%20i%20%3D%200%3B%20i%201000000%3B%20i%2B%2B)%20%7B%0Aresult%20%2B%3D%20Math.random()%3B%0A%7D%0Areturn%20items.length%20%2B%20result%3B%0A%7D%3B%0A%2F%2F%20%E6%B2%A1%E6%9C%89%E7%BC%93%E5%AD%98%E7%9A%84%E7%89%88%E6%9C%AC%0Aconst%20unoptimizedValue%20%3D%20expensiveCalculation(data)%3B%0A%2F%2F%20%E6%9C%89%E7%BC%93%E5%AD%98%E7%9A%84%E7%89%88%E6%9C%AC%0Aconst%20optimizedValue%20%3D%20useMemo(()%20%3D%3E%20%7B%0Areturn%20expensiveCalculation(data)%3B%0A%7D%2C%20%5Bdata%5D)%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E9%87%8D%E6%96%B0%E6%B8%B2%E6%9F%93%E6%AC%A1%E6%95%B0%3A%20%7BrerenderCount%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20setRerenderCount(prev%20%3D%3E%20prev%20%2B%201)%7D%3E%0A%E8%A7%A6%E5%8F%91%E9%87%8D%E6%96%B0%E6%B8%B2%E6%9F%93%0Abutton%3E%0Ap%3E%E6%9C%AA%E4%BC%98%E5%8C%96%E7%9A%84%E5%80%BC%3A%20%7BunoptimizedValue.toFixed(2)%7Dp%3E%0Ap%3E%E4%BC%98%E5%8C%96%E5%90%8E%E7%9A%84%E5%80%BC%3A%20%7BoptimizedValue.toFixed(2)%7Dp%3E%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">PerformanceTest</span>(<span class="hljs-params inline">{ data }</span>) {
  <span class="hljs-keyword inline">const</span> [rerenderCount, setRerenderCount] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-number inline">0</span>);

  <span class="hljs-comment inline">// 昂贵的计算（模拟）</span>
  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">expensiveCalculation</span> = (<span class="hljs-params inline">items</span>) =&gt; {
    <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;执行昂贵计算...&#x27;</span>);
    <span class="hljs-keyword inline">let</span> result = <span class="hljs-number inline">0</span>;
    <span class="hljs-keyword inline">for</span> (<span class="hljs-keyword inline">let</span> i = <span class="hljs-number inline">0</span>; i &lt; <span class="hljs-number inline">1000000</span>; i++) {
      result += <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">random</span>();
    }
    <span class="hljs-keyword inline">return</span> items.<span class="hljs-property inline">length</span> + result;
  };

  <span class="hljs-comment inline">// 没有缓存的版本</span>
  <span class="hljs-keyword inline">const</span> unoptimizedValue = <span class="hljs-title function_ inline">expensiveCalculation</span>(data);

  <span class="hljs-comment inline">// 有缓存的版本</span>
  <span class="hljs-keyword inline">const</span> optimizedValue = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-keyword inline">return</span> <span class="hljs-title function_ inline">expensiveCalculation</span>(data);
  }, [data]);

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>重新渲染次数: {rerenderCount}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> setRerenderCount(prev =&gt; prev + 1)}&gt;
        触发重新渲染
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>未优化的值: {unoptimizedValue.toFixed(2)}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>优化后的值: {optimizedValue.toFixed(2)}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="自定义-hook-中的使用" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#自定义-hook-中的使用" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 自定义 Hook 中的使用">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">自定义 Hook 中的使用</strong>
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20useFilteredData(data%2C%20filters)%20%7B%0Aconst%20filteredData%20%3D%20useMemo(()%20%3D%3E%20%7B%0Alet%20result%20%3D%20data%3B%0Aif%20(filters.search)%20%7B%0Aresult%20%3D%20result.filter(item%20%3D%3E%0Aitem.name.toLowerCase().includes(filters.search.toLowerCase())%0A)%3B%0A%7D%0Aif%20(filters.category)%20%7B%0Aresult%20%3D%20result.filter(item%20%3D%3E%20item.category%20%3D%3D%3D%20filters.category)%3B%0A%7D%0Aif%20(filters.priceRange)%20%7B%0Aresult%20%3D%20result.filter(item%20%3D%3E%0Aitem.price%20%3E%3D%20filters.priceRange.min%20%26%26%0Aitem.price%20priceRange.max%0A)%3B%0A%7D%0Areturn%20result%3B%0A%7D%2C%20%5Bdata%2C%20filters.search%2C%20filters.category%2C%20filters.priceRange%5D)%3B%0Aconst%20statistics%20%3D%20useMemo(()%20%3D%3E%20%7B%0Areturn%20%7B%0Acount%3A%20filteredData.length%2C%0AaveragePrice%3A%20filteredData.length%0A%3F%20filteredData.reduce((sum%2C%20item)%20%3D%3E%20sum%20%2B%20item.price%2C%200)%20%2F%20filteredData.length%0A%3A%200%0A%7D%3B%0A%7D%2C%20%5BfilteredData%5D)%3B%0Areturn%20%7B%20filteredData%2C%20statistics%20%7D%3B%0A%7D%0A%2F%2F%20%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89%20Hook%0Afunction%20ProductCatalog(%7B%20products%20%7D)%20%7B%0Aconst%20%5Bfilters%2C%20setFilters%5D%20%3D%20useState(%7B%0Asearch%3A%20''%2C%0Acategory%3A%20''%2C%0ApriceRange%3A%20%7B%20min%3A%200%2C%20max%3A%201000%20%7D%0A%7D)%3B%0Aconst%20%7B%20filteredData%2C%20statistics%20%7D%20%3D%20useFilteredData(products%2C%20filters)%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E6%89%BE%E5%88%B0%20%7Bstatistics.count%7D%20%E4%B8%AA%E4%BA%A7%E5%93%81p%3E%0Ap%3E%E5%B9%B3%E5%9D%87%E4%BB%B7%E6%A0%BC%3A%20%C2%A5%7Bstatistics.averagePrice.toFixed(2)%7Dp%3E%0A%7B%2F*%20%E6%B8%B2%E6%9F%93%E4%BA%A7%E5%93%81%E5%88%97%E8%A1%A8%20*%2F%7D%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">useFilteredData</span>(<span class="hljs-params inline">data, filters</span>) {
  <span class="hljs-keyword inline">const</span> filteredData = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-keyword inline">let</span> result = data;

    <span class="hljs-keyword inline">if</span> (filters.<span class="hljs-property inline">search</span>) {
      result = result.<span class="hljs-title function_ inline">filter</span>(<span class="hljs-function inline"><span class="hljs-params inline">item</span> =&gt;</span>
        item.<span class="hljs-property inline">name</span>.<span class="hljs-title function_ inline">toLowerCase</span>().<span class="hljs-title function_ inline">includes</span>(filters.<span class="hljs-property inline">search</span>.<span class="hljs-title function_ inline">toLowerCase</span>())
      );
    }

    <span class="hljs-keyword inline">if</span> (filters.<span class="hljs-property inline">category</span>) {
      result = result.<span class="hljs-title function_ inline">filter</span>(<span class="hljs-function inline"><span class="hljs-params inline">item</span> =&gt;</span> item.<span class="hljs-property inline">category</span> === filters.<span class="hljs-property inline">category</span>);
    }

    <span class="hljs-keyword inline">if</span> (filters.<span class="hljs-property inline">priceRange</span>) {
      result = result.<span class="hljs-title function_ inline">filter</span>(<span class="hljs-function inline"><span class="hljs-params inline">item</span> =&gt;</span>
        item.<span class="hljs-property inline">price</span> &gt;= filters.<span class="hljs-property inline">priceRange</span>.<span class="hljs-property inline">min</span> &amp;&amp;
        item.<span class="hljs-property inline">price</span> &lt;= filters.<span class="hljs-property inline">priceRange</span>.<span class="hljs-property inline">max</span>
      );
    }

    <span class="hljs-keyword inline">return</span> result;
  }, [data, filters.<span class="hljs-property inline">search</span>, filters.<span class="hljs-property inline">category</span>, filters.<span class="hljs-property inline">priceRange</span>]);

  <span class="hljs-keyword inline">const</span> statistics = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-keyword inline">return</span> {
      <span class="hljs-attr inline">count</span>: filteredData.<span class="hljs-property inline">length</span>,
      <span class="hljs-attr inline">averagePrice</span>: filteredData.<span class="hljs-property inline">length</span>
        ? filteredData.<span class="hljs-title function_ inline">reduce</span>(<span class="hljs-function inline">(<span class="hljs-params inline">sum, item</span>) =&gt;</span> sum + item.<span class="hljs-property inline">price</span>, <span class="hljs-number inline">0</span>) / filteredData.<span class="hljs-property inline">length</span>
        : <span class="hljs-number inline">0</span>
    };
  }, [filteredData]);

  <span class="hljs-keyword inline">return</span> { filteredData, statistics };
}

<span class="hljs-comment inline">// 使用自定义 Hook</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">ProductCatalog</span>(<span class="hljs-params inline">{ products }</span>) {
  <span class="hljs-keyword inline">const</span> [filters, setFilters] = <span class="hljs-title function_ inline">useState</span>({
    <span class="hljs-attr inline">search</span>: <span class="hljs-string inline">&#x27;&#x27;</span>,
    <span class="hljs-attr inline">category</span>: <span class="hljs-string inline">&#x27;&#x27;</span>,
    <span class="hljs-attr inline">priceRange</span>: { <span class="hljs-attr inline">min</span>: <span class="hljs-number inline">0</span>, <span class="hljs-attr inline">max</span>: <span class="hljs-number inline">1000</span> }
  });

  <span class="hljs-keyword inline">const</span> { filteredData, statistics } = <span class="hljs-title function_ inline">useFilteredData</span>(products, filters);

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>找到 {statistics.count} 个产品<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>平均价格: ¥{statistics.averagePrice.toFixed(2)}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      {/* 渲染产品列表 */}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="最佳实践" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#最佳实践" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 最佳实践">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">最佳实践</strong>
        </h3>
<ol class="list-decimal list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">识别昂贵计算</strong>：只对真正昂贵的计算使用 useMemo</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">正确设置依赖</strong>：包含计算中使用的所有变量</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">避免过度优化</strong>：简单计算不需要记忆化</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">稳定的引用</strong>：为子组件提供稳定的 props 引用</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">测量性能</strong>：使用开发者工具验证优化效果</li>
</ol>
<h3 id="注意事项" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#注意事项" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 注意事项">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">注意事项</strong>
        </h3>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">内存开销</strong>：缓存值会占用额外内存</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">计算成本</strong>：记忆化本身也有成本，确保收益大于成本</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">依赖比较</strong>：使用浅比较，注意对象和数组的引用</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">调试困难</strong>：过度使用可能使代码难以理解</li>
</ul>
<p class="text-base leading-7 mb-4 text-foreground"><code>useMemo</code> 是优化 React 应用性能的重要工具，但应该在合适的场景下使用，避免过度优化导致代码复杂性增加。</p>
</div></article><footer class="mt-16 pt-8 border-t border-foreground/20"><div class="flex items-center justify-between"><a class="inline-flex items-center px-4 py-2 bg-primary text-foreground rounded-lg hover:bg-primary/90 transition-colors" href="/MilkWind-Website/documents/">documents.backToDocuments</a><div class="text-sm text-foreground/60"><span>documents.byAuthor<!-- --> <!-- -->MilkWind</span></div></div></footer></div></div><!--$--><!--/$--><!--$--><!--/$--><!--/$--><!--/$--><script src="/MilkWind-Website/_next/static/chunks/webpack-4924e903218f1830.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[38735,[\"46\",\"static/chunks/46-268e24d727b280ef.js\",\"7177\",\"static/chunks/app/layout-af4a6e723c0ff668.js\"],\"default\"]\n3:I[19945,[\"46\",\"static/chunks/46-268e24d727b280ef.js\",\"7177\",\"static/chunks/app/layout-af4a6e723c0ff668.js\"],\"default\"]\n4:I[65337,[\"46\",\"static/chunks/46-268e24d727b280ef.js\",\"7177\",\"static/chunks/app/layout-af4a6e723c0ff668.js\"],\"default\"]\n5:I[96190,[\"46\",\"static/chunks/46-268e24d727b280ef.js\",\"7177\",\"static/chunks/app/layout-af4a6e723c0ff668.js\"],\"ClientProviders\"]\n6:I[87555,[],\"\"]\n7:I[51901,[\"8039\",\"static/chunks/app/error-dda32be1d095a86c.js\"],\"default\"]\n8:I[31295,[],\"\"]\n9:I[6874,[\"6874\",\"static/chunks/6874-fbe9a08eb79b991c.js\",\"4345\",\"static/chunks/app/not-found-9ff98b2ccf24cac7.js\"],\"\"]\na:I[94970,[],\"ClientSegmentRoot\"]\nb:I[44065,[\"206\",\"static/chunks/206-4f4cbf4d7156f437.js\",\"3092\",\"static/chunks/app/documents/layout-28408791defde09e.js\"],\"default\"]\ne:I[59665,[],\"MetadataBoundary\"]\n10:I[59665,[],\"OutletBoundary\"]\n13:I[74911,[],\"AsyncMetadataOutlet\"]\n15:I[39460,[\"2415\",\"static/chunks/2415-689c103fb3d2c28d.js\",\"8610\",\"static/chunks/8610-7bd3f91f3cf2a4d6.js\",\"5650\",\"static/chunks/app/documents/loading-1fa3f98b6e5a8e78.js\"],\"default\"]\n16:I[88610,[\"2415\",\"static/chunks/2415-689c103fb3d2c28d.js\",\"8610\",\"static/chunks/8610-7bd3f91f3cf2a4d6.js\",\"4209\",\"static/chunks/app/loading-68f227fb49b3ac8c.js\"],\"default\"]\n17:I[59665,[],\"ViewportBoundary\"]\n19:I[26614,[],\"\"]\n:HL[\"/MilkWind-Website/_next/static/css/f034c804622acb16.css\",\"style\"]\n:HL[\"/MilkWind-Website/_next/static/css/276b387d8ca46690.css\",\"style\"]\n:HL[\"/MilkWind-Website/_next/static/css/5eacd01f773eed7f.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"BJpk_sL_vr43bGNqBw4uH\",\"p\":\"/MilkWind-Website\",\"c\":[\"\",\"documents\",\"zh\",\"light\",\"basic-knowledge\",\"react-use-memo\",\"\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"documents\",{\"children\":[[\"slug\",\"zh/light/basic-knowledge/react-use-memo\",\"c\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/MilkWind-Website/_next/static/css/f034c804622acb16.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/MilkWind-Website/_next/static/css/276b387d8ca46690.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"__variable_9b7fb1 __variable_ca2a15 __variable_591dcc font-sans antialiased min-h-screen bg-background text-foreground\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"$L2\",null,{}],[\"$\",\"$L3\",null,{}],[\"$\",\"$L4\",null,{}],[\"$\",\"$L5\",null,{\"children\":[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$7\",\"errorStyles\":[],\"errorScripts\":[],\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"div\",null,{\"className\":\"z-10 relative min-h-screen flex items-center justify-center bg-background p-8\",\"children\":[\"$\",\"div\",null,{\"className\":\"text-center max-w-md\",\"children\":[[\"$\",\"div\",null,{\"className\":\"text-8xl font-bold text-primary mb-4\",\"children\":\"404\"}],[\"$\",\"h2\",null,{\"className\":\"text-2xl font-bold text-foreground mb-4\",\"children\":\"Page Not Found\"}],[\"$\",\"p\",null,{\"className\":\"text-foreground/70 mb-8\",\"children\":\"The page you're looking for doesn't exist or has been moved to a different location.\"}],[\"$\",\"div\",null,{\"className\":\"flex flex-col sm:flex-row gap-4 justify-center\",\"children\":[[\"$\",\"$L9\",null,{\"href\":\"/\",\"className\":\"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/80 transition-colors\",\"children\":\"Go Home\"}],[\"$\",\"$L9\",null,{\"href\":\"/works\",\"className\":\"px-6 py-2 border border-primary text-primary rounded-lg hover:bg-primary/10 transition-colors\",\"children\":\"View Works\"}]]}],[\"$\",\"div\",null,{\"className\":\"absolute inset-0 overflow-hidden pointer-events-none -z-10\",\"children\":[[\"$\",\"div\",null,{\"className\":\"absolute top-1/4 left-1/4 w-2 h-2 bg-primary/20 rounded-full animate-float\"}],[\"$\",\"div\",null,{\"className\":\"absolute top-3/4 right-1/4 w-3 h-3 bg-accent/20 rounded-full animate-float\",\"style\":{\"animationDelay\":\"1s\"}}],[\"$\",\"div\",null,{\"className\":\"absolute bottom-1/4 left-1/3 w-1 h-1 bg-secondary/20 rounded-full animate-float\",\"style\":{\"animationDelay\":\"2s\"}}]]}]]}]}],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}]}]]}],{\"children\":[\"documents\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$La\",null,{\"Component\":\"$b\",\"slots\":{\"children\":[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]},\"params\":{},\"promise\":\"$@c\"}]]}],{\"children\":[[\"slug\",\"zh/light/basic-knowledge/react-use-memo\",\"c\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$Ld\",[\"$\",\"$Le\",null,{\"children\":\"$Lf\"}],[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/MilkWind-Website/_next/static/css/5eacd01f773eed7f.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$L10\",null,{\"children\":[\"$L11\",\"$L12\",[\"$\",\"$L13\",null,{\"promise\":\"$@14\"}]]}]]}],{},null,false]},null,false]},[[\"$\",\"$L15\",\"l\",{}],[],[]],false]},[[\"$\",\"$L16\",\"l\",{}],[],[]],false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"s1Y7oOHp1BpABBvnXOxM1\",{\"children\":[[\"$\",\"$L17\",null,{\"children\":\"$L18\"}],null]}],null]}],false]],\"m\":\"$undefined\",\"G\":[\"$19\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"1a:\"$Sreact.suspense\"\n1b:I[74911,[],\"AsyncMetadata\"]\nc:{}\nf:[\"$\",\"$1a\",null,{\"fallback\":null,\"children\":[\"$\",\"$L1b\",null,{\"promise\":\"$@1c\"}]}]\n"])</script><script>self.__next_f.push([1,"1d:I[57340,[\"5584\",\"static/chunks/b498d07c-095637f0f10883c6.js\",\"2415\",\"static/chunks/2415-689c103fb3d2c28d.js\",\"6874\",\"static/chunks/6874-fbe9a08eb79b991c.js\",\"9554\",\"static/chunks/9554-b714f9de28e85d30.js\",\"1873\",\"static/chunks/app/documents/%5B...slug%5D/page-8f3efa7e6c6c5377.js\"],\"DocumentPageClient\"]\n1e:T225d0,"])</script><script>self.__next_f.push([1,"\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003ccode\u003euseMemo\u003c/code\u003e 是 React 提供的性能优化 Hook，用于缓存计算结果，避免在每次渲染时重复执行昂贵的计算。它会返回一个记忆化的值，只有当依赖项改变时才会重新计算。\u003c/p\u003e\n\u003ch3 id=\"基本作用\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#基本作用\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 基本作用\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e基本作用\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003ccode\u003euseMemo\u003c/code\u003e 的主要作用是：\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e缓存计算结果，避免重复的昂贵计算\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e优化组件性能，减少不必要的重新渲染\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e在依赖项不变的情况下，返回相同的引用值\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e与 \u003ccode\u003eReact.memo\u003c/code\u003e 配合使用，优化子组件传值\u003c/li\u003e\n\u003c/ul\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"import%20React%2C%20%7B%20useMemo%2C%20useState%20%7D%20from%20'react'%3B%0Afunction%20MyComponent(%7B%20items%20%7D)%20%7B%0Aconst%20%5Bfilter%2C%20setFilter%5D%20%3D%20useState('')%3B%0A%2F%2F%20%E4%BD%BF%E7%94%A8%20useMemo%20%E7%BC%93%E5%AD%98%E8%BF%87%E6%BB%A4%E7%BB%93%E6%9E%9C%0Aconst%20filteredItems%20%3D%20useMemo(()%20%3D%3E%20%7B%0Aconsole.log('%E6%89%A7%E8%A1%8C%E8%BF%87%E6%BB%A4%E8%AE%A1%E7%AE%97')%3B%0Areturn%20items.filter(item%20%3D%3E%0Aitem.name.toLowerCase().includes(filter.toLowerCase())%0A)%3B%0A%7D%2C%20%5Bitems%2C%20filter%5D)%3B%20%2F%2F%20%E4%BE%9D%E8%B5%96%20items%20%E5%92%8C%20filter%0Areturn%20(%0Adiv%3E%0Ainput%0Avalue%3D%7Bfilter%7D%0AonChange%3D%7B(e)%20%3D%3E%20setFilter(e.target.value)%7D%0Aplaceholder%3D%22%E6%90%9C%E7%B4%A2...%22%0A%2F%3E%0Aul%3E%0A%7BfilteredItems.map(item%20%3D%3E%20(%0Ali%20key%3D%7Bitem.id%7D%3E%7Bitem.name%7Dli%3E%0A))%7D%0Aul%3E%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eReact\u003c/span\u003e, { useMemo, useState } \u003cspan class=\"hljs-keyword inline\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;react\u0026#x27;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eMyComponent\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ items }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [filter, setFilter] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026#x27;\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 使用 useMemo 缓存过滤结果\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e filteredItems = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;执行过滤计算\u0026#x27;\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e items.\u003cspan class=\"hljs-title function_ inline\"\u003efilter\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eitem\u003c/span\u003e =\u0026gt;\u003c/span\u003e \n      item.\u003cspan class=\"hljs-property inline\"\u003ename\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003etoLowerCase\u003c/span\u003e().\u003cspan class=\"hljs-title function_ inline\"\u003eincludes\u003c/span\u003e(filter.\u003cspan class=\"hljs-title function_ inline\"\u003etoLowerCase\u003c/span\u003e())\n    );\n  }, [items, filter]); \u003cspan class=\"hljs-comment inline\"\u003e// 依赖 items 和 filter\u003c/span\u003e\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003einput\u003c/span\u003e \n        \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{filter}\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003eonChange\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{(e)\u003c/span\u003e =\u0026gt;\u003c/span\u003e setFilter(e.target.value)}\n        placeholder=\u0026quot;搜索...\u0026quot;\n      /\u0026gt;\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eul\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        {filteredItems.map(item =\u0026gt; (\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eli\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{item.id}\u003c/span\u003e\u0026gt;\u003c/span\u003e{item.name}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eli\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        ))}\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eul\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"基本语法\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#基本语法\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 基本语法\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e基本语法\u003c/strong\u003e\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"const%20memoizedValue%20%3D%20useMemo(()%20%3D%3E%20%7B%0A%2F%2F%20%E8%AE%A1%E7%AE%97%E9%80%BB%E8%BE%91%0Areturn%20expensiveCalculation(a%2C%20b)%3B%0A%7D%2C%20%5Ba%2C%20b%5D)%3B%20%2F%2F%20%E4%BE%9D%E8%B5%96%E6%95%B0%E7%BB%84\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e memoizedValue = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-comment inline\"\u003e// 计算逻辑\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eexpensiveCalculation\u003c/span\u003e(a, b);\n}, [a, b]); \u003cspan class=\"hljs-comment inline\"\u003e// 依赖数组\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e第一个参数\u003c/strong\u003e：计算函数，返回要缓存的值\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e第二个参数\u003c/strong\u003e：依赖数组，当数组中的值改变时，重新计算\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"与普通计算的对比\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#与普通计算的对比\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 与普通计算的对比\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e与普通计算的对比\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003ch4 id=\"不使用-usememo（问题示例）\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#不使用-usememo（问题示例）\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 不使用 useMemo（问题示例）\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e不使用 useMemo（问题示例）\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20ExpensiveComponent(%7B%20data%2C%20threshold%20%7D)%20%7B%0Aconst%20%5Bcount%2C%20setCount%5D%20%3D%20useState(0)%3B%0A%2F%2F%20%E6%AF%8F%E6%AC%A1%E6%B8%B2%E6%9F%93%E9%83%BD%E4%BC%9A%E6%89%A7%E8%A1%8C%E8%BF%99%E4%B8%AA%E6%98%82%E8%B4%B5%E7%9A%84%E8%AE%A1%E7%AE%97%0Aconst%20expensiveValue%20%3D%20data%0A.filter(item%20%3D%3E%20item.value%20%3E%20threshold)%0A.reduce((sum%2C%20item)%20%3D%3E%20sum%20%2B%20item.value%2C%200)%3B%0Aconsole.log('%E8%AE%A1%E7%AE%97%E6%89%A7%E8%A1%8C%E4%BA%86')%3B%20%2F%2F%20%E6%AF%8F%E6%AC%A1%E6%B8%B2%E6%9F%93%E9%83%BD%E4%BC%9A%E6%89%93%E5%8D%B0%0Areturn%20(%0Adiv%3E%0Ap%3E%E6%98%82%E8%B4%B5%E8%AE%A1%E7%AE%97%E7%BB%93%E6%9E%9C%3A%20%7BexpensiveValue%7Dp%3E%0Ap%3E%E8%AE%A1%E6%95%B0%3A%20%7Bcount%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20setCount(count%20%2B%201)%7D%3E%E5%A2%9E%E5%8A%A0%E8%AE%A1%E6%95%B0button%3E%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eExpensiveComponent\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ data, threshold }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [count, setCount] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 每次渲染都会执行这个昂贵的计算\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e expensiveValue = data\n    .\u003cspan class=\"hljs-title function_ inline\"\u003efilter\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eitem\u003c/span\u003e =\u0026gt;\u003c/span\u003e item.\u003cspan class=\"hljs-property inline\"\u003evalue\u003c/span\u003e \u0026gt; threshold)\n    .\u003cspan class=\"hljs-title function_ inline\"\u003ereduce\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003esum, item\u003c/span\u003e) =\u0026gt;\u003c/span\u003e sum + item.\u003cspan class=\"hljs-property inline\"\u003evalue\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;计算执行了\u0026#x27;\u003c/span\u003e); \u003cspan class=\"hljs-comment inline\"\u003e// 每次渲染都会打印\u003c/span\u003e\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e昂贵计算结果: {expensiveValue}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e计数: {count}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e setCount(count + 1)}\u0026gt;增加计数\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch4 id=\"使用-usememo（优化后）\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#使用-usememo（优化后）\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 使用 useMemo（优化后）\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e使用 useMemo（优化后）\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20OptimizedComponent(%7B%20data%2C%20threshold%20%7D)%20%7B%0Aconst%20%5Bcount%2C%20setCount%5D%20%3D%20useState(0)%3B%0A%2F%2F%20%E5%8F%AA%E6%9C%89%E5%BD%93%20data%20%E6%88%96%20threshold%20%E5%8F%98%E5%8C%96%E6%97%B6%E6%89%8D%E9%87%8D%E6%96%B0%E8%AE%A1%E7%AE%97%0Aconst%20expensiveValue%20%3D%20useMemo(()%20%3D%3E%20%7B%0Aconsole.log('%E8%AE%A1%E7%AE%97%E6%89%A7%E8%A1%8C%E4%BA%86')%3B%20%2F%2F%20%E5%8F%AA%E5%9C%A8%E4%BE%9D%E8%B5%96%E5%8F%98%E5%8C%96%E6%97%B6%E6%89%93%E5%8D%B0%0Areturn%20data%0A.filter(item%20%3D%3E%20item.value%20%3E%20threshold)%0A.reduce((sum%2C%20item)%20%3D%3E%20sum%20%2B%20item.value%2C%200)%3B%0A%7D%2C%20%5Bdata%2C%20threshold%5D)%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E6%98%82%E8%B4%B5%E8%AE%A1%E7%AE%97%E7%BB%93%E6%9E%9C%3A%20%7BexpensiveValue%7Dp%3E%0Ap%3E%E8%AE%A1%E6%95%B0%3A%20%7Bcount%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20setCount(count%20%2B%201)%7D%3E%E5%A2%9E%E5%8A%A0%E8%AE%A1%E6%95%B0button%3E%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eOptimizedComponent\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ data, threshold }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [count, setCount] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 只有当 data 或 threshold 变化时才重新计算\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e expensiveValue = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;计算执行了\u0026#x27;\u003c/span\u003e); \u003cspan class=\"hljs-comment inline\"\u003e// 只在依赖变化时打印\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e data\n      .\u003cspan class=\"hljs-title function_ inline\"\u003efilter\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eitem\u003c/span\u003e =\u0026gt;\u003c/span\u003e item.\u003cspan class=\"hljs-property inline\"\u003evalue\u003c/span\u003e \u0026gt; threshold)\n      .\u003cspan class=\"hljs-title function_ inline\"\u003ereduce\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003esum, item\u003c/span\u003e) =\u0026gt;\u003c/span\u003e sum + item.\u003cspan class=\"hljs-property inline\"\u003evalue\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e);\n  }, [data, threshold]);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e昂贵计算结果: {expensiveValue}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e计数: {count}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e setCount(count + 1)}\u0026gt;增加计数\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"实际应用场景\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#实际应用场景\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 实际应用场景\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e实际应用场景\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003ch4 id=\"复杂数据处理\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#复杂数据处理\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 复杂数据处理\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e复杂数据处理\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20DataAnalytics(%7B%20salesData%2C%20dateRange%2C%20category%20%7D)%20%7B%0A%2F%2F%20%E6%95%B0%E6%8D%AE%E8%BF%87%E6%BB%A4%E5%92%8C%E8%81%9A%E5%90%88%0Aconst%20processedData%20%3D%20useMemo(()%20%3D%3E%20%7B%0Aconsole.log('%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE...')%3B%0Areturn%20salesData%0A.filter(sale%20%3D%3E%20%7B%0Aconst%20saleDate%20%3D%20new%20Date(sale.date)%3B%0Areturn%20saleDate%20%3E%3D%20dateRange.start%20%26%26%0AsaleDate%20end%20%26%26%0Asale.category%20%3D%3D%3D%20category%3B%0A%7D)%0A.reduce((acc%2C%20sale)%20%3D%3E%20%7B%0Aconst%20month%20%3D%20sale.date.substr(0%2C%207)%3B%0Aacc%5Bmonth%5D%20%3D%20(acc%5Bmonth%5D%20%7C%7C%200)%20%2B%20sale.amount%3B%0Areturn%20acc%3B%0A%7D%2C%20%7B%7D)%3B%0A%7D%2C%20%5BsalesData%2C%20dateRange%2C%20category%5D)%3B%0A%2F%2F%20%E8%AE%A1%E7%AE%97%E7%BB%9F%E8%AE%A1%E6%95%B0%E6%8D%AE%0Aconst%20statistics%20%3D%20useMemo(()%20%3D%3E%20%7B%0Aconst%20values%20%3D%20Object.values(processedData)%3B%0Areturn%20%7B%0Atotal%3A%20values.reduce((sum%2C%20val)%20%3D%3E%20sum%20%2B%20val%2C%200)%2C%0Aaverage%3A%20values.length%20%3F%20values.reduce((sum%2C%20val)%20%3D%3E%20sum%20%2B%20val%2C%200)%20%2F%20values.length%20%3A%200%2C%0Amax%3A%20Math.max(...values)%2C%0Amin%3A%20Math.min(...values)%0A%7D%3B%0A%7D%2C%20%5BprocessedData%5D)%3B%0Areturn%20(%0Adiv%3E%0Ah3%3E%E9%94%80%E5%94%AE%E5%88%86%E6%9E%90h3%3E%0Ap%3E%E6%80%BB%E8%AE%A1%3A%20%7Bstatistics.total%7Dp%3E%0Ap%3E%E5%B9%B3%E5%9D%87%3A%20%7Bstatistics.average.toFixed(2)%7Dp%3E%0Ap%3E%E6%9C%80%E9%AB%98%3A%20%7Bstatistics.max%7Dp%3E%0Ap%3E%E6%9C%80%E4%BD%8E%3A%20%7Bstatistics.min%7Dp%3E%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eDataAnalytics\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ salesData, dateRange, category }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-comment inline\"\u003e// 数据过滤和聚合\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e processedData = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;处理数据...\u0026#x27;\u003c/span\u003e);\n    \n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e salesData\n      .\u003cspan class=\"hljs-title function_ inline\"\u003efilter\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003esale\u003c/span\u003e =\u0026gt;\u003c/span\u003e {\n        \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e saleDate = \u003cspan class=\"hljs-keyword inline\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eDate\u003c/span\u003e(sale.\u003cspan class=\"hljs-property inline\"\u003edate\u003c/span\u003e);\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e saleDate \u0026gt;= dateRange.\u003cspan class=\"hljs-property inline\"\u003estart\u003c/span\u003e \u0026amp;\u0026amp; \n               saleDate \u0026lt;= dateRange.\u003cspan class=\"hljs-property inline\"\u003eend\u003c/span\u003e \u0026amp;\u0026amp;\n               sale.\u003cspan class=\"hljs-property inline\"\u003ecategory\u003c/span\u003e === category;\n      })\n      .\u003cspan class=\"hljs-title function_ inline\"\u003ereduce\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003eacc, sale\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n        \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e month = sale.\u003cspan class=\"hljs-property inline\"\u003edate\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003esubstr\u003c/span\u003e(\u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e7\u003c/span\u003e);\n        acc[month] = (acc[month] || \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e) + sale.\u003cspan class=\"hljs-property inline\"\u003eamount\u003c/span\u003e;\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e acc;\n      }, {});\n  }, [salesData, dateRange, category]);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 计算统计数据\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e statistics = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e values = \u003cspan class=\"hljs-title class_ inline\"\u003eObject\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003evalues\u003c/span\u003e(processedData);\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n      \u003cspan class=\"hljs-attr inline\"\u003etotal\u003c/span\u003e: values.\u003cspan class=\"hljs-title function_ inline\"\u003ereduce\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003esum, val\u003c/span\u003e) =\u0026gt;\u003c/span\u003e sum + val, \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e),\n      \u003cspan class=\"hljs-attr inline\"\u003eaverage\u003c/span\u003e: values.\u003cspan class=\"hljs-property inline\"\u003elength\u003c/span\u003e ? values.\u003cspan class=\"hljs-title function_ inline\"\u003ereduce\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003esum, val\u003c/span\u003e) =\u0026gt;\u003c/span\u003e sum + val, \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e) / values.\u003cspan class=\"hljs-property inline\"\u003elength\u003c/span\u003e : \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr inline\"\u003emax\u003c/span\u003e: \u003cspan class=\"hljs-title class_ inline\"\u003eMath\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003emax\u003c/span\u003e(...values),\n      \u003cspan class=\"hljs-attr inline\"\u003emin\u003c/span\u003e: \u003cspan class=\"hljs-title class_ inline\"\u003eMath\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003emin\u003c/span\u003e(...values)\n    };\n  }, [processedData]);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eh3\u003c/span\u003e\u0026gt;\u003c/span\u003e销售分析\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eh3\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e总计: {statistics.total}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e平均: {statistics.average.toFixed(2)}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e最高: {statistics.max}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e最低: {statistics.min}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch4 id=\"搜索和排序\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#搜索和排序\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 搜索和排序\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e搜索和排序\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20ProductList(%7B%20products%2C%20searchTerm%2C%20sortBy%2C%20sortOrder%20%7D)%20%7B%0A%2F%2F%20%E6%90%9C%E7%B4%A2%E8%BF%87%E6%BB%A4%0Aconst%20filteredProducts%20%3D%20useMemo(()%20%3D%3E%20%7B%0Aif%20(!searchTerm)%20return%20products%3B%0Areturn%20products.filter(product%20%3D%3E%0Aproduct.name.toLowerCase().includes(searchTerm.toLowerCase())%20%7C%7C%0Aproduct.description.toLowerCase().includes(searchTerm.toLowerCase())%0A)%3B%0A%7D%2C%20%5Bproducts%2C%20searchTerm%5D)%3B%0A%2F%2F%20%E6%8E%92%E5%BA%8F%0Aconst%20sortedProducts%20%3D%20useMemo(()%20%3D%3E%20%7B%0Aconst%20sorted%20%3D%20%5B...filteredProducts%5D.sort((a%2C%20b)%20%3D%3E%20%7B%0Alet%20aValue%20%3D%20a%5BsortBy%5D%3B%0Alet%20bValue%20%3D%20b%5BsortBy%5D%3B%0Aif%20(typeof%20aValue%20%3D%3D%3D%20'string')%20%7B%0AaValue%20%3D%20aValue.toLowerCase()%3B%0AbValue%20%3D%20bValue.toLowerCase()%3B%0A%7D%0Aif%20(aValue%20return%20sortOrder%20%3D%3D%3D%20'asc'%20%3F%20-1%20%3A%201%3B%0Aif%20(aValue%20%3E%20bValue)%20return%20sortOrder%20%3D%3D%3D%20'asc'%20%3F%201%20%3A%20-1%3B%0Areturn%200%3B%0A%7D)%3B%0Areturn%20sorted%3B%0A%7D%2C%20%5BfilteredProducts%2C%20sortBy%2C%20sortOrder%5D)%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E6%89%BE%E5%88%B0%20%7BsortedProducts.length%7D%20%E4%B8%AA%E4%BA%A7%E5%93%81p%3E%0A%7BsortedProducts.map(product%20%3D%3E%20(%0Adiv%20key%3D%7Bproduct.id%7D%3E%0Ah4%3E%7Bproduct.name%7Dh4%3E%0Ap%3E%7Bproduct.description%7Dp%3E%0Ap%3E%E4%BB%B7%E6%A0%BC%3A%20%C2%A5%7Bproduct.price%7Dp%3E%0Adiv%3E%0A))%7D%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eProductList\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ products, searchTerm, sortBy, sortOrder }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-comment inline\"\u003e// 搜索过滤\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e filteredProducts = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (!searchTerm) \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e products;\n    \n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e products.\u003cspan class=\"hljs-title function_ inline\"\u003efilter\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eproduct\u003c/span\u003e =\u0026gt;\u003c/span\u003e\n      product.\u003cspan class=\"hljs-property inline\"\u003ename\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003etoLowerCase\u003c/span\u003e().\u003cspan class=\"hljs-title function_ inline\"\u003eincludes\u003c/span\u003e(searchTerm.\u003cspan class=\"hljs-title function_ inline\"\u003etoLowerCase\u003c/span\u003e()) ||\n      product.\u003cspan class=\"hljs-property inline\"\u003edescription\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003etoLowerCase\u003c/span\u003e().\u003cspan class=\"hljs-title function_ inline\"\u003eincludes\u003c/span\u003e(searchTerm.\u003cspan class=\"hljs-title function_ inline\"\u003etoLowerCase\u003c/span\u003e())\n    );\n  }, [products, searchTerm]);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 排序\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e sortedProducts = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e sorted = [...filteredProducts].\u003cspan class=\"hljs-title function_ inline\"\u003esort\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003ea, b\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword inline\"\u003elet\u003c/span\u003e aValue = a[sortBy];\n      \u003cspan class=\"hljs-keyword inline\"\u003elet\u003c/span\u003e bValue = b[sortBy];\n\n      \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (\u003cspan class=\"hljs-keyword inline\"\u003etypeof\u003c/span\u003e aValue === \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;string\u0026#x27;\u003c/span\u003e) {\n        aValue = aValue.\u003cspan class=\"hljs-title function_ inline\"\u003etoLowerCase\u003c/span\u003e();\n        bValue = bValue.\u003cspan class=\"hljs-title function_ inline\"\u003etoLowerCase\u003c/span\u003e();\n      }\n\n      \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (aValue \u0026lt; bValue) \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e sortOrder === \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;asc\u0026#x27;\u003c/span\u003e ? -\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e : \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e;\n      \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (aValue \u0026gt; bValue) \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e sortOrder === \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;asc\u0026#x27;\u003c/span\u003e ? \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e : -\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e;\n      \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e;\n    });\n\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e sorted;\n  }, [filteredProducts, sortBy, sortOrder]);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e找到 {sortedProducts.length} 个产品\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {sortedProducts.map(product =\u0026gt; (\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{product.id}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eh4\u003c/span\u003e\u0026gt;\u003c/span\u003e{product.name}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eh4\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e{product.description}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e价格: ¥{product.price}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      ))}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch4 id=\"避免子组件重新渲染\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#避免子组件重新渲染\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 避免子组件重新渲染\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e避免子组件重新渲染\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20ParentComponent()%20%7B%0Aconst%20%5Bcount%2C%20setCount%5D%20%3D%20useState(0)%3B%0Aconst%20%5Busers%2C%20setUsers%5D%20%3D%20useState(%5B%5D)%3B%0A%2F%2F%20%E6%B2%A1%E6%9C%89%20useMemo%EF%BC%9A%E6%AF%8F%E6%AC%A1%E6%B8%B2%E6%9F%93%E9%83%BD%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84%E9%85%8D%E7%BD%AE%E5%AF%B9%E8%B1%A1%0Aconst%20badConfig%20%3D%20%7B%0ApageSize%3A%2010%2C%0AsortBy%3A%20'name'%0A%7D%3B%0A%2F%2F%20%E4%BD%BF%E7%94%A8%20useMemo%EF%BC%9A%E9%85%8D%E7%BD%AE%E5%AF%B9%E8%B1%A1%E5%BC%95%E7%94%A8%E7%A8%B3%E5%AE%9A%0Aconst%20config%20%3D%20useMemo(()%20%3D%3E%20(%7B%0ApageSize%3A%2010%2C%0AsortBy%3A%20'name'%0A%7D)%2C%20%5B%5D)%3B%20%2F%2F%20%E7%A9%BA%E4%BE%9D%E8%B5%96%EF%BC%8C%E9%85%8D%E7%BD%AE%E6%B0%B8%E4%B8%8D%E5%8F%98%E5%8C%96%0A%2F%2F%20%E7%94%A8%E6%88%B7%E5%88%97%E8%A1%A8%E7%9A%84%E8%AE%A1%E7%AE%97%E9%80%BB%E8%BE%91%0Aconst%20processedUsers%20%3D%20useMemo(()%20%3D%3E%20%7B%0Areturn%20users.map(user%20%3D%3E%20(%7B%0A...user%2C%0AdisplayName%3A%20%60%24%7Buser.firstName%7D%20%24%7Buser.lastName%7D%60%2C%0AisActive%3A%20user.lastLogin%20%3E%20Date.now()%20-%2030%20*%2024%20*%2060%20*%2060%20*%201000%0A%7D))%3B%0A%7D%2C%20%5Busers%5D)%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E8%AE%A1%E6%95%B0%3A%20%7Bcount%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20setCount(count%20%2B%201)%7D%3E%E5%A2%9E%E5%8A%A0button%3E%0A%7B%2F*%20%E4%BD%BF%E7%94%A8%20badConfig%20%E4%BC%9A%E5%AF%BC%E8%87%B4%20UserList%20%E6%AF%8F%E6%AC%A1%E9%83%BD%E9%87%8D%E6%96%B0%E6%B8%B2%E6%9F%93%20*%2F%7D%0AUserList%20users%3D%7BprocessedUsers%7D%20config%3D%7Bconfig%7D%20%2F%3E%0Adiv%3E%0A)%3B%0A%7D%0Aconst%20UserList%20%3D%20React.memo((%7B%20users%2C%20config%20%7D)%20%3D%3E%20%7B%0Aconsole.log('UserList%20%E6%B8%B2%E6%9F%93')%3B%0Areturn%20(%0Adiv%3E%0A%7Busers.slice(0%2C%20config.pageSize).map(user%20%3D%3E%20(%0Adiv%20key%3D%7Buser.id%7D%3E%0A%7Buser.displayName%7D%20%7Buser.isActive%20%3F%20'%F0%9F%9F%A2'%20%3A%20'%F0%9F%94%B4'%7D%0Adiv%3E%0A))%7D%0Adiv%3E%0A)%3B%0A%7D)%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eParentComponent\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [count, setCount] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [users, setUsers] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e([]);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 没有 useMemo：每次渲染都创建新的配置对象\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e badConfig = {\n    \u003cspan class=\"hljs-attr inline\"\u003epageSize\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e10\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr inline\"\u003esortBy\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;name\u0026#x27;\u003c/span\u003e\n  };\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 使用 useMemo：配置对象引用稳定\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e config = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e ({\n    \u003cspan class=\"hljs-attr inline\"\u003epageSize\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e10\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr inline\"\u003esortBy\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;name\u0026#x27;\u003c/span\u003e\n  }), []); \u003cspan class=\"hljs-comment inline\"\u003e// 空依赖，配置永不变化\u003c/span\u003e\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 用户列表的计算逻辑\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e processedUsers = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e users.\u003cspan class=\"hljs-title function_ inline\"\u003emap\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003euser\u003c/span\u003e =\u0026gt;\u003c/span\u003e ({\n      ...user,\n      \u003cspan class=\"hljs-attr inline\"\u003edisplayName\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e`\u003cspan class=\"hljs-subst inline\"\u003e${user.firstName}\u003c/span\u003e \u003cspan class=\"hljs-subst inline\"\u003e${user.lastName}\u003c/span\u003e`\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr inline\"\u003eisActive\u003c/span\u003e: user.\u003cspan class=\"hljs-property inline\"\u003elastLogin\u003c/span\u003e \u0026gt; \u003cspan class=\"hljs-title class_ inline\"\u003eDate\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003enow\u003c/span\u003e() - \u003cspan class=\"hljs-number inline\"\u003e30\u003c/span\u003e * \u003cspan class=\"hljs-number inline\"\u003e24\u003c/span\u003e * \u003cspan class=\"hljs-number inline\"\u003e60\u003c/span\u003e * \u003cspan class=\"hljs-number inline\"\u003e60\u003c/span\u003e * \u003cspan class=\"hljs-number inline\"\u003e1000\u003c/span\u003e\n    }));\n  }, [users]);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e计数: {count}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e setCount(count + 1)}\u0026gt;增加\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \n      {/* 使用 badConfig 会导致 UserList 每次都重新渲染 */}\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eUserList\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eusers\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{processedUsers}\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003econfig\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{config}\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eUserList\u003c/span\u003e = \u003cspan class=\"hljs-title class_ inline\"\u003eReact\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003ememo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ users, config }\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;UserList 渲染\u0026#x27;\u003c/span\u003e);\n  \n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {users.slice(0, config.pageSize).map(user =\u0026gt; (\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{user.id}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          {user.displayName} {user.isActive ? \u0026#x27;🟢\u0026#x27; : \u0026#x27;🔴\u0026#x27;}\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      ))}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n});\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"与-usecallback-的对比\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#与-usecallback-的对比\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 与 useCallback 的对比\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e与 useCallback 的对比\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003ch4 id=\"usememo-vs-usecallback\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#usememo-vs-usecallback\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to useMemo vs useCallback\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003euseMemo vs useCallback\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20ComparisonExample(%7B%20items%20%7D)%20%7B%0A%2F%2F%20useMemo%EF%BC%9A%E7%BC%93%E5%AD%98%E8%AE%A1%E7%AE%97%E7%BB%93%E6%9E%9C%EF%BC%88%E5%80%BC%EF%BC%89%0Aconst%20expensiveValue%20%3D%20useMemo(()%20%3D%3E%20%7B%0Areturn%20items.reduce((sum%2C%20item)%20%3D%3E%20sum%20%2B%20item.value%2C%200)%3B%0A%7D%2C%20%5Bitems%5D)%3B%0A%2F%2F%20useCallback%EF%BC%9A%E7%BC%93%E5%AD%98%E5%87%BD%E6%95%B0%E5%AE%9A%E4%B9%89%0Aconst%20handleClick%20%3D%20useCallback(()%20%3D%3E%20%7B%0Aconsole.log('%E6%8C%89%E9%92%AE%E8%A2%AB%E7%82%B9%E5%87%BB')%3B%0A%7D%2C%20%5B%5D)%3B%0A%2F%2F%20%E7%AD%89%E4%BB%B7%E5%86%99%E6%B3%95%0Aconst%20memoizedCallback%20%3D%20useMemo(()%20%3D%3E%20%7B%0Areturn%20()%20%3D%3E%20console.log('%E6%8C%89%E9%92%AE%E8%A2%AB%E7%82%B9%E5%87%BB')%3B%0A%7D%2C%20%5B%5D)%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E6%80%BB%E8%AE%A1%3A%20%7BexpensiveValue%7Dp%3E%0Abutton%20onClick%3D%7BhandleClick%7D%3E%E7%82%B9%E5%87%BBbutton%3E%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eComparisonExample\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ items }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-comment inline\"\u003e// useMemo：缓存计算结果（值）\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e expensiveValue = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e items.\u003cspan class=\"hljs-title function_ inline\"\u003ereduce\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003esum, item\u003c/span\u003e) =\u0026gt;\u003c/span\u003e sum + item.\u003cspan class=\"hljs-property inline\"\u003evalue\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e);\n  }, [items]);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// useCallback：缓存函数定义\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e handleClick = \u003cspan class=\"hljs-title function_ inline\"\u003euseCallback\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;按钮被点击\u0026#x27;\u003c/span\u003e);\n  }, []);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 等价写法\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e memoizedCallback = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;按钮被点击\u0026#x27;\u003c/span\u003e);\n  }, []);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e总计: {expensiveValue}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{handleClick}\u003c/span\u003e\u0026gt;\u003c/span\u003e点击\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"与-reactmemo-的区别\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#与-reactmemo-的区别\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 与 React.memo 的区别\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e与 \u003ccode\u003eReact.memo\u003c/code\u003e 的区别\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003ccode\u003euseMemo\u003c/code\u003e 和 \u003ccode\u003eReact.memo\u003c/code\u003e 都是性能优化工具，但它们解决的问题和使用方式完全不同：\u003c/p\u003e\n\u003ctable class=\"w-full border-collapse mb-4 shadow-sm rounded-lg overflow-hidden\"\u003e\n\u003cthead class=\"bg-surface\"\u003e\n\u003ctr class=\"border-b border-gray-200\"\u003e\u003cth class=\"px-4 py-3 text-left text-xs font-medium text-foreground uppercase tracking-wider bg-surface\"\u003e特性\u003c/th\u003e\u003cth class=\"px-4 py-3 text-left text-xs font-medium text-foreground uppercase tracking-wider bg-surface\"\u003euseMemo\u003c/th\u003e\u003cth class=\"px-4 py-3 text-left text-xs font-medium text-foreground uppercase tracking-wider bg-surface\"\u003eReact.memo\u003c/th\u003e\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody class=\"bg-background divide-y divide-gray-200\"\u003e\n\u003ctr class=\"border-b border-gray-200\"\u003e\u003ctd class=\"px-4 py-3 text-sm text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e优化目标\u003c/strong\u003e\u003c/td\u003e\u003ctd class=\"px-4 py-3 text-sm text-foreground\"\u003e计算过程\u003c/td\u003e\u003ctd class=\"px-4 py-3 text-sm text-foreground\"\u003e组件渲染\u003c/td\u003e\u003c/tr\u003e\n\u003ctr class=\"border-b border-gray-200\"\u003e\u003ctd class=\"px-4 py-3 text-sm text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e作用范围\u003c/strong\u003e\u003c/td\u003e\u003ctd class=\"px-4 py-3 text-sm text-foreground\"\u003e组件内部的值\u003c/td\u003e\u003ctd class=\"px-4 py-3 text-sm text-foreground\"\u003e整个组件\u003c/td\u003e\u003c/tr\u003e\n\u003ctr class=\"border-b border-gray-200\"\u003e\u003ctd class=\"px-4 py-3 text-sm text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e使用位置\u003c/strong\u003e\u003c/td\u003e\u003ctd class=\"px-4 py-3 text-sm text-foreground\"\u003e组件内部（Hook）\u003c/td\u003e\u003ctd class=\"px-4 py-3 text-sm text-foreground\"\u003e组件定义外部（HOC）\u003c/td\u003e\u003c/tr\u003e\n\u003ctr class=\"border-b border-gray-200\"\u003e\u003ctd class=\"px-4 py-3 text-sm text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e触发条件\u003c/strong\u003e\u003c/td\u003e\u003ctd class=\"px-4 py-3 text-sm text-foreground\"\u003e依赖数组变化\u003c/td\u003e\u003ctd class=\"px-4 py-3 text-sm text-foreground\"\u003eprops 变化\u003c/td\u003e\u003c/tr\u003e\n\u003ctr class=\"border-b border-gray-200\"\u003e\u003ctd class=\"px-4 py-3 text-sm text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e返回类型\u003c/strong\u003e\u003c/td\u003e\u003ctd class=\"px-4 py-3 text-sm text-foreground\"\u003e任意值\u003c/td\u003e\u003ctd class=\"px-4 py-3 text-sm text-foreground\"\u003eReact 组件\u003c/td\u003e\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"%2F%2F%20React.memo%EF%BC%9A%E7%BB%84%E4%BB%B6%E7%BA%A7%E5%88%AB%E7%9A%84%E4%BC%98%E5%8C%96%0Aconst%20ProductCard%20%3D%20React.memo((%7B%20product%2C%20onAddToCart%20%7D)%20%3D%3E%20%7B%0Aconsole.log('ProductCard%20%E6%B8%B2%E6%9F%93')%3B%0Areturn%20(%0Adiv%3E%0Ah3%3E%7Bproduct.name%7Dh3%3E%0Ap%3E%E4%BB%B7%E6%A0%BC%3A%20%C2%A5%7Bproduct.price%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20onAddToCart(product.id)%7D%3E%0A%E5%8A%A0%E5%85%A5%E8%B4%AD%E7%89%A9%E8%BD%A6%0Abutton%3E%0Adiv%3E%0A)%3B%0A%7D)%3B%0A%2F%2F%20useMemo%EF%BC%9A%E5%80%BC%E7%BA%A7%E5%88%AB%E7%9A%84%E4%BC%98%E5%8C%96%0Afunction%20ProductList(%7B%20products%2C%20category%2C%20searchTerm%20%7D)%20%7B%0Aconsole.log('ProductList%20%E6%B8%B2%E6%9F%93')%3B%0A%2F%2F%20useMemo%20%E7%BC%93%E5%AD%98%E8%BF%87%E6%BB%A4%E7%BB%93%E6%9E%9C%0Aconst%20filteredProducts%20%3D%20useMemo(()%20%3D%3E%20%7B%0Aconsole.log('%E6%89%A7%E8%A1%8C%E8%BF%87%E6%BB%A4%E8%AE%A1%E7%AE%97')%3B%0Areturn%20products%0A.filter(p%20%3D%3E%20p.category%20%3D%3D%3D%20category)%0A.filter(p%20%3D%3E%20p.name.includes(searchTerm))%3B%0A%7D%2C%20%5Bproducts%2C%20category%2C%20searchTerm%5D)%3B%0A%2F%2F%20useMemo%20%E7%BC%93%E5%AD%98%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%EF%BC%8C%E9%85%8D%E5%90%88%20React.memo%20%E4%BD%BF%E7%94%A8%0Aconst%20handleAddToCart%20%3D%20useMemo(()%20%3D%3E%20%7B%0Areturn%20(productId)%20%3D%3E%20%7B%0Aconsole.log('%E6%B7%BB%E5%8A%A0%E5%88%B0%E8%B4%AD%E7%89%A9%E8%BD%A6%3A'%2C%20productId)%3B%0A%7D%3B%0A%7D%2C%20%5B%5D)%3B%20%2F%2F%20%E6%88%96%E8%80%85%E4%BD%BF%E7%94%A8%20useCallback%0Areturn%20(%0Adiv%3E%0Ap%3E%E6%89%BE%E5%88%B0%20%7BfilteredProducts.length%7D%20%E4%B8%AA%E4%BA%A7%E5%93%81p%3E%0A%7BfilteredProducts.map(product%20%3D%3E%20(%0AProductCard%0Akey%3D%7Bproduct.id%7D%0Aproduct%3D%7Bproduct%7D%0AonAddToCart%3D%7BhandleAddToCart%7D%0A%2F%3E%0A))%7D%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// React.memo：组件级别的优化\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eProductCard\u003c/span\u003e = \u003cspan class=\"hljs-title class_ inline\"\u003eReact\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003ememo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ product, onAddToCart }\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;ProductCard 渲染\u0026#x27;\u003c/span\u003e);\n  \n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eh3\u003c/span\u003e\u0026gt;\u003c/span\u003e{product.name}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eh3\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e价格: ¥{product.price}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e onAddToCart(product.id)}\u0026gt;\n        加入购物车\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n});\n\n\u003cspan class=\"hljs-comment inline\"\u003e// useMemo：值级别的优化\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eProductList\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ products, category, searchTerm }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;ProductList 渲染\u0026#x27;\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// useMemo 缓存过滤结果\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e filteredProducts = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;执行过滤计算\u0026#x27;\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e products\n      .\u003cspan class=\"hljs-title function_ inline\"\u003efilter\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003ep\u003c/span\u003e =\u0026gt;\u003c/span\u003e p.\u003cspan class=\"hljs-property inline\"\u003ecategory\u003c/span\u003e === category)\n      .\u003cspan class=\"hljs-title function_ inline\"\u003efilter\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003ep\u003c/span\u003e =\u0026gt;\u003c/span\u003e p.\u003cspan class=\"hljs-property inline\"\u003ename\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003eincludes\u003c/span\u003e(searchTerm));\n  }, [products, category, searchTerm]);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// useMemo 缓存回调函数，配合 React.memo 使用\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e handleAddToCart = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003eproductId\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n      \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;添加到购物车:\u0026#x27;\u003c/span\u003e, productId);\n    };\n  }, []); \u003cspan class=\"hljs-comment inline\"\u003e// 或者使用 useCallback\u003c/span\u003e\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e找到 {filteredProducts.length} 个产品\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {filteredProducts.map(product =\u0026gt; (\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eProductCard\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{product.id}\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003eproduct\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{product}\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003eonAddToCart\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{handleAddToCart}\u003c/span\u003e\n        /\u0026gt;\u003c/span\u003e\n      ))}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e组合使用的最佳实践\u003c/strong\u003e：\u003c/p\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20ShoppingApp()%20%7B%0Aconst%20%5Bcart%2C%20setCart%5D%20%3D%20useState(%5B%5D)%3B%0Aconst%20%5BsearchTerm%2C%20setSearchTerm%5D%20%3D%20useState('')%3B%0Aconst%20%5Bproducts%5D%20%3D%20useState(%5B%0A%7B%20id%3A%201%2C%20name%3A%20'iPhone'%2C%20category%3A%20'electronics'%2C%20price%3A%20999%20%7D%2C%0A%7B%20id%3A%202%2C%20name%3A%20'T-Shirt'%2C%20category%3A%20'clothing'%2C%20price%3A%2029%20%7D%0A%5D)%3B%0A%2F%2F%20useMemo%EF%BC%9A%E7%BC%93%E5%AD%98%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C%0Aconst%20searchResults%20%3D%20useMemo(()%20%3D%3E%20%7B%0Aif%20(!searchTerm)%20return%20products%3B%0Areturn%20products.filter(p%20%3D%3E%0Ap.name.toLowerCase().includes(searchTerm.toLowerCase())%0A)%3B%0A%7D%2C%20%5Bproducts%2C%20searchTerm%5D)%3B%0A%2F%2F%20useMemo%EF%BC%9A%E7%BC%93%E5%AD%98%E8%B4%AD%E7%89%A9%E8%BD%A6%E7%BB%9F%E8%AE%A1%0Aconst%20cartStats%20%3D%20useMemo(()%20%3D%3E%20%7B%0Areturn%20%7B%0AitemCount%3A%20cart.length%2C%0Atotal%3A%20cart.reduce((sum%2C%20item)%20%3D%3E%20sum%20%2B%20item.price%2C%200)%0A%7D%3B%0A%7D%2C%20%5Bcart%5D)%3B%0A%2F%2F%20useCallback%EF%BC%9A%E7%A8%B3%E5%AE%9A%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%0Aconst%20addToCart%20%3D%20useCallback((productId)%20%3D%3E%20%7B%0Aconst%20product%20%3D%20products.find(p%20%3D%3E%20p.id%20%3D%3D%3D%20productId)%3B%0AsetCart(prev%20%3D%3E%20%5B...prev%2C%20product%5D)%3B%0A%7D%2C%20%5Bproducts%5D)%3B%0Areturn%20(%0Adiv%3E%0Ainput%0Avalue%3D%7BsearchTerm%7D%0AonChange%3D%7B(e)%20%3D%3E%20setSearchTerm(e.target.value)%7D%0Aplaceholder%3D%22%E6%90%9C%E7%B4%A2%E4%BA%A7%E5%93%81...%22%0A%2F%3E%0A%7B%2F*%20CartSummary%20%E4%BD%BF%E7%94%A8%20React.memo%20%E4%BC%98%E5%8C%96%20*%2F%7D%0ACartSummary%20stats%3D%7BcartStats%7D%20%2F%3E%0A%7B%2F*%20ProductGrid%20%E4%BD%BF%E7%94%A8%20React.memo%20%E4%BC%98%E5%8C%96%20*%2F%7D%0AProductGrid%0Aproducts%3D%7BsearchResults%7D%0AonAddToCart%3D%7BaddToCart%7D%0A%2F%3E%0Adiv%3E%0A)%3B%0A%7D%0A%2F%2F%20React.memo%20%E4%BC%98%E5%8C%96%E7%9A%84%E7%BB%84%E4%BB%B6%0Aconst%20CartSummary%20%3D%20React.memo((%7B%20stats%20%7D)%20%3D%3E%20%7B%0Aconsole.log('CartSummary%20%E6%B8%B2%E6%9F%93')%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E8%B4%AD%E7%89%A9%E8%BD%A6%3A%20%7Bstats.itemCount%7D%20%E4%BB%B6%E5%95%86%E5%93%81p%3E%0Ap%3E%E6%80%BB%E8%AE%A1%3A%20%C2%A5%7Bstats.total%7Dp%3E%0Adiv%3E%0A)%3B%0A%7D)%3B%0Aconst%20ProductGrid%20%3D%20React.memo((%7B%20products%2C%20onAddToCart%20%7D)%20%3D%3E%20%7B%0Aconsole.log('ProductGrid%20%E6%B8%B2%E6%9F%93')%3B%0Areturn%20(%0Adiv%3E%0A%7Bproducts.map(product%20%3D%3E%20(%0AProductItem%0Akey%3D%7Bproduct.id%7D%0Aproduct%3D%7Bproduct%7D%0AonAddToCart%3D%7BonAddToCart%7D%0A%2F%3E%0A))%7D%0Adiv%3E%0A)%3B%0A%7D)%3B%0Aconst%20ProductItem%20%3D%20React.memo((%7B%20product%2C%20onAddToCart%20%7D)%20%3D%3E%20%7B%0Areturn%20(%0Adiv%3E%0Ah4%3E%7Bproduct.name%7Dh4%3E%0Ap%3E%C2%A5%7Bproduct.price%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20onAddToCart(product.id)%7D%3E%0A%E5%8A%A0%E5%85%A5%E8%B4%AD%E7%89%A9%E8%BD%A6%0Abutton%3E%0Adiv%3E%0A)%3B%0A%7D)%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eShoppingApp\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [cart, setCart] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e([]);\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [searchTerm, setSearchTerm] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026#x27;\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [products] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e([\n    { \u003cspan class=\"hljs-attr inline\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;iPhone\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003ecategory\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;electronics\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003eprice\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e999\u003c/span\u003e },\n    { \u003cspan class=\"hljs-attr inline\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;T-Shirt\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003ecategory\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;clothing\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003eprice\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e29\u003c/span\u003e }\n  ]);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// useMemo：缓存搜索结果\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e searchResults = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (!searchTerm) \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e products;\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e products.\u003cspan class=\"hljs-title function_ inline\"\u003efilter\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003ep\u003c/span\u003e =\u0026gt;\u003c/span\u003e \n      p.\u003cspan class=\"hljs-property inline\"\u003ename\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003etoLowerCase\u003c/span\u003e().\u003cspan class=\"hljs-title function_ inline\"\u003eincludes\u003c/span\u003e(searchTerm.\u003cspan class=\"hljs-title function_ inline\"\u003etoLowerCase\u003c/span\u003e())\n    );\n  }, [products, searchTerm]);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// useMemo：缓存购物车统计\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e cartStats = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n      \u003cspan class=\"hljs-attr inline\"\u003eitemCount\u003c/span\u003e: cart.\u003cspan class=\"hljs-property inline\"\u003elength\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr inline\"\u003etotal\u003c/span\u003e: cart.\u003cspan class=\"hljs-title function_ inline\"\u003ereduce\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003esum, item\u003c/span\u003e) =\u0026gt;\u003c/span\u003e sum + item.\u003cspan class=\"hljs-property inline\"\u003eprice\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e)\n    };\n  }, [cart]);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// useCallback：稳定的事件处理函数\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e addToCart = \u003cspan class=\"hljs-title function_ inline\"\u003euseCallback\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003eproductId\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e product = products.\u003cspan class=\"hljs-title function_ inline\"\u003efind\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003ep\u003c/span\u003e =\u0026gt;\u003c/span\u003e p.\u003cspan class=\"hljs-property inline\"\u003eid\u003c/span\u003e === productId);\n    \u003cspan class=\"hljs-title function_ inline\"\u003esetCart\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eprev\u003c/span\u003e =\u0026gt;\u003c/span\u003e [...prev, product]);\n  }, [products]);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003einput\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{searchTerm}\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003eonChange\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{(e)\u003c/span\u003e =\u0026gt;\u003c/span\u003e setSearchTerm(e.target.value)}\n        placeholder=\u0026quot;搜索产品...\u0026quot;\n      /\u0026gt;\n      \n      {/* CartSummary 使用 React.memo 优化 */}\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eCartSummary\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003estats\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{cartStats}\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n      \n      {/* ProductGrid 使用 React.memo 优化 */}\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eProductGrid\u003c/span\u003e \n        \u003cspan class=\"hljs-attr inline\"\u003eproducts\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{searchResults}\u003c/span\u003e \n        \u003cspan class=\"hljs-attr inline\"\u003eonAddToCart\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{addToCart}\u003c/span\u003e \n      /\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\n\u003cspan class=\"hljs-comment inline\"\u003e// React.memo 优化的组件\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eCartSummary\u003c/span\u003e = \u003cspan class=\"hljs-title class_ inline\"\u003eReact\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003ememo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ stats }\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;CartSummary 渲染\u0026#x27;\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e购物车: {stats.itemCount} 件商品\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e总计: ¥{stats.total}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n});\n\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eProductGrid\u003c/span\u003e = \u003cspan class=\"hljs-title class_ inline\"\u003eReact\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003ememo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ products, onAddToCart }\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;ProductGrid 渲染\u0026#x27;\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {products.map(product =\u0026gt; (\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eProductItem\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{product.id}\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003eproduct\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{product}\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003eonAddToCart\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{onAddToCart}\u003c/span\u003e\n        /\u0026gt;\u003c/span\u003e\n      ))}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n});\n\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eProductItem\u003c/span\u003e = \u003cspan class=\"hljs-title class_ inline\"\u003eReact\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003ememo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ product, onAddToCart }\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eh4\u003c/span\u003e\u0026gt;\u003c/span\u003e{product.name}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eh4\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e¥{product.price}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e onAddToCart(product.id)}\u0026gt;\n        加入购物车\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n});\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e何时使用哪个\u003c/strong\u003e：\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e使用 \u003ccode\u003euseMemo\u003c/code\u003e\u003c/strong\u003e：\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e昂贵的计算需要缓存结果\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e需要为子组件提供稳定的 props 引用\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e避免在每次渲染时重新创建对象/数组\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e使用 \u003ccode\u003eReact.memo\u003c/code\u003e\u003c/strong\u003e：\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e组件经常接收相同的 props\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e组件渲染成本较高\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e父组件频繁重新渲染，但子组件 props 变化较少\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e配合使用\u003c/strong\u003e：\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e用 \u003ccode\u003euseMemo\u003c/code\u003e 创建稳定的 props\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e用 \u003ccode\u003eReact.memo\u003c/code\u003e 防止子组件不必要的重新渲染\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"条件计算\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#条件计算\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 条件计算\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e条件计算\u003c/strong\u003e\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20ConditionalMemo(%7B%20data%2C%20shouldProcess%2C%20processingType%20%7D)%20%7B%0Aconst%20processedData%20%3D%20useMemo(()%20%3D%3E%20%7B%0A%2F%2F%20%E5%8F%AA%E6%9C%89%E5%9C%A8%E9%9C%80%E8%A6%81%E5%A4%84%E7%90%86%E6%97%B6%E6%89%8D%E8%BF%9B%E8%A1%8C%E8%AE%A1%E7%AE%97%0Aif%20(!shouldProcess)%20return%20data%3B%0Aconsole.log('%E6%89%A7%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86...')%3B%0Aswitch%20(processingType)%20%7B%0Acase%20'sort'%3A%0Areturn%20%5B...data%5D.sort((a%2C%20b)%20%3D%3E%20a.value%20-%20b.value)%3B%0Acase%20'filter'%3A%0Areturn%20data.filter(item%20%3D%3E%20item.active)%3B%0Acase%20'transform'%3A%0Areturn%20data.map(item%20%3D%3E%20(%7B%20...item%2C%20processed%3A%20true%20%7D))%3B%0Adefault%3A%0Areturn%20data%3B%0A%7D%0A%7D%2C%20%5Bdata%2C%20shouldProcess%2C%20processingType%5D)%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E6%95%B0%E6%8D%AE%E9%A1%B9%E6%95%B0%E9%87%8F%3A%20%7BprocessedData.length%7Dp%3E%0A%7BprocessedData.map(item%20%3D%3E%20(%0Adiv%20key%3D%7Bitem.id%7D%3E%7Bitem.name%7Ddiv%3E%0A))%7D%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eConditionalMemo\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ data, shouldProcess, processingType }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e processedData = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment inline\"\u003e// 只有在需要处理时才进行计算\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (!shouldProcess) \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e data;\n\n    \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;执行数据处理...\u0026#x27;\u003c/span\u003e);\n    \n    \u003cspan class=\"hljs-keyword inline\"\u003eswitch\u003c/span\u003e (processingType) {\n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;sort\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e [...data].\u003cspan class=\"hljs-title function_ inline\"\u003esort\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003ea, b\u003c/span\u003e) =\u0026gt;\u003c/span\u003e a.\u003cspan class=\"hljs-property inline\"\u003evalue\u003c/span\u003e - b.\u003cspan class=\"hljs-property inline\"\u003evalue\u003c/span\u003e);\n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;filter\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e data.\u003cspan class=\"hljs-title function_ inline\"\u003efilter\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eitem\u003c/span\u003e =\u0026gt;\u003c/span\u003e item.\u003cspan class=\"hljs-property inline\"\u003eactive\u003c/span\u003e);\n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;transform\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e data.\u003cspan class=\"hljs-title function_ inline\"\u003emap\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eitem\u003c/span\u003e =\u0026gt;\u003c/span\u003e ({ ...item, \u003cspan class=\"hljs-attr inline\"\u003eprocessed\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003etrue\u003c/span\u003e }));\n      \u003cspan class=\"hljs-attr inline\"\u003edefault\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e data;\n    }\n  }, [data, shouldProcess, processingType]);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e数据项数量: {processedData.length}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {processedData.map(item =\u0026gt; (\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{item.id}\u003c/span\u003e\u0026gt;\u003c/span\u003e{item.name}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      ))}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"复杂对象的记忆化\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#复杂对象的记忆化\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 复杂对象的记忆化\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e复杂对象的记忆化\u003c/strong\u003e\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20FormValidator(%7B%20formData%2C%20validationRules%20%7D)%20%7B%0A%2F%2F%20%E9%AA%8C%E8%AF%81%E7%BB%93%E6%9E%9C%E7%9A%84%E8%AE%A1%E7%AE%97%0Aconst%20validationResults%20%3D%20useMemo(()%20%3D%3E%20%7B%0Aconst%20results%20%3D%20%7B%7D%3B%0AObject.keys(validationRules).forEach(field%20%3D%3E%20%7B%0Aconst%20value%20%3D%20formData%5Bfield%5D%3B%0Aconst%20rules%20%3D%20validationRules%5Bfield%5D%3B%0Aresults%5Bfield%5D%20%3D%20%7B%0AisValid%3A%20true%2C%0Aerrors%3A%20%5B%5D%0A%7D%3B%0Arules.forEach(rule%20%3D%3E%20%7B%0Aif%20(!rule.validator(value))%20%7B%0Aresults%5Bfield%5D.isValid%20%3D%20false%3B%0Aresults%5Bfield%5D.errors.push(rule.message)%3B%0A%7D%0A%7D)%3B%0A%7D)%3B%0Areturn%20results%3B%0A%7D%2C%20%5BformData%2C%20validationRules%5D)%3B%0A%2F%2F%20%E6%95%B4%E4%BD%93%E8%A1%A8%E5%8D%95%E7%8A%B6%E6%80%81%0Aconst%20formStatus%20%3D%20useMemo(()%20%3D%3E%20%7B%0Aconst%20allFields%20%3D%20Object.values(validationResults)%3B%0Aconst%20hasErrors%20%3D%20allFields.some(field%20%3D%3E%20!field.isValid)%3B%0Aconst%20totalErrors%20%3D%20allFields.reduce((sum%2C%20field)%20%3D%3E%20sum%20%2B%20field.errors.length%2C%200)%3B%0Areturn%20%7B%0AisValid%3A%20!hasErrors%2C%0AerrorCount%3A%20totalErrors%2C%0AcanSubmit%3A%20!hasErrors%20%26%26%20Object.keys(formData).length%20%3E%200%0A%7D%3B%0A%7D%2C%20%5BvalidationResults%2C%20formData%5D)%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E8%A1%A8%E5%8D%95%E7%8A%B6%E6%80%81%3A%20%7BformStatus.isValid%20%3F%20'%E6%9C%89%E6%95%88'%20%3A%20'%E6%97%A0%E6%95%88'%7Dp%3E%0Ap%3E%E9%94%99%E8%AF%AF%E6%95%B0%E9%87%8F%3A%20%7BformStatus.errorCount%7Dp%3E%0Abutton%20disabled%3D%7B!formStatus.canSubmit%7D%3E%0A%E6%8F%90%E4%BA%A4%E8%A1%A8%E5%8D%95%0Abutton%3E%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eFormValidator\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ formData, validationRules }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-comment inline\"\u003e// 验证结果的计算\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e validationResults = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e results = {};\n    \n    \u003cspan class=\"hljs-title class_ inline\"\u003eObject\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003ekeys\u003c/span\u003e(validationRules).\u003cspan class=\"hljs-title function_ inline\"\u003eforEach\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003efield\u003c/span\u003e =\u0026gt;\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e value = formData[field];\n      \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e rules = validationRules[field];\n      \n      results[field] = {\n        \u003cspan class=\"hljs-attr inline\"\u003eisValid\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003etrue\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr inline\"\u003eerrors\u003c/span\u003e: []\n      };\n\n      rules.\u003cspan class=\"hljs-title function_ inline\"\u003eforEach\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003erule\u003c/span\u003e =\u0026gt;\u003c/span\u003e {\n        \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (!rule.\u003cspan class=\"hljs-title function_ inline\"\u003evalidator\u003c/span\u003e(value)) {\n          results[field].\u003cspan class=\"hljs-property inline\"\u003eisValid\u003c/span\u003e = \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e;\n          results[field].\u003cspan class=\"hljs-property inline\"\u003eerrors\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003epush\u003c/span\u003e(rule.\u003cspan class=\"hljs-property inline\"\u003emessage\u003c/span\u003e);\n        }\n      });\n    });\n\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e results;\n  }, [formData, validationRules]);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 整体表单状态\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e formStatus = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e allFields = \u003cspan class=\"hljs-title class_ inline\"\u003eObject\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003evalues\u003c/span\u003e(validationResults);\n    \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e hasErrors = allFields.\u003cspan class=\"hljs-title function_ inline\"\u003esome\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003efield\u003c/span\u003e =\u0026gt;\u003c/span\u003e !field.\u003cspan class=\"hljs-property inline\"\u003eisValid\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e totalErrors = allFields.\u003cspan class=\"hljs-title function_ inline\"\u003ereduce\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003esum, field\u003c/span\u003e) =\u0026gt;\u003c/span\u003e sum + field.\u003cspan class=\"hljs-property inline\"\u003eerrors\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003elength\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e);\n\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n      \u003cspan class=\"hljs-attr inline\"\u003eisValid\u003c/span\u003e: !hasErrors,\n      \u003cspan class=\"hljs-attr inline\"\u003eerrorCount\u003c/span\u003e: totalErrors,\n      \u003cspan class=\"hljs-attr inline\"\u003ecanSubmit\u003c/span\u003e: !hasErrors \u0026amp;\u0026amp; \u003cspan class=\"hljs-title class_ inline\"\u003eObject\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003ekeys\u003c/span\u003e(formData).\u003cspan class=\"hljs-property inline\"\u003elength\u003c/span\u003e \u0026gt; \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e\n    };\n  }, [validationResults, formData]);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e表单状态: {formStatus.isValid ? \u0026#x27;有效\u0026#x27; : \u0026#x27;无效\u0026#x27;}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e错误数量: {formStatus.errorCount}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003edisabled\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{!formStatus.canSubmit}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        提交表单\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"常见陷阱和解决方案\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#常见陷阱和解决方案\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 常见陷阱和解决方案\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e常见陷阱和解决方案\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003ch4 id=\"依赖数组不正确\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#依赖数组不正确\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 依赖数组不正确\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e依赖数组不正确\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20BadExample(%7B%20items%2C%20filter%20%7D)%20%7B%0Aconst%20%5Bmultiplier%2C%20setMultiplier%5D%20%3D%20useState(1)%3B%0A%2F%2F%20%E9%94%99%E8%AF%AF%EF%BC%9A%E7%BC%BA%E5%B0%91%20multiplier%20%E4%BE%9D%E8%B5%96%0Aconst%20processedItems%20%3D%20useMemo(()%20%3D%3E%20%7B%0Areturn%20items%0A.filter(item%20%3D%3E%20item.category%20%3D%3D%3D%20filter)%0A.map(item%20%3D%3E%20(%7B%20...item%2C%20value%3A%20item.value%20*%20multiplier%20%7D))%3B%0A%7D%2C%20%5Bitems%2C%20filter%5D)%3B%20%2F%2F%20%E5%BA%94%E8%AF%A5%E5%8C%85%E5%90%AB%20%5Bitems%2C%20filter%2C%20multiplier%5D%0Areturn%20(%0Adiv%3E%0Ainput%0Atype%3D%22number%22%0Avalue%3D%7Bmultiplier%7D%0AonChange%3D%7B(e)%20%3D%3E%20setMultiplier(Number(e.target.value))%7D%0A%2F%3E%0A%7B%2F*%20multiplier%20%E5%8F%98%E5%8C%96%E6%97%B6%EF%BC%8CprocessedItems%20%E4%B8%8D%E4%BC%9A%E6%9B%B4%E6%96%B0%20*%2F%7D%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eBadExample\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ items, filter }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [multiplier, setMultiplier] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 错误：缺少 multiplier 依赖\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e processedItems = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e items\n      .\u003cspan class=\"hljs-title function_ inline\"\u003efilter\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eitem\u003c/span\u003e =\u0026gt;\u003c/span\u003e item.\u003cspan class=\"hljs-property inline\"\u003ecategory\u003c/span\u003e === filter)\n      .\u003cspan class=\"hljs-title function_ inline\"\u003emap\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eitem\u003c/span\u003e =\u0026gt;\u003c/span\u003e ({ ...item, \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e: item.\u003cspan class=\"hljs-property inline\"\u003evalue\u003c/span\u003e * multiplier }));\n  }, [items, filter]); \u003cspan class=\"hljs-comment inline\"\u003e// 应该包含 [items, filter, multiplier]\u003c/span\u003e\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003einput\u003c/span\u003e \n        \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;number\u0026quot;\u003c/span\u003e \n        \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{multiplier}\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003eonChange\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{(e)\u003c/span\u003e =\u0026gt;\u003c/span\u003e setMultiplier(Number(e.target.value))}\n      /\u0026gt;\n      {/* multiplier 变化时，processedItems 不会更新 */}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch4 id=\"过度使用-usememo\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#过度使用-usememo\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 过度使用 useMemo\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e过度使用 useMemo\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"%2F%2F%20%E4%B8%8D%E5%BF%85%E8%A6%81%E7%9A%84%E4%BC%98%E5%8C%96%0Afunction%20OverOptimized()%20%7B%0Aconst%20%5Bname%2C%20setName%5D%20%3D%20useState('')%3B%0A%2F%2F%20%E7%AE%80%E5%8D%95%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%93%8D%E4%BD%9C%E4%B8%8D%E9%9C%80%E8%A6%81%20useMemo%0Aconst%20uppercaseName%20%3D%20useMemo(()%20%3D%3E%20%7B%0Areturn%20name.toUpperCase()%3B%0A%7D%2C%20%5Bname%5D)%3B%0Areturn%20div%3E%7BuppercaseName%7Ddiv%3E%3B%0A%7D%0A%2F%2F%20%E7%AE%80%E5%8D%95%E7%9B%B4%E6%8E%A5%E7%9A%84%E5%86%99%E6%B3%95%0Afunction%20Simple()%20%7B%0Aconst%20%5Bname%2C%20setName%5D%20%3D%20useState('')%3B%0Areturn%20div%3E%7Bname.toUpperCase()%7Ddiv%3E%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// 不必要的优化\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eOverOptimized\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [name, setName] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026#x27;\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 简单的字符串操作不需要 useMemo\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e uppercaseName = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e name.\u003cspan class=\"hljs-title function_ inline\"\u003etoUpperCase\u003c/span\u003e();\n  }, [name]);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e{uppercaseName}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e;\n}\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 简单直接的写法\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eSimple\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [name, setName] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026#x27;\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e{name.toUpperCase()}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e;\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch4 id=\"引用类型的陷阱\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#引用类型的陷阱\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 引用类型的陷阱\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e引用类型的陷阱\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20ReferenceTypeExample(%7B%20config%20%7D)%20%7B%0A%2F%2F%20%E9%94%99%E8%AF%AF%EF%BC%9Aconfig%20%E6%98%AF%E5%AF%B9%E8%B1%A1%EF%BC%8C%E6%AF%8F%E6%AC%A1%E9%83%BD%E8%A2%AB%E8%AE%A4%E4%B8%BA%E6%98%AF%E6%96%B0%E7%9A%84%0Aconst%20processedConfig%20%3D%20useMemo(()%20%3D%3E%20%7B%0Areturn%20%7B%0A...config%2C%0Aprocessed%3A%20true%0A%7D%3B%0A%7D%2C%20%5Bconfig%5D)%3B%20%2F%2F%20config%20%E5%AF%B9%E8%B1%A1%E5%BC%95%E7%94%A8%E5%8F%AF%E8%83%BD%E6%AF%8F%E6%AC%A1%E9%83%BD%E4%B8%8D%E5%90%8C%0A%2F%2F%20%E6%AD%A3%E7%A1%AE%EF%BC%9A%E4%BD%BF%E7%94%A8%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%85%B7%E4%BD%93%E5%B1%9E%E6%80%A7%E4%BD%9C%E4%B8%BA%E4%BE%9D%E8%B5%96%0Aconst%20processedConfigCorrect%20%3D%20useMemo(()%20%3D%3E%20%7B%0Areturn%20%7B%0A...config%2C%0Aprocessed%3A%20true%0A%7D%3B%0A%7D%2C%20%5Bconfig.apiUrl%2C%20config.timeout%2C%20config.retries%5D)%3B%20%2F%2F%20%E5%85%B7%E4%BD%93%E5%B1%9E%E6%80%A7%0Areturn%20div%3E%E9%85%8D%E7%BD%AE%E5%B7%B2%E5%A4%84%E7%90%86div%3E%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eReferenceTypeExample\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ config }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-comment inline\"\u003e// 错误：config 是对象，每次都被认为是新的\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e processedConfig = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n      ...config,\n      \u003cspan class=\"hljs-attr inline\"\u003eprocessed\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003etrue\u003c/span\u003e\n    };\n  }, [config]); \u003cspan class=\"hljs-comment inline\"\u003e// config 对象引用可能每次都不同\u003c/span\u003e\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 正确：使用对象的具体属性作为依赖\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e processedConfigCorrect = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n      ...config,\n      \u003cspan class=\"hljs-attr inline\"\u003eprocessed\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003etrue\u003c/span\u003e\n    };\n  }, [config.\u003cspan class=\"hljs-property inline\"\u003eapiUrl\u003c/span\u003e, config.\u003cspan class=\"hljs-property inline\"\u003etimeout\u003c/span\u003e, config.\u003cspan class=\"hljs-property inline\"\u003eretries\u003c/span\u003e]); \u003cspan class=\"hljs-comment inline\"\u003e// 具体属性\u003c/span\u003e\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e配置已处理\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e;\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"性能测试示例\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#性能测试示例\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 性能测试示例\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e性能测试示例\u003c/strong\u003e\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20PerformanceTest(%7B%20data%20%7D)%20%7B%0Aconst%20%5BrerenderCount%2C%20setRerenderCount%5D%20%3D%20useState(0)%3B%0A%2F%2F%20%E6%98%82%E8%B4%B5%E7%9A%84%E8%AE%A1%E7%AE%97%EF%BC%88%E6%A8%A1%E6%8B%9F%EF%BC%89%0Aconst%20expensiveCalculation%20%3D%20(items)%20%3D%3E%20%7B%0Aconsole.log('%E6%89%A7%E8%A1%8C%E6%98%82%E8%B4%B5%E8%AE%A1%E7%AE%97...')%3B%0Alet%20result%20%3D%200%3B%0Afor%20(let%20i%20%3D%200%3B%20i%201000000%3B%20i%2B%2B)%20%7B%0Aresult%20%2B%3D%20Math.random()%3B%0A%7D%0Areturn%20items.length%20%2B%20result%3B%0A%7D%3B%0A%2F%2F%20%E6%B2%A1%E6%9C%89%E7%BC%93%E5%AD%98%E7%9A%84%E7%89%88%E6%9C%AC%0Aconst%20unoptimizedValue%20%3D%20expensiveCalculation(data)%3B%0A%2F%2F%20%E6%9C%89%E7%BC%93%E5%AD%98%E7%9A%84%E7%89%88%E6%9C%AC%0Aconst%20optimizedValue%20%3D%20useMemo(()%20%3D%3E%20%7B%0Areturn%20expensiveCalculation(data)%3B%0A%7D%2C%20%5Bdata%5D)%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E9%87%8D%E6%96%B0%E6%B8%B2%E6%9F%93%E6%AC%A1%E6%95%B0%3A%20%7BrerenderCount%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20setRerenderCount(prev%20%3D%3E%20prev%20%2B%201)%7D%3E%0A%E8%A7%A6%E5%8F%91%E9%87%8D%E6%96%B0%E6%B8%B2%E6%9F%93%0Abutton%3E%0Ap%3E%E6%9C%AA%E4%BC%98%E5%8C%96%E7%9A%84%E5%80%BC%3A%20%7BunoptimizedValue.toFixed(2)%7Dp%3E%0Ap%3E%E4%BC%98%E5%8C%96%E5%90%8E%E7%9A%84%E5%80%BC%3A%20%7BoptimizedValue.toFixed(2)%7Dp%3E%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003ePerformanceTest\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ data }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [rerenderCount, setRerenderCount] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 昂贵的计算（模拟）\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eexpensiveCalculation\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003eitems\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;执行昂贵计算...\u0026#x27;\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword inline\"\u003elet\u003c/span\u003e result = \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword inline\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword inline\"\u003elet\u003c/span\u003e i = \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e; i \u0026lt; \u003cspan class=\"hljs-number inline\"\u003e1000000\u003c/span\u003e; i++) {\n      result += \u003cspan class=\"hljs-title class_ inline\"\u003eMath\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003erandom\u003c/span\u003e();\n    }\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e items.\u003cspan class=\"hljs-property inline\"\u003elength\u003c/span\u003e + result;\n  };\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 没有缓存的版本\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e unoptimizedValue = \u003cspan class=\"hljs-title function_ inline\"\u003eexpensiveCalculation\u003c/span\u003e(data);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 有缓存的版本\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e optimizedValue = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eexpensiveCalculation\u003c/span\u003e(data);\n  }, [data]);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e重新渲染次数: {rerenderCount}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e setRerenderCount(prev =\u0026gt; prev + 1)}\u0026gt;\n        触发重新渲染\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e未优化的值: {unoptimizedValue.toFixed(2)}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e优化后的值: {optimizedValue.toFixed(2)}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"自定义-hook-中的使用\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#自定义-hook-中的使用\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 自定义 Hook 中的使用\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e自定义 Hook 中的使用\u003c/strong\u003e\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20useFilteredData(data%2C%20filters)%20%7B%0Aconst%20filteredData%20%3D%20useMemo(()%20%3D%3E%20%7B%0Alet%20result%20%3D%20data%3B%0Aif%20(filters.search)%20%7B%0Aresult%20%3D%20result.filter(item%20%3D%3E%0Aitem.name.toLowerCase().includes(filters.search.toLowerCase())%0A)%3B%0A%7D%0Aif%20(filters.category)%20%7B%0Aresult%20%3D%20result.filter(item%20%3D%3E%20item.category%20%3D%3D%3D%20filters.category)%3B%0A%7D%0Aif%20(filters.priceRange)%20%7B%0Aresult%20%3D%20result.filter(item%20%3D%3E%0Aitem.price%20%3E%3D%20filters.priceRange.min%20%26%26%0Aitem.price%20priceRange.max%0A)%3B%0A%7D%0Areturn%20result%3B%0A%7D%2C%20%5Bdata%2C%20filters.search%2C%20filters.category%2C%20filters.priceRange%5D)%3B%0Aconst%20statistics%20%3D%20useMemo(()%20%3D%3E%20%7B%0Areturn%20%7B%0Acount%3A%20filteredData.length%2C%0AaveragePrice%3A%20filteredData.length%0A%3F%20filteredData.reduce((sum%2C%20item)%20%3D%3E%20sum%20%2B%20item.price%2C%200)%20%2F%20filteredData.length%0A%3A%200%0A%7D%3B%0A%7D%2C%20%5BfilteredData%5D)%3B%0Areturn%20%7B%20filteredData%2C%20statistics%20%7D%3B%0A%7D%0A%2F%2F%20%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89%20Hook%0Afunction%20ProductCatalog(%7B%20products%20%7D)%20%7B%0Aconst%20%5Bfilters%2C%20setFilters%5D%20%3D%20useState(%7B%0Asearch%3A%20''%2C%0Acategory%3A%20''%2C%0ApriceRange%3A%20%7B%20min%3A%200%2C%20max%3A%201000%20%7D%0A%7D)%3B%0Aconst%20%7B%20filteredData%2C%20statistics%20%7D%20%3D%20useFilteredData(products%2C%20filters)%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E6%89%BE%E5%88%B0%20%7Bstatistics.count%7D%20%E4%B8%AA%E4%BA%A7%E5%93%81p%3E%0Ap%3E%E5%B9%B3%E5%9D%87%E4%BB%B7%E6%A0%BC%3A%20%C2%A5%7Bstatistics.averagePrice.toFixed(2)%7Dp%3E%0A%7B%2F*%20%E6%B8%B2%E6%9F%93%E4%BA%A7%E5%93%81%E5%88%97%E8%A1%A8%20*%2F%7D%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003euseFilteredData\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003edata, filters\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e filteredData = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword inline\"\u003elet\u003c/span\u003e result = data;\n\n    \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (filters.\u003cspan class=\"hljs-property inline\"\u003esearch\u003c/span\u003e) {\n      result = result.\u003cspan class=\"hljs-title function_ inline\"\u003efilter\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eitem\u003c/span\u003e =\u0026gt;\u003c/span\u003e\n        item.\u003cspan class=\"hljs-property inline\"\u003ename\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003etoLowerCase\u003c/span\u003e().\u003cspan class=\"hljs-title function_ inline\"\u003eincludes\u003c/span\u003e(filters.\u003cspan class=\"hljs-property inline\"\u003esearch\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003etoLowerCase\u003c/span\u003e())\n      );\n    }\n\n    \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (filters.\u003cspan class=\"hljs-property inline\"\u003ecategory\u003c/span\u003e) {\n      result = result.\u003cspan class=\"hljs-title function_ inline\"\u003efilter\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eitem\u003c/span\u003e =\u0026gt;\u003c/span\u003e item.\u003cspan class=\"hljs-property inline\"\u003ecategory\u003c/span\u003e === filters.\u003cspan class=\"hljs-property inline\"\u003ecategory\u003c/span\u003e);\n    }\n\n    \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (filters.\u003cspan class=\"hljs-property inline\"\u003epriceRange\u003c/span\u003e) {\n      result = result.\u003cspan class=\"hljs-title function_ inline\"\u003efilter\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eitem\u003c/span\u003e =\u0026gt;\u003c/span\u003e\n        item.\u003cspan class=\"hljs-property inline\"\u003eprice\u003c/span\u003e \u0026gt;= filters.\u003cspan class=\"hljs-property inline\"\u003epriceRange\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003emin\u003c/span\u003e \u0026amp;\u0026amp;\n        item.\u003cspan class=\"hljs-property inline\"\u003eprice\u003c/span\u003e \u0026lt;= filters.\u003cspan class=\"hljs-property inline\"\u003epriceRange\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003emax\u003c/span\u003e\n      );\n    }\n\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e result;\n  }, [data, filters.\u003cspan class=\"hljs-property inline\"\u003esearch\u003c/span\u003e, filters.\u003cspan class=\"hljs-property inline\"\u003ecategory\u003c/span\u003e, filters.\u003cspan class=\"hljs-property inline\"\u003epriceRange\u003c/span\u003e]);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e statistics = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n      \u003cspan class=\"hljs-attr inline\"\u003ecount\u003c/span\u003e: filteredData.\u003cspan class=\"hljs-property inline\"\u003elength\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr inline\"\u003eaveragePrice\u003c/span\u003e: filteredData.\u003cspan class=\"hljs-property inline\"\u003elength\u003c/span\u003e\n        ? filteredData.\u003cspan class=\"hljs-title function_ inline\"\u003ereduce\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003esum, item\u003c/span\u003e) =\u0026gt;\u003c/span\u003e sum + item.\u003cspan class=\"hljs-property inline\"\u003eprice\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e) / filteredData.\u003cspan class=\"hljs-property inline\"\u003elength\u003c/span\u003e\n        : \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e\n    };\n  }, [filteredData]);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e { filteredData, statistics };\n}\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 使用自定义 Hook\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eProductCatalog\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ products }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [filters, setFilters] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e({\n    \u003cspan class=\"hljs-attr inline\"\u003esearch\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026#x27;\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr inline\"\u003ecategory\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026#x27;\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr inline\"\u003epriceRange\u003c/span\u003e: { \u003cspan class=\"hljs-attr inline\"\u003emin\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003emax\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e1000\u003c/span\u003e }\n  });\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e { filteredData, statistics } = \u003cspan class=\"hljs-title function_ inline\"\u003euseFilteredData\u003c/span\u003e(products, filters);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e找到 {statistics.count} 个产品\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e平均价格: ¥{statistics.averagePrice.toFixed(2)}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {/* 渲染产品列表 */}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"最佳实践\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#最佳实践\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 最佳实践\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e最佳实践\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003col class=\"list-decimal list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e识别昂贵计算\u003c/strong\u003e：只对真正昂贵的计算使用 useMemo\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e正确设置依赖\u003c/strong\u003e：包含计算中使用的所有变量\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e避免过度优化\u003c/strong\u003e：简单计算不需要记忆化\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e稳定的引用\u003c/strong\u003e：为子组件提供稳定的 props 引用\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e测量性能\u003c/strong\u003e：使用开发者工具验证优化效果\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"注意事项\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#注意事项\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 注意事项\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e注意事项\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e内存开销\u003c/strong\u003e：缓存值会占用额外内存\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e计算成本\u003c/strong\u003e：记忆化本身也有成本，确保收益大于成本\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e依赖比较\u003c/strong\u003e：使用浅比较，注意对象和数组的引用\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e调试困难\u003c/strong\u003e：过度使用可能使代码难以理解\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003ccode\u003euseMemo\u003c/code\u003e 是优化 React 应用性能的重要工具，但应该在合适的场景下使用，避免过度优化导致代码复杂性增加。\u003c/p\u003e\n"])</script><script>self.__next_f.push([1,"d:[\"$\",\"$L1d\",null,{\"htmlContent\":\"$1e\",\"frontMatter\":{\"title\":\"useMemo\",\"description\":\"React基础知识篇-useMemo\",\"date\":\"2025-06-22\",\"author\":\"MilkWind\",\"tags\":[\"React\",\"基础知识\",\"useMemo\",\"React Hook\"],\"references\":{}},\"readingTime\":\"14 min read\",\"category\":\"basic-knowledge\",\"tocItems\":[{\"id\":\"基本作用\",\"text\":\"基本作用\",\"level\":3},{\"id\":\"基本语法\",\"text\":\"基本语法\",\"level\":3},{\"id\":\"与普通计算的对比\",\"text\":\"与普通计算的对比\",\"level\":3},{\"id\":\"不使用-usememo（问题示例）\",\"text\":\"不使用 useMemo（问题示例）\",\"level\":4},{\"id\":\"使用-usememo（优化后）\",\"text\":\"使用 useMemo（优化后）\",\"level\":4},{\"id\":\"实际应用场景\",\"text\":\"实际应用场景\",\"level\":3},{\"id\":\"复杂数据处理\",\"text\":\"复杂数据处理\",\"level\":4},{\"id\":\"搜索和排序\",\"text\":\"搜索和排序\",\"level\":4},{\"id\":\"避免子组件重新渲染\",\"text\":\"避免子组件重新渲染\",\"level\":4},{\"id\":\"与-usecallback-的对比\",\"text\":\"与 useCallback 的对比\",\"level\":3},{\"id\":\"usememo-vs-usecallback\",\"text\":\"useMemo vs useCallback\",\"level\":4},{\"id\":\"与-reactmemo-的区别\",\"text\":\"与 React.memo 的区别\",\"level\":3},{\"id\":\"条件计算\",\"text\":\"条件计算\",\"level\":3},{\"id\":\"复杂对象的记忆化\",\"text\":\"复杂对象的记忆化\",\"level\":3},{\"id\":\"常见陷阱和解决方案\",\"text\":\"常见陷阱和解决方案\",\"level\":3},{\"id\":\"依赖数组不正确\",\"text\":\"依赖数组不正确\",\"level\":4},{\"id\":\"过度使用-usememo\",\"text\":\"过度使用 useMemo\",\"level\":4},{\"id\":\"引用类型的陷阱\",\"text\":\"引用类型的陷阱\",\"level\":4},{\"id\":\"性能测试示例\",\"text\":\"性能测试示例\",\"level\":3},{\"id\":\"自定义-hook-中的使用\",\"text\":\"自定义 Hook 中的使用\",\"level\":3},{\"id\":\"最佳实践\",\"text\":\"最佳实践\",\"level\":3},{\"id\":\"注意事项\",\"text\":\"注意事项\",\"level\":3}],\"translations\":{\"common\":{\"welcome\":\"欢迎\",\"loading\":\"加载中...\",\"error\":\"出现了一些问题\",\"retry\":\"重试\",\"theme\":\"主题\",\"language\":\"语言\",\"light\":\"浅色\",\"dark\":\"深色\"},\"navigation\":{\"home\":\"首页\",\"personal\":\"个人\",\"works\":\"作品\",\"contributions\":\"贡献\",\"documents\":\"文档\",\"about\":\"关于\",\"contact\":\"联系\"},\"personal\":{\"technicalSkills\":\"技术技能\",\"email\":\"邮箱\",\"github\":\"代码仓库\",\"resume\":\"简历\",\"codeRepository\":\"代码仓库\",\"loadingPersonalInfo\":\"加载个人信息中...\",\"loadingResume\":\"加载简历中...\",\"closeResume\":\"关闭简历\",\"emailCopied\":\"邮箱已复制到剪贴板！\",\"galaxyDefaultDescription\":\"精通全栈开发技术，具备跨平台架构能力，擅长AI技术整合与高性能系统优化\",\"skillGalaxy\":\"技能星系\",\"stirGalaxy\":\"搅动星系\",\"stirring\":\"搅动中...\",\"fullStackEngineer\":\"MilkWind - 全栈工程师\",\"professionalProfile\":\"关于我\"},\"documents\":{\"technicalDocuments\":\"技术文档\",\"description\":\"基本原理、代码拆分以及一些碎碎念。\",\"articles\":\"文章\",\"categories\":\"分类\",\"allCategories\":\"所有分类\",\"noArticlesFound\":\"未找到文章\",\"noArticlesAvailable\":\"中文暂无文章。\",\"noArticlesInCategory\":\"该分类下未找到文章。\",\"readMore\":\"阅读更多\",\"loadingDocuments\":\"加载文档中...\",\"backToDocuments\":\"← 返回文档\",\"documentNotFound\":\"文档未找到\",\"documentNotFoundDescription\":\"请求的文档无法找到。\",\"technicalInsights\":\"技术拆解\",\"untitledDocument\":\"无标题文档\",\"byAuthor\":\"作者：\",\"search\":\"搜索文章...\",\"searchByTags\":\"按标签筛选\",\"searching\":\"搜索中...\",\"noSearchResults\":\"没有找到符合搜索条件的文章\",\"clearSearch\":\"清除搜索\",\"selectedTags\":\"已选标签\",\"allTags\":\"所有标签\",\"searchInTitle\":\"在标题、描述和内容中搜索\",\"enterImmersiveMode\":\"沉浸阅读\",\"exitImmersiveMode\":\"退出沉浸模式\",\"immersiveReading\":\"沉浸阅读模式\",\"exploreContent\":\"按分类探索内容\",\"browseBy\":\"浏览方式\",\"exploreAll\":\"所有内容汇总\",\"categoryDescription\":\"该分类下的文章\",\"totalArticles\":\"文章\",\"totalCategories\":\"分类\",\"foundArticles\":\"找到文章\",\"categoriesWithResults\":\"有结果的分类\"},\"works\":{\"workCases\":\"作品案例\",\"projects\":\"作品集\",\"loadingProjects\":\"加载项目中...\",\"grid\":\"网格\",\"stack\":\"堆叠\",\"of\":\"共\",\"workCasesPageTitle\":\"作品案例页面\",\"pageWorkingCorrectly\":\"此页面运行正常！路由配置正确。\",\"try3DVersion\":\"尝试3D版本\",\"dragToScroll\":\"拖拽滚动\",\"dragToChange\":\"拖拽切换\",\"swipeCards\":\"切换卡片\",\"keyboardNav\":\"键盘导航\"},\"contributions\":{\"contributionCases\":\"开源项目\",\"contributions\":\"贡献\",\"loadingContributions\":\"加载贡献中...\",\"grid\":\"网格\",\"stack\":\"堆叠\",\"of\":\"共\",\"contributionCasesPageTitle\":\"贡献案例页面\",\"pageWorkingCorrectly\":\"此页面运行正常！路由配置正确。\",\"try3DVersion\":\"尝试3D版本\",\"dragToScroll\":\"拖拽滚动\",\"dragToChange\":\"拖拽切换\",\"swipeCards\":\"切换卡片\",\"keyboardNav\":\"键盘导航\"},\"contribution\":{\"contributionPreview\":\"贡献预览\",\"accessible\":\"可访问\",\"code\":\"代码\",\"maintenance\":\"维护\",\"enhancement\":\"增强\",\"documentation\":\"文档\",\"community\":\"社区\",\"moreItems\":\"更多\",\"technicalDetails\":\"技术详情\",\"technologies\":\"技术栈：\",\"contributionDetail\":\"贡献详情\",\"description\":\"描述：\",\"seeDetails\":\"查看详情\",\"github\":\"代码仓库\",\"viewContribution\":\"查看贡献\",\"viewCode\":\"查看代码\"},\"project\":{\"projectPreview\":\"项目预览\",\"accessible\":\"可访问\",\"tool\":\"工具\",\"plugin\":\"插件\",\"toy\":\"小玩意\",\"moreItems\":\"更多\",\"technicalDetails\":\"技术详情\",\"technologies\":\"技术栈：\",\"description\":\"描述：\",\"seeDetails\":\"查看详情\",\"github\":\"GitHub\",\"gitee\":\"Gitee\",\"viewLiveDemo\":\"查看演示\",\"viewCode\":\"查看代码\",\"access\":\"访问\",\"videos\":\"视频\",\"watchVideo\":\"观看视频\",\"hasVideo\":\"有视频\"},\"codeblock\":{\"copy\":\"复制\",\"copySuccess\":\"代码已复制到剪贴板！\",\"copyError\":\"复制代码失败\",\"copyTooltip\":\"复制代码\"},\"toc\":{\"contents\":\"目录\",\"autoScroll\":\"自动滚动到章节\",\"collapse\":\"折叠\",\"expand\":\"展开\"},\"loading\":{\"loading\":\"加载中\",\"preparingExperience\":\"准备体验中\"}},\"lang\":\"zh\",\"theme\":\"light\"}]\n"])</script><script>self.__next_f.push([1,"12:null\n"])</script><script>self.__next_f.push([1,"18:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n11:null\n"])</script><script>self.__next_f.push([1,"1c:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"useMemo | Interactive Portfolio\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"React基础知识篇-useMemo\"}],[\"$\",\"meta\",\"2\",{\"name\":\"author\",\"content\":\"Developer\"}],[\"$\",\"meta\",\"3\",{\"name\":\"keywords\",\"content\":\"portfolio,3D,interactive,web development,Three.js,Next.js\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:title\",\"content\":\"useMemo | Interactive Portfolio\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:description\",\"content\":\"React基础知识篇-useMemo\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"7\",{\"property\":\"article:published_time\",\"content\":\"2025-06-22\"}],[\"$\",\"meta\",\"8\",{\"property\":\"article:tag\",\"content\":\"React\"}],[\"$\",\"meta\",\"9\",{\"property\":\"article:tag\",\"content\":\"基础知识\"}],[\"$\",\"meta\",\"10\",{\"property\":\"article:tag\",\"content\":\"useMemo\"}],[\"$\",\"meta\",\"11\",{\"property\":\"article:tag\",\"content\":\"React Hook\"}],[\"$\",\"meta\",\"12\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"13\",{\"name\":\"twitter:title\",\"content\":\"useMemo | Interactive Portfolio\"}],[\"$\",\"meta\",\"14\",{\"name\":\"twitter:description\",\"content\":\"React基础知识篇-useMemo\"}],[\"$\",\"link\",\"15\",{\"rel\":\"icon\",\"href\":\"/MilkWind-Website/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"32x32\"}]],\"error\":null,\"digest\":\"$undefined\"}\n14:{\"metadata\":\"$1c:metadata\",\"error\":null,\"digest\":\"$undefined\"}\n"])</script></body></html>