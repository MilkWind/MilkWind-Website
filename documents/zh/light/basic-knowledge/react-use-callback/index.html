<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/f034c804622acb16.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/b226d7ef8e491b72.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/5eacd01f773eed7f.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-18c0f30037e967de.js"/><script src="/_next/static/chunks/4bd1b696-5119e10e90c1bd1b.js" async=""></script><script src="/_next/static/chunks/1684-be5e4efdb509cc75.js" async=""></script><script src="/_next/static/chunks/main-app-c5f95d71e93250dc.js" async=""></script><script src="/_next/static/chunks/46-72724587da45cdb8.js" async=""></script><script src="/_next/static/chunks/app/layout-af4a6e723c0ff668.js" async=""></script><script src="/_next/static/chunks/app/error-dda32be1d095a86c.js" async=""></script><script src="/_next/static/chunks/6874-fbe9a08eb79b991c.js" async=""></script><script src="/_next/static/chunks/app/not-found-9ff98b2ccf24cac7.js" async=""></script><script src="/_next/static/chunks/206-4f4cbf4d7156f437.js" async=""></script><script src="/_next/static/chunks/app/documents/layout-28408791defde09e.js" async=""></script><script src="/_next/static/chunks/2415-689c103fb3d2c28d.js" async=""></script><script src="/_next/static/chunks/8610-7bd3f91f3cf2a4d6.js" async=""></script><script src="/_next/static/chunks/app/documents/loading-1fa3f98b6e5a8e78.js" async=""></script><script src="/_next/static/chunks/app/loading-68f227fb49b3ac8c.js" async=""></script><script src="/_next/static/chunks/b498d07c-095637f0f10883c6.js" async=""></script><script src="/_next/static/chunks/9554-b714f9de28e85d30.js" async=""></script><script src="/_next/static/chunks/app/documents/%5B...slug%5D/page-8f3efa7e6c6c5377.js" async=""></script><title>useCallback | Interactive Portfolio</title><meta name="description" content="React基础知识篇-useCallback"/><meta name="author" content="Developer"/><meta name="keywords" content="portfolio,3D,interactive,web development,Three.js,Next.js"/><meta property="og:title" content="useCallback | Interactive Portfolio"/><meta property="og:description" content="React基础知识篇-useCallback"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2025-06-22"/><meta property="article:tag" content="React"/><meta property="article:tag" content="基础知识"/><meta property="article:tag" content="useCallback"/><meta property="article:tag" content="React Hook"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="useCallback | Interactive Portfolio"/><meta name="twitter:description" content="React基础知识篇-useCallback"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="32x32"/><script>document.querySelectorAll('body link[rel="icon"], body link[rel="apple-touch-icon"]').forEach(el => document.head.appendChild(el))</script><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__variable_d4c88d __variable_7b4e2b __variable_c3272d font-sans antialiased min-h-screen bg-background text-foreground"><div class="fixed inset-0 w-full h-full overflow-hidden pointer-events-none z-0" style="background:linear-gradient(135deg, hsl(210, 80%, 60%), hsl(180, 40%, 50%))"></div><div class="fixed top-20 right-5 z-50"><div class="w-16 h-16 rounded-full backdrop-blur-md border animate-pulse bg-surface/60 border-surface/40"></div></div><!--$--><style>
:root {
  --bprogress-color: #0066cc;
  --bprogress-height: 4px;
  --bprogress-spinner-size: 18px;
  --bprogress-spinner-animation-duration: 400ms;
  --bprogress-spinner-border-size: 2px;
  --bprogress-box-shadow: 0 0 10px #0066cc, 0 0 5px #0066cc;
  --bprogress-z-index: 99999;
  --bprogress-spinner-top: 15px;
  --bprogress-spinner-bottom: auto;
  --bprogress-spinner-right: 15px;
  --bprogress-spinner-left: auto;
}

.bprogress {
  width: 0;
  height: 0;
  pointer-events: none;
  z-index: var(--bprogress-z-index);
}

.bprogress .bar {
  background: var(--bprogress-color);
  position: fixed;
  z-index: var(--bprogress-z-index);
  top: 0;
  left: 0;
  width: 100%;
  height: var(--bprogress-height);
}

/* Fancy blur effect */
.bprogress .peg {
  display: block;
  position: absolute;
  right: 0;
  width: 100px;
  height: 100%;
  box-shadow: var(--bprogress-box-shadow);
  opacity: 1.0;
  transform: rotate(3deg) translate(0px, -4px);
}

/* Remove these to get rid of the spinner */
.bprogress .spinner {
  display: block;
  position: fixed;
  z-index: var(--bprogress-z-index);
  top: var(--bprogress-spinner-top);
  bottom: var(--bprogress-spinner-bottom);
  right: var(--bprogress-spinner-right);
  left: var(--bprogress-spinner-left);
}

.bprogress .spinner-icon {
  width: var(--bprogress-spinner-size);
  height: var(--bprogress-spinner-size);
  box-sizing: border-box;
  border: solid var(--bprogress-spinner-border-size) transparent;
  border-top-color: var(--bprogress-color);
  border-left-color: var(--bprogress-color);
  border-radius: 50%;
  -webkit-animation: bprogress-spinner var(--bprogress-spinner-animation-duration) linear infinite;
  animation: bprogress-spinner var(--bprogress-spinner-animation-duration) linear infinite;
}

.bprogress-custom-parent {
  overflow: hidden;
  position: relative;
}

.bprogress-custom-parent .bprogress .spinner,
.bprogress-custom-parent .bprogress .bar {
  position: absolute;
}

.bprogress .indeterminate {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--bprogress-height);
  overflow: hidden;
}

.bprogress .indeterminate .inc,
.bprogress .indeterminate .dec {
  position: absolute;
  top: 0;
  height: 100%;
  background-color: var(--bprogress-color);
}

.bprogress .indeterminate .inc {
  animation: bprogress-indeterminate-increase 2s infinite;
}

.bprogress .indeterminate .dec {
  animation: bprogress-indeterminate-decrease 2s 0.5s infinite;
}

@-webkit-keyframes bprogress-spinner {
  0%   { -webkit-transform: rotate(0deg); transform: rotate(0deg); }
  100% { -webkit-transform: rotate(360deg); transform: rotate(360deg); }
}

@keyframes bprogress-spinner {
  0%   { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes bprogress-indeterminate-increase {
  from { left: -5%; width: 5%; }
  to { left: 130%; width: 100%; }
}

@keyframes bprogress-indeterminate-decrease {
  from { left: -80%; width: 80%; }
  to { left: 110%; width: 10%; }
}
</style><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--><!--$--><div class="relative z-30 min-h-screen bg-background "><div class="container mx-auto px-4 py-8 max-w-4xl"><div class="mb-8"><a class="inline-flex items-center text-primary hover:text-primary/80 transition-colors" href="/documents/">documents.backToDocuments</a></div><header class="mb-12"><div class="flex items-center gap-4 mb-4 text-sm text-foreground/60"><span class="px-3 py-1 bg-primary/20 text-primary rounded-full capitalize">basic knowledge</span><span>9 min read</span></div><h1 class="font-bold mb-4 bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent text-4xl md:text-5xl">useCallback</h1><p class="text-xl text-foreground/80 max-w-3xl">React基础知识篇-useCallback</p><div class="flex flex-wrap gap-2 mt-6"><span class="px-3 py-1 text-sm bg-accent/20 text-accent rounded-full">React</span><span class="px-3 py-1 text-sm bg-accent/20 text-accent rounded-full">基础知识</span><span class="px-3 py-1 text-sm bg-accent/20 text-accent rounded-full">useCallback</span><span class="px-3 py-1 text-sm bg-accent/20 text-accent rounded-full">React Hook</span></div></header><article class="prose prose-headings:mt-8 prose-headings:font-semibold prose-headings:text-foreground prose-h1:text-5xl prose-h2:text-4xl prose-h3:text-3xl prose-h4:text-2xl prose-h5:text-xl prose-h6:text-lg max-w-none "><div class="prose-pre:p-4 prose-pre:bg-surface w-full"><p class="text-base leading-7 mb-4 text-foreground"><code>useCallback</code> 是 React 提供的性能优化 Hook，用于缓存函数定义，避免子组件因为函数引用变化而不必要的重新渲染。它返回一个记忆化的回调函数，只有当依赖项改变时才会更新。</p>
<h3 id="基本作用" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#基本作用" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 基本作用">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">基本作用</strong>
        </h3>
<p class="text-base leading-7 mb-4 text-foreground"><code>useCallback</code> 的主要作用是：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">缓存函数定义，避免每次渲染时创建新的函数实例</li>
<li class="text-foreground leading-relaxed">与 <code>React.memo</code> 配合使用，优化子组件性能</li>
<li class="text-foreground leading-relaxed">在依赖项不变的情况下，返回相同的函数引用</li>
</ul>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="import%20React%2C%20%7B%20useCallback%2C%20useState%20%7D%20from%20'react'%3B%0Afunction%20MyComponent()%20%7B%0Aconst%20%5Bcount%2C%20setCount%5D%20%3D%20useState(0)%3B%0A%2F%2F%20%E4%BD%BF%E7%94%A8%20useCallback%20%E7%BC%93%E5%AD%98%E5%87%BD%E6%95%B0%0Aconst%20handleClick%20%3D%20useCallback(()%20%3D%3E%20%7B%0Aconsole.log('%E6%8C%89%E9%92%AE%E8%A2%AB%E7%82%B9%E5%87%BB')%3B%0A%7D%2C%20%5B%5D)%3B%20%2F%2F%20%E7%A9%BA%E4%BE%9D%E8%B5%96%E6%95%B0%E7%BB%84%EF%BC%8C%E5%87%BD%E6%95%B0%E6%B0%B8%E4%B8%8D%E6%9B%B4%E6%96%B0%0Areturn%20(%0Adiv%3E%0Ap%3E%E8%AE%A1%E6%95%B0%3A%20%7Bcount%7Dp%3E%0Abutton%20onClick%3D%7BhandleClick%7D%3E%E7%82%B9%E5%87%BBbutton%3E%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">import</span> <span class="hljs-title class_ inline">React</span>, { useCallback, useState } <span class="hljs-keyword inline">from</span> <span class="hljs-string inline">&#x27;react&#x27;</span>;

<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">MyComponent</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> [count, setCount] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-number inline">0</span>);
  
  <span class="hljs-comment inline">// 使用 useCallback 缓存函数</span>
  <span class="hljs-keyword inline">const</span> handleClick = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;按钮被点击&#x27;</span>);
  }, []); <span class="hljs-comment inline">// 空依赖数组，函数永不更新</span>

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>计数: {count}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{handleClick}</span>&gt;</span>点击<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="基本语法" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#基本语法" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 基本语法">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">基本语法</strong>
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="const%20memoizedCallback%20%3D%20useCallback(%0A()%20%3D%3E%20%7B%0A%2F%2F%20%E5%87%BD%E6%95%B0%E4%BD%93%0AdoSomething(a%2C%20b)%3B%0A%7D%2C%0A%5Ba%2C%20b%5D%20%2F%2F%20%E4%BE%9D%E8%B5%96%E6%95%B0%E7%BB%84%0A)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">const</span> memoizedCallback = <span class="hljs-title function_ inline">useCallback</span>(
  <span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-comment inline">// 函数体</span>
    <span class="hljs-title function_ inline">doSomething</span>(a, b);
  },
  [a, b] <span class="hljs-comment inline">// 依赖数组</span>
);
</code></pre>
            </div>
        
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">第一个参数</strong>：要缓存的函数</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">第二个参数</strong>：依赖数组，当数组中的值改变时，函数会重新创建</li>
</ul>
<h3 id="与普通函数的对比" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#与普通函数的对比" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 与普通函数的对比">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">与普通函数的对比</strong>
        </h3>
<h4 id="不使用-usecallback（问题示例）" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#不使用-usecallback（问题示例）" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 不使用 useCallback（问题示例）">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">不使用 useCallback（问题示例）</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20Parent()%20%7B%0Aconst%20%5Bcount%2C%20setCount%5D%20%3D%20useState(0)%3B%0Aconst%20%5Bname%2C%20setName%5D%20%3D%20useState('%E5%BC%A0%E4%B8%89')%3B%0A%2F%2F%20%E6%AF%8F%E6%AC%A1%E6%B8%B2%E6%9F%93%E9%83%BD%E4%BC%9A%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84%E5%87%BD%E6%95%B0%0Aconst%20handleNameChange%20%3D%20(newName)%20%3D%3E%20%7B%0AsetName(newName)%3B%0A%7D%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E8%AE%A1%E6%95%B0%3A%20%7Bcount%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20setCount(count%20%2B%201)%7D%3E%E5%A2%9E%E5%8A%A0button%3E%0A%7B%2F*%20%E5%8D%B3%E4%BD%BF%20name%20%E6%B2%A1%E5%8F%98%EF%BC%8CChild%20%E4%B9%9F%E4%BC%9A%E9%87%8D%E6%96%B0%E6%B8%B2%E6%9F%93%20*%2F%7D%0AChild%20onNameChange%3D%7BhandleNameChange%7D%20%2F%3E%0Adiv%3E%0A)%3B%0A%7D%0Aconst%20Child%20%3D%20React.memo((%7B%20onNameChange%20%7D)%20%3D%3E%20%7B%0Aconsole.log('Child%20%E7%BB%84%E4%BB%B6%E9%87%8D%E6%96%B0%E6%B8%B2%E6%9F%93')%3B%0Areturn%20button%20onClick%3D%7B()%20%3D%3E%20onNameChange('%E6%9D%8E%E5%9B%9B')%7D%3E%E6%94%B9%E5%90%8Dbutton%3E%3B%0A%7D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">Parent</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> [count, setCount] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-number inline">0</span>);
  <span class="hljs-keyword inline">const</span> [name, setName] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-string inline">&#x27;张三&#x27;</span>);

  <span class="hljs-comment inline">// 每次渲染都会创建新的函数</span>
  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">handleNameChange</span> = (<span class="hljs-params inline">newName</span>) =&gt; {
    <span class="hljs-title function_ inline">setName</span>(newName);
  };

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>计数: {count}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> setCount(count + 1)}&gt;增加<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
      {/* 即使 name 没变，Child 也会重新渲染 */}
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">Child</span> <span class="hljs-attr inline">onNameChange</span>=<span class="hljs-string inline">{handleNameChange}</span> /&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword inline">const</span> <span class="hljs-title class_ inline">Child</span> = <span class="hljs-title class_ inline">React</span>.<span class="hljs-title function_ inline">memo</span>(<span class="hljs-function inline">(<span class="hljs-params inline">{ onNameChange }</span>) =&gt;</span> {
  <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;Child 组件重新渲染&#x27;</span>);
  <span class="hljs-keyword inline">return</span> <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> onNameChange(&#x27;李四&#x27;)}&gt;改名<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span></span>;
});
</code></pre>
            </div>
        
<h4 id="使用-usecallback（优化后）" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#使用-usecallback（优化后）" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 使用 useCallback（优化后）">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">使用 useCallback（优化后）</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20Parent()%20%7B%0Aconst%20%5Bcount%2C%20setCount%5D%20%3D%20useState(0)%3B%0Aconst%20%5Bname%2C%20setName%5D%20%3D%20useState('%E5%BC%A0%E4%B8%89')%3B%0A%2F%2F%20%E4%BD%BF%E7%94%A8%20useCallback%20%E7%BC%93%E5%AD%98%E5%87%BD%E6%95%B0%0Aconst%20handleNameChange%20%3D%20useCallback((newName)%20%3D%3E%20%7B%0AsetName(newName)%3B%0A%7D%2C%20%5B%5D)%3B%20%2F%2F%20name%20%E6%9B%B4%E6%96%B0%E9%80%9A%E8%BF%87%E5%8F%82%E6%95%B0%E4%BC%A0%E5%85%A5%EF%BC%8C%E4%B8%8D%E9%9C%80%E8%A6%81%E4%BE%9D%E8%B5%96%0Areturn%20(%0Adiv%3E%0Ap%3E%E8%AE%A1%E6%95%B0%3A%20%7Bcount%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20setCount(count%20%2B%201)%7D%3E%E5%A2%9E%E5%8A%A0button%3E%0A%7B%2F*%20count%20%E5%8F%98%E5%8C%96%E6%97%B6%EF%BC%8CChild%20%E4%B8%8D%E4%BC%9A%E9%87%8D%E6%96%B0%E6%B8%B2%E6%9F%93%20*%2F%7D%0AChild%20onNameChange%3D%7BhandleNameChange%7D%20%2F%3E%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">Parent</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> [count, setCount] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-number inline">0</span>);
  <span class="hljs-keyword inline">const</span> [name, setName] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-string inline">&#x27;张三&#x27;</span>);

  <span class="hljs-comment inline">// 使用 useCallback 缓存函数</span>
  <span class="hljs-keyword inline">const</span> handleNameChange = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">(<span class="hljs-params inline">newName</span>) =&gt;</span> {
    <span class="hljs-title function_ inline">setName</span>(newName);
  }, []); <span class="hljs-comment inline">// name 更新通过参数传入，不需要依赖</span>

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>计数: {count}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> setCount(count + 1)}&gt;增加<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
      {/* count 变化时，Child 不会重新渲染 */}
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">Child</span> <span class="hljs-attr inline">onNameChange</span>=<span class="hljs-string inline">{handleNameChange}</span> /&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="依赖数组的使用" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#依赖数组的使用" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 依赖数组的使用">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">依赖数组的使用</strong>
        </h3>
<h4 id="空依赖数组" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#空依赖数组" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 空依赖数组">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">空依赖数组</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="%2F%2F%20%E5%87%BD%E6%95%B0%E6%B0%B8%E8%BF%9C%E4%B8%8D%E4%BC%9A%E9%87%8D%E6%96%B0%E5%88%9B%E5%BB%BA%0Aconst%20handleClick%20%3D%20useCallback(()%20%3D%3E%20%7B%0Aconsole.log('%E8%BF%99%E4%B8%AA%E5%87%BD%E6%95%B0%E6%B0%B8%E8%BF%9C%E4%B8%8D%E5%8F%98')%3B%0A%7D%2C%20%5B%5D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-comment inline">// 函数永远不会重新创建</span>
<span class="hljs-keyword inline">const</span> handleClick = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">() =&gt;</span> {
  <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;这个函数永远不变&#x27;</span>);
}, []);
</code></pre>
            </div>
        
<h4 id="有依赖的情况" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#有依赖的情况" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 有依赖的情况">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">有依赖的情况</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20SearchComponent()%20%7B%0Aconst%20%5Bquery%2C%20setQuery%5D%20%3D%20useState('')%3B%0Aconst%20%5Bfilter%2C%20setFilter%5D%20%3D%20useState('all')%3B%0A%2F%2F%20%E5%BD%93%20query%20%E6%88%96%20filter%20%E6%94%B9%E5%8F%98%E6%97%B6%EF%BC%8C%E5%87%BD%E6%95%B0%E4%BC%9A%E9%87%8D%E6%96%B0%E5%88%9B%E5%BB%BA%0Aconst%20handleSearch%20%3D%20useCallback(()%20%3D%3E%20%7B%0Aconsole.log(%60%E6%90%9C%E7%B4%A2%3A%20%24%7Bquery%7D%2C%20%E8%BF%87%E6%BB%A4%3A%20%24%7Bfilter%7D%60)%3B%0A%7D%2C%20%5Bquery%2C%20filter%5D)%3B%0Areturn%20(%0Adiv%3E%0Ainput%20value%3D%7Bquery%7D%20onChange%3D%7B(e)%20%3D%3E%20setQuery(e.target.value)%7D%20%2F%3E%0ASearchButton%20onSearch%3D%7BhandleSearch%7D%20%2F%3E%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">SearchComponent</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> [query, setQuery] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-string inline">&#x27;&#x27;</span>);
  <span class="hljs-keyword inline">const</span> [filter, setFilter] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-string inline">&#x27;all&#x27;</span>);

  <span class="hljs-comment inline">// 当 query 或 filter 改变时，函数会重新创建</span>
  <span class="hljs-keyword inline">const</span> handleSearch = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">`搜索: <span class="hljs-subst inline">${query}</span>, 过滤: <span class="hljs-subst inline">${filter}</span>`</span>);
  }, [query, filter]);

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">input</span> <span class="hljs-attr inline">value</span>=<span class="hljs-string inline">{query}</span> <span class="hljs-attr inline">onChange</span>=<span class="hljs-string inline">{(e)</span> =&gt;</span> setQuery(e.target.value)} /&gt;
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">SearchButton</span> <span class="hljs-attr inline">onSearch</span>=<span class="hljs-string inline">{handleSearch}</span> /&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="实际应用场景" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#实际应用场景" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 实际应用场景">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">实际应用场景</strong>
        </h3>
<h4 id="优化列表渲染" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#优化列表渲染" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 优化列表渲染">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">优化列表渲染</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20TodoList()%20%7B%0Aconst%20%5Btodos%2C%20setTodos%5D%20%3D%20useState(%5B%5D)%3B%0A%2F%2F%20%E5%88%A0%E9%99%A4%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%87%BD%E6%95%B0%0Aconst%20handleDelete%20%3D%20useCallback((id)%20%3D%3E%20%7B%0AsetTodos(prev%20%3D%3E%20prev.filter(todo%20%3D%3E%20todo.id%20!%3D%3D%20id))%3B%0A%7D%2C%20%5B%5D)%3B%20%2F%2F%20%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0%E5%BC%8F%E6%9B%B4%E6%96%B0%EF%BC%8C%E4%B8%8D%E9%9C%80%E8%A6%81%E4%BE%9D%E8%B5%96%20todos%0A%2F%2F%20%E5%88%87%E6%8D%A2%E5%AE%8C%E6%88%90%E7%8A%B6%E6%80%81%0Aconst%20handleToggle%20%3D%20useCallback((id)%20%3D%3E%20%7B%0AsetTodos(prev%20%3D%3E%0Aprev.map(todo%20%3D%3E%0Atodo.id%20%3D%3D%3D%20id%20%3F%20%7B%20...todo%2C%20done%3A%20!todo.done%20%7D%20%3A%20todo%0A)%0A)%3B%0A%7D%2C%20%5B%5D)%3B%0Areturn%20(%0Adiv%3E%0A%7Btodos.map(todo%20%3D%3E%20(%0ATodoItem%0Akey%3D%7Btodo.id%7D%0Atodo%3D%7Btodo%7D%0AonDelete%3D%7BhandleDelete%7D%0AonToggle%3D%7BhandleToggle%7D%0A%2F%3E%0A))%7D%0Adiv%3E%0A)%3B%0A%7D%0Aconst%20TodoItem%20%3D%20React.memo((%7B%20todo%2C%20onDelete%2C%20onToggle%20%7D)%20%3D%3E%20%7B%0Aconsole.log(%60TodoItem%20%24%7Btodo.id%7D%20%E6%B8%B2%E6%9F%93%60)%3B%0Areturn%20(%0Adiv%3E%0Aspan%3E%7Btodo.text%7Dspan%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20onToggle(todo.id)%7D%3E%0A%7Btodo.done%20%3F%20'%E6%9C%AA%E5%AE%8C%E6%88%90'%20%3A%20'%E5%AE%8C%E6%88%90'%7D%0Abutton%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20onDelete(todo.id)%7D%3E%E5%88%A0%E9%99%A4button%3E%0Adiv%3E%0A)%3B%0A%7D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">TodoList</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> [todos, setTodos] = <span class="hljs-title function_ inline">useState</span>([]);

  <span class="hljs-comment inline">// 删除项目的函数</span>
  <span class="hljs-keyword inline">const</span> handleDelete = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">(<span class="hljs-params inline">id</span>) =&gt;</span> {
    <span class="hljs-title function_ inline">setTodos</span>(<span class="hljs-function inline"><span class="hljs-params inline">prev</span> =&gt;</span> prev.<span class="hljs-title function_ inline">filter</span>(<span class="hljs-function inline"><span class="hljs-params inline">todo</span> =&gt;</span> todo.<span class="hljs-property inline">id</span> !== id));
  }, []); <span class="hljs-comment inline">// 使用函数式更新，不需要依赖 todos</span>

  <span class="hljs-comment inline">// 切换完成状态</span>
  <span class="hljs-keyword inline">const</span> handleToggle = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">(<span class="hljs-params inline">id</span>) =&gt;</span> {
    <span class="hljs-title function_ inline">setTodos</span>(<span class="hljs-function inline"><span class="hljs-params inline">prev</span> =&gt;</span> 
      prev.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline"><span class="hljs-params inline">todo</span> =&gt;</span> 
        todo.<span class="hljs-property inline">id</span> === id ? { ...todo, <span class="hljs-attr inline">done</span>: !todo.<span class="hljs-property inline">done</span> } : todo
      )
    );
  }, []);

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      {todos.map(todo =&gt; (
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">TodoItem</span>
          <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{todo.id}</span>
          <span class="hljs-attr inline">todo</span>=<span class="hljs-string inline">{todo}</span>
          <span class="hljs-attr inline">onDelete</span>=<span class="hljs-string inline">{handleDelete}</span>
          <span class="hljs-attr inline">onToggle</span>=<span class="hljs-string inline">{handleToggle}</span>
        /&gt;</span>
      ))}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword inline">const</span> <span class="hljs-title class_ inline">TodoItem</span> = <span class="hljs-title class_ inline">React</span>.<span class="hljs-title function_ inline">memo</span>(<span class="hljs-function inline">(<span class="hljs-params inline">{ todo, onDelete, onToggle }</span>) =&gt;</span> {
  <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">`TodoItem <span class="hljs-subst inline">${todo.id}</span> 渲染`</span>);
  
  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">span</span>&gt;</span>{todo.text}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">span</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> onToggle(todo.id)}&gt;
        {todo.done ? &#x27;未完成&#x27; : &#x27;完成&#x27;}
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> onDelete(todo.id)}&gt;删除<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
});
</code></pre>
            </div>
        
<h4 id="表单处理优化" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#表单处理优化" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 表单处理优化">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">表单处理优化</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20UserForm()%20%7B%0Aconst%20%5BformData%2C%20setFormData%5D%20%3D%20useState(%7B%0Aname%3A%20''%2C%0Aemail%3A%20''%2C%0Aage%3A%20''%0A%7D)%3B%0A%2F%2F%20%E9%80%9A%E7%94%A8%E7%9A%84%E5%AD%97%E6%AE%B5%E6%9B%B4%E6%96%B0%E5%87%BD%E6%95%B0%0Aconst%20handleFieldChange%20%3D%20useCallback((field)%20%3D%3E%20%7B%0Areturn%20(value)%20%3D%3E%20%7B%0AsetFormData(prev%20%3D%3E%20(%7B%0A...prev%2C%0A%5Bfield%5D%3A%20value%0A%7D))%3B%0A%7D%3B%0A%7D%2C%20%5B%5D)%3B%0A%2F%2F%20%E6%8F%90%E4%BA%A4%E5%87%BD%E6%95%B0%0Aconst%20handleSubmit%20%3D%20useCallback(()%20%3D%3E%20%7B%0Aconsole.log('%E6%8F%90%E4%BA%A4%E8%A1%A8%E5%8D%95%3A'%2C%20formData)%3B%0A%7D%2C%20%5BformData%5D)%3B%0Areturn%20(%0Aform%3E%0AFormField%0Alabel%3D%22%E5%A7%93%E5%90%8D%22%0Avalue%3D%7BformData.name%7D%0AonChange%3D%7BhandleFieldChange('name')%7D%0A%2F%3E%0AFormField%0Alabel%3D%22%E9%82%AE%E7%AE%B1%22%0Avalue%3D%7BformData.email%7D%0AonChange%3D%7BhandleFieldChange('email')%7D%0A%2F%3E%0Abutton%20type%3D%22button%22%20onClick%3D%7BhandleSubmit%7D%3E%0A%E6%8F%90%E4%BA%A4%0Abutton%3E%0Aform%3E%0A)%3B%0A%7D%0Aconst%20FormField%20%3D%20React.memo((%7B%20label%2C%20value%2C%20onChange%20%7D)%20%3D%3E%20%7B%0Aconsole.log(%60FormField%20%24%7Blabel%7D%20%E6%B8%B2%E6%9F%93%60)%3B%0Areturn%20(%0Adiv%3E%0Alabel%3E%7Blabel%7Dlabel%3E%0Ainput%0Avalue%3D%7Bvalue%7D%0AonChange%3D%7B(e)%20%3D%3E%20onChange(e.target.value)%7D%0A%2F%3E%0Adiv%3E%0A)%3B%0A%7D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">UserForm</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> [formData, setFormData] = <span class="hljs-title function_ inline">useState</span>({
    <span class="hljs-attr inline">name</span>: <span class="hljs-string inline">&#x27;&#x27;</span>,
    <span class="hljs-attr inline">email</span>: <span class="hljs-string inline">&#x27;&#x27;</span>,
    <span class="hljs-attr inline">age</span>: <span class="hljs-string inline">&#x27;&#x27;</span>
  });

  <span class="hljs-comment inline">// 通用的字段更新函数</span>
  <span class="hljs-keyword inline">const</span> handleFieldChange = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">(<span class="hljs-params inline">field</span>) =&gt;</span> {
    <span class="hljs-keyword inline">return</span> <span class="hljs-function inline">(<span class="hljs-params inline">value</span>) =&gt;</span> {
      <span class="hljs-title function_ inline">setFormData</span>(<span class="hljs-function inline"><span class="hljs-params inline">prev</span> =&gt;</span> ({
        ...prev,
        [field]: value
      }));
    };
  }, []);

  <span class="hljs-comment inline">// 提交函数</span>
  <span class="hljs-keyword inline">const</span> handleSubmit = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;提交表单:&#x27;</span>, formData);
  }, [formData]);

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">form</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">FormField</span>
        <span class="hljs-attr inline">label</span>=<span class="hljs-string inline">&quot;姓名&quot;</span>
        <span class="hljs-attr inline">value</span>=<span class="hljs-string inline">{formData.name}</span>
        <span class="hljs-attr inline">onChange</span>=<span class="hljs-string inline">{handleFieldChange(</span>&#x27;<span class="hljs-attr inline">name</span>&#x27;)}
      /&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">FormField</span>
        <span class="hljs-attr inline">label</span>=<span class="hljs-string inline">&quot;邮箱&quot;</span>
        <span class="hljs-attr inline">value</span>=<span class="hljs-string inline">{formData.email}</span>
        <span class="hljs-attr inline">onChange</span>=<span class="hljs-string inline">{handleFieldChange(</span>&#x27;<span class="hljs-attr inline">email</span>&#x27;)}
      /&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">type</span>=<span class="hljs-string inline">&quot;button&quot;</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{handleSubmit}</span>&gt;</span>
        提交
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">form</span>&gt;</span></span>
  );
}

<span class="hljs-keyword inline">const</span> <span class="hljs-title class_ inline">FormField</span> = <span class="hljs-title class_ inline">React</span>.<span class="hljs-title function_ inline">memo</span>(<span class="hljs-function inline">(<span class="hljs-params inline">{ label, value, onChange }</span>) =&gt;</span> {
  <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">`FormField <span class="hljs-subst inline">${label}</span> 渲染`</span>);
  
  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">label</span>&gt;</span>{label}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">label</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">input</span>
        <span class="hljs-attr inline">value</span>=<span class="hljs-string inline">{value}</span>
        <span class="hljs-attr inline">onChange</span>=<span class="hljs-string inline">{(e)</span> =&gt;</span> onChange(e.target.value)}
      /&gt;
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
});
</code></pre>
            </div>
        
<h3 id="与其他-hook-的配合使用" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#与其他-hook-的配合使用" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 与其他 Hook 的配合使用">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">与其他 Hook 的配合使用</strong>
        </h3>
<h4 id="与-usememo-的区别" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#与-usememo-的区别" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 与 useMemo 的区别">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">与 useMemo 的区别</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20MyComponent(%7B%20items%20%7D)%20%7B%0A%2F%2F%20useMemo%20%E7%BC%93%E5%AD%98%E8%AE%A1%E7%AE%97%E7%BB%93%E6%9E%9C%0Aconst%20expensiveValue%20%3D%20useMemo(()%20%3D%3E%20%7B%0Areturn%20items.reduce((sum%2C%20item)%20%3D%3E%20sum%20%2B%20item.value%2C%200)%3B%0A%7D%2C%20%5Bitems%5D)%3B%0A%2F%2F%20useCallback%20%E7%BC%93%E5%AD%98%E5%87%BD%E6%95%B0%E5%AE%9A%E4%B9%89%0Aconst%20handleSort%20%3D%20useCallback(()%20%3D%3E%20%7B%0Areturn%20items.sort((a%2C%20b)%20%3D%3E%20a.value%20-%20b.value)%3B%0A%7D%2C%20%5Bitems%5D)%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E6%80%BB%E8%AE%A1%3A%20%7BexpensiveValue%7Dp%3E%0Abutton%20onClick%3D%7BhandleSort%7D%3E%E6%8E%92%E5%BA%8Fbutton%3E%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">MyComponent</span>(<span class="hljs-params inline">{ items }</span>) {
  <span class="hljs-comment inline">// useMemo 缓存计算结果</span>
  <span class="hljs-keyword inline">const</span> expensiveValue = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-keyword inline">return</span> items.<span class="hljs-title function_ inline">reduce</span>(<span class="hljs-function inline">(<span class="hljs-params inline">sum, item</span>) =&gt;</span> sum + item.<span class="hljs-property inline">value</span>, <span class="hljs-number inline">0</span>);
  }, [items]);

  <span class="hljs-comment inline">// useCallback 缓存函数定义</span>
  <span class="hljs-keyword inline">const</span> handleSort = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-keyword inline">return</span> items.<span class="hljs-title function_ inline">sort</span>(<span class="hljs-function inline">(<span class="hljs-params inline">a, b</span>) =&gt;</span> a.<span class="hljs-property inline">value</span> - b.<span class="hljs-property inline">value</span>);
  }, [items]);

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>总计: {expensiveValue}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{handleSort}</span>&gt;</span>排序<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h4 id="与-useeffect-结合" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#与-useeffect-结合" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 与 useEffect 结合">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">与 useEffect 结合</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20DataFetcher(%7B%20userId%20%7D)%20%7B%0Aconst%20%5Bdata%2C%20setData%5D%20%3D%20useState(null)%3B%0A%2F%2F%20%E7%BC%93%E5%AD%98%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E7%9A%84%E5%87%BD%E6%95%B0%0Aconst%20fetchData%20%3D%20useCallback(async%20()%20%3D%3E%20%7B%0Atry%20%7B%0Aconst%20response%20%3D%20await%20fetch(%60%2Fapi%2Fusers%2F%24%7BuserId%7D%60)%3B%0Aconst%20userData%20%3D%20await%20response.json()%3B%0AsetData(userData)%3B%0A%7D%20catch%20(error)%20%7B%0Aconsole.error('%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E5%A4%B1%E8%B4%A5%3A'%2C%20error)%3B%0A%7D%0A%7D%2C%20%5BuserId%5D)%3B%0AuseEffect(()%20%3D%3E%20%7B%0AfetchData()%3B%0A%7D%2C%20%5BfetchData%5D)%3B%20%2F%2F%20fetchData%20%E4%BD%9C%E4%B8%BA%E4%BE%9D%E8%B5%96%0Areturn%20div%3E%7Bdata%20%3F%20data.name%20%3A%20'%E5%8A%A0%E8%BD%BD%E4%B8%AD...'%7Ddiv%3E%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">DataFetcher</span>(<span class="hljs-params inline">{ userId }</span>) {
  <span class="hljs-keyword inline">const</span> [data, setData] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-literal inline">null</span>);

  <span class="hljs-comment inline">// 缓存获取数据的函数</span>
  <span class="hljs-keyword inline">const</span> fetchData = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-title function_ inline">async</span> () =&gt; {
    <span class="hljs-keyword inline">try</span> {
      <span class="hljs-keyword inline">const</span> response = <span class="hljs-keyword inline">await</span> <span class="hljs-title function_ inline">fetch</span>(<span class="hljs-string inline">`/api/users/<span class="hljs-subst inline">${userId}</span>`</span>);
      <span class="hljs-keyword inline">const</span> userData = <span class="hljs-keyword inline">await</span> response.<span class="hljs-title function_ inline">json</span>();
      <span class="hljs-title function_ inline">setData</span>(userData);
    } <span class="hljs-keyword inline">catch</span> (error) {
      <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">error</span>(<span class="hljs-string inline">&#x27;获取数据失败:&#x27;</span>, error);
    }
  }, [userId]);

  <span class="hljs-title function_ inline">useEffect</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-title function_ inline">fetchData</span>();
  }, [fetchData]); <span class="hljs-comment inline">// fetchData 作为依赖</span>

  <span class="hljs-keyword inline">return</span> <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>{data ? data.name : &#x27;加载中...&#x27;}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>;
}
</code></pre>
            </div>
        
<h3 id="常见陷阱和解决方案" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#常见陷阱和解决方案" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 常见陷阱和解决方案">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">常见陷阱和解决方案</strong>
        </h3>
<h4 id="忘记添加依赖项" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#忘记添加依赖项" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 忘记添加依赖项">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">忘记添加依赖项</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20BadExample()%20%7B%0Aconst%20%5Bcount%2C%20setCount%5D%20%3D%20useState(0)%3B%0A%2F%2F%20%E9%94%99%E8%AF%AF%EF%BC%9A%E7%BC%BA%E5%B0%91%20count%20%E4%BE%9D%E8%B5%96%0Aconst%20handleClick%20%3D%20useCallback(()%20%3D%3E%20%7B%0Aconsole.log(count)%3B%20%2F%2F%20%E8%BF%99%E9%87%8C%E6%80%BB%E6%98%AF%E6%89%93%E5%8D%B0%E5%88%9D%E5%A7%8B%E5%80%BC%200%0A%7D%2C%20%5B%5D)%3B%20%2F%2F%20%E5%BA%94%E8%AF%A5%E6%98%AF%20%5Bcount%5D%0Areturn%20button%20onClick%3D%7BhandleClick%7D%3E%E7%82%B9%E5%87%BBbutton%3E%3B%0A%7D%0Afunction%20GoodExample()%20%7B%0Aconst%20%5Bcount%2C%20setCount%5D%20%3D%20useState(0)%3B%0A%2F%2F%20%E6%AD%A3%E7%A1%AE%EF%BC%9A%E5%8C%85%E5%90%AB%E6%89%80%E6%9C%89%E4%BE%9D%E8%B5%96%0Aconst%20handleClick%20%3D%20useCallback(()%20%3D%3E%20%7B%0Aconsole.log(count)%3B%0A%7D%2C%20%5Bcount%5D)%3B%0Areturn%20button%20onClick%3D%7BhandleClick%7D%3E%E7%82%B9%E5%87%BBbutton%3E%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">BadExample</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> [count, setCount] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-number inline">0</span>);

  <span class="hljs-comment inline">// 错误：缺少 count 依赖</span>
  <span class="hljs-keyword inline">const</span> handleClick = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(count); <span class="hljs-comment inline">// 这里总是打印初始值 0</span>
  }, []); <span class="hljs-comment inline">// 应该是 [count]</span>

  <span class="hljs-keyword inline">return</span> <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{handleClick}</span>&gt;</span>点击<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span></span>;
}

<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">GoodExample</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> [count, setCount] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-number inline">0</span>);

  <span class="hljs-comment inline">// 正确：包含所有依赖</span>
  <span class="hljs-keyword inline">const</span> handleClick = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(count);
  }, [count]);

  <span class="hljs-keyword inline">return</span> <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{handleClick}</span>&gt;</span>点击<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span></span>;
}
</code></pre>
            </div>
        
<h4 id="避免过度优化" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#避免过度优化" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 避免过度优化">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">避免过度优化</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="%2F%2F%20%E4%B8%8D%E5%BF%85%E8%A6%81%E7%9A%84%E4%BC%98%E5%8C%96%0Afunction%20OverOptimized()%20%7B%0Aconst%20%5Bcount%2C%20setCount%5D%20%3D%20useState(0)%3B%0A%2F%2F%20%E8%BF%99%E4%B8%AA%E7%BB%84%E4%BB%B6%E5%BE%88%E7%AE%80%E5%8D%95%EF%BC%8C%E4%B8%8D%E9%9C%80%E8%A6%81%20useCallback%0Aconst%20handleClick%20%3D%20useCallback(()%20%3D%3E%20%7B%0AsetCount(prev%20%3D%3E%20prev%20%2B%201)%3B%0A%7D%2C%20%5B%5D)%3B%0Areturn%20button%20onClick%3D%7BhandleClick%7D%3E%7Bcount%7Dbutton%3E%3B%0A%7D%0A%2F%2F%20%E7%AE%80%E5%8D%95%E7%9B%B4%E6%8E%A5%E7%9A%84%E5%86%99%E6%B3%95%0Afunction%20Simple()%20%7B%0Aconst%20%5Bcount%2C%20setCount%5D%20%3D%20useState(0)%3B%0Areturn%20(%0Abutton%20onClick%3D%7B()%20%3D%3E%20setCount(prev%20%3D%3E%20prev%20%2B%201)%7D%3E%0A%7Bcount%7D%0Abutton%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-comment inline">// 不必要的优化</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">OverOptimized</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> [count, setCount] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-number inline">0</span>);

  <span class="hljs-comment inline">// 这个组件很简单，不需要 useCallback</span>
  <span class="hljs-keyword inline">const</span> handleClick = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-title function_ inline">setCount</span>(<span class="hljs-function inline"><span class="hljs-params inline">prev</span> =&gt;</span> prev + <span class="hljs-number inline">1</span>);
  }, []);

  <span class="hljs-keyword inline">return</span> <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{handleClick}</span>&gt;</span>{count}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span></span>;
}

<span class="hljs-comment inline">// 简单直接的写法</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">Simple</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> [count, setCount] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-number inline">0</span>);

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> setCount(prev =&gt; prev + 1)}&gt;
      {count}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="性能测试示例" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#性能测试示例" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 性能测试示例">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">性能测试示例</strong>
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="import%20React%2C%20%7B%20useCallback%2C%20useState%2C%20useRef%20%7D%20from%20'react'%3B%0Afunction%20PerformanceTest()%20%7B%0Aconst%20%5Bcount%2C%20setCount%5D%20%3D%20useState(0)%3B%0Aconst%20renderCountRef%20%3D%20useRef(0)%3B%0A%2F%2F%20%E6%9C%89%20useCallback%20%E7%9A%84%E7%89%88%E6%9C%AC%0Aconst%20optimizedHandler%20%3D%20useCallback(()%20%3D%3E%20%7B%0Aconsole.log('%E4%BC%98%E5%8C%96%E7%89%88%E6%9C%AC%E8%A2%AB%E8%B0%83%E7%94%A8')%3B%0A%7D%2C%20%5B%5D)%3B%0A%2F%2F%20%E6%B2%A1%E6%9C%89%20useCallback%20%E7%9A%84%E7%89%88%E6%9C%AC%0Aconst%20unoptimizedHandler%20%3D%20()%20%3D%3E%20%7B%0Aconsole.log('%E6%9C%AA%E4%BC%98%E5%8C%96%E7%89%88%E6%9C%AC%E8%A2%AB%E8%B0%83%E7%94%A8')%3B%0A%7D%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E7%88%B6%E7%BB%84%E4%BB%B6%E6%B8%B2%E6%9F%93%E6%AC%A1%E6%95%B0%3A%20%7B%2B%2BrenderCountRef.current%7Dp%3E%0Ap%3E%E8%AE%A1%E6%95%B0%3A%20%7Bcount%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20setCount(count%20%2B%201)%7D%3E%E5%A2%9E%E5%8A%A0%E8%AE%A1%E6%95%B0button%3E%0AOptimizedChild%20handler%3D%7BoptimizedHandler%7D%20%2F%3E%0AUnoptimizedChild%20handler%3D%7BunoptimizedHandler%7D%20%2F%3E%0Adiv%3E%0A)%3B%0A%7D%0Aconst%20OptimizedChild%20%3D%20React.memo((%7B%20handler%20%7D)%20%3D%3E%20%7B%0Aconst%20renderCount%20%3D%20useRef(0)%3B%0Aconsole.log('OptimizedChild%20%E6%B8%B2%E6%9F%93%E6%AC%A1%E6%95%B0%3A'%2C%20%2B%2BrenderCount.current)%3B%0Areturn%20button%20onClick%3D%7Bhandler%7D%3E%E4%BC%98%E5%8C%96%E7%89%88%E6%9C%ACbutton%3E%3B%0A%7D)%3B%0Aconst%20UnoptimizedChild%20%3D%20React.memo((%7B%20handler%20%7D)%20%3D%3E%20%7B%0Aconst%20renderCount%20%3D%20useRef(0)%3B%0Aconsole.log('UnoptimizedChild%20%E6%B8%B2%E6%9F%93%E6%AC%A1%E6%95%B0%3A'%2C%20%2B%2BrenderCount.current)%3B%0Areturn%20button%20onClick%3D%7Bhandler%7D%3E%E6%9C%AA%E4%BC%98%E5%8C%96%E7%89%88%E6%9C%ACbutton%3E%3B%0A%7D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">import</span> <span class="hljs-title class_ inline">React</span>, { useCallback, useState, useRef } <span class="hljs-keyword inline">from</span> <span class="hljs-string inline">&#x27;react&#x27;</span>;

<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">PerformanceTest</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> [count, setCount] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-number inline">0</span>);
  <span class="hljs-keyword inline">const</span> renderCountRef = <span class="hljs-title function_ inline">useRef</span>(<span class="hljs-number inline">0</span>);

  <span class="hljs-comment inline">// 有 useCallback 的版本</span>
  <span class="hljs-keyword inline">const</span> optimizedHandler = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;优化版本被调用&#x27;</span>);
  }, []);

  <span class="hljs-comment inline">// 没有 useCallback 的版本</span>
  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">unoptimizedHandler</span> = (<span class="hljs-params inline"></span>) =&gt; {
    <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;未优化版本被调用&#x27;</span>);
  };

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>父组件渲染次数: {++renderCountRef.current}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>计数: {count}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> setCount(count + 1)}&gt;增加计数<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
      
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">OptimizedChild</span> <span class="hljs-attr inline">handler</span>=<span class="hljs-string inline">{optimizedHandler}</span> /&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">UnoptimizedChild</span> <span class="hljs-attr inline">handler</span>=<span class="hljs-string inline">{unoptimizedHandler}</span> /&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword inline">const</span> <span class="hljs-title class_ inline">OptimizedChild</span> = <span class="hljs-title class_ inline">React</span>.<span class="hljs-title function_ inline">memo</span>(<span class="hljs-function inline">(<span class="hljs-params inline">{ handler }</span>) =&gt;</span> {
  <span class="hljs-keyword inline">const</span> renderCount = <span class="hljs-title function_ inline">useRef</span>(<span class="hljs-number inline">0</span>);
  <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;OptimizedChild 渲染次数:&#x27;</span>, ++renderCount.<span class="hljs-property inline">current</span>);
  
  <span class="hljs-keyword inline">return</span> <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{handler}</span>&gt;</span>优化版本<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span></span>;
});

<span class="hljs-keyword inline">const</span> <span class="hljs-title class_ inline">UnoptimizedChild</span> = <span class="hljs-title class_ inline">React</span>.<span class="hljs-title function_ inline">memo</span>(<span class="hljs-function inline">(<span class="hljs-params inline">{ handler }</span>) =&gt;</span> {
  <span class="hljs-keyword inline">const</span> renderCount = <span class="hljs-title function_ inline">useRef</span>(<span class="hljs-number inline">0</span>);
  <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;UnoptimizedChild 渲染次数:&#x27;</span>, ++renderCount.<span class="hljs-property inline">current</span>);
  
  <span class="hljs-keyword inline">return</span> <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{handler}</span>&gt;</span>未优化版本<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span></span>;
});
</code></pre>
            </div>
        
<h3 id="自定义-hook-中的使用" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#自定义-hook-中的使用" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 自定义 Hook 中的使用">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">自定义 Hook 中的使用</strong>
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20useAPI(url)%20%7B%0Aconst%20%5Bdata%2C%20setData%5D%20%3D%20useState(null)%3B%0Aconst%20%5Bloading%2C%20setLoading%5D%20%3D%20useState(false)%3B%0Aconst%20fetchData%20%3D%20useCallback(async%20()%20%3D%3E%20%7B%0AsetLoading(true)%3B%0Atry%20%7B%0Aconst%20response%20%3D%20await%20fetch(url)%3B%0Aconst%20result%20%3D%20await%20response.json()%3B%0AsetData(result)%3B%0A%7D%20catch%20(error)%20%7B%0Aconsole.error('API%20%E8%B0%83%E7%94%A8%E5%A4%B1%E8%B4%A5%3A'%2C%20error)%3B%0A%7D%20finally%20%7B%0AsetLoading(false)%3B%0A%7D%0A%7D%2C%20%5Burl%5D)%3B%0Aconst%20refresh%20%3D%20useCallback(()%20%3D%3E%20%7B%0AfetchData()%3B%0A%7D%2C%20%5BfetchData%5D)%3B%0AuseEffect(()%20%3D%3E%20%7B%0AfetchData()%3B%0A%7D%2C%20%5BfetchData%5D)%3B%0Areturn%20%7B%20data%2C%20loading%2C%20refresh%20%7D%3B%0A%7D%0A%2F%2F%20%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89%20Hook%0Afunction%20UserProfile(%7B%20userId%20%7D)%20%7B%0Aconst%20%7B%20data%2C%20loading%2C%20refresh%20%7D%20%3D%20useAPI(%60%2Fapi%2Fusers%2F%24%7BuserId%7D%60)%3B%0Aif%20(loading)%20return%20div%3E%E5%8A%A0%E8%BD%BD%E4%B8%AD...div%3E%3B%0Areturn%20(%0Adiv%3E%0Ah1%3E%7Bdata%3F.name%7Dh1%3E%0Abutton%20onClick%3D%7Brefresh%7D%3E%E5%88%B7%E6%96%B0button%3E%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">useAPI</span>(<span class="hljs-params inline">url</span>) {
  <span class="hljs-keyword inline">const</span> [data, setData] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-literal inline">null</span>);
  <span class="hljs-keyword inline">const</span> [loading, setLoading] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-literal inline">false</span>);

  <span class="hljs-keyword inline">const</span> fetchData = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-title function_ inline">async</span> () =&gt; {
    <span class="hljs-title function_ inline">setLoading</span>(<span class="hljs-literal inline">true</span>);
    <span class="hljs-keyword inline">try</span> {
      <span class="hljs-keyword inline">const</span> response = <span class="hljs-keyword inline">await</span> <span class="hljs-title function_ inline">fetch</span>(url);
      <span class="hljs-keyword inline">const</span> result = <span class="hljs-keyword inline">await</span> response.<span class="hljs-title function_ inline">json</span>();
      <span class="hljs-title function_ inline">setData</span>(result);
    } <span class="hljs-keyword inline">catch</span> (error) {
      <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">error</span>(<span class="hljs-string inline">&#x27;API 调用失败:&#x27;</span>, error);
    } <span class="hljs-keyword inline">finally</span> {
      <span class="hljs-title function_ inline">setLoading</span>(<span class="hljs-literal inline">false</span>);
    }
  }, [url]);

  <span class="hljs-keyword inline">const</span> refresh = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-title function_ inline">fetchData</span>();
  }, [fetchData]);

  <span class="hljs-title function_ inline">useEffect</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-title function_ inline">fetchData</span>();
  }, [fetchData]);

  <span class="hljs-keyword inline">return</span> { data, loading, refresh };
}

<span class="hljs-comment inline">// 使用自定义 Hook</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">UserProfile</span>(<span class="hljs-params inline">{ userId }</span>) {
  <span class="hljs-keyword inline">const</span> { data, loading, refresh } = <span class="hljs-title function_ inline">useAPI</span>(<span class="hljs-string inline">`/api/users/<span class="hljs-subst inline">${userId}</span>`</span>);

  <span class="hljs-keyword inline">if</span> (loading) <span class="hljs-keyword inline">return</span> <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>加载中...<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>;

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">h1</span>&gt;</span>{data?.name}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">h1</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{refresh}</span>&gt;</span>刷新<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="最佳实践" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#最佳实践" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 最佳实践">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">最佳实践</strong>
        </h3>
<ol class="list-decimal list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">与 React.memo 配合使用</strong>：useCallback 的主要价值在于防止子组件不必要的重新渲染</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">正确设置依赖项</strong>：包含回调函数中使用的所有变量</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">避免过度优化</strong>：不是所有函数都需要用 useCallback 包装</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">使用函数式更新</strong>：减少对状态的依赖，提高函数的稳定性</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">考虑替代方案</strong>：有时重构组件结构比使用 useCallback 更好</li>
</ol>
<h3 id="注意事项" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#注意事项" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 注意事项">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">注意事项</strong>
        </h3>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">内存开销</strong>：缓存函数会占用额外内存</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">依赖追踪</strong>：确保 ESLint 规则 <code>exhaustive-deps</code> 开启</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">浅比较</strong>：依赖数组使用浅比较，注意对象和数组的引用</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">调试困难</strong>：过度使用可能使代码难以理解和调试</li>
</ul>
<p class="text-base leading-7 mb-4 text-foreground"><code>useCallback</code> 是 React 性能优化的重要工具，但应该在合适的场景下使用，避免过度优化导致代码复杂性增加。</p>
</div></article><footer class="mt-16 pt-8 border-t border-foreground/20"><div class="flex items-center justify-between"><a class="inline-flex items-center px-4 py-2 bg-primary text-foreground rounded-lg hover:bg-primary/90 transition-colors" href="/documents/">documents.backToDocuments</a><div class="text-sm text-foreground/60"><span>documents.byAuthor<!-- --> <!-- -->MilkWind</span></div></div></footer></div></div><!--$--><!--/$--><!--$--><!--/$--><!--/$--><!--/$--><script src="/_next/static/chunks/webpack-18c0f30037e967de.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[38735,[\"46\",\"static/chunks/46-72724587da45cdb8.js\",\"7177\",\"static/chunks/app/layout-af4a6e723c0ff668.js\"],\"default\"]\n3:I[19945,[\"46\",\"static/chunks/46-72724587da45cdb8.js\",\"7177\",\"static/chunks/app/layout-af4a6e723c0ff668.js\"],\"default\"]\n4:I[65337,[\"46\",\"static/chunks/46-72724587da45cdb8.js\",\"7177\",\"static/chunks/app/layout-af4a6e723c0ff668.js\"],\"default\"]\n5:I[96190,[\"46\",\"static/chunks/46-72724587da45cdb8.js\",\"7177\",\"static/chunks/app/layout-af4a6e723c0ff668.js\"],\"ClientProviders\"]\n6:I[87555,[],\"\"]\n7:I[51901,[\"8039\",\"static/chunks/app/error-dda32be1d095a86c.js\"],\"default\"]\n8:I[31295,[],\"\"]\n9:I[6874,[\"6874\",\"static/chunks/6874-fbe9a08eb79b991c.js\",\"4345\",\"static/chunks/app/not-found-9ff98b2ccf24cac7.js\"],\"\"]\na:I[94970,[],\"ClientSegmentRoot\"]\nb:I[44065,[\"206\",\"static/chunks/206-4f4cbf4d7156f437.js\",\"3092\",\"static/chunks/app/documents/layout-28408791defde09e.js\"],\"default\"]\ne:I[59665,[],\"MetadataBoundary\"]\n10:I[59665,[],\"OutletBoundary\"]\n13:I[74911,[],\"AsyncMetadataOutlet\"]\n15:I[39460,[\"2415\",\"static/chunks/2415-689c103fb3d2c28d.js\",\"8610\",\"static/chunks/8610-7bd3f91f3cf2a4d6.js\",\"5650\",\"static/chunks/app/documents/loading-1fa3f98b6e5a8e78.js\"],\"default\"]\n16:I[88610,[\"2415\",\"static/chunks/2415-689c103fb3d2c28d.js\",\"8610\",\"static/chunks/8610-7bd3f91f3cf2a4d6.js\",\"4209\",\"static/chunks/app/loading-68f227fb49b3ac8c.js\"],\"default\"]\n17:I[59665,[],\"ViewportBoundary\"]\n19:I[26614,[],\"\"]\n:HL[\"/_next/static/css/f034c804622acb16.css\",\"style\"]\n:HL[\"/_next/static/css/b226d7ef8e491b72.css\",\"style\"]\n:HL[\"/_next/static/css/5eacd01f773eed7f.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"VBTZvHNp6tlBlJCFUsE6O\",\"p\":\"\",\"c\":[\"\",\"documents\",\"zh\",\"light\",\"basic-knowledge\",\"react-use-callback\",\"\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"documents\",{\"children\":[[\"slug\",\"zh/light/basic-knowledge/react-use-callback\",\"c\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/f034c804622acb16.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/b226d7ef8e491b72.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"__variable_d4c88d __variable_7b4e2b __variable_c3272d font-sans antialiased min-h-screen bg-background text-foreground\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"$L2\",null,{}],[\"$\",\"$L3\",null,{}],[\"$\",\"$L4\",null,{}],[\"$\",\"$L5\",null,{\"children\":[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$7\",\"errorStyles\":[],\"errorScripts\":[],\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"div\",null,{\"className\":\"z-10 relative min-h-screen flex items-center justify-center bg-background p-8\",\"children\":[\"$\",\"div\",null,{\"className\":\"text-center max-w-md\",\"children\":[[\"$\",\"div\",null,{\"className\":\"text-8xl font-bold text-primary mb-4\",\"children\":\"404\"}],[\"$\",\"h2\",null,{\"className\":\"text-2xl font-bold text-foreground mb-4\",\"children\":\"Page Not Found\"}],[\"$\",\"p\",null,{\"className\":\"text-foreground/70 mb-8\",\"children\":\"The page you're looking for doesn't exist or has been moved to a different location.\"}],[\"$\",\"div\",null,{\"className\":\"flex flex-col sm:flex-row gap-4 justify-center\",\"children\":[[\"$\",\"$L9\",null,{\"href\":\"/\",\"className\":\"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/80 transition-colors\",\"children\":\"Go Home\"}],[\"$\",\"$L9\",null,{\"href\":\"/works\",\"className\":\"px-6 py-2 border border-primary text-primary rounded-lg hover:bg-primary/10 transition-colors\",\"children\":\"View Works\"}]]}],[\"$\",\"div\",null,{\"className\":\"absolute inset-0 overflow-hidden pointer-events-none -z-10\",\"children\":[[\"$\",\"div\",null,{\"className\":\"absolute top-1/4 left-1/4 w-2 h-2 bg-primary/20 rounded-full animate-float\"}],[\"$\",\"div\",null,{\"className\":\"absolute top-3/4 right-1/4 w-3 h-3 bg-accent/20 rounded-full animate-float\",\"style\":{\"animationDelay\":\"1s\"}}],[\"$\",\"div\",null,{\"className\":\"absolute bottom-1/4 left-1/3 w-1 h-1 bg-secondary/20 rounded-full animate-float\",\"style\":{\"animationDelay\":\"2s\"}}]]}]]}]}],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}]}]]}],{\"children\":[\"documents\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$La\",null,{\"Component\":\"$b\",\"slots\":{\"children\":[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]},\"params\":{},\"promise\":\"$@c\"}]]}],{\"children\":[[\"slug\",\"zh/light/basic-knowledge/react-use-callback\",\"c\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$Ld\",[\"$\",\"$Le\",null,{\"children\":\"$Lf\"}],[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/5eacd01f773eed7f.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$L10\",null,{\"children\":[\"$L11\",\"$L12\",[\"$\",\"$L13\",null,{\"promise\":\"$@14\"}]]}]]}],{},null,false]},null,false]},[[\"$\",\"$L15\",\"l\",{}],[],[]],false]},[[\"$\",\"$L16\",\"l\",{}],[],[]],false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"SaG5opqT5fPAV7VOST0gL\",{\"children\":[[\"$\",\"$L17\",null,{\"children\":\"$L18\"}],null]}],null]}],false]],\"m\":\"$undefined\",\"G\":[\"$19\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"1a:\"$Sreact.suspense\"\n1b:I[74911,[],\"AsyncMetadata\"]\nc:{}\nf:[\"$\",\"$1a\",null,{\"fallback\":null,\"children\":[\"$\",\"$L1b\",null,{\"promise\":\"$@1c\"}]}]\n"])</script><script>self.__next_f.push([1,"1d:I[57340,[\"5584\",\"static/chunks/b498d07c-095637f0f10883c6.js\",\"2415\",\"static/chunks/2415-689c103fb3d2c28d.js\",\"6874\",\"static/chunks/6874-fbe9a08eb79b991c.js\",\"9554\",\"static/chunks/9554-b714f9de28e85d30.js\",\"1873\",\"static/chunks/app/documents/%5B...slug%5D/page-8f3efa7e6c6c5377.js\"],\"DocumentPageClient\"]\n1e:T17be8,"])</script><script>self.__next_f.push([1,"\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003ccode\u003euseCallback\u003c/code\u003e 是 React 提供的性能优化 Hook，用于缓存函数定义，避免子组件因为函数引用变化而不必要的重新渲染。它返回一个记忆化的回调函数，只有当依赖项改变时才会更新。\u003c/p\u003e\n\u003ch3 id=\"基本作用\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#基本作用\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 基本作用\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e基本作用\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003ccode\u003euseCallback\u003c/code\u003e 的主要作用是：\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e缓存函数定义，避免每次渲染时创建新的函数实例\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e与 \u003ccode\u003eReact.memo\u003c/code\u003e 配合使用，优化子组件性能\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e在依赖项不变的情况下，返回相同的函数引用\u003c/li\u003e\n\u003c/ul\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"import%20React%2C%20%7B%20useCallback%2C%20useState%20%7D%20from%20'react'%3B%0Afunction%20MyComponent()%20%7B%0Aconst%20%5Bcount%2C%20setCount%5D%20%3D%20useState(0)%3B%0A%2F%2F%20%E4%BD%BF%E7%94%A8%20useCallback%20%E7%BC%93%E5%AD%98%E5%87%BD%E6%95%B0%0Aconst%20handleClick%20%3D%20useCallback(()%20%3D%3E%20%7B%0Aconsole.log('%E6%8C%89%E9%92%AE%E8%A2%AB%E7%82%B9%E5%87%BB')%3B%0A%7D%2C%20%5B%5D)%3B%20%2F%2F%20%E7%A9%BA%E4%BE%9D%E8%B5%96%E6%95%B0%E7%BB%84%EF%BC%8C%E5%87%BD%E6%95%B0%E6%B0%B8%E4%B8%8D%E6%9B%B4%E6%96%B0%0Areturn%20(%0Adiv%3E%0Ap%3E%E8%AE%A1%E6%95%B0%3A%20%7Bcount%7Dp%3E%0Abutton%20onClick%3D%7BhandleClick%7D%3E%E7%82%B9%E5%87%BBbutton%3E%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eReact\u003c/span\u003e, { useCallback, useState } \u003cspan class=\"hljs-keyword inline\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;react\u0026#x27;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eMyComponent\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [count, setCount] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e);\n  \n  \u003cspan class=\"hljs-comment inline\"\u003e// 使用 useCallback 缓存函数\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e handleClick = \u003cspan class=\"hljs-title function_ inline\"\u003euseCallback\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;按钮被点击\u0026#x27;\u003c/span\u003e);\n  }, []); \u003cspan class=\"hljs-comment inline\"\u003e// 空依赖数组，函数永不更新\u003c/span\u003e\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e计数: {count}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{handleClick}\u003c/span\u003e\u0026gt;\u003c/span\u003e点击\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"基本语法\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#基本语法\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 基本语法\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e基本语法\u003c/strong\u003e\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"const%20memoizedCallback%20%3D%20useCallback(%0A()%20%3D%3E%20%7B%0A%2F%2F%20%E5%87%BD%E6%95%B0%E4%BD%93%0AdoSomething(a%2C%20b)%3B%0A%7D%2C%0A%5Ba%2C%20b%5D%20%2F%2F%20%E4%BE%9D%E8%B5%96%E6%95%B0%E7%BB%84%0A)%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e memoizedCallback = \u003cspan class=\"hljs-title function_ inline\"\u003euseCallback\u003c/span\u003e(\n  \u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment inline\"\u003e// 函数体\u003c/span\u003e\n    \u003cspan class=\"hljs-title function_ inline\"\u003edoSomething\u003c/span\u003e(a, b);\n  },\n  [a, b] \u003cspan class=\"hljs-comment inline\"\u003e// 依赖数组\u003c/span\u003e\n);\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e第一个参数\u003c/strong\u003e：要缓存的函数\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e第二个参数\u003c/strong\u003e：依赖数组，当数组中的值改变时，函数会重新创建\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"与普通函数的对比\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#与普通函数的对比\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 与普通函数的对比\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e与普通函数的对比\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003ch4 id=\"不使用-usecallback（问题示例）\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#不使用-usecallback（问题示例）\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 不使用 useCallback（问题示例）\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e不使用 useCallback（问题示例）\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20Parent()%20%7B%0Aconst%20%5Bcount%2C%20setCount%5D%20%3D%20useState(0)%3B%0Aconst%20%5Bname%2C%20setName%5D%20%3D%20useState('%E5%BC%A0%E4%B8%89')%3B%0A%2F%2F%20%E6%AF%8F%E6%AC%A1%E6%B8%B2%E6%9F%93%E9%83%BD%E4%BC%9A%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84%E5%87%BD%E6%95%B0%0Aconst%20handleNameChange%20%3D%20(newName)%20%3D%3E%20%7B%0AsetName(newName)%3B%0A%7D%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E8%AE%A1%E6%95%B0%3A%20%7Bcount%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20setCount(count%20%2B%201)%7D%3E%E5%A2%9E%E5%8A%A0button%3E%0A%7B%2F*%20%E5%8D%B3%E4%BD%BF%20name%20%E6%B2%A1%E5%8F%98%EF%BC%8CChild%20%E4%B9%9F%E4%BC%9A%E9%87%8D%E6%96%B0%E6%B8%B2%E6%9F%93%20*%2F%7D%0AChild%20onNameChange%3D%7BhandleNameChange%7D%20%2F%3E%0Adiv%3E%0A)%3B%0A%7D%0Aconst%20Child%20%3D%20React.memo((%7B%20onNameChange%20%7D)%20%3D%3E%20%7B%0Aconsole.log('Child%20%E7%BB%84%E4%BB%B6%E9%87%8D%E6%96%B0%E6%B8%B2%E6%9F%93')%3B%0Areturn%20button%20onClick%3D%7B()%20%3D%3E%20onNameChange('%E6%9D%8E%E5%9B%9B')%7D%3E%E6%94%B9%E5%90%8Dbutton%3E%3B%0A%7D)%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eParent\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [count, setCount] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [name, setName] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;张三\u0026#x27;\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 每次渲染都会创建新的函数\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003ehandleNameChange\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003enewName\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-title function_ inline\"\u003esetName\u003c/span\u003e(newName);\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e计数: {count}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e setCount(count + 1)}\u0026gt;增加\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {/* 即使 name 没变，Child 也会重新渲染 */}\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eChild\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonNameChange\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{handleNameChange}\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eChild\u003c/span\u003e = \u003cspan class=\"hljs-title class_ inline\"\u003eReact\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003ememo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ onNameChange }\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Child 组件重新渲染\u0026#x27;\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e onNameChange(\u0026#x27;李四\u0026#x27;)}\u0026gt;改名\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e;\n});\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch4 id=\"使用-usecallback（优化后）\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#使用-usecallback（优化后）\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 使用 useCallback（优化后）\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e使用 useCallback（优化后）\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20Parent()%20%7B%0Aconst%20%5Bcount%2C%20setCount%5D%20%3D%20useState(0)%3B%0Aconst%20%5Bname%2C%20setName%5D%20%3D%20useState('%E5%BC%A0%E4%B8%89')%3B%0A%2F%2F%20%E4%BD%BF%E7%94%A8%20useCallback%20%E7%BC%93%E5%AD%98%E5%87%BD%E6%95%B0%0Aconst%20handleNameChange%20%3D%20useCallback((newName)%20%3D%3E%20%7B%0AsetName(newName)%3B%0A%7D%2C%20%5B%5D)%3B%20%2F%2F%20name%20%E6%9B%B4%E6%96%B0%E9%80%9A%E8%BF%87%E5%8F%82%E6%95%B0%E4%BC%A0%E5%85%A5%EF%BC%8C%E4%B8%8D%E9%9C%80%E8%A6%81%E4%BE%9D%E8%B5%96%0Areturn%20(%0Adiv%3E%0Ap%3E%E8%AE%A1%E6%95%B0%3A%20%7Bcount%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20setCount(count%20%2B%201)%7D%3E%E5%A2%9E%E5%8A%A0button%3E%0A%7B%2F*%20count%20%E5%8F%98%E5%8C%96%E6%97%B6%EF%BC%8CChild%20%E4%B8%8D%E4%BC%9A%E9%87%8D%E6%96%B0%E6%B8%B2%E6%9F%93%20*%2F%7D%0AChild%20onNameChange%3D%7BhandleNameChange%7D%20%2F%3E%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eParent\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [count, setCount] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [name, setName] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;张三\u0026#x27;\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 使用 useCallback 缓存函数\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e handleNameChange = \u003cspan class=\"hljs-title function_ inline\"\u003euseCallback\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003enewName\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-title function_ inline\"\u003esetName\u003c/span\u003e(newName);\n  }, []); \u003cspan class=\"hljs-comment inline\"\u003e// name 更新通过参数传入，不需要依赖\u003c/span\u003e\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e计数: {count}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e setCount(count + 1)}\u0026gt;增加\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {/* count 变化时，Child 不会重新渲染 */}\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eChild\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonNameChange\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{handleNameChange}\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"依赖数组的使用\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#依赖数组的使用\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 依赖数组的使用\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e依赖数组的使用\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003ch4 id=\"空依赖数组\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#空依赖数组\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 空依赖数组\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e空依赖数组\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"%2F%2F%20%E5%87%BD%E6%95%B0%E6%B0%B8%E8%BF%9C%E4%B8%8D%E4%BC%9A%E9%87%8D%E6%96%B0%E5%88%9B%E5%BB%BA%0Aconst%20handleClick%20%3D%20useCallback(()%20%3D%3E%20%7B%0Aconsole.log('%E8%BF%99%E4%B8%AA%E5%87%BD%E6%95%B0%E6%B0%B8%E8%BF%9C%E4%B8%8D%E5%8F%98')%3B%0A%7D%2C%20%5B%5D)%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// 函数永远不会重新创建\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e handleClick = \u003cspan class=\"hljs-title function_ inline\"\u003euseCallback\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;这个函数永远不变\u0026#x27;\u003c/span\u003e);\n}, []);\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch4 id=\"有依赖的情况\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#有依赖的情况\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 有依赖的情况\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e有依赖的情况\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20SearchComponent()%20%7B%0Aconst%20%5Bquery%2C%20setQuery%5D%20%3D%20useState('')%3B%0Aconst%20%5Bfilter%2C%20setFilter%5D%20%3D%20useState('all')%3B%0A%2F%2F%20%E5%BD%93%20query%20%E6%88%96%20filter%20%E6%94%B9%E5%8F%98%E6%97%B6%EF%BC%8C%E5%87%BD%E6%95%B0%E4%BC%9A%E9%87%8D%E6%96%B0%E5%88%9B%E5%BB%BA%0Aconst%20handleSearch%20%3D%20useCallback(()%20%3D%3E%20%7B%0Aconsole.log(%60%E6%90%9C%E7%B4%A2%3A%20%24%7Bquery%7D%2C%20%E8%BF%87%E6%BB%A4%3A%20%24%7Bfilter%7D%60)%3B%0A%7D%2C%20%5Bquery%2C%20filter%5D)%3B%0Areturn%20(%0Adiv%3E%0Ainput%20value%3D%7Bquery%7D%20onChange%3D%7B(e)%20%3D%3E%20setQuery(e.target.value)%7D%20%2F%3E%0ASearchButton%20onSearch%3D%7BhandleSearch%7D%20%2F%3E%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eSearchComponent\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [query, setQuery] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026#x27;\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [filter, setFilter] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;all\u0026#x27;\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 当 query 或 filter 改变时，函数会重新创建\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e handleSearch = \u003cspan class=\"hljs-title function_ inline\"\u003euseCallback\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e`搜索: \u003cspan class=\"hljs-subst inline\"\u003e${query}\u003c/span\u003e, 过滤: \u003cspan class=\"hljs-subst inline\"\u003e${filter}\u003c/span\u003e`\u003c/span\u003e);\n  }, [query, filter]);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003einput\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{query}\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonChange\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{(e)\u003c/span\u003e =\u0026gt;\u003c/span\u003e setQuery(e.target.value)} /\u0026gt;\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eSearchButton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonSearch\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{handleSearch}\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"实际应用场景\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#实际应用场景\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 实际应用场景\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e实际应用场景\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003ch4 id=\"优化列表渲染\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#优化列表渲染\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 优化列表渲染\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e优化列表渲染\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20TodoList()%20%7B%0Aconst%20%5Btodos%2C%20setTodos%5D%20%3D%20useState(%5B%5D)%3B%0A%2F%2F%20%E5%88%A0%E9%99%A4%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%87%BD%E6%95%B0%0Aconst%20handleDelete%20%3D%20useCallback((id)%20%3D%3E%20%7B%0AsetTodos(prev%20%3D%3E%20prev.filter(todo%20%3D%3E%20todo.id%20!%3D%3D%20id))%3B%0A%7D%2C%20%5B%5D)%3B%20%2F%2F%20%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0%E5%BC%8F%E6%9B%B4%E6%96%B0%EF%BC%8C%E4%B8%8D%E9%9C%80%E8%A6%81%E4%BE%9D%E8%B5%96%20todos%0A%2F%2F%20%E5%88%87%E6%8D%A2%E5%AE%8C%E6%88%90%E7%8A%B6%E6%80%81%0Aconst%20handleToggle%20%3D%20useCallback((id)%20%3D%3E%20%7B%0AsetTodos(prev%20%3D%3E%0Aprev.map(todo%20%3D%3E%0Atodo.id%20%3D%3D%3D%20id%20%3F%20%7B%20...todo%2C%20done%3A%20!todo.done%20%7D%20%3A%20todo%0A)%0A)%3B%0A%7D%2C%20%5B%5D)%3B%0Areturn%20(%0Adiv%3E%0A%7Btodos.map(todo%20%3D%3E%20(%0ATodoItem%0Akey%3D%7Btodo.id%7D%0Atodo%3D%7Btodo%7D%0AonDelete%3D%7BhandleDelete%7D%0AonToggle%3D%7BhandleToggle%7D%0A%2F%3E%0A))%7D%0Adiv%3E%0A)%3B%0A%7D%0Aconst%20TodoItem%20%3D%20React.memo((%7B%20todo%2C%20onDelete%2C%20onToggle%20%7D)%20%3D%3E%20%7B%0Aconsole.log(%60TodoItem%20%24%7Btodo.id%7D%20%E6%B8%B2%E6%9F%93%60)%3B%0Areturn%20(%0Adiv%3E%0Aspan%3E%7Btodo.text%7Dspan%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20onToggle(todo.id)%7D%3E%0A%7Btodo.done%20%3F%20'%E6%9C%AA%E5%AE%8C%E6%88%90'%20%3A%20'%E5%AE%8C%E6%88%90'%7D%0Abutton%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20onDelete(todo.id)%7D%3E%E5%88%A0%E9%99%A4button%3E%0Adiv%3E%0A)%3B%0A%7D)%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eTodoList\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [todos, setTodos] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e([]);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 删除项目的函数\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e handleDelete = \u003cspan class=\"hljs-title function_ inline\"\u003euseCallback\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003eid\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-title function_ inline\"\u003esetTodos\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eprev\u003c/span\u003e =\u0026gt;\u003c/span\u003e prev.\u003cspan class=\"hljs-title function_ inline\"\u003efilter\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003etodo\u003c/span\u003e =\u0026gt;\u003c/span\u003e todo.\u003cspan class=\"hljs-property inline\"\u003eid\u003c/span\u003e !== id));\n  }, []); \u003cspan class=\"hljs-comment inline\"\u003e// 使用函数式更新，不需要依赖 todos\u003c/span\u003e\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 切换完成状态\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e handleToggle = \u003cspan class=\"hljs-title function_ inline\"\u003euseCallback\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003eid\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-title function_ inline\"\u003esetTodos\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eprev\u003c/span\u003e =\u0026gt;\u003c/span\u003e \n      prev.\u003cspan class=\"hljs-title function_ inline\"\u003emap\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003etodo\u003c/span\u003e =\u0026gt;\u003c/span\u003e \n        todo.\u003cspan class=\"hljs-property inline\"\u003eid\u003c/span\u003e === id ? { ...todo, \u003cspan class=\"hljs-attr inline\"\u003edone\u003c/span\u003e: !todo.\u003cspan class=\"hljs-property inline\"\u003edone\u003c/span\u003e } : todo\n      )\n    );\n  }, []);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {todos.map(todo =\u0026gt; (\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eTodoItem\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{todo.id}\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003etodo\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{todo}\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003eonDelete\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{handleDelete}\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003eonToggle\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{handleToggle}\u003c/span\u003e\n        /\u0026gt;\u003c/span\u003e\n      ))}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eTodoItem\u003c/span\u003e = \u003cspan class=\"hljs-title class_ inline\"\u003eReact\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003ememo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ todo, onDelete, onToggle }\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e`TodoItem \u003cspan class=\"hljs-subst inline\"\u003e${todo.id}\u003c/span\u003e 渲染`\u003c/span\u003e);\n  \n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003espan\u003c/span\u003e\u0026gt;\u003c/span\u003e{todo.text}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003espan\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e onToggle(todo.id)}\u0026gt;\n        {todo.done ? \u0026#x27;未完成\u0026#x27; : \u0026#x27;完成\u0026#x27;}\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e onDelete(todo.id)}\u0026gt;删除\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n});\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch4 id=\"表单处理优化\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#表单处理优化\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 表单处理优化\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e表单处理优化\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20UserForm()%20%7B%0Aconst%20%5BformData%2C%20setFormData%5D%20%3D%20useState(%7B%0Aname%3A%20''%2C%0Aemail%3A%20''%2C%0Aage%3A%20''%0A%7D)%3B%0A%2F%2F%20%E9%80%9A%E7%94%A8%E7%9A%84%E5%AD%97%E6%AE%B5%E6%9B%B4%E6%96%B0%E5%87%BD%E6%95%B0%0Aconst%20handleFieldChange%20%3D%20useCallback((field)%20%3D%3E%20%7B%0Areturn%20(value)%20%3D%3E%20%7B%0AsetFormData(prev%20%3D%3E%20(%7B%0A...prev%2C%0A%5Bfield%5D%3A%20value%0A%7D))%3B%0A%7D%3B%0A%7D%2C%20%5B%5D)%3B%0A%2F%2F%20%E6%8F%90%E4%BA%A4%E5%87%BD%E6%95%B0%0Aconst%20handleSubmit%20%3D%20useCallback(()%20%3D%3E%20%7B%0Aconsole.log('%E6%8F%90%E4%BA%A4%E8%A1%A8%E5%8D%95%3A'%2C%20formData)%3B%0A%7D%2C%20%5BformData%5D)%3B%0Areturn%20(%0Aform%3E%0AFormField%0Alabel%3D%22%E5%A7%93%E5%90%8D%22%0Avalue%3D%7BformData.name%7D%0AonChange%3D%7BhandleFieldChange('name')%7D%0A%2F%3E%0AFormField%0Alabel%3D%22%E9%82%AE%E7%AE%B1%22%0Avalue%3D%7BformData.email%7D%0AonChange%3D%7BhandleFieldChange('email')%7D%0A%2F%3E%0Abutton%20type%3D%22button%22%20onClick%3D%7BhandleSubmit%7D%3E%0A%E6%8F%90%E4%BA%A4%0Abutton%3E%0Aform%3E%0A)%3B%0A%7D%0Aconst%20FormField%20%3D%20React.memo((%7B%20label%2C%20value%2C%20onChange%20%7D)%20%3D%3E%20%7B%0Aconsole.log(%60FormField%20%24%7Blabel%7D%20%E6%B8%B2%E6%9F%93%60)%3B%0Areturn%20(%0Adiv%3E%0Alabel%3E%7Blabel%7Dlabel%3E%0Ainput%0Avalue%3D%7Bvalue%7D%0AonChange%3D%7B(e)%20%3D%3E%20onChange(e.target.value)%7D%0A%2F%3E%0Adiv%3E%0A)%3B%0A%7D)%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eUserForm\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [formData, setFormData] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e({\n    \u003cspan class=\"hljs-attr inline\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026#x27;\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr inline\"\u003eemail\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026#x27;\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr inline\"\u003eage\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026#x27;\u003c/span\u003e\n  });\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 通用的字段更新函数\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e handleFieldChange = \u003cspan class=\"hljs-title function_ inline\"\u003euseCallback\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003efield\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003evalue\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n      \u003cspan class=\"hljs-title function_ inline\"\u003esetFormData\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eprev\u003c/span\u003e =\u0026gt;\u003c/span\u003e ({\n        ...prev,\n        [field]: value\n      }));\n    };\n  }, []);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 提交函数\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e handleSubmit = \u003cspan class=\"hljs-title function_ inline\"\u003euseCallback\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;提交表单:\u0026#x27;\u003c/span\u003e, formData);\n  }, [formData]);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eform\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eFormField\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003elabel\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;姓名\u0026quot;\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{formData.name}\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003eonChange\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{handleFieldChange(\u003c/span\u003e\u0026#x27;\u003cspan class=\"hljs-attr inline\"\u003ename\u003c/span\u003e\u0026#x27;)}\n      /\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eFormField\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003elabel\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;邮箱\u0026quot;\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{formData.email}\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003eonChange\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{handleFieldChange(\u003c/span\u003e\u0026#x27;\u003cspan class=\"hljs-attr inline\"\u003eemail\u003c/span\u003e\u0026#x27;)}\n      /\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;button\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{handleSubmit}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        提交\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eform\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eFormField\u003c/span\u003e = \u003cspan class=\"hljs-title class_ inline\"\u003eReact\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003ememo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ label, value, onChange }\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e`FormField \u003cspan class=\"hljs-subst inline\"\u003e${label}\u003c/span\u003e 渲染`\u003c/span\u003e);\n  \n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003elabel\u003c/span\u003e\u0026gt;\u003c/span\u003e{label}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003elabel\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003einput\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{value}\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003eonChange\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{(e)\u003c/span\u003e =\u0026gt;\u003c/span\u003e onChange(e.target.value)}\n      /\u0026gt;\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n});\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"与其他-hook-的配合使用\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#与其他-hook-的配合使用\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 与其他 Hook 的配合使用\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e与其他 Hook 的配合使用\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003ch4 id=\"与-usememo-的区别\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#与-usememo-的区别\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 与 useMemo 的区别\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e与 useMemo 的区别\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20MyComponent(%7B%20items%20%7D)%20%7B%0A%2F%2F%20useMemo%20%E7%BC%93%E5%AD%98%E8%AE%A1%E7%AE%97%E7%BB%93%E6%9E%9C%0Aconst%20expensiveValue%20%3D%20useMemo(()%20%3D%3E%20%7B%0Areturn%20items.reduce((sum%2C%20item)%20%3D%3E%20sum%20%2B%20item.value%2C%200)%3B%0A%7D%2C%20%5Bitems%5D)%3B%0A%2F%2F%20useCallback%20%E7%BC%93%E5%AD%98%E5%87%BD%E6%95%B0%E5%AE%9A%E4%B9%89%0Aconst%20handleSort%20%3D%20useCallback(()%20%3D%3E%20%7B%0Areturn%20items.sort((a%2C%20b)%20%3D%3E%20a.value%20-%20b.value)%3B%0A%7D%2C%20%5Bitems%5D)%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E6%80%BB%E8%AE%A1%3A%20%7BexpensiveValue%7Dp%3E%0Abutton%20onClick%3D%7BhandleSort%7D%3E%E6%8E%92%E5%BA%8Fbutton%3E%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eMyComponent\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ items }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-comment inline\"\u003e// useMemo 缓存计算结果\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e expensiveValue = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e items.\u003cspan class=\"hljs-title function_ inline\"\u003ereduce\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003esum, item\u003c/span\u003e) =\u0026gt;\u003c/span\u003e sum + item.\u003cspan class=\"hljs-property inline\"\u003evalue\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e);\n  }, [items]);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// useCallback 缓存函数定义\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e handleSort = \u003cspan class=\"hljs-title function_ inline\"\u003euseCallback\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e items.\u003cspan class=\"hljs-title function_ inline\"\u003esort\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003ea, b\u003c/span\u003e) =\u0026gt;\u003c/span\u003e a.\u003cspan class=\"hljs-property inline\"\u003evalue\u003c/span\u003e - b.\u003cspan class=\"hljs-property inline\"\u003evalue\u003c/span\u003e);\n  }, [items]);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e总计: {expensiveValue}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{handleSort}\u003c/span\u003e\u0026gt;\u003c/span\u003e排序\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch4 id=\"与-useeffect-结合\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#与-useeffect-结合\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 与 useEffect 结合\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e与 useEffect 结合\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20DataFetcher(%7B%20userId%20%7D)%20%7B%0Aconst%20%5Bdata%2C%20setData%5D%20%3D%20useState(null)%3B%0A%2F%2F%20%E7%BC%93%E5%AD%98%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E7%9A%84%E5%87%BD%E6%95%B0%0Aconst%20fetchData%20%3D%20useCallback(async%20()%20%3D%3E%20%7B%0Atry%20%7B%0Aconst%20response%20%3D%20await%20fetch(%60%2Fapi%2Fusers%2F%24%7BuserId%7D%60)%3B%0Aconst%20userData%20%3D%20await%20response.json()%3B%0AsetData(userData)%3B%0A%7D%20catch%20(error)%20%7B%0Aconsole.error('%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E5%A4%B1%E8%B4%A5%3A'%2C%20error)%3B%0A%7D%0A%7D%2C%20%5BuserId%5D)%3B%0AuseEffect(()%20%3D%3E%20%7B%0AfetchData()%3B%0A%7D%2C%20%5BfetchData%5D)%3B%20%2F%2F%20fetchData%20%E4%BD%9C%E4%B8%BA%E4%BE%9D%E8%B5%96%0Areturn%20div%3E%7Bdata%20%3F%20data.name%20%3A%20'%E5%8A%A0%E8%BD%BD%E4%B8%AD...'%7Ddiv%3E%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eDataFetcher\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ userId }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [data, setData] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-literal inline\"\u003enull\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 缓存获取数据的函数\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e fetchData = \u003cspan class=\"hljs-title function_ inline\"\u003euseCallback\u003c/span\u003e(\u003cspan class=\"hljs-title function_ inline\"\u003easync\u003c/span\u003e () =\u0026gt; {\n    \u003cspan class=\"hljs-keyword inline\"\u003etry\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e response = \u003cspan class=\"hljs-keyword inline\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003efetch\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e`/api/users/\u003cspan class=\"hljs-subst inline\"\u003e${userId}\u003c/span\u003e`\u003c/span\u003e);\n      \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e userData = \u003cspan class=\"hljs-keyword inline\"\u003eawait\u003c/span\u003e response.\u003cspan class=\"hljs-title function_ inline\"\u003ejson\u003c/span\u003e();\n      \u003cspan class=\"hljs-title function_ inline\"\u003esetData\u003c/span\u003e(userData);\n    } \u003cspan class=\"hljs-keyword inline\"\u003ecatch\u003c/span\u003e (error) {\n      \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003eerror\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;获取数据失败:\u0026#x27;\u003c/span\u003e, error);\n    }\n  }, [userId]);\n\n  \u003cspan class=\"hljs-title function_ inline\"\u003euseEffect\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-title function_ inline\"\u003efetchData\u003c/span\u003e();\n  }, [fetchData]); \u003cspan class=\"hljs-comment inline\"\u003e// fetchData 作为依赖\u003c/span\u003e\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e{data ? data.name : \u0026#x27;加载中...\u0026#x27;}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e;\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"常见陷阱和解决方案\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#常见陷阱和解决方案\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 常见陷阱和解决方案\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e常见陷阱和解决方案\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003ch4 id=\"忘记添加依赖项\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#忘记添加依赖项\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 忘记添加依赖项\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e忘记添加依赖项\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20BadExample()%20%7B%0Aconst%20%5Bcount%2C%20setCount%5D%20%3D%20useState(0)%3B%0A%2F%2F%20%E9%94%99%E8%AF%AF%EF%BC%9A%E7%BC%BA%E5%B0%91%20count%20%E4%BE%9D%E8%B5%96%0Aconst%20handleClick%20%3D%20useCallback(()%20%3D%3E%20%7B%0Aconsole.log(count)%3B%20%2F%2F%20%E8%BF%99%E9%87%8C%E6%80%BB%E6%98%AF%E6%89%93%E5%8D%B0%E5%88%9D%E5%A7%8B%E5%80%BC%200%0A%7D%2C%20%5B%5D)%3B%20%2F%2F%20%E5%BA%94%E8%AF%A5%E6%98%AF%20%5Bcount%5D%0Areturn%20button%20onClick%3D%7BhandleClick%7D%3E%E7%82%B9%E5%87%BBbutton%3E%3B%0A%7D%0Afunction%20GoodExample()%20%7B%0Aconst%20%5Bcount%2C%20setCount%5D%20%3D%20useState(0)%3B%0A%2F%2F%20%E6%AD%A3%E7%A1%AE%EF%BC%9A%E5%8C%85%E5%90%AB%E6%89%80%E6%9C%89%E4%BE%9D%E8%B5%96%0Aconst%20handleClick%20%3D%20useCallback(()%20%3D%3E%20%7B%0Aconsole.log(count)%3B%0A%7D%2C%20%5Bcount%5D)%3B%0Areturn%20button%20onClick%3D%7BhandleClick%7D%3E%E7%82%B9%E5%87%BBbutton%3E%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eBadExample\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [count, setCount] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 错误：缺少 count 依赖\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e handleClick = \u003cspan class=\"hljs-title function_ inline\"\u003euseCallback\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(count); \u003cspan class=\"hljs-comment inline\"\u003e// 这里总是打印初始值 0\u003c/span\u003e\n  }, []); \u003cspan class=\"hljs-comment inline\"\u003e// 应该是 [count]\u003c/span\u003e\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{handleClick}\u003c/span\u003e\u0026gt;\u003c/span\u003e点击\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e;\n}\n\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eGoodExample\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [count, setCount] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 正确：包含所有依赖\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e handleClick = \u003cspan class=\"hljs-title function_ inline\"\u003euseCallback\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(count);\n  }, [count]);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{handleClick}\u003c/span\u003e\u0026gt;\u003c/span\u003e点击\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e;\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch4 id=\"避免过度优化\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#避免过度优化\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 避免过度优化\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e避免过度优化\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"%2F%2F%20%E4%B8%8D%E5%BF%85%E8%A6%81%E7%9A%84%E4%BC%98%E5%8C%96%0Afunction%20OverOptimized()%20%7B%0Aconst%20%5Bcount%2C%20setCount%5D%20%3D%20useState(0)%3B%0A%2F%2F%20%E8%BF%99%E4%B8%AA%E7%BB%84%E4%BB%B6%E5%BE%88%E7%AE%80%E5%8D%95%EF%BC%8C%E4%B8%8D%E9%9C%80%E8%A6%81%20useCallback%0Aconst%20handleClick%20%3D%20useCallback(()%20%3D%3E%20%7B%0AsetCount(prev%20%3D%3E%20prev%20%2B%201)%3B%0A%7D%2C%20%5B%5D)%3B%0Areturn%20button%20onClick%3D%7BhandleClick%7D%3E%7Bcount%7Dbutton%3E%3B%0A%7D%0A%2F%2F%20%E7%AE%80%E5%8D%95%E7%9B%B4%E6%8E%A5%E7%9A%84%E5%86%99%E6%B3%95%0Afunction%20Simple()%20%7B%0Aconst%20%5Bcount%2C%20setCount%5D%20%3D%20useState(0)%3B%0Areturn%20(%0Abutton%20onClick%3D%7B()%20%3D%3E%20setCount(prev%20%3D%3E%20prev%20%2B%201)%7D%3E%0A%7Bcount%7D%0Abutton%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// 不必要的优化\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eOverOptimized\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [count, setCount] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 这个组件很简单，不需要 useCallback\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e handleClick = \u003cspan class=\"hljs-title function_ inline\"\u003euseCallback\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-title function_ inline\"\u003esetCount\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eprev\u003c/span\u003e =\u0026gt;\u003c/span\u003e prev + \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e);\n  }, []);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{handleClick}\u003c/span\u003e\u0026gt;\u003c/span\u003e{count}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e;\n}\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 简单直接的写法\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eSimple\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [count, setCount] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e setCount(prev =\u0026gt; prev + 1)}\u0026gt;\n      {count}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"性能测试示例\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#性能测试示例\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 性能测试示例\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e性能测试示例\u003c/strong\u003e\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"import%20React%2C%20%7B%20useCallback%2C%20useState%2C%20useRef%20%7D%20from%20'react'%3B%0Afunction%20PerformanceTest()%20%7B%0Aconst%20%5Bcount%2C%20setCount%5D%20%3D%20useState(0)%3B%0Aconst%20renderCountRef%20%3D%20useRef(0)%3B%0A%2F%2F%20%E6%9C%89%20useCallback%20%E7%9A%84%E7%89%88%E6%9C%AC%0Aconst%20optimizedHandler%20%3D%20useCallback(()%20%3D%3E%20%7B%0Aconsole.log('%E4%BC%98%E5%8C%96%E7%89%88%E6%9C%AC%E8%A2%AB%E8%B0%83%E7%94%A8')%3B%0A%7D%2C%20%5B%5D)%3B%0A%2F%2F%20%E6%B2%A1%E6%9C%89%20useCallback%20%E7%9A%84%E7%89%88%E6%9C%AC%0Aconst%20unoptimizedHandler%20%3D%20()%20%3D%3E%20%7B%0Aconsole.log('%E6%9C%AA%E4%BC%98%E5%8C%96%E7%89%88%E6%9C%AC%E8%A2%AB%E8%B0%83%E7%94%A8')%3B%0A%7D%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E7%88%B6%E7%BB%84%E4%BB%B6%E6%B8%B2%E6%9F%93%E6%AC%A1%E6%95%B0%3A%20%7B%2B%2BrenderCountRef.current%7Dp%3E%0Ap%3E%E8%AE%A1%E6%95%B0%3A%20%7Bcount%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20setCount(count%20%2B%201)%7D%3E%E5%A2%9E%E5%8A%A0%E8%AE%A1%E6%95%B0button%3E%0AOptimizedChild%20handler%3D%7BoptimizedHandler%7D%20%2F%3E%0AUnoptimizedChild%20handler%3D%7BunoptimizedHandler%7D%20%2F%3E%0Adiv%3E%0A)%3B%0A%7D%0Aconst%20OptimizedChild%20%3D%20React.memo((%7B%20handler%20%7D)%20%3D%3E%20%7B%0Aconst%20renderCount%20%3D%20useRef(0)%3B%0Aconsole.log('OptimizedChild%20%E6%B8%B2%E6%9F%93%E6%AC%A1%E6%95%B0%3A'%2C%20%2B%2BrenderCount.current)%3B%0Areturn%20button%20onClick%3D%7Bhandler%7D%3E%E4%BC%98%E5%8C%96%E7%89%88%E6%9C%ACbutton%3E%3B%0A%7D)%3B%0Aconst%20UnoptimizedChild%20%3D%20React.memo((%7B%20handler%20%7D)%20%3D%3E%20%7B%0Aconst%20renderCount%20%3D%20useRef(0)%3B%0Aconsole.log('UnoptimizedChild%20%E6%B8%B2%E6%9F%93%E6%AC%A1%E6%95%B0%3A'%2C%20%2B%2BrenderCount.current)%3B%0Areturn%20button%20onClick%3D%7Bhandler%7D%3E%E6%9C%AA%E4%BC%98%E5%8C%96%E7%89%88%E6%9C%ACbutton%3E%3B%0A%7D)%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eReact\u003c/span\u003e, { useCallback, useState, useRef } \u003cspan class=\"hljs-keyword inline\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;react\u0026#x27;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003ePerformanceTest\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [count, setCount] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e renderCountRef = \u003cspan class=\"hljs-title function_ inline\"\u003euseRef\u003c/span\u003e(\u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 有 useCallback 的版本\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e optimizedHandler = \u003cspan class=\"hljs-title function_ inline\"\u003euseCallback\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;优化版本被调用\u0026#x27;\u003c/span\u003e);\n  }, []);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 没有 useCallback 的版本\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eunoptimizedHandler\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;未优化版本被调用\u0026#x27;\u003c/span\u003e);\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e父组件渲染次数: {++renderCountRef.current}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e计数: {count}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e setCount(count + 1)}\u0026gt;增加计数\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eOptimizedChild\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ehandler\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{optimizedHandler}\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eUnoptimizedChild\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ehandler\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{unoptimizedHandler}\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eOptimizedChild\u003c/span\u003e = \u003cspan class=\"hljs-title class_ inline\"\u003eReact\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003ememo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ handler }\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e renderCount = \u003cspan class=\"hljs-title function_ inline\"\u003euseRef\u003c/span\u003e(\u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e);\n  \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;OptimizedChild 渲染次数:\u0026#x27;\u003c/span\u003e, ++renderCount.\u003cspan class=\"hljs-property inline\"\u003ecurrent\u003c/span\u003e);\n  \n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{handler}\u003c/span\u003e\u0026gt;\u003c/span\u003e优化版本\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e;\n});\n\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eUnoptimizedChild\u003c/span\u003e = \u003cspan class=\"hljs-title class_ inline\"\u003eReact\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003ememo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ handler }\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e renderCount = \u003cspan class=\"hljs-title function_ inline\"\u003euseRef\u003c/span\u003e(\u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e);\n  \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;UnoptimizedChild 渲染次数:\u0026#x27;\u003c/span\u003e, ++renderCount.\u003cspan class=\"hljs-property inline\"\u003ecurrent\u003c/span\u003e);\n  \n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{handler}\u003c/span\u003e\u0026gt;\u003c/span\u003e未优化版本\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e;\n});\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"自定义-hook-中的使用\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#自定义-hook-中的使用\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 自定义 Hook 中的使用\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e自定义 Hook 中的使用\u003c/strong\u003e\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20useAPI(url)%20%7B%0Aconst%20%5Bdata%2C%20setData%5D%20%3D%20useState(null)%3B%0Aconst%20%5Bloading%2C%20setLoading%5D%20%3D%20useState(false)%3B%0Aconst%20fetchData%20%3D%20useCallback(async%20()%20%3D%3E%20%7B%0AsetLoading(true)%3B%0Atry%20%7B%0Aconst%20response%20%3D%20await%20fetch(url)%3B%0Aconst%20result%20%3D%20await%20response.json()%3B%0AsetData(result)%3B%0A%7D%20catch%20(error)%20%7B%0Aconsole.error('API%20%E8%B0%83%E7%94%A8%E5%A4%B1%E8%B4%A5%3A'%2C%20error)%3B%0A%7D%20finally%20%7B%0AsetLoading(false)%3B%0A%7D%0A%7D%2C%20%5Burl%5D)%3B%0Aconst%20refresh%20%3D%20useCallback(()%20%3D%3E%20%7B%0AfetchData()%3B%0A%7D%2C%20%5BfetchData%5D)%3B%0AuseEffect(()%20%3D%3E%20%7B%0AfetchData()%3B%0A%7D%2C%20%5BfetchData%5D)%3B%0Areturn%20%7B%20data%2C%20loading%2C%20refresh%20%7D%3B%0A%7D%0A%2F%2F%20%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89%20Hook%0Afunction%20UserProfile(%7B%20userId%20%7D)%20%7B%0Aconst%20%7B%20data%2C%20loading%2C%20refresh%20%7D%20%3D%20useAPI(%60%2Fapi%2Fusers%2F%24%7BuserId%7D%60)%3B%0Aif%20(loading)%20return%20div%3E%E5%8A%A0%E8%BD%BD%E4%B8%AD...div%3E%3B%0Areturn%20(%0Adiv%3E%0Ah1%3E%7Bdata%3F.name%7Dh1%3E%0Abutton%20onClick%3D%7Brefresh%7D%3E%E5%88%B7%E6%96%B0button%3E%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003euseAPI\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003eurl\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [data, setData] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-literal inline\"\u003enull\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [loading, setLoading] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e fetchData = \u003cspan class=\"hljs-title function_ inline\"\u003euseCallback\u003c/span\u003e(\u003cspan class=\"hljs-title function_ inline\"\u003easync\u003c/span\u003e () =\u0026gt; {\n    \u003cspan class=\"hljs-title function_ inline\"\u003esetLoading\u003c/span\u003e(\u003cspan class=\"hljs-literal inline\"\u003etrue\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword inline\"\u003etry\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e response = \u003cspan class=\"hljs-keyword inline\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003efetch\u003c/span\u003e(url);\n      \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e result = \u003cspan class=\"hljs-keyword inline\"\u003eawait\u003c/span\u003e response.\u003cspan class=\"hljs-title function_ inline\"\u003ejson\u003c/span\u003e();\n      \u003cspan class=\"hljs-title function_ inline\"\u003esetData\u003c/span\u003e(result);\n    } \u003cspan class=\"hljs-keyword inline\"\u003ecatch\u003c/span\u003e (error) {\n      \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003eerror\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;API 调用失败:\u0026#x27;\u003c/span\u003e, error);\n    } \u003cspan class=\"hljs-keyword inline\"\u003efinally\u003c/span\u003e {\n      \u003cspan class=\"hljs-title function_ inline\"\u003esetLoading\u003c/span\u003e(\u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e);\n    }\n  }, [url]);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e refresh = \u003cspan class=\"hljs-title function_ inline\"\u003euseCallback\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-title function_ inline\"\u003efetchData\u003c/span\u003e();\n  }, [fetchData]);\n\n  \u003cspan class=\"hljs-title function_ inline\"\u003euseEffect\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-title function_ inline\"\u003efetchData\u003c/span\u003e();\n  }, [fetchData]);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e { data, loading, refresh };\n}\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 使用自定义 Hook\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eUserProfile\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ userId }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e { data, loading, refresh } = \u003cspan class=\"hljs-title function_ inline\"\u003euseAPI\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e`/api/users/\u003cspan class=\"hljs-subst inline\"\u003e${userId}\u003c/span\u003e`\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (loading) \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e加载中...\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e;\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eh1\u003c/span\u003e\u0026gt;\u003c/span\u003e{data?.name}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eh1\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{refresh}\u003c/span\u003e\u0026gt;\u003c/span\u003e刷新\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"最佳实践\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#最佳实践\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 最佳实践\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e最佳实践\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003col class=\"list-decimal list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e与 React.memo 配合使用\u003c/strong\u003e：useCallback 的主要价值在于防止子组件不必要的重新渲染\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e正确设置依赖项\u003c/strong\u003e：包含回调函数中使用的所有变量\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e避免过度优化\u003c/strong\u003e：不是所有函数都需要用 useCallback 包装\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e使用函数式更新\u003c/strong\u003e：减少对状态的依赖，提高函数的稳定性\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e考虑替代方案\u003c/strong\u003e：有时重构组件结构比使用 useCallback 更好\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"注意事项\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#注意事项\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 注意事项\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e注意事项\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e内存开销\u003c/strong\u003e：缓存函数会占用额外内存\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e依赖追踪\u003c/strong\u003e：确保 ESLint 规则 \u003ccode\u003eexhaustive-deps\u003c/code\u003e 开启\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e浅比较\u003c/strong\u003e：依赖数组使用浅比较，注意对象和数组的引用\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e调试困难\u003c/strong\u003e：过度使用可能使代码难以理解和调试\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003ccode\u003euseCallback\u003c/code\u003e 是 React 性能优化的重要工具，但应该在合适的场景下使用，避免过度优化导致代码复杂性增加。\u003c/p\u003e\n"])</script><script>self.__next_f.push([1,"d:[\"$\",\"$L1d\",null,{\"htmlContent\":\"$1e\",\"frontMatter\":{\"title\":\"useCallback\",\"description\":\"React基础知识篇-useCallback\",\"date\":\"2025-06-22\",\"author\":\"MilkWind\",\"tags\":[\"React\",\"基础知识\",\"useCallback\",\"React Hook\"],\"references\":{}},\"readingTime\":\"9 min read\",\"category\":\"basic-knowledge\",\"tocItems\":[{\"id\":\"基本作用\",\"text\":\"基本作用\",\"level\":3},{\"id\":\"基本语法\",\"text\":\"基本语法\",\"level\":3},{\"id\":\"与普通函数的对比\",\"text\":\"与普通函数的对比\",\"level\":3},{\"id\":\"不使用-usecallback（问题示例）\",\"text\":\"不使用 useCallback（问题示例）\",\"level\":4},{\"id\":\"使用-usecallback（优化后）\",\"text\":\"使用 useCallback（优化后）\",\"level\":4},{\"id\":\"依赖数组的使用\",\"text\":\"依赖数组的使用\",\"level\":3},{\"id\":\"空依赖数组\",\"text\":\"空依赖数组\",\"level\":4},{\"id\":\"有依赖的情况\",\"text\":\"有依赖的情况\",\"level\":4},{\"id\":\"实际应用场景\",\"text\":\"实际应用场景\",\"level\":3},{\"id\":\"优化列表渲染\",\"text\":\"优化列表渲染\",\"level\":4},{\"id\":\"表单处理优化\",\"text\":\"表单处理优化\",\"level\":4},{\"id\":\"与其他-hook-的配合使用\",\"text\":\"与其他 Hook 的配合使用\",\"level\":3},{\"id\":\"与-usememo-的区别\",\"text\":\"与 useMemo 的区别\",\"level\":4},{\"id\":\"与-useeffect-结合\",\"text\":\"与 useEffect 结合\",\"level\":4},{\"id\":\"常见陷阱和解决方案\",\"text\":\"常见陷阱和解决方案\",\"level\":3},{\"id\":\"忘记添加依赖项\",\"text\":\"忘记添加依赖项\",\"level\":4},{\"id\":\"避免过度优化\",\"text\":\"避免过度优化\",\"level\":4},{\"id\":\"性能测试示例\",\"text\":\"性能测试示例\",\"level\":3},{\"id\":\"自定义-hook-中的使用\",\"text\":\"自定义 Hook 中的使用\",\"level\":3},{\"id\":\"最佳实践\",\"text\":\"最佳实践\",\"level\":3},{\"id\":\"注意事项\",\"text\":\"注意事项\",\"level\":3}],\"translations\":{\"common\":{\"welcome\":\"欢迎\",\"loading\":\"加载中...\",\"error\":\"出现了一些问题\",\"retry\":\"重试\",\"theme\":\"主题\",\"language\":\"语言\",\"light\":\"浅色\",\"dark\":\"深色\"},\"navigation\":{\"home\":\"首页\",\"personal\":\"个人\",\"works\":\"作品\",\"contributions\":\"贡献\",\"documents\":\"文档\",\"about\":\"关于\",\"contact\":\"联系\"},\"personal\":{\"technicalSkills\":\"技术技能\",\"email\":\"邮箱\",\"github\":\"代码仓库\",\"resume\":\"简历\",\"codeRepository\":\"代码仓库\",\"loadingPersonalInfo\":\"加载个人信息中...\",\"loadingResume\":\"加载简历中...\",\"closeResume\":\"关闭简历\",\"emailCopied\":\"邮箱已复制到剪贴板！\",\"galaxyDefaultDescription\":\"精通全栈开发技术，具备跨平台架构能力，擅长AI技术整合与高性能系统优化\",\"skillGalaxy\":\"技能星系\",\"stirGalaxy\":\"搅动星系\",\"stirring\":\"搅动中...\",\"fullStackEngineer\":\"MilkWind - 全栈工程师\",\"professionalProfile\":\"关于我\"},\"documents\":{\"technicalDocuments\":\"技术文档\",\"description\":\"基本原理、代码拆分以及一些碎碎念。\",\"articles\":\"文章\",\"categories\":\"分类\",\"allCategories\":\"所有分类\",\"noArticlesFound\":\"未找到文章\",\"noArticlesAvailable\":\"中文暂无文章。\",\"noArticlesInCategory\":\"该分类下未找到文章。\",\"readMore\":\"阅读更多\",\"loadingDocuments\":\"加载文档中...\",\"backToDocuments\":\"← 返回文档\",\"documentNotFound\":\"文档未找到\",\"documentNotFoundDescription\":\"请求的文档无法找到。\",\"technicalInsights\":\"技术拆解\",\"untitledDocument\":\"无标题文档\",\"byAuthor\":\"作者：\",\"search\":\"搜索文章...\",\"searchByTags\":\"按标签筛选\",\"searching\":\"搜索中...\",\"noSearchResults\":\"没有找到符合搜索条件的文章\",\"clearSearch\":\"清除搜索\",\"selectedTags\":\"已选标签\",\"allTags\":\"所有标签\",\"searchInTitle\":\"在标题、描述和内容中搜索\",\"enterImmersiveMode\":\"沉浸阅读\",\"exitImmersiveMode\":\"退出沉浸模式\",\"immersiveReading\":\"沉浸阅读模式\",\"exploreContent\":\"按分类探索内容\",\"browseBy\":\"浏览方式\",\"exploreAll\":\"所有内容汇总\",\"categoryDescription\":\"该分类下的文章\",\"totalArticles\":\"文章\",\"totalCategories\":\"分类\",\"foundArticles\":\"找到文章\",\"categoriesWithResults\":\"有结果的分类\"},\"works\":{\"workCases\":\"作品案例\",\"projects\":\"作品集\",\"loadingProjects\":\"加载项目中...\",\"grid\":\"网格\",\"stack\":\"堆叠\",\"of\":\"共\",\"workCasesPageTitle\":\"作品案例页面\",\"pageWorkingCorrectly\":\"此页面运行正常！路由配置正确。\",\"try3DVersion\":\"尝试3D版本\",\"dragToScroll\":\"拖拽滚动\",\"dragToChange\":\"拖拽切换\",\"swipeCards\":\"切换卡片\",\"keyboardNav\":\"键盘导航\"},\"contributions\":{\"contributionCases\":\"开源项目\",\"contributions\":\"贡献\",\"loadingContributions\":\"加载贡献中...\",\"grid\":\"网格\",\"stack\":\"堆叠\",\"of\":\"共\",\"contributionCasesPageTitle\":\"贡献案例页面\",\"pageWorkingCorrectly\":\"此页面运行正常！路由配置正确。\",\"try3DVersion\":\"尝试3D版本\",\"dragToScroll\":\"拖拽滚动\",\"dragToChange\":\"拖拽切换\",\"swipeCards\":\"切换卡片\",\"keyboardNav\":\"键盘导航\"},\"contribution\":{\"contributionPreview\":\"贡献预览\",\"accessible\":\"可访问\",\"code\":\"代码\",\"maintenance\":\"维护\",\"enhancement\":\"增强\",\"documentation\":\"文档\",\"community\":\"社区\",\"moreItems\":\"更多\",\"technicalDetails\":\"技术详情\",\"technologies\":\"技术栈：\",\"contributionDetail\":\"贡献详情\",\"description\":\"描述：\",\"seeDetails\":\"查看详情\",\"github\":\"代码仓库\",\"viewContribution\":\"查看贡献\",\"viewCode\":\"查看代码\"},\"project\":{\"projectPreview\":\"项目预览\",\"accessible\":\"可访问\",\"tool\":\"工具\",\"plugin\":\"插件\",\"toy\":\"小玩意\",\"moreItems\":\"更多\",\"technicalDetails\":\"技术详情\",\"technologies\":\"技术栈：\",\"description\":\"描述：\",\"seeDetails\":\"查看详情\",\"github\":\"GitHub\",\"gitee\":\"Gitee\",\"viewLiveDemo\":\"查看演示\",\"viewCode\":\"查看代码\",\"access\":\"访问\",\"videos\":\"视频\",\"watchVideo\":\"观看视频\",\"hasVideo\":\"有视频\"},\"codeblock\":{\"copy\":\"复制\",\"copySuccess\":\"代码已复制到剪贴板！\",\"copyError\":\"复制代码失败\",\"copyTooltip\":\"复制代码\"},\"toc\":{\"contents\":\"目录\",\"autoScroll\":\"自动滚动到章节\",\"collapse\":\"折叠\",\"expand\":\"展开\"},\"loading\":{\"loading\":\"加载中\",\"preparingExperience\":\"准备体验中\"}},\"lang\":\"zh\",\"theme\":\"light\"}]\n"])</script><script>self.__next_f.push([1,"12:null\n"])</script><script>self.__next_f.push([1,"18:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n11:null\n"])</script><script>self.__next_f.push([1,"1c:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"useCallback | Interactive Portfolio\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"React基础知识篇-useCallback\"}],[\"$\",\"meta\",\"2\",{\"name\":\"author\",\"content\":\"Developer\"}],[\"$\",\"meta\",\"3\",{\"name\":\"keywords\",\"content\":\"portfolio,3D,interactive,web development,Three.js,Next.js\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:title\",\"content\":\"useCallback | Interactive Portfolio\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:description\",\"content\":\"React基础知识篇-useCallback\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"7\",{\"property\":\"article:published_time\",\"content\":\"2025-06-22\"}],[\"$\",\"meta\",\"8\",{\"property\":\"article:tag\",\"content\":\"React\"}],[\"$\",\"meta\",\"9\",{\"property\":\"article:tag\",\"content\":\"基础知识\"}],[\"$\",\"meta\",\"10\",{\"property\":\"article:tag\",\"content\":\"useCallback\"}],[\"$\",\"meta\",\"11\",{\"property\":\"article:tag\",\"content\":\"React Hook\"}],[\"$\",\"meta\",\"12\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"13\",{\"name\":\"twitter:title\",\"content\":\"useCallback | Interactive Portfolio\"}],[\"$\",\"meta\",\"14\",{\"name\":\"twitter:description\",\"content\":\"React基础知识篇-useCallback\"}],[\"$\",\"link\",\"15\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"32x32\"}]],\"error\":null,\"digest\":\"$undefined\"}\n14:{\"metadata\":\"$1c:metadata\",\"error\":null,\"digest\":\"$undefined\"}\n"])</script></body></html>