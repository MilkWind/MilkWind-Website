1:"$Sreact.fragment"
2:I[38735,["46","static/chunks/46-268e24d727b280ef.js","7177","static/chunks/app/layout-af4a6e723c0ff668.js"],"default"]
3:I[19945,["46","static/chunks/46-268e24d727b280ef.js","7177","static/chunks/app/layout-af4a6e723c0ff668.js"],"default"]
4:I[65337,["46","static/chunks/46-268e24d727b280ef.js","7177","static/chunks/app/layout-af4a6e723c0ff668.js"],"default"]
5:I[96190,["46","static/chunks/46-268e24d727b280ef.js","7177","static/chunks/app/layout-af4a6e723c0ff668.js"],"ClientProviders"]
6:I[87555,[],""]
7:I[51901,["8039","static/chunks/app/error-dda32be1d095a86c.js"],"default"]
8:I[31295,[],""]
9:I[6874,["6874","static/chunks/6874-fbe9a08eb79b991c.js","4345","static/chunks/app/not-found-9ff98b2ccf24cac7.js"],""]
a:I[94970,[],"ClientSegmentRoot"]
b:I[44065,["206","static/chunks/206-4f4cbf4d7156f437.js","3092","static/chunks/app/documents/layout-28408791defde09e.js"],"default"]
e:I[59665,[],"MetadataBoundary"]
10:I[59665,[],"OutletBoundary"]
13:I[74911,[],"AsyncMetadataOutlet"]
15:I[39460,["2415","static/chunks/2415-689c103fb3d2c28d.js","8610","static/chunks/8610-7bd3f91f3cf2a4d6.js","5650","static/chunks/app/documents/loading-1fa3f98b6e5a8e78.js"],"default"]
16:I[88610,["2415","static/chunks/2415-689c103fb3d2c28d.js","8610","static/chunks/8610-7bd3f91f3cf2a4d6.js","4209","static/chunks/app/loading-68f227fb49b3ac8c.js"],"default"]
17:I[59665,[],"ViewportBoundary"]
19:I[26614,[],""]
:HL["/MilkWind-Website/_next/static/css/f034c804622acb16.css","style"]
:HL["/MilkWind-Website/_next/static/css/276b387d8ca46690.css","style"]
:HL["/MilkWind-Website/_next/static/css/5eacd01f773eed7f.css","style"]
0:{"P":null,"b":"ZB-xVo91GcWurycYUaga2","p":"/MilkWind-Website","c":["","documents","zh","light","personal-website","skills-galaxy-analysis",""],"i":false,"f":[[["",{"children":["documents",{"children":[["slug","zh/light/personal-website/skills-galaxy-analysis","c"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/MilkWind-Website/_next/static/css/f034c804622acb16.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/MilkWind-Website/_next/static/css/276b387d8ca46690.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en","suppressHydrationWarning":true,"children":["$","body",null,{"className":"__variable_9b7fb1 __variable_ca2a15 __variable_591dcc font-sans antialiased min-h-screen bg-background text-foreground","suppressHydrationWarning":true,"children":[["$","$L2",null,{}],["$","$L3",null,{}],["$","$L4",null,{}],["$","$L5",null,{"children":["$","$L6",null,{"parallelRouterKey":"children","error":"$7","errorStyles":[],"errorScripts":[],"template":["$","$L8",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","div",null,{"className":"z-10 relative min-h-screen flex items-center justify-center bg-background p-8","children":["$","div",null,{"className":"text-center max-w-md","children":[["$","div",null,{"className":"text-8xl font-bold text-primary mb-4","children":"404"}],["$","h2",null,{"className":"text-2xl font-bold text-foreground mb-4","children":"Page Not Found"}],["$","p",null,{"className":"text-foreground/70 mb-8","children":"The page you're looking for doesn't exist or has been moved to a different location."}],["$","div",null,{"className":"flex flex-col sm:flex-row gap-4 justify-center","children":[["$","$L9",null,{"href":"/","className":"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/80 transition-colors","children":"Go Home"}],["$","$L9",null,{"href":"/works","className":"px-6 py-2 border border-primary text-primary rounded-lg hover:bg-primary/10 transition-colors","children":"View Works"}]]}],["$","div",null,{"className":"absolute inset-0 overflow-hidden pointer-events-none -z-10","children":[["$","div",null,{"className":"absolute top-1/4 left-1/4 w-2 h-2 bg-primary/20 rounded-full animate-float"}],["$","div",null,{"className":"absolute top-3/4 right-1/4 w-3 h-3 bg-accent/20 rounded-full animate-float","style":{"animationDelay":"1s"}}],["$","div",null,{"className":"absolute bottom-1/4 left-1/3 w-1 h-1 bg-secondary/20 rounded-full animate-float","style":{"animationDelay":"2s"}}]]}]]}]}],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]]}]}]]}],{"children":["documents",["$","$1","c",{"children":[null,["$","$La",null,{"Component":"$b","slots":{"children":["$","$L6",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L8",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]},"params":{},"promise":"$@c"}]]}],{"children":[["slug","zh/light/personal-website/skills-galaxy-analysis","c"],["$","$1","c",{"children":[null,["$","$L6",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L8",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$Ld",["$","$Le",null,{"children":"$Lf"}],[["$","link","0",{"rel":"stylesheet","href":"/MilkWind-Website/_next/static/css/5eacd01f773eed7f.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","$L10",null,{"children":["$L11","$L12",["$","$L13",null,{"promise":"$@14"}]]}]]}],{},null,false]},null,false]},[["$","$L15","l",{}],[],[]],false]},[["$","$L16","l",{}],[],[]],false],["$","$1","h",{"children":[null,["$","$1","mD3PdCT-voyn80mqp81la",{"children":[["$","$L17",null,{"children":"$L18"}],null]}],null]}],false]],"m":"$undefined","G":["$19","$undefined"],"s":false,"S":true}
1a:"$Sreact.suspense"
1b:I[74911,[],"AsyncMetadata"]
c:{}
f:["$","$1a",null,{"fallback":null,"children":["$","$L1b",null,{"promise":"$@1c"}]}]
1d:I[57340,["5584","static/chunks/b498d07c-095637f0f10883c6.js","2415","static/chunks/2415-689c103fb3d2c28d.js","6874","static/chunks/6874-fbe9a08eb79b991c.js","9554","static/chunks/9554-b714f9de28e85d30.js","1873","static/chunks/app/documents/%5B...slug%5D/page-8f3efa7e6c6c5377.js"],"DocumentPageClient"]
1e:T59bde,<h1 id="技能星系：从概念到实现" class="group relative text-4xl font-bold mt-8 mb-4 text-foreground leading-tight">
            <a href="#技能星系：从概念到实现" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 技能星系：从概念到实现">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            技能星系：从概念到实现
        </h1>
<p class="text-base leading-7 mb-4 text-foreground">想象一下，如果你的技能可以像星系中的行星一样运行，围绕着你这个&quot;太阳&quot;有序而美妙地旋转，那会是怎样的视觉体验？…好吧，不强行升华了，总的来说我想通过一种富有创造力的形式来展现那些关键但寻常的信息，突破所谓的&quot;流水账式布局&quot;，给人一种&quot;嚯！有点意思！&quot;的感觉。</p>
<p class="text-base leading-7 mb-4 text-foreground">通过React、TypeScript、Framer Motion以及原生的requestAnimationFrame技术栈，我们就能够创造出如此效果的高性能动画。</p>
<p class="text-base leading-7 mb-4 text-foreground">接下来，我将从最基础的数学原理开始，逐步深入每一个实现细节，全面剖析技能星系的实现原理。</p>
<h2 id="圆周运动的数学基础" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#圆周运动的数学基础" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 圆周运动的数学基础">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            圆周运动的数学基础
        </h2>
<p class="text-base leading-7 mb-4 text-foreground">一切始于数学。要让星球绕着中心旋转，我们首先需要理解如何将旋转角度转换为屏幕上的具体坐标位置。</p>
<h3 id="极坐标系统的转换" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#极坐标系统的转换" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 极坐标系统的转换">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            极坐标系统的转换
        </h3>
<p class="text-base leading-7 mb-4 text-foreground">在我们的星系中，每个星球都遵循极坐标系统的规律。极坐标用<code>(r, θ)</code>来描述一个点的位置——<code>r</code>是到中心的距离（轨道半径），<code>θ</code>是角度。这种描述方式非常适合圆周运动，因为我们只需要改变角度，就能让星球沿着圆形轨道移动。</p>
<p class="text-base leading-7 mb-4 text-foreground">但浏览器的世界是笛卡尔坐标系统，用<code>(x, y)</code>来定位元素。所以我们需要进行坐标转换：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%2F%2F%20%E8%BF%99%E5%B0%B1%E6%98%AF%E8%AE%A9%E6%98%9F%E7%90%83%22%E8%BD%AC%E8%B5%B7%E6%9D%A5%22%E7%9A%84%E6%A0%B8%E5%BF%83%E5%85%AC%E5%BC%8F%0Aconst%20planetX%20%3D%20galaxyCenter.x%20%2B%20Math.cos(angle%20*%20Math.PI%20%2F%20180)%20*%20orbitRadius%3B%0Aconst%20planetY%20%3D%20galaxyCenter.y%20%2B%20Math.sin(angle%20*%20Math.PI%20%2F%20180)%20*%20orbitRadius%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-comment inline">// 这就是让星球&quot;转起来&quot;的核心公式</span>
<span class="hljs-keyword inline">const</span> planetX = galaxyCenter.<span class="hljs-property inline">x</span> + <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">cos</span>(angle * <span class="hljs-title class_ inline">Math</span>.<span class="hljs-property inline">PI</span> / <span class="hljs-number inline">180</span>) * orbitRadius;
<span class="hljs-keyword inline">const</span> planetY = galaxyCenter.<span class="hljs-property inline">y</span> + <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">sin</span>(angle * <span class="hljs-title class_ inline">Math</span>.<span class="hljs-property inline">PI</span> / <span class="hljs-number inline">180</span>) * orbitRadius;
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">这里有几个关键点值得注意：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>galaxyCenter.x</code> 和 <code>galaxyCenter.y</code> 是星系的中心坐标</li>
<li class="text-foreground leading-relaxed"><code>Math.cos()</code> 和 <code>Math.sin()</code> 是三角函数，负责将角度转换为坐标</li>
<li class="text-foreground leading-relaxed"><code>angle * Math.PI / 180</code> 将角度从度数转换为弧度（JavaScript的三角函数需要弧度）</li>
<li class="text-foreground leading-relaxed"><code>orbitRadius</code> 是轨道半径，决定星球离中心有多远</li>
</ul>
<h3 id="简单示例：让一个点转起来" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#简单示例：让一个点转起来" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 简单示例：让一个点转起来">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            简单示例：让一个点转起来
        </h3>
<p class="text-base leading-7 mb-4 text-foreground">让我用一个最简单的例子来展示这个原理：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%2F%2F%20%E5%81%87%E8%AE%BE%E6%88%91%E4%BB%AC%E6%9C%89%E4%B8%80%E4%B8%AA%E4%B8%AD%E5%BF%83%E7%82%B9%20(400%2C%20300)%20%E5%92%8C%E5%8D%8A%E5%BE%84%20100px%20%E7%9A%84%E5%9C%86%0Aconst%20centerX%20%3D%20400%3B%0Aconst%20centerY%20%3D%20300%3B%0Aconst%20radius%20%3D%20100%3B%0Alet%20angle%20%3D%200%3B%0A%2F%2F%20%E6%AF%8F%E4%B8%80%E5%B8%A7%E6%9B%B4%E6%96%B0%E4%BD%8D%E7%BD%AE%0Afunction%20updatePosition()%20%7B%0Aconst%20x%20%3D%20centerX%20%2B%20Math.cos(angle%20*%20Math.PI%20%2F%20180)%20*%20radius%3B%0Aconst%20y%20%3D%20centerY%20%2B%20Math.sin(angle%20*%20Math.PI%20%2F%20180)%20*%20radius%3B%0A%2F%2F%20%E6%9B%B4%E6%96%B0%E5%85%83%E7%B4%A0%E4%BD%8D%E7%BD%AE%0Aelement.style.left%20%3D%20x%20%2B%20'px'%3B%0Aelement.style.top%20%3D%20y%20%2B%20'px'%3B%0A%2F%2F%20%E8%A7%92%E5%BA%A6%E9%80%92%E5%A2%9E%EF%BC%8C%E8%AE%A9%E5%AE%83%E8%BD%AC%E8%B5%B7%E6%9D%A5%0Aangle%20%2B%3D%201%3B%0ArequestAnimationFrame(updatePosition)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-comment inline">// 假设我们有一个中心点 (400, 300) 和半径 100px 的圆</span>
<span class="hljs-keyword inline">const</span> centerX = <span class="hljs-number inline">400</span>;
<span class="hljs-keyword inline">const</span> centerY = <span class="hljs-number inline">300</span>;
<span class="hljs-keyword inline">const</span> radius = <span class="hljs-number inline">100</span>;
<span class="hljs-keyword inline">let</span> angle = <span class="hljs-number inline">0</span>;

<span class="hljs-comment inline">// 每一帧更新位置</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">updatePosition</span>(<span class="hljs-params inline"></span>) {
    <span class="hljs-keyword inline">const</span> x = centerX + <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">cos</span>(angle * <span class="hljs-title class_ inline">Math</span>.<span class="hljs-property inline">PI</span> / <span class="hljs-number inline">180</span>) * radius;
    <span class="hljs-keyword inline">const</span> y = centerY + <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">sin</span>(angle * <span class="hljs-title class_ inline">Math</span>.<span class="hljs-property inline">PI</span> / <span class="hljs-number inline">180</span>) * radius;
    
    <span class="hljs-comment inline">// 更新元素位置</span>
    element.<span class="hljs-property inline">style</span>.<span class="hljs-property inline">left</span> = x + <span class="hljs-string inline">&#x27;px&#x27;</span>;
    element.<span class="hljs-property inline">style</span>.<span class="hljs-property inline">top</span> = y + <span class="hljs-string inline">&#x27;px&#x27;</span>;
    
    <span class="hljs-comment inline">// 角度递增，让它转起来</span>
    angle += <span class="hljs-number inline">1</span>;
    
    <span class="hljs-title function_ inline">requestAnimationFrame</span>(updatePosition);
}
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">这就是圆周运动的基础——技能星系的旋转效果建立在此基础原理之上。</p>
<h2 id="多层轨道系统的实现策略" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#多层轨道系统的实现策略" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 多层轨道系统的实现策略">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            多层轨道系统的实现策略
        </h2>
<p class="text-base leading-7 mb-4 text-foreground">现在我们知道了如何让一个星球转起来，但一个真正的星系需要多条轨道，需要合理地分配星球，还要让它们看起来自然而不拥挤。</p>
<h3 id="轨道数是如何指定的？而星球又是如何平均分配到这些轨道上的？" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#轨道数是如何指定的？而星球又是如何平均分配到这些轨道上的？" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 轨道数是如何指定的？而星球又是如何平均分配到这些轨道上的？">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            轨道数是如何指定的？而星球又是如何平均分配到这些轨道上的？
        </h3>
<p class="text-base leading-7 mb-4 text-foreground">我们实际上指定的是一个轨道数的上限，该上限由技能数决定：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="const%20orbitIndex%20%3D%20index%20%25%207%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">const</span> orbitIndex = index % <span class="hljs-number inline">7</span>;
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">在这里，这个上限是7，也就是说最多含有7条轨道。</p>
<p class="text-base leading-7 mb-4 text-foreground">举例来说，假设我们有15个技能：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="" data-code="%E6%8A%80%E8%83%BD0%3A%20index%3D0%2C%20orbitIndex%3D0%257%3D0%20%E2%86%92%20%E7%AC%AC1%E6%9D%A1%E8%BD%A8%E9%81%93%0A%E6%8A%80%E8%83%BD1%3A%20index%3D1%2C%20orbitIndex%3D1%257%3D1%20%E2%86%92%20%E7%AC%AC2%E6%9D%A1%E8%BD%A8%E9%81%93%0A%E6%8A%80%E8%83%BD2%3A%20index%3D2%2C%20orbitIndex%3D2%257%3D2%20%E2%86%92%20%E7%AC%AC3%E6%9D%A1%E8%BD%A8%E9%81%93%0A...%0A%E6%8A%80%E8%83%BD7%3A%20index%3D7%2C%20orbitIndex%3D7%257%3D0%20%E2%86%92%20%E5%8F%88%E5%9B%9E%E5%88%B0%E7%AC%AC1%E6%9D%A1%E8%BD%A8%E9%81%93%0A%E6%8A%80%E8%83%BD8%3A%20index%3D8%2C%20orbitIndex%3D8%257%3D1%20%E2%86%92%20%E7%AC%AC2%E6%9D%A1%E8%BD%A8%E9%81%93">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">code</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code>技能0: <span class="hljs-attribute inline">index</span>=0, <span class="hljs-attribute inline">orbitIndex</span>=0%7=0 → 第1条轨道
技能1: <span class="hljs-attribute inline">index</span>=1, <span class="hljs-attribute inline">orbitIndex</span>=1%7=1 → 第2条轨道
技能2: <span class="hljs-attribute inline">index</span>=2, <span class="hljs-attribute inline">orbitIndex</span>=2%7=2 → 第3条轨道
<span class="hljs-built_in inline">..</span>.
技能7: <span class="hljs-attribute inline">index</span>=7, <span class="hljs-attribute inline">orbitIndex</span>=7%7=0 → 又回到第1条轨道
技能8: <span class="hljs-attribute inline">index</span>=8, <span class="hljs-attribute inline">orbitIndex</span>=8%7=1 → 第2条轨道
</code></pre>
            </div>
        
<h3 id="轨道半径的计算" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#轨道半径的计算" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 轨道半径的计算">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            轨道半径的计算
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="const%20orbitRadius%20%3D%20100%20%2B%20orbitIndex%20*%2050%3B%20%2F%2F%20100px%2C%20150px%2C%20200px%2C%20250px%2C%20300px%2C%20350px%2C%20400px%20orbits">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">const</span> orbitRadius = <span class="hljs-number inline">100</span> + orbitIndex * <span class="hljs-number inline">50</span>; <span class="hljs-comment inline">// 100px, 150px, 200px, 250px, 300px, 350px, 400px orbits</span>
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">每条轨道的半径按照<code>100 + orbitIndex * 50</code>的规律递增：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">第1条轨道：100px</li>
<li class="text-foreground leading-relaxed">第2条轨道：150px</li>
<li class="text-foreground leading-relaxed">第3条轨道：200px</li>
<li class="text-foreground leading-relaxed">…以此类推到400px</li>
</ul>
<h3 id="避免星球在一开始就挤在一起" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#避免星球在一开始就挤在一起" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 避免星球在一开始就挤在一起">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            避免星球在一开始就挤在一起
        </h3>
<p class="text-base leading-7 mb-4 text-foreground">为了让星球初始在同一轨道上不会重叠，我给每个星球分配了不同的初始角度：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="const%20%5Bangle%2C%20setAngle%5D%20%3D%20useState(index%20*%2060)%3B%20%2F%2F%20%E5%88%9D%E5%A7%8B%E8%A7%92%E5%BA%A6%E6%8C%89index%E9%80%92%E5%A2%9E">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">const</span> [angle, setAngle] = <span class="hljs-title function_ inline">useState</span>(index * <span class="hljs-number inline">60</span>); <span class="hljs-comment inline">// 初始角度按index递增</span>
</code></pre>
            </div>
        
<h3 id="轨道的视觉实现" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#轨道的视觉实现" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 轨道的视觉实现">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            轨道的视觉实现
        </h3>
<p class="text-base leading-7 mb-4 text-foreground">轨道本身是通过CSS创建的透明圆环：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="html" data-code="div%0AclassName%3D%22absolute%20border%20border-white%2F10%20rounded-full%20pointer-events-none%22%0Astyle%3D%7B%7B%0Awidth%3A%20orbitRadius%20*%202%2C%0Aheight%3A%20orbitRadius%20*%202%2C%0Aleft%3A%20galaxyCenter.x%20-%20orbitRadius%2C%0Atop%3A%20galaxyCenter.y%20-%20orbitRadius%2C%0A%7D%7D%0A%2F%3E">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">html</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-html"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>
    <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;absolute border border-white/10 rounded-full pointer-events-none&quot;</span>
    <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{</span>
        <span class="hljs-attr inline">width:</span> <span class="hljs-attr inline">orbitRadius</span> * <span class="hljs-attr inline">2</span>,
        <span class="hljs-attr inline">height:</span> <span class="hljs-attr inline">orbitRadius</span> * <span class="hljs-attr inline">2</span>,
        <span class="hljs-attr inline">left:</span> <span class="hljs-attr inline">galaxyCenter.x</span> <span class="hljs-attr inline">-</span> <span class="hljs-attr inline">orbitRadius</span>,
        <span class="hljs-attr inline">top:</span> <span class="hljs-attr inline">galaxyCenter.y</span> <span class="hljs-attr inline">-</span> <span class="hljs-attr inline">orbitRadius</span>,
    }}
/&gt;</span>
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">这里有个重要的细节：<code>left: galaxyCenter.x - orbitRadius</code>。因为CSS定位是基于元素的左上角，所以我们需要向左向上偏移一个轨道半径的距离，才能让圆心对准星系中心。</p>
<h2 id="z-index与渲染层次控制" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#z-index与渲染层次控制" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Z-index与渲染层次控制">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Z-index与渲染层次控制
        </h2>
<p class="text-base leading-7 mb-4 text-foreground">在一个需求层次关系的3D效果中，元素间的层级关系的管理至关重要。具体如下：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%2F%2F%20%E5%A4%AA%E9%98%B3%E4%B8%AD%E5%BF%83%20-%20%E6%9C%80%E9%AB%98%E5%B1%82%E7%BA%A7%0Adiv%20className%3D%22absolute%20z-20%20w-24%20h-24%20...%22%3E%0A%2F%2F%20%E8%BD%A8%E9%81%93%20-%20%E4%B8%8D%E5%93%8D%E5%BA%94%E9%BC%A0%E6%A0%87%E4%BA%8B%E4%BB%B6%0A%2F%2F%20%E6%98%9F%E7%90%83%20-%20%E5%8F%AF%E4%BA%A4%E4%BA%92%E5%B1%82%E7%BA%A7">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-comment inline">// 太阳中心 - 最高层级</span>
&lt;motion.<span class="hljs-property inline">div</span> className=<span class="hljs-string inline">&quot;absolute z-20 w-24 h-24 ...&quot;</span>&gt;

<span class="hljs-comment inline">// 轨道 - 不响应鼠标事件</span>
&lt;div className=&quot;... pointer-events-none&quot;&gt;

// 星球 - 可交互层级
&lt;motion.div className=&quot;... pointer-events-auto&quot;&gt;
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">这个设计有几个关键点：</p>
<ol class="list-decimal list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">太阳永远在最前面</strong>：<code>z-20</code>确保中心的太阳不会被星球遮挡</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">轨道不干扰交互</strong>：<code>pointer-events-none</code>让用户可以点击轨道上的星球，而不是轨道本身</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">星球可以交互</strong>：<code>pointer-events-auto</code>让每个星球都能响应鼠标事件</li>
</ol>
<p class="text-base leading-7 mb-4 text-foreground">这种层级设计让用户能够自然地与星球交互，同时保持视觉层次的清晰性。</p>
<h2 id="动画循环实现" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#动画循环实现" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 动画循环实现">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            动画循环实现
        </h2>
<p class="text-base leading-7 mb-4 text-foreground">现在到了最核心的部分——如何让这个星系平滑地转动起来。</p>
<h3 id="为什么选择requestanimationframe？" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#为什么选择requestanimationframe？" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 为什么选择requestAnimationFrame？">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            为什么选择requestAnimationFrame？
        </h3>
<p class="text-base leading-7 mb-4 text-foreground">相比于<code>setInterval</code>或<code>setTimeout</code>，<code>requestAnimationFrame</code>有几个无可替代的优势：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">与浏览器刷新率同步</strong>：通常是60fps，给用户最流畅的体验</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">自动优化</strong>：当页面不可见时会暂停，节省CPU资源</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">时间精确</strong>：提供高精度的时间戳</li>
</ul>
<h3 id="动画循环核心实现" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#动画循环核心实现" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 动画循环核心实现">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            动画循环核心实现
        </h3>
<p class="text-base leading-7 mb-4 text-foreground">以下是实现平滑动画的核心代码：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="const%20animate%20%3D%20(currentTime%3A%20number)%20%3D%3E%20%7B%0Aif%20(!lastTimeRef.current)%20lastTimeRef.current%20%3D%20currentTime%3B%0Aconst%20deltaTime%20%3D%20currentTime%20-%20lastTimeRef.current%3B%0AlastTimeRef.current%20%3D%20currentTime%3B%0AframeCountRef.current%2B%2B%3B%0A%2F%2F%20%E9%87%87%E7%94%A8%E5%B8%A7%E7%8E%87%E6%8E%A7%E5%88%B6%E7%AD%96%E7%95%A5%20-%20%E6%AF%8F2%E5%B8%A7%E6%9B%B4%E6%96%B0%E4%B8%80%E6%AC%A1%E4%BD%8D%E7%BD%AE%0Aif%20(frameCountRef.current%20%25%202%20%3D%3D%3D%200)%20%7B%0Aconst%20currentData%20%3D%20planetsDataRef.current%3B%0A%2F%2F%20%E6%9B%B4%E6%96%B0%E6%98%9F%E7%90%83%E4%BD%8D%E7%BD%AE%E5%92%8C%E8%A7%92%E5%BA%A6%0Aconst%20updatedPlanets%20%3D%20currentData.map(planet%20%3D%3E%20%7B%0Aif%20(planet.isPaused)%20return%20planet%3B%0Aconst%20baseSpeed%20%3D%200.15%20%2B%20planet.orbitIndex%20*%200.08%3B%0Aconst%20currentSpeed%20%3D%20baseSpeed%20*%20planet.speedMultiplier%20*%20planet.collisionSpeedBoost%3B%0Aconst%20newAngle%20%3D%20(planet.angle%20%2B%20currentSpeed%20*%20deltaTime%20*%200.01)%20%25%20360%3B%0Aconst%20normalizedAngle%20%3D%20newAngle%200%20%3F%20newAngle%20%2B%20360%20%3A%20newAngle%3B%0Areturn%20%7B%0A...planet%2C%0Aangle%3A%20normalizedAngle%2C%0Ax%3A%20galaxyCenter.x%20%2B%20Math.cos(normalizedAngle%20*%20Math.PI%20%2F%20180)%20*%20planet.orbitRadius%2C%0Ay%3A%20galaxyCenter.y%20%2B%20Math.sin(normalizedAngle%20*%20Math.PI%20%2F%20180)%20*%20planet.orbitRadius%2C%0A%7D%3B%0A%7D)%3B%0A%2F%2F%20%E6%AF%8F4%E5%B8%A7%E8%BF%9B%E8%A1%8C%E4%B8%80%E6%AC%A1%E7%A2%B0%E6%92%9E%E6%A3%80%E6%B5%8B%EF%BC%88%E6%90%85%E5%8A%A8%E6%97%B6%E4%BF%9D%E6%8C%81%E9%AB%98%E9%A2%91%E7%8E%87%EF%BC%89%0Alet%20finalPlanets%20%3D%20updatedPlanets%3B%0Aif%20(frameCountRef.current%20%25%204%20%3D%3D%3D%200%20%7C%7C%20isStirring)%20%7B%0AfinalPlanets%20%3D%20detectCollisions(updatedPlanets)%3B%0A%7D%0A%2F%2F%20%E5%8F%AA%E5%9C%A8%E6%9C%89%E5%AE%9E%E9%99%85%E5%8F%98%E5%8C%96%E6%97%B6%E6%9B%B4%E6%96%B0%E7%8A%B6%E6%80%81%0Aif%20(finalPlanets%20!%3D%3D%20currentData)%20%7B%0AplanetsDataRef.current%20%3D%20finalPlanets%3B%0AsetPlanetsData(finalPlanets)%3B%0A%7D%0A%7D%0AanimationRef.current%20%3D%20requestAnimationFrame(animate)%3B%0A%7D%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">animate</span> = (<span class="hljs-params inline"><span class="hljs-attr inline">currentTime</span>: <span class="hljs-built_in inline">number</span></span>) =&gt; {
    <span class="hljs-keyword inline">if</span> (!lastTimeRef.<span class="hljs-property inline">current</span>) lastTimeRef.<span class="hljs-property inline">current</span> = currentTime;
    <span class="hljs-keyword inline">const</span> deltaTime = currentTime - lastTimeRef.<span class="hljs-property inline">current</span>;
    lastTimeRef.<span class="hljs-property inline">current</span> = currentTime;
    
    frameCountRef.<span class="hljs-property inline">current</span>++;
    
    <span class="hljs-comment inline">// 采用帧率控制策略 - 每2帧更新一次位置</span>
    <span class="hljs-keyword inline">if</span> (frameCountRef.<span class="hljs-property inline">current</span> % <span class="hljs-number inline">2</span> === <span class="hljs-number inline">0</span>) {
        <span class="hljs-keyword inline">const</span> currentData = planetsDataRef.<span class="hljs-property inline">current</span>;
        
        <span class="hljs-comment inline">// 更新星球位置和角度</span>
        <span class="hljs-keyword inline">const</span> updatedPlanets = currentData.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline"><span class="hljs-params inline">planet</span> =&gt;</span> {
            <span class="hljs-keyword inline">if</span> (planet.<span class="hljs-property inline">isPaused</span>) <span class="hljs-keyword inline">return</span> planet;

            <span class="hljs-keyword inline">const</span> baseSpeed = <span class="hljs-number inline">0.15</span> + planet.<span class="hljs-property inline">orbitIndex</span> * <span class="hljs-number inline">0.08</span>;
            <span class="hljs-keyword inline">const</span> currentSpeed = baseSpeed * planet.<span class="hljs-property inline">speedMultiplier</span> * planet.<span class="hljs-property inline">collisionSpeedBoost</span>;
            <span class="hljs-keyword inline">const</span> newAngle = (planet.<span class="hljs-property inline">angle</span> + currentSpeed * deltaTime * <span class="hljs-number inline">0.01</span>) % <span class="hljs-number inline">360</span>;
            <span class="hljs-keyword inline">const</span> normalizedAngle = newAngle &lt; <span class="hljs-number inline">0</span> ? newAngle + <span class="hljs-number inline">360</span> : newAngle;

            <span class="hljs-keyword inline">return</span> {
                ...planet,
                <span class="hljs-attr inline">angle</span>: normalizedAngle,
                <span class="hljs-attr inline">x</span>: galaxyCenter.<span class="hljs-property inline">x</span> + <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">cos</span>(normalizedAngle * <span class="hljs-title class_ inline">Math</span>.<span class="hljs-property inline">PI</span> / <span class="hljs-number inline">180</span>) * planet.<span class="hljs-property inline">orbitRadius</span>,
                <span class="hljs-attr inline">y</span>: galaxyCenter.<span class="hljs-property inline">y</span> + <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">sin</span>(normalizedAngle * <span class="hljs-title class_ inline">Math</span>.<span class="hljs-property inline">PI</span> / <span class="hljs-number inline">180</span>) * planet.<span class="hljs-property inline">orbitRadius</span>,
            };
        });

        <span class="hljs-comment inline">// 每4帧进行一次碰撞检测（搅动时保持高频率）</span>
        <span class="hljs-keyword inline">let</span> finalPlanets = updatedPlanets;
        <span class="hljs-keyword inline">if</span> (frameCountRef.<span class="hljs-property inline">current</span> % <span class="hljs-number inline">4</span> === <span class="hljs-number inline">0</span> || isStirring) {
            finalPlanets = <span class="hljs-title function_ inline">detectCollisions</span>(updatedPlanets);
        }

        <span class="hljs-comment inline">// 只在有实际变化时更新状态</span>
        <span class="hljs-keyword inline">if</span> (finalPlanets !== currentData) {
            planetsDataRef.<span class="hljs-property inline">current</span> = finalPlanets;
            <span class="hljs-title function_ inline">setPlanetsData</span>(finalPlanets);
        }
    }
    
    animationRef.<span class="hljs-property inline">current</span> = <span class="hljs-title function_ inline">requestAnimationFrame</span>(animate);
};
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">主要功能解释：</p>
<ol class="list-decimal list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">初始化时间戳</strong>：第一次调用时设置基准时间</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">计算时间差</strong>：<code>deltaTime</code>是距离上次更新的毫秒数</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">更新时间戳</strong>：为下次计算做准备</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">角度累积</strong>：根据时间差按比例更新角度</li>
</ol>
<h3 id="控制星球初始公转速度的001系数" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#控制星球初始公转速度的001系数" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 控制星球初始公转速度的0.01系数">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            控制星球初始公转速度的0.01系数
        </h3>
<p class="text-base leading-7 mb-4 text-foreground">你可能注意到了<code>deltaTime * 0.01</code>这个系数。其意义为：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>deltaTime</code>的单位是毫秒，通常在16-17ms左右（60fps）</li>
<li class="text-foreground leading-relaxed">乘以0.01后，每帧大概增加0.16-0.17度</li>
<li class="text-foreground leading-relaxed">这个速度让星球的运动看起来既不会太快眼花缭乱，也不会太慢显得迟钝</li>
</ul>
<h3 id="动画生命周期的管理" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#动画生命周期的管理" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 动画生命周期的管理">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            动画生命周期的管理
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="useEffect(()%20%3D%3E%20%7B%0AanimationRef.current%20%3D%20requestAnimationFrame(animate)%3B%0Areturn%20()%20%3D%3E%20%7B%0Aif%20(animationRef.current)%20%7B%0AcancelAnimationFrame(animationRef.current)%3B%0A%7D%0A%7D%3B%0A%7D%2C%20%5BisPaused%2C%20currentSpeed%5D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-title function_ inline">useEffect</span>(<span class="hljs-function inline">() =&gt;</span> {
    animationRef.<span class="hljs-property inline">current</span> = <span class="hljs-title function_ inline">requestAnimationFrame</span>(animate);
    
    <span class="hljs-keyword inline">return</span> <span class="hljs-function inline">() =&gt;</span> {
        <span class="hljs-keyword inline">if</span> (animationRef.<span class="hljs-property inline">current</span>) {
            <span class="hljs-title function_ inline">cancelAnimationFrame</span>(animationRef.<span class="hljs-property inline">current</span>);
        }
    };
}, [isPaused, currentSpeed]);
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">这个useEffect确保了：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">组件挂载时启动动画</li>
<li class="text-foreground leading-relaxed">组件卸载时清理动画，防止内存泄漏</li>
<li class="text-foreground leading-relaxed">当暂停状态或速度改变时重启动画循环</li>
</ul>
<h2 id="仿真天体运行的速度差异" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#仿真天体运行的速度差异" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 仿真天体运行的速度差异">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            仿真天体运行的速度差异
        </h2>
<p class="text-base leading-7 mb-4 text-foreground">真实的太阳系中，内层行星运行得比外层行星快。这个物理现象被称为开普勒第三定律，我在星系中也模拟了这个效果：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="const%20baseSpeed%20%3D%200.15%20%2B%20orbitIndex%20*%200.08%3B%20%2F%2F%20%E5%9F%BA%E7%A1%80%E9%80%9F%E5%BA%A6%E5%8A%A0%E8%BD%A8%E9%81%93%E7%B3%BB%E6%95%B0%0Aconst%20currentSpeed%20%3D%20baseSpeed%20*%20speedMultiplier%20*%20collisionSpeedBoost%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">const</span> baseSpeed = <span class="hljs-number inline">0.15</span> + orbitIndex * <span class="hljs-number inline">0.08</span>; <span class="hljs-comment inline">// 基础速度加轨道系数</span>
<span class="hljs-keyword inline">const</span> currentSpeed = baseSpeed * speedMultiplier * collisionSpeedBoost;
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">让我们看看实际的速度分布：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">第1条轨道（orbitIndex=0）：0.15 - 最快</li>
<li class="text-foreground leading-relaxed">第2条轨道（orbitIndex=1）：0.23</li>
<li class="text-foreground leading-relaxed">第3条轨道（orbitIndex=2）：0.31</li>
<li class="text-foreground leading-relaxed">第4条轨道（orbitIndex=3）：0.39</li>
<li class="text-foreground leading-relaxed">第5条轨道（orbitIndex=4）：0.47</li>
<li class="text-foreground leading-relaxed">第6条轨道（orbitIndex=5）：0.55</li>
<li class="text-foreground leading-relaxed">第7条轨道（orbitIndex=6）：0.63 - 最慢</li>
</ul>
<p class="text-base leading-7 mb-4 text-foreground">…但是！如果你稍稍观察就会发现，在我的技能星系中，外层轨道实际上比内层轨道转得更快（数值更大）。这和真实的物理世界是相反的。</p>
<p class="text-base leading-7 mb-4 text-foreground">而我选择故意保留这个&quot;bug&quot;，因为从实际的视觉体验上来说，外层轨道转得稍快一些实际上创造了更好的动态感。这波是艺术效果&gt;物理准确性a.a</p>
<p class="text-base leading-7 mb-4 text-foreground"><code>speedMultiplier</code>是一个星球组件的扩展属性，它为&quot;搅动星系&quot;功能预留了接口，平时保持为1，需要加速时可以变成4-14倍。</p>
<h2 id="交互反馈" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#交互反馈" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 交互反馈">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            交互反馈
        </h2>
<p class="text-base leading-7 mb-4 text-foreground">用户体验的精髓在于反馈。当鼠标悬停在星球上时，会显现以下反应。</p>
<h3 id="智能暂停机制" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#智能暂停机制" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 智能暂停机制">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            智能暂停机制
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="const%20handleMouseEnter%20%3D%20useCallback((index%3A%20number)%20%3D%3E%20%7B%0Aconst%20currentData%20%3D%20planetsDataRef.current%3B%0Aconst%20newData%20%3D%20currentData.map((planet%2C%20i)%20%3D%3E%0Ai%20%3D%3D%3D%20index%20%3F%20%7B...planet%2C%20isPaused%3A%20true%2C%20isHovered%3A%20true%7D%20%3A%20planet%0A)%3B%0AplanetsDataRef.current%20%3D%20newData%3B%0AsetPlanetsData(newData)%3B%0A%7D%2C%20%5B%5D)%3B%0Aconst%20handleMouseLeave%20%3D%20useCallback((index%3A%20number)%20%3D%3E%20%7B%0Aconst%20currentData%20%3D%20planetsDataRef.current%3B%0Aconst%20newData%20%3D%20currentData.map((planet%2C%20i)%20%3D%3E%0Ai%20%3D%3D%3D%20index%20%3F%20%7B...planet%2C%20isPaused%3A%20false%2C%20isHovered%3A%20false%7D%20%3A%20planet%0A)%3B%0AplanetsDataRef.current%20%3D%20newData%3B%0AsetPlanetsData(newData)%3B%0A%7D%2C%20%5B%5D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">const</span> handleMouseEnter = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">(<span class="hljs-params inline"><span class="hljs-attr inline">index</span>: <span class="hljs-built_in inline">number</span></span>) =&gt;</span> {
    <span class="hljs-keyword inline">const</span> currentData = planetsDataRef.<span class="hljs-property inline">current</span>;
    <span class="hljs-keyword inline">const</span> newData = currentData.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline">(<span class="hljs-params inline">planet, i</span>) =&gt;</span>
        i === index ? {...planet, <span class="hljs-attr inline">isPaused</span>: <span class="hljs-literal inline">true</span>, <span class="hljs-attr inline">isHovered</span>: <span class="hljs-literal inline">true</span>} : planet
    );
    planetsDataRef.<span class="hljs-property inline">current</span> = newData;
    <span class="hljs-title function_ inline">setPlanetsData</span>(newData);
}, []);

<span class="hljs-keyword inline">const</span> handleMouseLeave = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">(<span class="hljs-params inline"><span class="hljs-attr inline">index</span>: <span class="hljs-built_in inline">number</span></span>) =&gt;</span> {
    <span class="hljs-keyword inline">const</span> currentData = planetsDataRef.<span class="hljs-property inline">current</span>;
    <span class="hljs-keyword inline">const</span> newData = currentData.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline">(<span class="hljs-params inline">planet, i</span>) =&gt;</span>
        i === index ? {...planet, <span class="hljs-attr inline">isPaused</span>: <span class="hljs-literal inline">false</span>, <span class="hljs-attr inline">isHovered</span>: <span class="hljs-literal inline">false</span>} : planet
    );
    planetsDataRef.<span class="hljs-property inline">current</span> = newData;
    <span class="hljs-title function_ inline">setPlanetsData</span>(newData);
}, []);
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">通过<code>useCallback</code>优化的事件处理器确保了回调函数的引用稳定性，当用户悬停时，对应的星球会优雅地停下来，同时更新悬停状态，就像时间被冻结了一样。这个细节让用户能够仔细查看星球信息，而不会被持续的运动分散注意力。</p>
<h3 id="多层次状态样式系统" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#多层次状态样式系统" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 多层次状态样式系统">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            多层次状态样式系统
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="className%3D%7B%60%0Aw-16%20h-16%20rounded-full%0Abg-gradient-to-br%20from-white%2F20%20to-white%2F5%0Abackdrop-blur-sm%20border%20border-white%2F20%0Aflex%20items-center%20justify-center%0Atransition-all%20duration-300%0A%24%7BplanetData.isHovered%20%3F%20'bg-primary%2F30%20border-primary%2F50%20shadow-lg%20shadow-primary%2F20'%20%3A%20''%7D%0A%24%7BplanetData.speedMultiplier%20%3E%201%20%3F%20'bg-purple-500%2F30%20border-purple-400%2F50%20shadow-lg%20shadow-purple-400%2F20'%20%3A%20''%7D%0A%24%7BplanetData.isCollided%20%3F%20'bg-red-500%2F30%20border-red-400%2F50%20shadow-lg%20shadow-red-400%2F20'%20%3A%20''%7D%0A%24%7BplanetData.collisionSpeedBoost%20%3E%201%20%3F%20'bg-yellow-500%2F30%20border-yellow-400%2F50%20shadow-lg%20shadow-yellow-400%2F20'%20%3A%20''%7D%0A%60%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript">className={<span class="hljs-string inline">`
    w-16 h-16 rounded-full 
    bg-gradient-to-br from-white/20 to-white/5
    backdrop-blur-sm border border-white/20
    flex items-center justify-center
    transition-all duration-300
    <span class="hljs-subst inline">${planetData.isHovered ? <span class="hljs-string inline">&#x27;bg-primary/30 border-primary/50 shadow-lg shadow-primary/20&#x27;</span> : <span class="hljs-string inline">&#x27;&#x27;</span>}</span>
    <span class="hljs-subst inline">${planetData.speedMultiplier &gt; <span class="hljs-number inline">1</span> ? <span class="hljs-string inline">&#x27;bg-purple-500/30 border-purple-400/50 shadow-lg shadow-purple-400/20&#x27;</span> : <span class="hljs-string inline">&#x27;&#x27;</span>}</span>
    <span class="hljs-subst inline">${planetData.isCollided ? <span class="hljs-string inline">&#x27;bg-red-500/30 border-red-400/50 shadow-lg shadow-red-400/20&#x27;</span> : <span class="hljs-string inline">&#x27;&#x27;</span>}</span>
    <span class="hljs-subst inline">${planetData.collisionSpeedBoost &gt; <span class="hljs-number inline">1</span> ? <span class="hljs-string inline">&#x27;bg-yellow-500/30 border-yellow-400/50 shadow-lg shadow-yellow-400/20&#x27;</span> : <span class="hljs-string inline">&#x27;&#x27;</span>}</span>
`</span>}
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">这个多层次条件样式系统让星球能够根据不同状态展现丰富的视觉反馈：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">默认状态</strong>：半透明白色，低调优雅</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">悬停状态</strong>：主题色高亮，增加阴影</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">搅动状态</strong>：紫色强调，表示正在高速运行</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">碰撞状态</strong>：红色警示，标示危险状态</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">爆发状态</strong>：黄色高亮，展示能量释放</li>
</ul>
<h3 id="信息面板的动态更新" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#信息面板的动态更新" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 信息面板的动态更新">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            信息面板的动态更新
        </h3>
<p class="text-base leading-7 mb-4 text-foreground">最下方的信息面板通过<code>AnimatePresence</code>实现平滑的内容切换：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="AnimatePresence%20mode%3D%22wait%22%3E%0Amotion.div%0Akey%3D%7BhoveredSkill%3F.category%20%7C%7C%20'default'%7D%0Ainitial%3D%7B%7Bopacity%3A%200%2C%20y%3A%2020%7D%7D%0Aanimate%3D%7B%7Bopacity%3A%201%2C%20y%3A%200%7D%7D%0Aexit%3D%7B%7Bopacity%3A%200%2C%20y%3A%20-20%7D%7D%0Atransition%3D%7B%7Bduration%3A%200.3%7D%7D%0A%3E%0Ah4%20className%3D%22text-xl%20font-bold%20text-white%20mb-2%22%3E%0A%7BhoveredSkill%3F.category%20%7C%7C%20t('personal.fullStackEngineer')%7D%0Ah4%3E%0Ap%20className%3D%22text-gray-300%20text-sm%20leading-relaxed%22%3E%0A%7BhoveredSkill%3F.description%20%7C%7C%20t('personal.galaxyDefaultDescription')%7D%0Ap%3E%0Amotion.div%3E%0AAnimatePresence%3E">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript">&lt;<span class="hljs-title class_ inline">AnimatePresence</span> mode=<span class="hljs-string inline">&quot;wait&quot;</span>&gt;
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
        <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{hoveredSkill?.category</span> || &#x27;<span class="hljs-attr inline">default</span>&#x27;}
        <span class="hljs-attr inline">initial</span>=<span class="hljs-string inline">{{opacity:</span> <span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">y:</span> <span class="hljs-attr inline">20</span>}}
        <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">{{opacity:</span> <span class="hljs-attr inline">1</span>, <span class="hljs-attr inline">y:</span> <span class="hljs-attr inline">0</span>}}
        <span class="hljs-attr inline">exit</span>=<span class="hljs-string inline">{{opacity:</span> <span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">y:</span> <span class="hljs-attr inline">-20</span>}}
        <span class="hljs-attr inline">transition</span>=<span class="hljs-string inline">{{duration:</span> <span class="hljs-attr inline">0.3</span>}}
    &gt;</span>
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">h4</span> <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;text-xl font-bold text-white mb-2&quot;</span>&gt;</span>
            {hoveredSkill?.category || t(&#x27;personal.fullStackEngineer&#x27;)}
        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">h4</span>&gt;</span>
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span> <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;text-gray-300 text-sm leading-relaxed&quot;</span>&gt;</span>
            {hoveredSkill?.description || t(&#x27;personal.galaxyDefaultDescription&#x27;)}
        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.div</span>&gt;</span></span>
&lt;/<span class="hljs-title class_ inline">AnimatePresence</span>&gt;
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><code>mode=&quot;wait&quot;</code>确保旧内容完全消失后才显示新内容，避免了重叠闪烁的问题。</p>
<h2 id="动态交互的随机化实现" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#动态交互的随机化实现" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 动态交互的随机化实现">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            动态交互的随机化实现
        </h2>
<p class="text-base leading-7 mb-4 text-foreground">&quot;搅动星系&quot;功能模拟了对星系施加外力的效果，从而让这个星系显得不那么死板。</p>
<h3 id="随机选择算法" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#随机选择算法" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 随机选择算法">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            随机选择算法
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="const%20numPlanetsToStir%20%3D%20Math.min(resumeData.skills.length%2C%0AMath.floor(resumeData.skills.length%20*%20Math.random()%20%2B%201))%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">const</span> numPlanetsToStir = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">min</span>(resumeData.<span class="hljs-property inline">skills</span>.<span class="hljs-property inline">length</span>, 
    <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">floor</span>(resumeData.<span class="hljs-property inline">skills</span>.<span class="hljs-property inline">length</span> * <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">random</span>() + <span class="hljs-number inline">1</span>));
</code></pre>
            </div>
        
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>resumeData.skills.length * Math.random() + 1</code>：产生1到总数之间的随机数</li>
<li class="text-foreground leading-relaxed"><code>Math.floor()</code>：向下取整</li>
<li class="text-foreground leading-relaxed"><code>Math.min()</code>：确保不会超过总星球数</li>
</ul>
<p class="text-base leading-7 mb-4 text-foreground">这意味着每次搅动，都会有随机数量的星球被影响，增加了不可预测性。</p>
<h3 id="避免重复选择" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#避免重复选择" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 避免重复选择">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            避免重复选择
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="const%20indicesToStir%3A%20number%5B%5D%20%3D%20%5B%5D%3B%0Awhile%20(indicesToStir.length%20const%20randomIndex%20%3D%20Math.floor(Math.random()%20*%20resumeData.skills.length)%3B%0Aif%20(!indicesToStir.includes(randomIndex))%20%7B%0AindicesToStir.push(randomIndex)%3B%0A%7D%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">const</span> <span class="hljs-attr inline">indicesToStir</span>: <span class="hljs-built_in inline">number</span>[] = [];

<span class="hljs-keyword inline">while</span> (indicesToStir.<span class="hljs-property inline">length</span> &lt; numPlanetsToStir) {
    <span class="hljs-keyword inline">const</span> randomIndex = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">floor</span>(<span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">random</span>() * resumeData.<span class="hljs-property inline">skills</span>.<span class="hljs-property inline">length</span>);
    <span class="hljs-keyword inline">if</span> (!indicesToStir.<span class="hljs-title function_ inline">includes</span>(randomIndex)) {
        indicesToStir.<span class="hljs-title function_ inline">push</span>(randomIndex);
    }
}
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">这个while循环确保每个星球最多只被选中一次，避免了浪费&quot;搅动名额&quot;的情况。</p>
<h3 id="速度的增加算法" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#速度的增加算法" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 速度的增加算法">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            速度的增加算法
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="setPlanetSpeeds(prev%20%3D%3E%20%7B%0Aconst%20newSpeeds%20%3D%20%5B...prev%5D%3B%0AindicesToStir.forEach(index%20%3D%3E%20%7B%0A%2F%2F%20Set%20random%20speed%0AnewSpeeds%5Bindex%5D%20%3D%204%20%2B%20Math.random()%20*%2010%3B%0A%7D)%3B%0Areturn%20newSpeeds%3B%0A%7D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-title function_ inline">setPlanetSpeeds</span>(<span class="hljs-function inline"><span class="hljs-params inline">prev</span> =&gt;</span> {
    <span class="hljs-keyword inline">const</span> newSpeeds = [...prev];
    indicesToStir.<span class="hljs-title function_ inline">forEach</span>(<span class="hljs-function inline"><span class="hljs-params inline">index</span> =&gt;</span> {
        <span class="hljs-comment inline">// Set random speed</span>
        newSpeeds[index] = <span class="hljs-number inline">4</span> + <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">random</span>() * <span class="hljs-number inline">10</span>;
    });
    <span class="hljs-keyword inline">return</span> newSpeeds;
});
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">被选中的星球会获得4-14倍的随机速度，随机性让每次搅动都有不同的视觉效果。</p>
<h3 id="恢复机制" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#恢复机制" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 恢复机制">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            恢复机制
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="setTimeout(()%20%3D%3E%20%7B%0AsetPlanetSpeeds(prev%20%3D%3E%20%7B%0Aconst%20resetSpeeds%20%3D%20%5B...prev%5D%3B%0AindicesToStir.forEach(index%20%3D%3E%20%7B%0AresetSpeeds%5Bindex%5D%20%3D%201%3B%0A%7D)%3B%0Areturn%20resetSpeeds%3B%0A%7D)%3B%0A%7D%2C%203000)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-built_in inline">setTimeout</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-title function_ inline">setPlanetSpeeds</span>(<span class="hljs-function inline"><span class="hljs-params inline">prev</span> =&gt;</span> {
        <span class="hljs-keyword inline">const</span> resetSpeeds = [...prev];
        indicesToStir.<span class="hljs-title function_ inline">forEach</span>(<span class="hljs-function inline"><span class="hljs-params inline">index</span> =&gt;</span> {
            resetSpeeds[index] = <span class="hljs-number inline">1</span>;
        });
        <span class="hljs-keyword inline">return</span> resetSpeeds;
    });
}, <span class="hljs-number inline">3000</span>);
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">3秒后，所有星球都会恢复到正常速度。这个时间长度刚好：不会太短让用户看不清效果，也不会太长让用户感到厌烦。</p>
<h3 id="高速状态的视觉提示" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#高速状态的视觉提示" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 高速状态的视觉提示">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            高速状态的视觉提示
        </h3>
<p class="text-base leading-7 mb-4 text-foreground">当星球处于高速状态时，会显示特殊的紫色样式：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%24%7BspeedMultiplier%20%3E%201%20%3F%20'bg-purple-500%2F30%20border-purple-400%2F50%20shadow-lg%20shadow-purple-400%2F20'%20%3A%20''%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript">${speedMultiplier &gt; <span class="hljs-number inline">1</span> ? <span class="hljs-string inline">&#x27;bg-purple-500/30 border-purple-400/50 shadow-lg shadow-purple-400/20&#x27;</span> : <span class="hljs-string inline">&#x27;&#x27;</span>}
</code></pre>
            </div>
        
<h2 id="中心天体的动态光效设计" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#中心天体的动态光效设计" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 中心天体的动态光效设计">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            中心天体的动态光效设计
        </h2>
<p class="text-base leading-7 mb-4 text-foreground">为了使得中心的太阳不显得像个装饰品，我给它添加了一些隐约但观感舒适的光效动画。</p>
<h3 id="呼吸般的光晕变化" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#呼吸般的光晕变化" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 呼吸般的光晕变化">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            呼吸般的光晕变化
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="animate%3D%7B%7B%0AboxShadow%3A%20%5B%0A%220%200%2030px%20rgba(255%2C%20193%2C%207%2C%200.5)%22%2C%0A%220%200%2050px%20rgba(255%2C%20193%2C%207%2C%200.8)%22%2C%0A%220%200%2030px%20rgba(255%2C%20193%2C%207%2C%200.5)%22%0A%5D%0A%7D%7D%0Atransition%3D%7B%7B%0Aduration%3A%203%2C%0Arepeat%3A%20Infinity%2C%0Aease%3A%20%22easeInOut%22%0A%7D%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript">animate={{
    <span class="hljs-attr inline">boxShadow</span>: [
        <span class="hljs-string inline">&quot;0 0 30px rgba(255, 193, 7, 0.5)&quot;</span>,
        <span class="hljs-string inline">&quot;0 0 50px rgba(255, 193, 7, 0.8)&quot;</span>,
        <span class="hljs-string inline">&quot;0 0 30px rgba(255, 193, 7, 0.5)&quot;</span>
    ]
}}
transition={{
    <span class="hljs-attr inline">duration</span>: <span class="hljs-number inline">3</span>,
    <span class="hljs-attr inline">repeat</span>: <span class="hljs-title class_ inline">Infinity</span>,
    <span class="hljs-attr inline">ease</span>: <span class="hljs-string inline">&quot;easeInOut&quot;</span>
}}
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">这个动画创造了&quot;呼吸&quot;的效果：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">30px阴影</strong>：收缩状态，较为内敛</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">50px阴影</strong>：扩张状态，光芒四射</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">0.5→0.8→0.5透明度</strong>：配合大小变化，增强明暗对比</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">3秒周期</strong>：不会太快显得焦躁，不会太慢显得迟缓</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">easeInOut</strong>：自然的加速和减速，就像真实的呼吸</li>
</ul>
<h3 id="多层光晕" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#多层光晕" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 多层光晕">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            多层光晕
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%7B%2F*%20%E4%B8%BB%E4%BD%93%E5%A4%AA%E9%98%B3%20*%2F%7D%0A%22w-full%20h-full%20rounded-full%20bg-gradient-to-br%20from-amber-300%20via-yellow-400%20to-orange-500%22%3E%0A%F0%9F%91%A8%E2%80%8D%F0%9F%92%BB%0A%7B%2F*%20%E8%83%8C%E6%99%AF%E5%85%89%E6%99%95%20*%2F%7D%0A%22absolute%20inset-0%20rounded-full%20bg-gradient-to-br%20from-amber-300%2F30%20to-orange-500%2F30%20animate-pulse%20-z-10%20scale-150%22%2F%3E">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript">{<span class="hljs-comment inline">/* 主体太阳 */</span>}
&lt;div className=<span class="hljs-string inline">&quot;w-full h-full rounded-full bg-gradient-to-br from-amber-300 via-yellow-400 to-orange-500&quot;</span>&gt;
    👨‍💻
&lt;/div&gt;

{<span class="hljs-comment inline">/* 背景光晕 */</span>}
&lt;div className=<span class="hljs-string inline">&quot;absolute inset-0 rounded-full bg-gradient-to-br from-amber-300/30 to-orange-500/30 animate-pulse -z-10 scale-150&quot;</span>/&gt;
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">这里有两层光效：</p>
<ol class="list-decimal list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">主体太阳</strong>：实体的渐变色彩，从琥珀色到橙色</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">背景光晕</strong>：更大、更透明、有脉动效果的光圈</li>
</ol>
<p class="text-base leading-7 mb-4 text-foreground"><code>scale-150</code>让背景光晕比主体大50%，<code>-z-10</code>确保它在背景中，创造了多层次的光效。</p>
<h2 id="动态布局的中心定位系统" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#动态布局的中心定位系统" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 动态布局的中心定位系统">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            动态布局的中心定位系统
        </h2>
<p class="text-base leading-7 mb-4 text-foreground">在响应式设计中，星系的中心位置需要根据容器大小动态调整，避免窗口大小切换时出现星系偏移问题。</p>
<h3 id="中心计算" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#中心计算" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 中心计算">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            中心计算
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="const%20updateCenter%20%3D%20()%20%3D%3E%20%7B%0Aif%20(galaxyRef.current)%20%7B%0Aconst%20rect%20%3D%20galaxyRef.current.getBoundingClientRect()%3B%0AsetGalaxyCenter(%7B%0Ax%3A%20rect.width%20%2F%202%2C%0Ay%3A%20rect.height%20%2F%202%0A%7D)%3B%0A%7D%0A%7D%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">updateCenter</span> = (<span class="hljs-params inline"></span>) =&gt; {
    <span class="hljs-keyword inline">if</span> (galaxyRef.<span class="hljs-property inline">current</span>) {
        <span class="hljs-keyword inline">const</span> rect = galaxyRef.<span class="hljs-property inline">current</span>.<span class="hljs-title function_ inline">getBoundingClientRect</span>();
        <span class="hljs-title function_ inline">setGalaxyCenter</span>({
            <span class="hljs-attr inline">x</span>: rect.<span class="hljs-property inline">width</span> / <span class="hljs-number inline">2</span>,
            <span class="hljs-attr inline">y</span>: rect.<span class="hljs-property inline">height</span> / <span class="hljs-number inline">2</span>
        });
    }
};
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><code>getBoundingClientRect()</code>是获取DOM元素实际尺寸的最可靠方法，它返回的是元素在页面中的实际渲染尺寸，包括了padding和所有样式影响。</p>
<h3 id="响应式监听" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#响应式监听" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 响应式监听">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            响应式监听
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="useEffect(()%20%3D%3E%20%7B%0AupdateCenter()%3B%0Awindow.addEventListener('resize'%2C%20updateCenter)%3B%0Areturn%20()%20%3D%3E%20window.removeEventListener('resize'%2C%20updateCenter)%3B%0A%7D%2C%20%5B%5D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-title function_ inline">useEffect</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-title function_ inline">updateCenter</span>();
    <span class="hljs-variable language_ inline">window</span>.<span class="hljs-title function_ inline">addEventListener</span>(<span class="hljs-string inline">&#x27;resize&#x27;</span>, updateCenter);
    
    <span class="hljs-keyword inline">return</span> <span class="hljs-function inline">() =&gt;</span> <span class="hljs-variable language_ inline">window</span>.<span class="hljs-title function_ inline">removeEventListener</span>(<span class="hljs-string inline">&#x27;resize&#x27;</span>, updateCenter);
}, []);
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">这个effect做了三件事：</p>
<ol class="list-decimal list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">组件挂载时</strong>：立即计算一次中心位置</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">窗口调整时</strong>：重新计算中心位置</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">组件卸载时</strong>：清理事件监听器，防止内存泄漏</li>
</ol>
<h3 id="默认值的保险策略" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#默认值的保险策略" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 默认值的保险策略">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            默认值的保险策略
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="const%20%5BgalaxyCenter%2C%20setGalaxyCenter%5D%20%3D%20useState(%7Bx%3A%20350%2C%20y%3A%20350%7D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">const</span> [galaxyCenter, setGalaxyCenter] = <span class="hljs-title function_ inline">useState</span>({<span class="hljs-attr inline">x</span>: <span class="hljs-number inline">350</span>, <span class="hljs-attr inline">y</span>: <span class="hljs-number inline">350</span>});
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><code>{x: 350, y: 350}</code>这个默认值根据700x700px的容器计算而来，提供了以下功能：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">在实际尺寸计算完成前提供一个合理的初始位置</li>
<li class="text-foreground leading-relaxed">避免初始渲染时星球位置的突然跳跃</li>
</ul>
<h3 id="getboundingclientrect-vs-offsetwidth" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#getboundingclientrect-vs-offsetwidth" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to getBoundingClientRect vs offsetWidth">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            getBoundingClientRect vs offsetWidth
        </h3>
<p class="text-base leading-7 mb-4 text-foreground">你可能会问，为什么不用<code>offsetWidth</code>和<code>offsetHeight</code>？</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%2F%2F%20%E8%BF%99%E6%A0%B7%E4%B8%8D%E5%A4%9F%E5%87%86%E7%A1%AE%0Aconst%20width%20%3D%20galaxyRef.current.offsetWidth%3B%0Aconst%20height%20%3D%20galaxyRef.current.offsetHeight%3B%0A%2F%2F%20%E8%BF%99%E6%A0%B7%E6%9B%B4%E7%B2%BE%E7%A1%AE%0Aconst%20rect%20%3D%20galaxyRef.current.getBoundingClientRect()%3B%0Aconst%20width%20%3D%20rect.width%3B%0Aconst%20height%20%3D%20rect.height%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-comment inline">// 这样不够准确</span>
<span class="hljs-keyword inline">const</span> width = galaxyRef.<span class="hljs-property inline">current</span>.<span class="hljs-property inline">offsetWidth</span>;
<span class="hljs-keyword inline">const</span> height = galaxyRef.<span class="hljs-property inline">current</span>.<span class="hljs-property inline">offsetHeight</span>;

<span class="hljs-comment inline">// 这样更精确</span>
<span class="hljs-keyword inline">const</span> rect = galaxyRef.<span class="hljs-property inline">current</span>.<span class="hljs-title function_ inline">getBoundingClientRect</span>();
<span class="hljs-keyword inline">const</span> width = rect.<span class="hljs-property inline">width</span>;
<span class="hljs-keyword inline">const</span> height = rect.<span class="hljs-property inline">height</span>;
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><code>getBoundingClientRect()</code>提供了更精确的小数值，而<code>offsetWidth</code>只返回整数，在一些精细的布局中可能会导致1-2像素的偏差。</p>
<h2 id="星球碰撞系统" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#星球碰撞系统" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 星球碰撞系统">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            星球碰撞系统
        </h2>
<p class="text-base leading-7 mb-4 text-foreground">我从让多个星球运行在同一个轨道上的那一刻就在思索了：得整点合理的东西。（真的合理吗？）</p>
<h3 id="碰撞检测的数学原理" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#碰撞检测的数学原理" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 碰撞检测的数学原理">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            碰撞检测的数学原理
        </h3>
<p class="text-base leading-7 mb-4 text-foreground">要判断两个在圆形轨道上运动的星球是否&quot;相撞&quot;，我们需要比较它们在极坐标系统中的角度差异。</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%2F%2F%20%E7%A2%B0%E6%92%9E%E6%A3%80%E6%B5%8B%E7%9A%84%E6%A0%B8%E5%BF%83%E9%80%BB%E8%BE%91%0Aconst%20angleDiff%20%3D%20Math.abs(otherPlanet.angle%20-%20currentPlanet.angle)%3B%0Aconst%20normalizedAngleDiff%20%3D%20Math.min(angleDiff%2C%20360%20-%20angleDiff)%3B%0Aif%20(normalizedAngleDiff%20%2F%2F%20%E7%A2%B0%E6%92%9E%E5%8F%91%E7%94%9F%EF%BC%81%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-comment inline">// 碰撞检测的核心逻辑</span>
<span class="hljs-keyword inline">const</span> angleDiff = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">abs</span>(otherPlanet.<span class="hljs-property inline">angle</span> - currentPlanet.<span class="hljs-property inline">angle</span>);
<span class="hljs-keyword inline">const</span> normalizedAngleDiff = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">min</span>(angleDiff, <span class="hljs-number inline">360</span> - angleDiff);

<span class="hljs-keyword inline">if</span> (normalizedAngleDiff &lt; collisionThreshold) {
    <span class="hljs-comment inline">// 碰撞发生！</span>
}
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">这里有个重要的数学细节：<strong class="font-bold text-foreground">角度差的标准化</strong>。</p>
<p class="text-base leading-7 mb-4 text-foreground">想象一下，如果一个星球在350°位置，另一个在10°位置，简单的<code>Math.abs(350 - 10) = 340°</code>会告诉我们它们相距很远。但实际上，它们只相差20°（350° → 360° → 10°）！</p>
<p class="text-base leading-7 mb-4 text-foreground">所以我们用<code>Math.min(angleDiff, 360 - angleDiff)</code>来找到最小的角度距离，这样就解决了&quot;跨越0°边界&quot;的问题。</p>
<h3 id="碰撞阈值" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#碰撞阈值" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 碰撞阈值">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            碰撞阈值
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="const%20collisionThreshold%20%3D%2013%3B%20%2F%2F%20Angular%20distance%20threshold%20in%20degrees">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">const</span> collisionThreshold = <span class="hljs-number inline">13</span>; <span class="hljs-comment inline">// Angular distance threshold in degrees</span>
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">随便设置的碰撞阈值，因为13可能是一个幸运数字（？</p>
<h3 id="同轨道碰撞原则" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#同轨道碰撞原则" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 同轨道碰撞原则">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            同轨道碰撞原则
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%2F%2F%20%E5%8F%AA%E6%9C%89%E5%90%8C%E8%BD%A8%E9%81%93%E7%9A%84%E6%98%9F%E7%90%83%E6%89%8D%E8%83%BD%E7%A2%B0%E6%92%9E%0Afor%20(let%20j%20%3D%200%3B%20j%20length%3B%20j%2B%2B)%20%7B%0Aif%20(i%20%3D%3D%3D%20j%20%7C%7C%20updatedPlanets%5Bj%5D.orbitIndex%20!%3D%3D%20planet.orbitIndex)%20continue%3B%0A%2F%2F%20...%E7%A2%B0%E6%92%9E%E6%A3%80%E6%B5%8B%E9%80%BB%E8%BE%91%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-comment inline">// 只有同轨道的星球才能碰撞</span>
<span class="hljs-keyword inline">for</span> (<span class="hljs-keyword inline">let</span> j = <span class="hljs-number inline">0</span>; j &lt; updatedPlanets.<span class="hljs-property inline">length</span>; j++) {
    <span class="hljs-keyword inline">if</span> (i === j || updatedPlanets[j].<span class="hljs-property inline">orbitIndex</span> !== planet.<span class="hljs-property inline">orbitIndex</span>) <span class="hljs-keyword inline">continue</span>;
    <span class="hljs-comment inline">// ...碰撞检测逻辑</span>
}
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">这个设计遵循了物理直觉：只有在同一轨道上的星球才能相遇。不同轨道的星球虽然在视觉上可能很接近，但它们在三维空间中处于不同的&quot;高度&quot;，不会发生碰撞。</p>
<p class="text-base leading-7 mb-4 text-foreground"><del class="line-through opacity-60">（其实是多轨道碰撞实现起来太复杂了，还需要计算二维欧几里得距离等等，干脆直接摸鱼好了）</del></p>
<h3 id="碰撞生命周期" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#碰撞生命周期" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 碰撞生命周期">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            碰撞生命周期
        </h3>
<p class="text-base leading-7 mb-4 text-foreground">每个星球的碰撞状态遵循一个简单的状态机：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="" data-code="%E6%AD%A3%E5%B8%B8%E8%BF%90%E8%A1%8C%20%E2%86%92%20%E6%A3%80%E6%B5%8B%E5%88%B0%E9%82%BB%E8%BF%91%E6%98%9F%E7%90%83%20%E2%86%92%20%E8%A7%A6%E5%8F%91%E7%A2%B0%E6%92%9E%20%E2%86%92%20%E7%B2%92%E5%AD%90%E6%95%88%E6%9E%9C%20%E2%86%92%20%E9%80%9F%E5%BA%A6%E7%88%86%E5%8F%91%20%E2%86%92%20%E6%81%A2%E5%A4%8D%E6%AD%A3%E5%B8%B8%0A%E2%86%91%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%E2%86%93%0A%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90%E2%86%90">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">code</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code>正常运行 → 检测到邻近星球 → 触发碰撞 → 粒子效果 → 速度爆发 → 恢复正常
   ↑                                                    ↓
   ←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">关键的状态控制逻辑</strong>：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="if%20(hasNearbyPlanet%20%26%26%20!planet.isCollided)%20%7B%0A%2F%2F%20%E9%A6%96%E6%AC%A1%E6%A3%80%E6%B5%8B%E5%88%B0%E7%A2%B0%E6%92%9E%20-%20%E8%A7%A6%E5%8F%91%E6%95%88%E6%9E%9C%0AupdatedPlanets%5Bi%5D%20%3D%20%7B%0A...planet%2C%0AisCollided%3A%20true%2C%0AshowParticles%3A%20true%2C%0AcollisionSpeedBoost%3A%204%20%2B%20Math.random()%20*%2010%0A%7D%3B%0A%7D%20else%20if%20(!hasNearbyPlanet%20%26%26%20planet.isCollided)%20%7B%0A%2F%2F%20%E4%B8%8D%E5%86%8D%E6%9C%89%E9%82%BB%E8%BF%91%E6%98%9F%E7%90%83%20-%20%E6%B8%85%E9%99%A4%E7%A2%B0%E6%92%9E%E6%A0%87%E8%AE%B0%0AupdatedPlanets%5Bi%5D%20%3D%20%7B%0A...planet%2C%0AisCollided%3A%20false%0A%7D%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">if</span> (hasNearbyPlanet &amp;&amp; !planet.<span class="hljs-property inline">isCollided</span>) {
    <span class="hljs-comment inline">// 首次检测到碰撞 - 触发效果</span>
    updatedPlanets[i] = {
        ...planet,
        <span class="hljs-attr inline">isCollided</span>: <span class="hljs-literal inline">true</span>,
        <span class="hljs-attr inline">showParticles</span>: <span class="hljs-literal inline">true</span>,
        <span class="hljs-attr inline">collisionSpeedBoost</span>: <span class="hljs-number inline">4</span> + <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">random</span>() * <span class="hljs-number inline">10</span>
    };
} <span class="hljs-keyword inline">else</span> <span class="hljs-keyword inline">if</span> (!hasNearbyPlanet &amp;&amp; planet.<span class="hljs-property inline">isCollided</span>) {
    <span class="hljs-comment inline">// 不再有邻近星球 - 清除碰撞标记</span>
    updatedPlanets[i] = {
        ...planet,
        <span class="hljs-attr inline">isCollided</span>: <span class="hljs-literal inline">false</span>
    };
}
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">这个<code>!planet.isCollided</code>的条件需要注意，它确保了：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">只在首次检测到碰撞时触发效果</strong>，而不是每一帧都重复触发</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">碰撞效果不会无限叠加</strong>，避免性能问题</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">状态转换的清晰性</strong>，每个星球在任何时刻都有明确的状态</li>
</ul>
<h3 id="粒子效果" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#粒子效果" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 粒子效果">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            粒子效果
        </h3>
<p class="text-base leading-7 mb-4 text-foreground">当碰撞发生时，我们会在碰撞点生成一个绚烂的粒子爆炸效果：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="function%20ParticleEffect(%7B%20x%2C%20y%2C%20isActive%2C%20onComplete%20%7D%3A%20ParticleEffectProps)%20%7B%0A%2F%2F%2032%E4%B8%AA%E7%B2%92%E5%AD%90%EF%BC%8C%E5%91%88%E6%94%BE%E5%B0%84%E7%8A%B6%E6%95%A3%E5%BC%80%0A%7B%5B...Array(32)%5D.map((_%2C%20i)%20%3D%3E%20(%0Amotion.div%0Akey%3D%7Bi%7D%0AclassName%3D%22absolute%20w-5%20h-5%20bg-gradient-to-r%20from-yellow-400%20to-orange-500%20rounded-full%22%0Aanimate%3D%7B%7B%0Ax%3A%20Math.cos((i%20*%2011.25)%20*%20Math.PI%20%2F%20180)%20*%20150%2C%0Ay%3A%20Math.sin((i%20*%2011.25)%20*%20Math.PI%20%2F%20180)%20*%20150%2C%0Aopacity%3A%20%5B1%2C%200%5D%2C%0Ascale%3A%20%5B1%2C%200.2%5D%2C%0A%7D%7D%0Atransition%3D%7B%7B%0Aduration%3A%203%2C%0Aease%3A%20%22easeOut%22%0A%7D%7D%0A%2F%3E%0A))%7D%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">ParticleEffect</span>(<span class="hljs-params inline">{ x, y, isActive, onComplete }: <span class="hljs-title class_ inline">ParticleEffectProps</span></span>) {
    <span class="hljs-comment inline">// 32个粒子，呈放射状散开</span>
    {[...<span class="hljs-title class_ inline">Array</span>(<span class="hljs-number inline">32</span>)].<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline">(<span class="hljs-params inline">_, i</span>) =&gt;</span> (
        <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
            <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{i}</span>
            <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;absolute w-5 h-5 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full&quot;</span>
            <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">{{</span>
                <span class="hljs-attr inline">x:</span> <span class="hljs-attr inline">Math.cos</span>((<span class="hljs-attr inline">i</span> * <span class="hljs-attr inline">11.25</span>) * <span class="hljs-attr inline">Math.PI</span> / <span class="hljs-attr inline">180</span>) * <span class="hljs-attr inline">150</span>,
                <span class="hljs-attr inline">y:</span> <span class="hljs-attr inline">Math.sin</span>((<span class="hljs-attr inline">i</span> * <span class="hljs-attr inline">11.25</span>) * <span class="hljs-attr inline">Math.PI</span> / <span class="hljs-attr inline">180</span>) * <span class="hljs-attr inline">150</span>,
                <span class="hljs-attr inline">opacity:</span> [<span class="hljs-attr inline">1</span>, <span class="hljs-attr inline">0</span>],
                <span class="hljs-attr inline">scale:</span> [<span class="hljs-attr inline">1</span>, <span class="hljs-attr inline">0.2</span>],
            }}
            <span class="hljs-attr inline">transition</span>=<span class="hljs-string inline">{{</span>
                <span class="hljs-attr inline">duration:</span> <span class="hljs-attr inline">3</span>,
                <span class="hljs-attr inline">ease:</span> &quot;<span class="hljs-attr inline">easeOut</span>&quot;
            }}
        /&gt;</span></span>
    ))}
}
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">参数值解释：</p>
<ol class="list-decimal list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">32个粒子，11.25度间隔</strong>：<code>i * 11.25</code>确保粒子均匀分布在360度范围内</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">放射状运动</strong>：使用极坐标转换让粒子向四面八方散开</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">同时淡出和缩小</strong>：<code>opacity: [1, 0]</code>和<code>scale: [1, 0.2]</code>创造了消散效果</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">3000ms持续时间</strong>：不会太快让人看不清，也不会太慢显得拖沓</li>
</ol>
<h3 id="速度爆发" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#速度爆发" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 速度爆发">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            速度爆发
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="collisionSpeedBoost%3A%204%20%2B%20Math.random()%20*%2010%20%20%2F%2F%204-14%E5%80%8D%E9%9A%8F%E6%9C%BA%E9%80%9F%E5%BA%A6%E6%8F%90%E5%8D%87">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-attr inline">collisionSpeedBoost</span>: <span class="hljs-number inline">4</span> + <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">random</span>() * <span class="hljs-number inline">10</span>  <span class="hljs-comment inline">// 4-14倍随机速度提升</span>
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">当星球碰撞时，它们会获得4-14倍的随机速度提升，持续0.1秒：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="const%20timeout%20%3D%20setTimeout(()%20%3D%3E%20%7B%0AsetPlanetsData(prev%20%3D%3E%20prev.map((p%2C%20idx)%20%3D%3E%0Aidx%20%3D%3D%3D%20i%20%3F%20%7B%20...p%2C%20collisionSpeedBoost%3A%201%20%7D%20%3A%20p%0A))%3B%0A%7D%2C%20100)%3B%20%2F%2F%200.1%E7%A7%92%E5%90%8E%E6%81%A2%E5%A4%8D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">const</span> timeout = <span class="hljs-built_in inline">setTimeout</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-title function_ inline">setPlanetsData</span>(<span class="hljs-function inline"><span class="hljs-params inline">prev</span> =&gt;</span> prev.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline">(<span class="hljs-params inline">p, idx</span>) =&gt;</span> 
        idx === i ? { ...p, <span class="hljs-attr inline">collisionSpeedBoost</span>: <span class="hljs-number inline">1</span> } : p
    ));
}, <span class="hljs-number inline">100</span>); <span class="hljs-comment inline">// 0.1秒后恢复</span>
</code></pre>
            </div>
        
<h3 id="视觉状态的层次化设计" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#视觉状态的层次化设计" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 视觉状态的层次化设计">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            视觉状态的层次化设计
        </h3>
<p class="text-base leading-7 mb-4 text-foreground">碰撞系统为星球引入了多层次的视觉状态：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="html" data-code="className%3D%7B%60%0A%2F%2F%20%E5%9F%BA%E7%A1%80%E6%A0%B7%E5%BC%8F%0Aw-16%20h-16%20rounded-full%20bg-gradient-to-br%20from-white%2F20%20to-white%2F5%0A%2F%2F%20%E6%82%AC%E5%81%9C%E7%8A%B6%E6%80%81%0A%24%7BplanetData.isHovered%20%3F%20'bg-primary%2F30%20border-primary%2F50%20shadow-lg%20shadow-primary%2F20'%20%3A%20''%7D%0A%2F%2F%20%E9%AB%98%E9%80%9F%E6%90%85%E5%8A%A8%E7%8A%B6%E6%80%81%0A%24%7BplanetData.speedMultiplier%20%3E%201%20%3F%20'bg-purple-500%2F30%20border-purple-400%2F50%20shadow-lg%20shadow-purple-400%2F20'%20%3A%20''%7D%0A%2F%2F%20%E7%A2%B0%E6%92%9E%E6%A0%87%E8%AE%B0%E7%8A%B6%E6%80%81%0A%24%7BplanetData.isCollided%20%3F%20'bg-red-500%2F30%20border-red-400%2F50%20shadow-lg%20shadow-red-400%2F20'%20%3A%20''%7D%0A%2F%2F%20%E7%A2%B0%E6%92%9E%E5%8A%A0%E9%80%9F%E7%8A%B6%E6%80%81%0A%24%7BplanetData.collisionSpeedBoost%20%3E%201%20%3F%20'bg-yellow-500%2F30%20border-yellow-400%2F50%20shadow-lg%20shadow-yellow-400%2F20'%20%3A%20''%7D%0A%60%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">html</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-html">className={`
    // 基础样式
    w-16 h-16 rounded-full bg-gradient-to-br from-white/20 to-white/5
    // 悬停状态
    ${planetData.isHovered ? &#x27;bg-primary/30 border-primary/50 shadow-lg shadow-primary/20&#x27; : &#x27;&#x27;}
    // 高速搅动状态  
    ${planetData.speedMultiplier &gt; 1 ? &#x27;bg-purple-500/30 border-purple-400/50 shadow-lg shadow-purple-400/20&#x27; : &#x27;&#x27;}
    // 碰撞标记状态
    ${planetData.isCollided ? &#x27;bg-red-500/30 border-red-400/50 shadow-lg shadow-red-400/20&#x27; : &#x27;&#x27;}
    // 碰撞加速状态
    ${planetData.collisionSpeedBoost &gt; 1 ? &#x27;bg-yellow-500/30 border-yellow-400/50 shadow-lg shadow-yellow-400/20&#x27; : &#x27;&#x27;}
`}
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">具体状态：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">默认白色</strong>：平静的运行状态</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">蓝色高亮</strong>：用户正在关注（悬停）</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">紫色强调</strong>：被人为搅动（stir功能）</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">红色警示</strong>：处于碰撞状态，有&quot;危险&quot;的暗示</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">黄色爆发</strong>：碰撞加速中，充满能量感</li>
</ul>
<h2 id="高性能动画架构设计" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#高性能动画架构设计" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 高性能动画架构设计">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            高性能动画架构设计
        </h2>
<p class="text-base leading-7 mb-4 text-foreground">为了确保星系在高负载情况下仍能保持流畅运行，整个动画系统采用了多层次的性能优化策略。</p>
<h3 id="智能帧率控制策略" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#智能帧率控制策略" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 智能帧率控制策略">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            智能帧率控制策略
        </h3>
<p class="text-base leading-7 mb-4 text-foreground">动画循环采用了差异化更新频率，根据操作的计算复杂度分配不同的执行频率：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">位置更新</strong>：每2帧执行一次（30fps），保持视觉流畅性</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">碰撞检测</strong>：每4帧执行一次（15fps），减少计算开销</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">特殊效果</strong>：搅动时恢复高频率更新，确保效果质量</li>
</ul>
<p class="text-base leading-7 mb-4 text-foreground">这种策略在保持良好视觉体验的同时，显著降低了CPU负载。</p>
<h3 id="双重状态管理模式" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#双重状态管理模式" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 双重状态管理模式">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            双重状态管理模式
        </h3>
<p class="text-base leading-7 mb-4 text-foreground">为了避免频繁的状态更新和重渲染，系统采用了<code>useRef</code>和<code>useState</code>的双重状态管理模式：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="const%20planetsDataRef%20%3D%20useRefPlanetData%5B%5D%3E(%5B%5D)%3B%0Aconst%20%5BplanetsData%2C%20setPlanetsData%5D%20%3D%20useStatePlanetData%5B%5D%3E(%5B%5D)%3B%0A%2F%2F%20%E5%8A%A8%E7%94%BB%E5%BE%AA%E7%8E%AF%E4%B8%AD%E7%9B%B4%E6%8E%A5%E6%93%8D%E4%BD%9Cref%EF%BC%8C%E9%81%BF%E5%85%8D%E9%A2%91%E7%B9%81%E7%9A%84%E7%8A%B6%E6%80%81%E6%9B%B4%E6%96%B0%0Aconst%20currentData%20%3D%20planetsDataRef.current%3B%0Aconst%20updatedPlanets%20%3D%20currentData.map(planet%20%3D%3E%20%7B%0A%2F%2F%20...%20%E6%9B%B4%E6%96%B0%E9%80%BB%E8%BE%91%0A%7D)%3B%0A%2F%2F%20%E5%8F%AA%E6%9C%89%E5%9C%A8%E7%9C%9F%E6%AD%A3%E9%9C%80%E8%A6%81%E9%87%8D%E6%96%B0%E6%B8%B2%E6%9F%93%E6%97%B6%E6%89%8D%E6%9B%B4%E6%96%B0React%E7%8A%B6%E6%80%81%0Aif%20(finalPlanets%20!%3D%3D%20currentData)%20%7B%0AplanetsDataRef.current%20%3D%20finalPlanets%3B%0AsetPlanetsData(finalPlanets)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">const</span> planetsDataRef = useRef&lt;<span class="hljs-title class_ inline">PlanetData</span>[]&gt;([]);
<span class="hljs-keyword inline">const</span> [planetsData, setPlanetsData] = useState&lt;<span class="hljs-title class_ inline">PlanetData</span>[]&gt;([]);

<span class="hljs-comment inline">// 动画循环中直接操作ref，避免频繁的状态更新</span>
<span class="hljs-keyword inline">const</span> currentData = planetsDataRef.<span class="hljs-property inline">current</span>;
<span class="hljs-keyword inline">const</span> updatedPlanets = currentData.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline"><span class="hljs-params inline">planet</span> =&gt;</span> {
    <span class="hljs-comment inline">// ... 更新逻辑</span>
});

<span class="hljs-comment inline">// 只有在真正需要重新渲染时才更新React状态</span>
<span class="hljs-keyword inline">if</span> (finalPlanets !== currentData) {
    planetsDataRef.<span class="hljs-property inline">current</span> = finalPlanets;
    <span class="hljs-title function_ inline">setPlanetsData</span>(finalPlanets);
}
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">这种架构的核心优势：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">减少React调度开销</strong>：状态更新次数显著减少</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">按需渲染</strong>：只在视觉上有变化时才更新UI</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">数据一致性</strong>：ref和state始终保持同步</li>
</ul>
<h3 id="组件记忆化架构" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#组件记忆化架构" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 组件记忆化架构">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            组件记忆化架构
        </h3>
<p class="text-base leading-7 mb-4 text-foreground">整个组件系统采用了全面的记忆化策略，包括子组件和回调函数的缓存：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="const%20ParticleEffect%20%3D%20React.memo(function%20ParticleEffect(%7Bx%2C%20y%2C%20isActive%2C%20onComplete%7D%3A%20ParticleEffectProps)%20%7B%0A%2F%2F%20...%20%E7%BB%84%E4%BB%B6%E9%80%BB%E8%BE%91%0A%7D)%3B%0Aconst%20PlanetRenderer%20%3D%20React.memo(function%20PlanetRenderer(%7B%0AplanetData%2C%0AgalaxyCenter%2C%0AonHover%2C%0AonMouseEnter%2C%0AonMouseLeave%2C%0AonParticleComplete%0A%7D%3A%20PlanetRendererProps)%20%7B%0A%2F%2F%20%E4%BD%BF%E7%94%A8useCallback%E7%A1%AE%E4%BF%9D%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%E7%9A%84%E5%BC%95%E7%94%A8%E7%A8%B3%E5%AE%9A%0Aconst%20handleMouseEnter%20%3D%20useCallback(()%20%3D%3E%20%7B%0AonMouseEnter(planetData.index)%3B%0AonHover(planetData.skill)%3B%0A%7D%2C%20%5BplanetData.index%2C%20planetData.skill%2C%20onMouseEnter%2C%20onHover%5D)%3B%0A%2F%2F%20...%20%E5%85%B6%E4%BB%96%E9%80%BB%E8%BE%91%0A%7D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">const</span> <span class="hljs-title class_ inline">ParticleEffect</span> = <span class="hljs-title class_ inline">React</span>.<span class="hljs-title function_ inline">memo</span>(<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">ParticleEffect</span>(<span class="hljs-params inline">{x, y, isActive, onComplete}: <span class="hljs-title class_ inline">ParticleEffectProps</span></span>) {
    <span class="hljs-comment inline">// ... 组件逻辑</span>
});

<span class="hljs-keyword inline">const</span> <span class="hljs-title class_ inline">PlanetRenderer</span> = <span class="hljs-title class_ inline">React</span>.<span class="hljs-title function_ inline">memo</span>(<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">PlanetRenderer</span>(<span class="hljs-params inline">{
    planetData,
    galaxyCenter,
    onHover,
    onMouseEnter,
    onMouseLeave,
    onParticleComplete
}: <span class="hljs-title class_ inline">PlanetRendererProps</span></span>) {
    <span class="hljs-comment inline">// 使用useCallback确保回调函数的引用稳定</span>
    <span class="hljs-keyword inline">const</span> handleMouseEnter = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">() =&gt;</span> {
        <span class="hljs-title function_ inline">onMouseEnter</span>(planetData.<span class="hljs-property inline">index</span>);
        <span class="hljs-title function_ inline">onHover</span>(planetData.<span class="hljs-property inline">skill</span>);
    }, [planetData.<span class="hljs-property inline">index</span>, planetData.<span class="hljs-property inline">skill</span>, onMouseEnter, onHover]);
    
    <span class="hljs-comment inline">// ... 其他逻辑</span>
});
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">父组件使用<code>useMemo</code>缓存整个星球列表：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="const%20memoizedPlanets%20%3D%20useMemo(()%20%3D%3E%0AplanetsData.map((planetData)%20%3D%3E%20(%0APlanetRenderer%0Akey%3D%7B%60planet-%24%7BplanetData.index%7D%60%7D%0AplanetData%3D%7BplanetData%7D%0AgalaxyCenter%3D%7BgalaxyCenter%7D%0AonHover%3D%7BsetHoveredSkill%7D%0AonMouseEnter%3D%7BhandleMouseEnter%7D%0AonMouseLeave%3D%7BhandleMouseLeave%7D%0AonParticleComplete%3D%7BhandleParticleComplete%7D%0A%2F%3E%0A))%2C%20%5BplanetsData%2C%20galaxyCenter%2C%20handleMouseEnter%2C%20handleMouseLeave%2C%20handleParticleComplete%5D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">const</span> memoizedPlanets = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> 
    planetsData.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline">(<span class="hljs-params inline">planetData</span>) =&gt;</span> (
        <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">PlanetRenderer</span>
            <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{</span>`<span class="hljs-attr inline">planet-</span>${<span class="hljs-attr inline">planetData.index</span>}`}
            <span class="hljs-attr inline">planetData</span>=<span class="hljs-string inline">{planetData}</span>
            <span class="hljs-attr inline">galaxyCenter</span>=<span class="hljs-string inline">{galaxyCenter}</span>
            <span class="hljs-attr inline">onHover</span>=<span class="hljs-string inline">{setHoveredSkill}</span>
            <span class="hljs-attr inline">onMouseEnter</span>=<span class="hljs-string inline">{handleMouseEnter}</span>
            <span class="hljs-attr inline">onMouseLeave</span>=<span class="hljs-string inline">{handleMouseLeave}</span>
            <span class="hljs-attr inline">onParticleComplete</span>=<span class="hljs-string inline">{handleParticleComplete}</span>
        /&gt;</span></span>
    )), [planetsData, galaxyCenter, handleMouseEnter, handleMouseLeave, handleParticleComplete]);
</code></pre>
            </div>
        
<h3 id="高效的碰撞检测算法" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#高效的碰撞检测算法" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 高效的碰撞检测算法">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            高效的碰撞检测算法
        </h3>
<p class="text-base leading-7 mb-4 text-foreground">碰撞检测系统采用了双重循环结构，通过减少不必要的比较来提升性能：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%2F%2F%20%E9%AB%98%E6%95%88%E7%9A%84%E7%A2%B0%E6%92%9E%E6%A3%80%E6%B5%8B%E5%AE%9E%E7%8E%B0%0Afor%20(let%20i%20%3D%200%3B%20i%20length%3B%20i%2B%2B)%20%7B%0Afor%20(let%20j%20%3D%20i%20%2B%201%3B%20j%20length%3B%20j%2B%2B)%20%7B%0A%2F%2F%20%E6%8F%90%E5%89%8D%E8%BF%87%E6%BB%A4%EF%BC%9A%E5%8F%AA%E6%A3%80%E6%B5%8B%E5%90%8C%E8%BD%A8%E9%81%93%E6%98%9F%E7%90%83%0Aif%20(planets%5Bj%5D.orbitIndex%20!%3D%3D%20planets%5Bi%5D.orbitIndex)%20continue%3B%0A%2F%2F%20%E8%AE%A1%E7%AE%97%E8%A7%92%E5%BA%A6%E5%B7%AE%E8%BF%9B%E8%A1%8C%E7%A2%B0%E6%92%9E%E5%88%A4%E5%AE%9A%0Aconst%20angleDiff%20%3D%20Math.abs(planets%5Bj%5D.angle%20-%20planets%5Bi%5D.angle)%3B%0Aconst%20normalizedAngleDiff%20%3D%20Math.min(angleDiff%2C%20360%20-%20angleDiff)%3B%0Aif%20(normalizedAngleDiff%2013)%20%7B%20%2F%2F%2013%E5%BA%A6%E7%9A%84%E7%A2%B0%E6%92%9E%E9%98%88%E5%80%BC%0A%2F%2F%20%E8%A7%A6%E5%8F%91%E7%A2%B0%E6%92%9E%E6%95%88%E6%9E%9C%0AupdatedPlanets%5Bi%5D%20%3D%20%7B%0A...planet%2C%0AisCollided%3A%20true%2C%0AshowParticles%3A%20true%2C%0AcollisionSpeedBoost%3A%204%20%2B%20Math.random()%20*%2010%0A%7D%3B%0A%2F%2F%20100ms%E5%90%8E%E9%87%8D%E7%BD%AE%E7%A2%B0%E6%92%9E%E5%8A%A0%E9%80%9F%0AsetTimeout(()%20%3D%3E%20%7B%0A%2F%2F%20%E9%87%8D%E7%BD%AE%E9%80%BB%E8%BE%91%0A%7D%2C%20100)%3B%0A%7D%0A%7D%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-comment inline">// 高效的碰撞检测实现</span>
<span class="hljs-keyword inline">for</span> (<span class="hljs-keyword inline">let</span> i = <span class="hljs-number inline">0</span>; i &lt; planets.<span class="hljs-property inline">length</span>; i++) {
    <span class="hljs-keyword inline">for</span> (<span class="hljs-keyword inline">let</span> j = i + <span class="hljs-number inline">1</span>; j &lt; planets.<span class="hljs-property inline">length</span>; j++) {
        <span class="hljs-comment inline">// 提前过滤：只检测同轨道星球</span>
        <span class="hljs-keyword inline">if</span> (planets[j].<span class="hljs-property inline">orbitIndex</span> !== planets[i].<span class="hljs-property inline">orbitIndex</span>) <span class="hljs-keyword inline">continue</span>;
        
        <span class="hljs-comment inline">// 计算角度差进行碰撞判定</span>
        <span class="hljs-keyword inline">const</span> angleDiff = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">abs</span>(planets[j].<span class="hljs-property inline">angle</span> - planets[i].<span class="hljs-property inline">angle</span>);
        <span class="hljs-keyword inline">const</span> normalizedAngleDiff = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">min</span>(angleDiff, <span class="hljs-number inline">360</span> - angleDiff);
        
        <span class="hljs-keyword inline">if</span> (normalizedAngleDiff &lt; <span class="hljs-number inline">13</span>) { <span class="hljs-comment inline">// 13度的碰撞阈值</span>
            <span class="hljs-comment inline">// 触发碰撞效果</span>
            updatedPlanets[i] = {
                ...planet,
                <span class="hljs-attr inline">isCollided</span>: <span class="hljs-literal inline">true</span>,
                <span class="hljs-attr inline">showParticles</span>: <span class="hljs-literal inline">true</span>,
                <span class="hljs-attr inline">collisionSpeedBoost</span>: <span class="hljs-number inline">4</span> + <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">random</span>() * <span class="hljs-number inline">10</span>
            };
            
            <span class="hljs-comment inline">// 100ms后重置碰撞加速</span>
            <span class="hljs-built_in inline">setTimeout</span>(<span class="hljs-function inline">() =&gt;</span> {
                <span class="hljs-comment inline">// 重置逻辑</span>
            }, <span class="hljs-number inline">100</span>);
        }
    }
}
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">算法设计优势：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">避免重复计算</strong>：(i,j)和(j,i)只需要计算一次</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">轨道预过滤</strong>：不同轨道的星球直接跳过检测</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">计算量优化</strong>：减少了不必要的角度差计算</li>
</ul>
<h3 id="高效的粒子效果系统" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#高效的粒子效果系统" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 高效的粒子效果系统">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            高效的粒子效果系统
        </h3>
<p class="text-base leading-7 mb-4 text-foreground">粒子爆炸效果需要在保持视觉冲击力的同时最大化性能：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%2F%2F%2032%E4%B8%AA%E7%B2%92%E5%AD%90%E7%9A%84%E9%AB%98%E6%95%88%E7%88%86%E7%82%B8%E6%95%88%E6%9E%9C%0A%7B%5B...Array(32)%5D.map((_%2C%20i)%20%3D%3E%20(%0Amotion.div%0Akey%3D%7Bi%7D%0AclassName%3D%22absolute%20w-5%20h-5%20bg-gradient-to-r%20from-yellow-400%20to-orange-500%20rounded-full%22%0Astyle%3D%7B%7B%0Aleft%3A%2025%2C%0Atop%3A%2025%2C%0A%7D%7D%0Aanimate%3D%7B%7B%0Ax%3A%20Math.cos((i%20*%2011.25)%20*%20Math.PI%20%2F%20180)%20*%20150%2C%0Ay%3A%20Math.sin((i%20*%2011.25)%20*%20Math.PI%20%2F%20180)%20*%20150%2C%0Aopacity%3A%20%5B1%2C%200%5D%2C%0Ascale%3A%20%5B1%2C%200.2%5D%2C%0A%7D%7D%0Atransition%3D%7B%7B%0Aduration%3A%203%2C%0Aease%3A%20%22easeOut%22%0A%7D%7D%0A%2F%3E%0A))%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-comment inline">// 32个粒子的高效爆炸效果</span>
{[...<span class="hljs-title class_ inline">Array</span>(<span class="hljs-number inline">32</span>)].<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline">(<span class="hljs-params inline">_, i</span>) =&gt;</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
        <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{i}</span>
        <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;absolute w-5 h-5 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full&quot;</span>
        <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{</span>
            <span class="hljs-attr inline">left:</span> <span class="hljs-attr inline">25</span>,
            <span class="hljs-attr inline">top:</span> <span class="hljs-attr inline">25</span>,
        }}
        <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">{{</span>
            <span class="hljs-attr inline">x:</span> <span class="hljs-attr inline">Math.cos</span>((<span class="hljs-attr inline">i</span> * <span class="hljs-attr inline">11.25</span>) * <span class="hljs-attr inline">Math.PI</span> / <span class="hljs-attr inline">180</span>) * <span class="hljs-attr inline">150</span>,
            <span class="hljs-attr inline">y:</span> <span class="hljs-attr inline">Math.sin</span>((<span class="hljs-attr inline">i</span> * <span class="hljs-attr inline">11.25</span>) * <span class="hljs-attr inline">Math.PI</span> / <span class="hljs-attr inline">180</span>) * <span class="hljs-attr inline">150</span>,
            <span class="hljs-attr inline">opacity:</span> [<span class="hljs-attr inline">1</span>, <span class="hljs-attr inline">0</span>],
            <span class="hljs-attr inline">scale:</span> [<span class="hljs-attr inline">1</span>, <span class="hljs-attr inline">0.2</span>],
        }}
        <span class="hljs-attr inline">transition</span>=<span class="hljs-string inline">{{</span>
            <span class="hljs-attr inline">duration:</span> <span class="hljs-attr inline">3</span>,
            <span class="hljs-attr inline">ease:</span> &quot;<span class="hljs-attr inline">easeOut</span>&quot;
        }}
    /&gt;</span></span>
))}
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">参数解释：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">粒子数量</strong>：32个粒子提供丰富的视觉密度</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">粒子尺寸</strong>：5x5像素确保清晰可见</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">扩散半径</strong>：150像素的广阔扩散范围</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">动画时长</strong>：3秒的充分展示时间</li>
</ul>
<h3 id="搅动功能的防抖机制" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#搅动功能的防抖机制" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 搅动功能的防抖机制">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            搅动功能的防抖机制
        </h3>
<p class="text-base leading-7 mb-4 text-foreground">完善的防抖和批量更新策略可以确保星系在高频交互下保持稳定：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="const%20%5BisStirring%2C%20setIsStirring%5D%20%3D%20useState(false)%3B%0Aconst%20handleStirPlanets%20%3D%20useCallback(()%20%3D%3E%20%7B%0Aif%20(isStirring)%20return%3B%20%2F%2F%20%E9%98%B2%E6%8A%96%E4%BF%9D%E6%8A%A4%0AsetIsStirring(true)%3B%0A%2F%2F%20%E9%9A%8F%E6%9C%BA%E9%80%89%E6%8B%A9%E8%A6%81%E6%90%85%E5%8A%A8%E7%9A%84%E6%98%9F%E7%90%83%0Aconst%20numPlanetsToStir%20%3D%20Math.min(currentData.length%2C%0AMath.floor(currentData.length%20*%20Math.random()%20%2B%201))%3B%0Aconst%20indicesToStir%3A%20number%5B%5D%20%3D%20%5B%5D%3B%0Awhile%20(indicesToStir.length%20const%20randomIndex%20%3D%20Math.floor(Math.random()%20*%20currentData.length)%3B%0Aif%20(!indicesToStir.includes(randomIndex))%20%7B%0AindicesToStir.push(randomIndex)%3B%0A%7D%0A%7D%0A%2F%2F%20%E6%89%B9%E9%87%8F%E6%9B%B4%E6%96%B0%E6%89%80%E6%9C%89%E5%8F%97%E5%BD%B1%E5%93%8D%E7%9A%84%E6%98%9F%E7%90%83%0Aconst%20stirredData%20%3D%20currentData.map((planet%2C%20index)%20%3D%3E%0AindicesToStir.includes(index)%0A%3F%20%7B...planet%2C%20speedMultiplier%3A%204%20%2B%20Math.random()%20*%2010%7D%0A%3A%20planet%0A)%3B%0A%2F%2F%20%E5%8D%95%E6%AC%A1%E7%8A%B6%E6%80%81%E6%9B%B4%E6%96%B0%0AplanetsDataRef.current%20%3D%20stirredData%3B%0AsetPlanetsData(stirredData)%3B%0A%2F%2F%203%E7%A7%92%E5%90%8E%E6%81%A2%E5%A4%8D%E6%AD%A3%E5%B8%B8%E9%80%9F%E5%BA%A6%0AsetTimeout(()%20%3D%3E%20%7B%0Aconst%20resetData%20%3D%20planetsDataRef.current.map((planet%2C%20index)%20%3D%3E%0AindicesToStir.includes(index)%0A%3F%20%7B...planet%2C%20speedMultiplier%3A%201%7D%0A%3A%20planet%0A)%3B%0AplanetsDataRef.current%20%3D%20resetData%3B%0AsetPlanetsData(resetData)%3B%0AsetIsStirring(false)%3B%0A%7D%2C%203000)%3B%0A%7D%2C%20%5BisStirring%5D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">const</span> [isStirring, setIsStirring] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-literal inline">false</span>);

<span class="hljs-keyword inline">const</span> handleStirPlanets = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-keyword inline">if</span> (isStirring) <span class="hljs-keyword inline">return</span>; <span class="hljs-comment inline">// 防抖保护</span>
    
    <span class="hljs-title function_ inline">setIsStirring</span>(<span class="hljs-literal inline">true</span>);
    
    <span class="hljs-comment inline">// 随机选择要搅动的星球</span>
    <span class="hljs-keyword inline">const</span> numPlanetsToStir = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">min</span>(currentData.<span class="hljs-property inline">length</span>, 
        <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">floor</span>(currentData.<span class="hljs-property inline">length</span> * <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">random</span>() + <span class="hljs-number inline">1</span>));
    <span class="hljs-keyword inline">const</span> <span class="hljs-attr inline">indicesToStir</span>: <span class="hljs-built_in inline">number</span>[] = [];
    
    <span class="hljs-keyword inline">while</span> (indicesToStir.<span class="hljs-property inline">length</span> &lt; numPlanetsToStir) {
        <span class="hljs-keyword inline">const</span> randomIndex = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">floor</span>(<span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">random</span>() * currentData.<span class="hljs-property inline">length</span>);
        <span class="hljs-keyword inline">if</span> (!indicesToStir.<span class="hljs-title function_ inline">includes</span>(randomIndex)) {
            indicesToStir.<span class="hljs-title function_ inline">push</span>(randomIndex);
        }
    }
    
    <span class="hljs-comment inline">// 批量更新所有受影响的星球</span>
    <span class="hljs-keyword inline">const</span> stirredData = currentData.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline">(<span class="hljs-params inline">planet, index</span>) =&gt;</span>
        indicesToStir.<span class="hljs-title function_ inline">includes</span>(index)
            ? {...planet, <span class="hljs-attr inline">speedMultiplier</span>: <span class="hljs-number inline">4</span> + <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">random</span>() * <span class="hljs-number inline">10</span>}
            : planet
    );
    
    <span class="hljs-comment inline">// 单次状态更新</span>
    planetsDataRef.<span class="hljs-property inline">current</span> = stirredData;
    <span class="hljs-title function_ inline">setPlanetsData</span>(stirredData);
    
    <span class="hljs-comment inline">// 3秒后恢复正常速度</span>
    <span class="hljs-built_in inline">setTimeout</span>(<span class="hljs-function inline">() =&gt;</span> {
        <span class="hljs-keyword inline">const</span> resetData = planetsDataRef.<span class="hljs-property inline">current</span>.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline">(<span class="hljs-params inline">planet, index</span>) =&gt;</span>
            indicesToStir.<span class="hljs-title function_ inline">includes</span>(index)
                ? {...planet, <span class="hljs-attr inline">speedMultiplier</span>: <span class="hljs-number inline">1</span>}
                : planet
        );
        planetsDataRef.<span class="hljs-property inline">current</span> = resetData;
        <span class="hljs-title function_ inline">setPlanetsData</span>(resetData);
        <span class="hljs-title function_ inline">setIsStirring</span>(<span class="hljs-literal inline">false</span>);
    }, <span class="hljs-number inline">3000</span>);
}, [isStirring]);
</code></pre>
            </div>
        
<h2 id="实现回顾" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#实现回顾" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 实现回顾">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            实现回顾
        </h2>
<p class="text-base leading-7 mb-4 text-foreground">通过这次深入的技术剖析，我们可以看到，一个看似简单的&quot;星球围绕太阳转动&quot;的效果，背后其实包含了大量的技术细节和设计思考。</p>
<h3 id="技术要点总结" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#技术要点总结" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 技术要点总结">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            技术要点总结
        </h3>
<p class="text-base leading-7 mb-4 text-foreground">让我回顾一下这个项目的关键技术点：</p>
<ol class="list-decimal list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">数学基础</strong>：极坐标到笛卡尔坐标的转换是一切的基础</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">架构设计</strong>：轨道系统的生成和分配策略</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">动画优化</strong>：requestAnimationFrame + deltaTime的时间差计算</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">交互体验</strong>：多层次的用户反馈机制</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">响应式适配</strong>：动态中心定位系统</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">碰撞检测</strong>：基于角度差的同轨道碰撞判定算法</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">粒子系统</strong>：放射状粒子效果与动画生命周期管理</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">状态机设计</strong>：多层次的视觉状态与碰撞生命周期控制</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">智能帧率控制</strong>：差异化更新频率策略，位置更新30fps，碰撞检测15fps</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">双重状态管理</strong>：useRef影子状态 + useState按需更新的高效架构</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">组件记忆化</strong>：React.memo + useCallback + useMemo的全面性能优化</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">高效碰撞算法</strong>：双重循环优化与轨道预过滤机制</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">粒子系统优化</strong>：32粒子放射状爆炸的高性能实现</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">防抖机制</strong>：搅动功能的批量更新与状态保护策略</li>
</ol>
<h3 id="设计模式的可复用性" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#设计模式的可复用性" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 设计模式的可复用性">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            设计模式的可复用性
        </h3>
<p class="text-base leading-7 mb-4 text-foreground">这个实现中有几个设计模式值得在其他项目中复用：</p>
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">时间差动画模式</strong>：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="const%20deltaTime%20%3D%20currentTime%20-%20lastTimeRef.current%3B%0AsetAngle(prevAngle%20%3D%3E%20prevAngle%20%2B%20speed%20*%20deltaTime%20*%20coefficient)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">const</span> deltaTime = currentTime - lastTimeRef.<span class="hljs-property inline">current</span>;
<span class="hljs-title function_ inline">setAngle</span>(<span class="hljs-function inline"><span class="hljs-params inline">prevAngle</span> =&gt;</span> prevAngle + speed * deltaTime * coefficient);
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">这个模式可以用于任何需要平滑动画的场景。</p>
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">状态机模式</strong>：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%2F%2F%20%E6%AD%A3%E5%B8%B8%20%E2%86%92%20%E6%9A%82%E5%81%9C%20%E2%86%92%20%E9%AB%98%E9%80%9F%20%E2%86%92%20%E6%81%A2%E5%A4%8D%E6%AD%A3%E5%B8%B8%0Aconst%20%5BisPaused%2C%20setIsPaused%5D%20%3D%20useState(false)%3B%0Aconst%20%5BspeedMultiplier%2C%20setSpeedMultiplier%5D%20%3D%20useState(1)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-comment inline">// 正常 → 暂停 → 高速 → 恢复正常</span>
<span class="hljs-keyword inline">const</span> [isPaused, setIsPaused] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-literal inline">false</span>);
<span class="hljs-keyword inline">const</span> [speedMultiplier, setSpeedMultiplier] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-number inline">1</span>);
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">适用于复杂的状态切换场景。</p>
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">响应式中心定位模式</strong>：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="const%20updateCenter%20%3D%20()%20%3D%3E%20%7B%0Aconst%20rect%20%3D%20containerRef.current.getBoundingClientRect()%3B%0AsetCenter(%7Bx%3A%20rect.width%20%2F%202%2C%20y%3A%20rect.height%20%2F%202%7D)%3B%0A%7D%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">updateCenter</span> = (<span class="hljs-params inline"></span>) =&gt; {
    <span class="hljs-keyword inline">const</span> rect = containerRef.<span class="hljs-property inline">current</span>.<span class="hljs-title function_ inline">getBoundingClientRect</span>();
    <span class="hljs-title function_ inline">setCenter</span>({<span class="hljs-attr inline">x</span>: rect.<span class="hljs-property inline">width</span> / <span class="hljs-number inline">2</span>, <span class="hljs-attr inline">y</span>: rect.<span class="hljs-property inline">height</span> / <span class="hljs-number inline">2</span>});
};
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">适用于任何需要动态居中的场景。</p>
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">碰撞检测模式</strong>：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="const%20angleDiff%20%3D%20Math.abs(otherPlanet.angle%20-%20currentPlanet.angle)%3B%0Aconst%20normalizedAngleDiff%20%3D%20Math.min(angleDiff%2C%20360%20-%20angleDiff)%3B%0Aif%20(normalizedAngleDiff%20%2F%2F%20%E8%A7%A6%E5%8F%91%E7%A2%B0%E6%92%9E%E6%95%88%E6%9E%9C%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">const</span> angleDiff = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">abs</span>(otherPlanet.<span class="hljs-property inline">angle</span> - currentPlanet.<span class="hljs-property inline">angle</span>);
<span class="hljs-keyword inline">const</span> normalizedAngleDiff = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">min</span>(angleDiff, <span class="hljs-number inline">360</span> - angleDiff);
<span class="hljs-keyword inline">if</span> (normalizedAngleDiff &lt; threshold &amp;&amp; sameOrbit) {
    <span class="hljs-comment inline">// 触发碰撞效果</span>
}
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">适用于圆形轨道上的物体碰撞检测场景。</p>
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">粒子爆炸模式</strong>：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%7B%5B...Array(particleCount)%5D.map((_%2C%20i)%20%3D%3E%20(%0Amotion.div%0Aanimate%3D%7B%7B%0Ax%3A%20Math.cos((i%20*%20angleStep)%20*%20Math.PI%20%2F%20180)%20*%20distance%2C%0Ay%3A%20Math.sin((i%20*%20angleStep)%20*%20Math.PI%20%2F%20180)%20*%20distance%2C%0Aopacity%3A%20%5B1%2C%200%5D%2C%0Ascale%3A%20%5B1%2C%200.2%5D%2C%0A%7D%7D%0A%2F%3E%0A))%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript">{[...<span class="hljs-title class_ inline">Array</span>(particleCount)].<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline">(<span class="hljs-params inline">_, i</span>) =&gt;</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
        <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">{{</span>
            <span class="hljs-attr inline">x:</span> <span class="hljs-attr inline">Math.cos</span>((<span class="hljs-attr inline">i</span> * <span class="hljs-attr inline">angleStep</span>) * <span class="hljs-attr inline">Math.PI</span> / <span class="hljs-attr inline">180</span>) * <span class="hljs-attr inline">distance</span>,
            <span class="hljs-attr inline">y:</span> <span class="hljs-attr inline">Math.sin</span>((<span class="hljs-attr inline">i</span> * <span class="hljs-attr inline">angleStep</span>) * <span class="hljs-attr inline">Math.PI</span> / <span class="hljs-attr inline">180</span>) * <span class="hljs-attr inline">distance</span>,
            <span class="hljs-attr inline">opacity:</span> [<span class="hljs-attr inline">1</span>, <span class="hljs-attr inline">0</span>],
            <span class="hljs-attr inline">scale:</span> [<span class="hljs-attr inline">1</span>, <span class="hljs-attr inline">0.2</span>],
        }}
    /&gt;</span></span>
))}
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">适用于各种爆炸、散射效果的实现。</p>
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">双重状态管理模式</strong>：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%2F%2F%20%E5%BD%B1%E5%AD%90%E7%8A%B6%E6%80%81%EF%BC%9A%E9%AB%98%E9%A2%91%E6%9B%B4%E6%96%B0%EF%BC%8C%E9%81%BF%E5%85%8DReact%E9%87%8D%E6%B8%B2%E6%9F%93%E5%BC%80%E9%94%80%0Aconst%20dataRef%20%3D%20useRefStateType%5B%5D%3E(%5B%5D)%3B%0A%2F%2F%20React%E7%8A%B6%E6%80%81%EF%BC%9AUI%E5%90%8C%E6%AD%A5%EF%BC%8C%E6%8C%89%E9%9C%80%E6%9B%B4%E6%96%B0%0Aconst%20%5Bdata%2C%20setData%5D%20%3D%20useStateStateType%5B%5D%3E(%5B%5D)%3B%0A%2F%2F%20%E5%8F%AA%E5%9C%A8%E6%9C%89%E5%AE%9E%E9%99%85%E5%8F%98%E5%8C%96%E6%97%B6%E6%9B%B4%E6%96%B0React%E7%8A%B6%E6%80%81%0Aif%20(newData%20!%3D%3D%20dataRef.current)%20%7B%0AdataRef.current%20%3D%20newData%3B%0AsetData(newData)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-comment inline">// 影子状态：高频更新，避免React重渲染开销</span>
<span class="hljs-keyword inline">const</span> dataRef = useRef&lt;<span class="hljs-title class_ inline">StateType</span>[]&gt;([]);
<span class="hljs-comment inline">// React状态：UI同步，按需更新</span>
<span class="hljs-keyword inline">const</span> [data, setData] = useState&lt;<span class="hljs-title class_ inline">StateType</span>[]&gt;([]);

<span class="hljs-comment inline">// 只在有实际变化时更新React状态</span>
<span class="hljs-keyword inline">if</span> (newData !== dataRef.<span class="hljs-property inline">current</span>) {
    dataRef.<span class="hljs-property inline">current</span> = newData;
    <span class="hljs-title function_ inline">setData</span>(newData);
}
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">适用于高频数据更新的性能优化场景。</p>
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">帧率控制模式</strong>：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="frameCountRef.current%2B%2B%3B%0A%2F%2F%20%E4%B8%8D%E5%90%8C%E6%93%8D%E4%BD%9C%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%90%8C%E7%9A%84%E6%9B%B4%E6%96%B0%E9%A2%91%E7%8E%87%0Aif%20(frameCountRef.current%20%25%202%20%3D%3D%3D%200)%20%7B%20%2F*%2030fps%E6%93%8D%E4%BD%9C%20*%2F%20%7D%0Aif%20(frameCountRef.current%20%25%204%20%3D%3D%3D%200)%20%7B%20%2F*%2015fps%E6%93%8D%E4%BD%9C%20*%2F%20%7D%0Aif%20(frameCountRef.current%20%25%208%20%3D%3D%3D%200)%20%7B%20%2F*%207.5fps%E6%93%8D%E4%BD%9C%20*%2F%20%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript">frameCountRef.<span class="hljs-property inline">current</span>++;
<span class="hljs-comment inline">// 不同操作使用不同的更新频率</span>
<span class="hljs-keyword inline">if</span> (frameCountRef.<span class="hljs-property inline">current</span> % <span class="hljs-number inline">2</span> === <span class="hljs-number inline">0</span>) { <span class="hljs-comment inline">/* 30fps操作 */</span> }
<span class="hljs-keyword inline">if</span> (frameCountRef.<span class="hljs-property inline">current</span> % <span class="hljs-number inline">4</span> === <span class="hljs-number inline">0</span>) { <span class="hljs-comment inline">/* 15fps操作 */</span> }
<span class="hljs-keyword inline">if</span> (frameCountRef.<span class="hljs-property inline">current</span> % <span class="hljs-number inline">8</span> === <span class="hljs-number inline">0</span>) { <span class="hljs-comment inline">/* 7.5fps操作 */</span> }
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">适用于需要差异化性能控制的复杂动画场景。</p>
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">组件记忆化模式</strong>：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="const%20MemoizedComponent%20%3D%20React.memo(function%20Component(%7Bdata%2C%20onAction%7D)%20%7B%0Aconst%20handleAction%20%3D%20useCallback(()%20%3D%3E%20onAction(data.id)%2C%20%5Bdata.id%2C%20onAction%5D)%3B%0Aconst%20memoizedData%20%3D%20useMemo(()%20%3D%3E%20processData(data)%2C%20%5Bdata%5D)%3B%0Areturn%20div%20onClick%3D%7BhandleAction%7D%3E%7BmemoizedData%7Ddiv%3E%3B%0A%7D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">const</span> <span class="hljs-title class_ inline">MemoizedComponent</span> = <span class="hljs-title class_ inline">React</span>.<span class="hljs-title function_ inline">memo</span>(<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">Component</span>(<span class="hljs-params inline">{data, onAction}</span>) {
    <span class="hljs-keyword inline">const</span> handleAction = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">() =&gt;</span> <span class="hljs-title function_ inline">onAction</span>(data.<span class="hljs-property inline">id</span>), [data.<span class="hljs-property inline">id</span>, onAction]);
    <span class="hljs-keyword inline">const</span> memoizedData = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> <span class="hljs-title function_ inline">processData</span>(data), [data]);
    
    <span class="hljs-keyword inline">return</span> <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{handleAction}</span>&gt;</span>{memoizedData}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>;
});
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">适用于复杂组件树的性能优化。</p>
<h2 id="完整源码全解析" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#完整源码全解析" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 完整源码全解析">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            完整源码全解析
        </h2>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="'use%20client'%3B%0Aimport%20React%2C%20%7BuseCallback%2C%20useEffect%2C%20useRef%2C%20useState%2C%20useMemo%7D%20from%20'react'%3B%0Aimport%20%7BAnimatePresence%2C%20motion%7D%20from%20'framer-motion'%3B%0Aimport%20%7BuseTranslation%7D%20from%20'%40%2Flib%2Fhooks%2FuseTranslation'%3B%0A%2F%2F%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%E7%B1%BB%E5%9E%8B%E5%AE%9A%E4%B9%89%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0Ainterface%20ResumeData%20%7B%0Askills%3A%20%7B%0Acategory%3A%20string%3B%0Adescription%3A%20string%3B%0A%7D%5B%5D%3B%0A%7D%0Ainterface%20SkillGalaxyProps%20%7B%0AresumeData%3A%20ResumeData%3B%0ApersonalDescription%3A%20string%3B%0AonCloseAction%3A%20()%20%3D%3E%20void%3B%0A%7D%0A%2F%2F%20%E6%98%9F%E7%90%83%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E9%9B%86%E4%B8%AD%E7%AE%A1%E7%90%86%E6%89%80%E6%9C%89%E6%98%9F%E7%90%83%E7%9A%84%E7%8A%B6%E6%80%81%0Ainterface%20PlanetData%20%7B%0Aindex%3A%20number%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E6%98%9F%E7%90%83%E7%B4%A2%E5%BC%95%0Askill%3A%20%7B%20category%3A%20string%3B%20description%3A%20string%20%7D%3B%20%20%2F%2F%20%E6%8A%80%E8%83%BD%E4%BF%A1%E6%81%AF%0Aangle%3A%20number%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E5%BD%93%E5%89%8D%E8%A7%92%E5%BA%A6%E4%BD%8D%E7%BD%AE%0AorbitIndex%3A%20number%3B%20%20%20%20%20%20%20%20%20%2F%2F%20%E8%BD%A8%E9%81%93%E7%B4%A2%E5%BC%95%EF%BC%880-6%EF%BC%89%0AorbitRadius%3A%20number%3B%20%20%20%20%20%20%20%20%2F%2F%20%E8%BD%A8%E9%81%93%E5%8D%8A%E5%BE%84%0Ax%3A%20number%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E5%B1%8F%E5%B9%95X%E5%9D%90%E6%A0%87%0Ay%3A%20number%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E5%B1%8F%E5%B9%95Y%E5%9D%90%E6%A0%87%0AisCollided%3A%20boolean%3B%20%20%20%20%20%20%20%20%2F%2F%20%E7%A2%B0%E6%92%9E%E7%8A%B6%E6%80%81%0AshowParticles%3A%20boolean%3B%20%20%20%20%20%2F%2F%20%E7%B2%92%E5%AD%90%E6%95%88%E6%9E%9C%E6%98%BE%E7%A4%BA%E7%8A%B6%E6%80%81%0AcollisionSpeedBoost%3A%20number%3B%20%2F%2F%20%E7%A2%B0%E6%92%9E%E9%80%9F%E5%BA%A6%E5%8A%A0%E6%88%90%EF%BC%884-14%E5%80%8D%EF%BC%89%0AisPaused%3A%20boolean%3B%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E6%9A%82%E5%81%9C%E7%8A%B6%E6%80%81%EF%BC%88%E9%BC%A0%E6%A0%87%E6%82%AC%E5%81%9C%E6%97%B6%EF%BC%89%0AspeedMultiplier%3A%20number%3B%20%20%20%20%2F%2F%20%E6%90%85%E5%8A%A8%E9%80%9F%E5%BA%A6%E5%80%8D%E6%95%B0%EF%BC%884-14%E5%80%8D%EF%BC%89%0AisHovered%3A%20boolean%3B%20%20%20%20%20%20%20%20%20%2F%2F%20%E6%82%AC%E5%81%9C%E7%8A%B6%E6%80%81%0A%7D%0A%2F%2F%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%E7%B2%92%E5%AD%90%E6%95%88%E6%9E%9C%E7%BB%84%E4%BB%B6%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0Ainterface%20ParticleEffectProps%20%7B%0Ax%3A%20number%3B%0Ay%3A%20number%3B%0AisActive%3A%20boolean%3B%0AonComplete%3A%20()%20%3D%3E%20void%3B%0A%7D%0A%2F%2F%20%E4%BD%BF%E7%94%A8React.memo%E4%BC%98%E5%8C%96%E7%B2%92%E5%AD%90%E6%95%88%E6%9E%9C%E7%BB%84%E4%BB%B6%E6%80%A7%E8%83%BD%0Aconst%20ParticleEffect%20%3D%20React.memo(function%20ParticleEffect(%7Bx%2C%20y%2C%20isActive%2C%20onComplete%7D%3A%20ParticleEffectProps)%20%7B%0AuseEffect(()%20%3D%3E%20%7B%0Aif%20(isActive)%20%7B%0A%2F%2F%203%E7%A7%92%E5%90%8E%E8%87%AA%E5%8A%A8%E5%AE%8C%E6%88%90%E7%B2%92%E5%AD%90%E6%95%88%E6%9E%9C%0Aconst%20timer%20%3D%20setTimeout(onComplete%2C%203000)%3B%0Areturn%20()%20%3D%3E%20clearTimeout(timer)%3B%0A%7D%0A%7D%2C%20%5BisActive%2C%20onComplete%5D)%3B%0Aif%20(!isActive)%20return%20null%3B%0Areturn%20(%0Amotion.div%0AclassName%3D%22absolute%20pointer-events-none%22%0Astyle%3D%7B%7B%0Aleft%3A%20x%20-%2025%2C%20%20%20%2F%2F%20%E5%B1%85%E4%B8%AD%E5%AE%9A%E4%BD%8D%0Atop%3A%20y%20-%2025%2C%0Awidth%3A%2050%2C%0Aheight%3A%2050%2C%0A%7D%7D%0Ainitial%3D%7B%7Bopacity%3A%200%2C%20scale%3A%200%7D%7D%0Aanimate%3D%7B%7Bopacity%3A%201%2C%20scale%3A%201%7D%7D%0Aexit%3D%7B%7Bopacity%3A%200%2C%20scale%3A%200%7D%7D%0Atransition%3D%7B%7Bduration%3A%203%7D%7D%0A%3E%0A%7B%2F*%2032%E4%B8%AA%E7%B2%92%E5%AD%90%E5%91%88%E6%94%BE%E5%B0%84%E7%8A%B6%E6%95%A3%E5%BC%80%20*%2F%7D%0A%7B%5B...Array(32)%5D.map((_%2C%20i)%20%3D%3E%20(%0Amotion.div%0Akey%3D%7Bi%7D%0AclassName%3D%22absolute%20w-5%20h-5%20bg-gradient-to-r%20from-yellow-400%20to-orange-500%20rounded-full%22%0Astyle%3D%7B%7B%0Aleft%3A%2025%2C%0Atop%3A%2025%2C%0A%7D%7D%0Aanimate%3D%7B%7B%0A%2F%2F%20%E6%94%BE%E5%B0%84%E7%8A%B6%E8%BF%90%E5%8A%A8%EF%BC%9A%E6%AF%8F%E4%B8%AA%E7%B2%92%E5%AD%90%E9%97%B4%E9%9A%9411.25%E5%BA%A6%0Ax%3A%20Math.cos((i%20*%2011.25)%20*%20Math.PI%20%2F%20180)%20*%20150%2C%0Ay%3A%20Math.sin((i%20*%2011.25)%20*%20Math.PI%20%2F%20180)%20*%20150%2C%0Aopacity%3A%20%5B1%2C%200%5D%2C%20%20%20%20%2F%2F%20%E6%B8%90%E9%9A%90%E6%95%88%E6%9E%9C%0Ascale%3A%20%5B1%2C%200.2%5D%2C%20%20%20%20%2F%2F%20%E7%BC%A9%E5%B0%8F%E6%95%88%E6%9E%9C%0A%7D%7D%0Atransition%3D%7B%7B%0Aduration%3A%203%2C%20%20%20%20%20%20%20%20%2F%2F%203%E7%A7%92%E5%8A%A8%E7%94%BB%E6%97%B6%E9%95%BF%0Aease%3A%20%22easeOut%22%20%20%20%20%20%2F%2F%20%E8%87%AA%E7%84%B6%E5%87%8F%E9%80%9F%0A%7D%7D%0A%2F%3E%0A))%7D%0Amotion.div%3E%0A)%3B%0A%7D)%3B%0A%2F%2F%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%E5%8D%95%E4%B8%AA%E6%98%9F%E7%90%83%E6%B8%B2%E6%9F%93%E5%99%A8%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0Ainterface%20PlanetRendererProps%20%7B%0AplanetData%3A%20PlanetData%3B%0AgalaxyCenter%3A%20%7B%20x%3A%20number%3B%20y%3A%20number%20%7D%3B%0AonHover%3A%20(skill%3A%20%7B%20category%3A%20string%3B%20description%3A%20string%20%7D%20%7C%20null)%20%3D%3E%20void%3B%0AonMouseEnter%3A%20(index%3A%20number)%20%3D%3E%20void%3B%0AonMouseLeave%3A%20(index%3A%20number)%20%3D%3E%20void%3B%0AonParticleComplete%3A%20(index%3A%20number)%20%3D%3E%20void%3B%0A%7D%0A%2F%2F%20%E4%BD%BF%E7%94%A8React.memo%E4%BC%98%E5%8C%96%E5%8D%95%E4%B8%AA%E6%98%9F%E7%90%83%E7%9A%84%E6%B8%B2%E6%9F%93%E6%80%A7%E8%83%BD%0Aconst%20PlanetRenderer%20%3D%20React.memo(function%20PlanetRenderer(%7B%0AplanetData%2C%0AgalaxyCenter%2C%0AonHover%2C%0AonMouseEnter%2C%0AonMouseLeave%2C%0AonParticleComplete%0A%7D%3A%20PlanetRendererProps)%20%7B%0A%2F%2F%20%E4%BD%BF%E7%94%A8useCallback%E7%A1%AE%E4%BF%9D%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%E7%9A%84%E5%BC%95%E7%94%A8%E7%A8%B3%E5%AE%9A%E6%80%A7%0Aconst%20handleMouseEnter%20%3D%20useCallback(()%20%3D%3E%20%7B%0AonMouseEnter(planetData.index)%3B%0AonHover(planetData.skill)%3B%0A%7D%2C%20%5BplanetData.index%2C%20planetData.skill%2C%20onMouseEnter%2C%20onHover%5D)%3B%0Aconst%20handleMouseLeave%20%3D%20useCallback(()%20%3D%3E%20%7B%0AonMouseLeave(planetData.index)%3B%0AonHover(null)%3B%0A%7D%2C%20%5BplanetData.index%2C%20onMouseLeave%2C%20onHover%5D)%3B%0Aconst%20handleParticleComplete%20%3D%20useCallback(()%20%3D%3E%20%7B%0AonParticleComplete(planetData.index)%3B%0A%7D%2C%20%5BplanetData.index%2C%20onParticleComplete%5D)%3B%0Areturn%20(%0Adiv%20className%3D%22absolute%20inset-0%20pointer-events-none%22%3E%0A%7B%2F*%20%E8%BD%A8%E9%81%93%E8%B7%AF%E5%BE%84%EF%BC%9A%E5%8D%8A%E9%80%8F%E6%98%8E%E5%9C%86%E7%8E%AF%20*%2F%7D%0Adiv%0AclassName%3D%22absolute%20border%20border-white%2F10%20rounded-full%20pointer-events-none%22%0Astyle%3D%7B%7B%0Awidth%3A%20planetData.orbitRadius%20*%202%2C%0Aheight%3A%20planetData.orbitRadius%20*%202%2C%0Aleft%3A%20galaxyCenter.x%20-%20planetData.orbitRadius%2C%0Atop%3A%20galaxyCenter.y%20-%20planetData.orbitRadius%2C%0A%7D%7D%0A%2F%3E%0A%7B%2F*%20%E6%98%9F%E7%90%83%E6%9C%AC%E4%BD%93%20*%2F%7D%0Amotion.div%0AclassName%3D%22absolute%20pointer-events-auto%20select-none%22%0Astyle%3D%7B%7B%0Aleft%3A%20planetData.x%20-%2032%2C%20%20%20%2F%2F%20%E5%B1%85%E4%B8%AD64px%E6%98%9F%E7%90%83%0Atop%3A%20planetData.y%20-%2032%2C%0A%7D%7D%0AonMouseEnter%3D%7BhandleMouseEnter%7D%0AonMouseLeave%3D%7BhandleMouseLeave%7D%0AwhileHover%3D%7B%7Bscale%3A%201.2%7D%7D%20%20%20%20%20%20%2F%2F%20%E6%82%AC%E5%81%9C%E6%94%BE%E5%A4%A7%E6%95%88%E6%9E%9C%0Atransition%3D%7B%7Bduration%3A%200.2%7D%7D%0A%3E%0A%7B%2F*%20%E5%A4%9A%E5%B1%82%E6%AC%A1%E7%8A%B6%E6%80%81%E6%A0%B7%E5%BC%8F%E7%B3%BB%E7%BB%9F%20*%2F%7D%0Adiv%20className%3D%7B%60%0Aw-16%20h-16%20rounded-full%0Abg-gradient-to-br%20from-white%2F20%20to-white%2F5%0Abackdrop-blur-sm%20border%20border-white%2F20%0Aflex%20items-center%20justify-center%0Atransition-all%20duration-300%0A%24%7BplanetData.isHovered%20%3F%20'bg-primary%2F30%20border-primary%2F50%20shadow-lg%20shadow-primary%2F20'%20%3A%20''%7D%0A%24%7BplanetData.speedMultiplier%20%3E%201%20%3F%20'bg-purple-500%2F30%20border-purple-400%2F50%20shadow-lg%20shadow-purple-400%2F20'%20%3A%20''%7D%0A%24%7BplanetData.isCollided%20%3F%20'bg-red-500%2F30%20border-red-400%2F50%20shadow-lg%20shadow-red-400%2F20'%20%3A%20''%7D%0A%24%7BplanetData.collisionSpeedBoost%20%3E%201%20%3F%20'bg-yellow-500%2F30%20border-yellow-400%2F50%20shadow-lg%20shadow-yellow-400%2F20'%20%3A%20''%7D%0A%60%7D%3E%0Aspan%20className%3D%22text-xs%20font-medium%20text-white%20text-center%20px-1%22%3E%0A%7BplanetData.skill.category%7D%0Aspan%3E%0Adiv%3E%0Amotion.div%3E%0A%7B%2F*%20%E7%B2%92%E5%AD%90%E7%88%86%E7%82%B8%E6%95%88%E6%9E%9C%20*%2F%7D%0AAnimatePresence%3E%0A%7BplanetData.showParticles%20%26%26%20(%0AParticleEffect%0Ax%3D%7BplanetData.x%7D%0Ay%3D%7BplanetData.y%7D%0AisActive%3D%7BplanetData.showParticles%7D%0AonComplete%3D%7BhandleParticleComplete%7D%0A%2F%3E%0A)%7D%0AAnimatePresence%3E%0Adiv%3E%0A)%3B%0A%7D)%3B%0A%2F%2F%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%E4%B8%BB%E8%A6%81%E7%BB%84%E4%BB%B6%EF%BC%9A%E6%8A%80%E8%83%BD%E6%98%9F%E7%B3%BB%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0Aexport%20function%20SkillGalaxy(%7BresumeData%2C%20personalDescription%2C%20onCloseAction%7D%3A%20SkillGalaxyProps)%20%7B%0A%2F%2F%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0Aconst%20%5BhoveredSkill%2C%20setHoveredSkill%5D%20%3D%20useStatecategory%3A%20string%3B%20description%3A%20string%20%7D%20%7C%20null%3E(null)%3B%0Aconst%20%5BgalaxyCenter%2C%20setGalaxyCenter%5D%20%3D%20useState(%7Bx%3A%20350%2C%20y%3A%20350%7D)%3B%20%20%2F%2F%20%E6%98%9F%E7%B3%BB%E4%B8%AD%E5%BF%83%E5%9D%90%E6%A0%87%0Aconst%20%5BisStirring%2C%20setIsStirring%5D%20%3D%20useState(false)%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E6%90%85%E5%8A%A8%E7%8A%B6%E6%80%81%E9%98%B2%E6%8A%96%0A%2F%2F%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20Refs%E7%AE%A1%E7%90%86%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0Aconst%20galaxyRef%20%3D%20useRefHTMLDivElement%3E(null)%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E6%98%9F%E7%B3%BB%E5%AE%B9%E5%99%A8%E5%BC%95%E7%94%A8%0Aconst%20animationRef%20%3D%20useRefnumber%20%7C%20null%3E(null)%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E5%8A%A8%E7%94%BBID%E5%BC%95%E7%94%A8%0Aconst%20lastTimeRef%20%3D%20useRefnumber%20%7C%20null%3E(null)%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E4%B8%8A%E4%B8%80%E5%B8%A7%E6%97%B6%E9%97%B4%E6%88%B3%0Aconst%20collisionTimeoutsRef%20%3D%20useRefMapnumber%2C%20NodeJS.Timeout%3E%3E(new%20Map())%3B%20%2F%2F%20%E7%A2%B0%E6%92%9E%E5%AE%9A%E6%97%B6%E5%99%A8%E6%98%A0%E5%B0%84%0Aconst%20planetsDataRef%20%3D%20useRefPlanetData%5B%5D%3E(%5B%5D)%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E6%98%9F%E7%90%83%E6%95%B0%E6%8D%AE%E5%BC%95%E7%94%A8%EF%BC%88%E5%BD%B1%E5%AD%90%E7%8A%B6%E6%80%81%EF%BC%89%0Aconst%20frameCountRef%20%3D%20useRef(0)%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E5%B8%A7%E8%AE%A1%E6%95%B0%E5%99%A8%0Aconst%20%7Bt%7D%20%3D%20useTranslation()%3B%0A%2F%2F%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%E6%98%9F%E7%90%83%E6%95%B0%E6%8D%AE%E5%88%9D%E5%A7%8B%E5%8C%96%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0Aconst%20%5BplanetsData%2C%20setPlanetsData%5D%20%3D%20useStatePlanetData%5B%5D%3E(()%20%3D%3E%20%7B%0Aconst%20initialData%20%3D%20resumeData.skills.map((skill%2C%20index)%20%3D%3E%20%7B%0Aconst%20orbitIndex%20%3D%20index%20%25%207%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%207%E6%9D%A1%E8%BD%A8%E9%81%93%E5%BE%AA%E7%8E%AF%E5%88%86%E9%85%8D%0Aconst%20orbitRadius%20%3D%20100%20%2B%20orbitIndex%20*%2050%3B%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E8%BD%A8%E9%81%93%E5%8D%8A%E5%BE%84%EF%BC%9A100px%2C%20150px%2C%20200px...%0Aconst%20initialAngle%20%3D%20index%20*%2060%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E5%88%9D%E5%A7%8B%E8%A7%92%E5%BA%A6%E5%88%86%E6%95%A3%0Areturn%20%7B%0Aindex%2C%0Askill%2C%0Aangle%3A%20initialAngle%2C%0AorbitIndex%2C%0AorbitRadius%2C%0A%2F%2F%20%E6%9E%81%E5%9D%90%E6%A0%87%E8%BD%AC%E7%AC%9B%E5%8D%A1%E5%B0%94%E5%9D%90%E6%A0%87%0Ax%3A%20galaxyCenter.x%20%2B%20Math.cos(initialAngle%20*%20Math.PI%20%2F%20180)%20*%20orbitRadius%2C%0Ay%3A%20galaxyCenter.y%20%2B%20Math.sin(initialAngle%20*%20Math.PI%20%2F%20180)%20*%20orbitRadius%2C%0AisCollided%3A%20false%2C%0AshowParticles%3A%20false%2C%0AcollisionSpeedBoost%3A%201%2C%20%20%20%20%20%20%20%20%20%2F%2F%20%E7%A2%B0%E6%92%9E%E5%8A%A0%E9%80%9F%E5%80%8D%E6%95%B0%0AisPaused%3A%20false%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E9%BC%A0%E6%A0%87%E6%82%AC%E5%81%9C%E6%9A%82%E5%81%9C%0AspeedMultiplier%3A%201%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E6%90%85%E5%8A%A8%E9%80%9F%E5%BA%A6%E5%80%8D%E6%95%B0%0AisHovered%3A%20false%0A%7D%3B%0A%7D)%3B%0AplanetsDataRef.current%20%3D%20initialData%3B%20%20%20%2F%2F%20%E5%90%8C%E6%AD%A5%E5%BD%B1%E5%AD%90%E7%8A%B6%E6%80%81%0Areturn%20initialData%3B%0A%7D)%3B%0A%2F%2F%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%E5%93%8D%E5%BA%94%E5%BC%8F%E4%B8%AD%E5%BF%83%E5%AE%9A%E4%BD%8D%E7%B3%BB%E7%BB%9F%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0AuseEffect(()%20%3D%3E%20%7B%0Aconst%20updateCenter%20%3D%20()%20%3D%3E%20%7B%0Aif%20(galaxyRef.current)%20%7B%0Aconst%20rect%20%3D%20galaxyRef.current.getBoundingClientRect()%3B%0Aconst%20newCenter%20%3D%20%7B%0Ax%3A%20rect.width%20%2F%202%2C%0Ay%3A%20rect.height%20%2F%202%0A%7D%3B%0AsetGalaxyCenter(newCenter)%3B%0A%2F%2F%20%E5%9F%BA%E4%BA%8E%E6%96%B0%E4%B8%AD%E5%BF%83%E6%9B%B4%E6%96%B0%E6%89%80%E6%9C%89%E6%98%9F%E7%90%83%E4%BD%8D%E7%BD%AE%0Aconst%20updatedData%20%3D%20planetsDataRef.current.map(planet%20%3D%3E%20(%7B%0A...planet%2C%0Ax%3A%20newCenter.x%20%2B%20Math.cos(planet.angle%20*%20Math.PI%20%2F%20180)%20*%20planet.orbitRadius%2C%0Ay%3A%20newCenter.y%20%2B%20Math.sin(planet.angle%20*%20Math.PI%20%2F%20180)%20*%20planet.orbitRadius%2C%0A%7D))%3B%0AplanetsDataRef.current%20%3D%20updatedData%3B%0AsetPlanetsData(updatedData)%3B%0A%7D%0A%7D%3B%0AupdateCenter()%3B%0Awindow.addEventListener('resize'%2C%20updateCenter)%3B%0Areturn%20()%20%3D%3E%20window.removeEventListener('resize'%2C%20updateCenter)%3B%0A%7D%2C%20%5B%5D)%3B%0A%2F%2F%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%E9%AB%98%E6%95%88%E7%A2%B0%E6%92%9E%E6%A3%80%E6%B5%8B%E7%AE%97%E6%B3%95%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0Aconst%20detectCollisions%20%3D%20useCallback((planets%3A%20PlanetData%5B%5D)%20%3D%3E%20%7B%0Aconst%20collisionThreshold%20%3D%2013%3B%20%20%2F%2F%2013%E5%BA%A6%E7%A2%B0%E6%92%9E%E9%98%88%E5%80%BC%0Alet%20hasChanges%20%3D%20false%3B%0Aconst%20updatedPlanets%20%3D%20%5B...planets%5D%3B%0A%2F%2F%20%E5%8F%8C%E9%87%8D%E5%BE%AA%E7%8E%AF%E4%BC%98%E5%8C%96%EF%BC%9A%E9%81%BF%E5%85%8D%E9%87%8D%E5%A4%8D%E6%AF%94%E8%BE%83%0Afor%20(let%20i%20%3D%200%3B%20i%20length%3B%20i%2B%2B)%20%7B%0Aconst%20planet%20%3D%20updatedPlanets%5Bi%5D%3B%0Alet%20hasNearbyPlanet%20%3D%20false%3B%0A%2F%2F%20%E5%8F%AA%E6%A3%80%E6%B5%8B%E5%90%8C%E8%BD%A8%E9%81%93%E6%98%9F%E7%90%83%0Afor%20(let%20j%20%3D%20i%20%2B%201%3B%20j%20length%3B%20j%2B%2B)%20%7B%0Aif%20(updatedPlanets%5Bj%5D.orbitIndex%20!%3D%3D%20planet.orbitIndex)%20continue%3B%0Aconst%20otherPlanet%20%3D%20updatedPlanets%5Bj%5D%3B%0Aconst%20angleDiff%20%3D%20Math.abs(otherPlanet.angle%20-%20planet.angle)%3B%0A%2F%2F%20%E5%A4%84%E7%90%86%E8%B7%A8%E8%B6%8A0%C2%B0%E8%BE%B9%E7%95%8C%E7%9A%84%E6%83%85%E5%86%B5%0Aconst%20normalizedAngleDiff%20%3D%20Math.min(angleDiff%2C%20360%20-%20angleDiff)%3B%0Aif%20(normalizedAngleDiff%20true%3B%0Abreak%3B%0A%7D%0A%7D%0Aif%20(hasNearbyPlanet%20%26%26%20!planet.isCollided)%20%7B%0A%2F%2F%20%E9%A6%96%E6%AC%A1%E7%A2%B0%E6%92%9E%EF%BC%9A%E8%A7%A6%E5%8F%91%E6%95%88%E6%9E%9C%0AupdatedPlanets%5Bi%5D%20%3D%20%7B%0A...planet%2C%0AisCollided%3A%20true%2C%0AshowParticles%3A%20true%2C%0AcollisionSpeedBoost%3A%204%20%2B%20Math.random()%20*%2010%20%20%2F%2F%204-14%E5%80%8D%E9%9A%8F%E6%9C%BA%E5%8A%A0%E9%80%9F%0A%7D%3B%0AhasChanges%20%3D%20true%3B%0A%2F%2F%20%E7%A2%B0%E6%92%9E%E5%8A%A0%E9%80%9F%E9%87%8D%E7%BD%AE%E5%AE%9A%E6%97%B6%E5%99%A8%EF%BC%9A100ms%E5%90%8E%E6%81%A2%E5%A4%8D%0Aconst%20existingTimeout%20%3D%20collisionTimeoutsRef.current.get(i)%3B%0Aif%20(existingTimeout)%20%7B%0AclearTimeout(existingTimeout)%3B%0A%7D%0Aconst%20timeout%20%3D%20setTimeout(()%20%3D%3E%20%7B%0Aconst%20currentData%20%3D%20planetsDataRef.current%3B%0Aconst%20newData%20%3D%20currentData.map((p%2C%20idx)%20%3D%3E%0Aidx%20%3D%3D%3D%20i%20%3F%20%7B...p%2C%20collisionSpeedBoost%3A%201%7D%20%3A%20p%0A)%3B%0AplanetsDataRef.current%20%3D%20newData%3B%0AsetPlanetsData(newData)%3B%0AcollisionTimeoutsRef.current.delete(i)%3B%0A%7D%2C%20100)%3B%0AcollisionTimeoutsRef.current.set(i%2C%20timeout)%3B%0A%7D%20else%20if%20(!hasNearbyPlanet%20%26%26%20planet.isCollided)%20%7B%0A%2F%2F%20%E6%B8%85%E9%99%A4%E7%A2%B0%E6%92%9E%E6%A0%87%E8%AE%B0%0AupdatedPlanets%5Bi%5D%20%3D%20%7B%0A...planet%2C%0AisCollided%3A%20false%0A%7D%3B%0AhasChanges%20%3D%20true%3B%0A%7D%0A%7D%0Areturn%20hasChanges%20%3F%20updatedPlanets%20%3A%20planets%3B%0A%7D%2C%20%5B%5D)%3B%0A%2F%2F%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%E9%AB%98%E6%80%A7%E8%83%BD%E5%8A%A8%E7%94%BB%E5%BE%AA%E7%8E%AF%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0AuseEffect(()%20%3D%3E%20%7B%0Aconst%20animate%20%3D%20(currentTime%3A%20number)%20%3D%3E%20%7B%0Aif%20(!lastTimeRef.current)%20lastTimeRef.current%20%3D%20currentTime%3B%0Aconst%20deltaTime%20%3D%20currentTime%20-%20lastTimeRef.current%3B%0AlastTimeRef.current%20%3D%20currentTime%3B%0AframeCountRef.current%2B%2B%3B%0A%2F%2F%20%E5%B8%A7%E7%8E%87%E6%8E%A7%E5%88%B6%EF%BC%9A%E6%AF%8F2%E5%B8%A7%E6%9B%B4%E6%96%B0%E4%B8%80%E6%AC%A1%E4%BD%8D%E7%BD%AE%EF%BC%8830fps%EF%BC%89%0Aif%20(frameCountRef.current%20%25%202%20%3D%3D%3D%200)%20%7B%0Aconst%20currentData%20%3D%20planetsDataRef.current%3B%0A%2F%2F%20%E6%9B%B4%E6%96%B0%E6%98%9F%E7%90%83%E4%BD%8D%E7%BD%AE%E5%92%8C%E8%A7%92%E5%BA%A6%0Aconst%20updatedPlanets%20%3D%20currentData.map(planet%20%3D%3E%20%7B%0Aif%20(planet.isPaused)%20return%20planet%3B%0A%2F%2F%207%E7%A7%8D%E8%BD%A8%E9%81%93%E9%80%9F%E5%BA%A6%EF%BC%9A0.15%2C%200.23%2C%200.31%2C%200.39%2C%200.47%2C%200.55%2C%200.63%0Aconst%20baseSpeed%20%3D%200.15%20%2B%20planet.orbitIndex%20*%200.08%3B%0Aconst%20currentSpeed%20%3D%20baseSpeed%20*%20planet.speedMultiplier%20*%20planet.collisionSpeedBoost%3B%0Aconst%20newAngle%20%3D%20(planet.angle%20%2B%20currentSpeed%20*%20deltaTime%20*%200.01)%20%25%20360%3B%0Aconst%20normalizedAngle%20%3D%20newAngle%200%20%3F%20newAngle%20%2B%20360%20%3A%20newAngle%3B%0Areturn%20%7B%0A...planet%2C%0Aangle%3A%20normalizedAngle%2C%0A%2F%2F%20%E6%9E%81%E5%9D%90%E6%A0%87%E8%BD%AC%E7%AC%9B%E5%8D%A1%E5%B0%94%E5%9D%90%E6%A0%87%0Ax%3A%20galaxyCenter.x%20%2B%20Math.cos(normalizedAngle%20*%20Math.PI%20%2F%20180)%20*%20planet.orbitRadius%2C%0Ay%3A%20galaxyCenter.y%20%2B%20Math.sin(normalizedAngle%20*%20Math.PI%20%2F%20180)%20*%20planet.orbitRadius%2C%0A%7D%3B%0A%7D)%3B%0A%2F%2F%20%E6%AF%8F4%E5%B8%A7%E8%BF%9B%E8%A1%8C%E4%B8%80%E6%AC%A1%E7%A2%B0%E6%92%9E%E6%A3%80%E6%B5%8B%EF%BC%8815fps%EF%BC%89%0Alet%20finalPlanets%20%3D%20updatedPlanets%3B%0Aif%20(frameCountRef.current%20%25%204%20%3D%3D%3D%200%20%7C%7C%20isStirring)%20%7B%0AfinalPlanets%20%3D%20detectCollisions(updatedPlanets)%3B%0A%7D%0A%2F%2F%20%E6%8C%89%E9%9C%80%E6%9B%B4%E6%96%B0%EF%BC%9A%E5%8F%AA%E5%9C%A8%E6%9C%89%E5%AE%9E%E9%99%85%E5%8F%98%E5%8C%96%E6%97%B6%E6%9B%B4%E6%96%B0%E7%8A%B6%E6%80%81%0Aif%20(finalPlanets%20!%3D%3D%20currentData)%20%7B%0AplanetsDataRef.current%20%3D%20finalPlanets%3B%0AsetPlanetsData(finalPlanets)%3B%0A%7D%0A%7D%0AanimationRef.current%20%3D%20requestAnimationFrame(animate)%3B%0A%7D%3B%0AanimationRef.current%20%3D%20requestAnimationFrame(animate)%3B%0Areturn%20()%20%3D%3E%20%7B%0Aif%20(animationRef.current)%20%7B%0AcancelAnimationFrame(animationRef.current)%3B%0A%7D%0A%2F%2F%20%E6%B8%85%E7%90%86%E6%89%80%E6%9C%89%E7%A2%B0%E6%92%9E%E5%AE%9A%E6%97%B6%E5%99%A8%0AcollisionTimeoutsRef.current.forEach(timeout%20%3D%3E%20clearTimeout(timeout))%3B%0AcollisionTimeoutsRef.current.clear()%3B%0A%7D%3B%0A%7D%2C%20%5BgalaxyCenter%2C%20detectCollisions%2C%20isStirring%5D)%3B%0A%2F%2F%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%E4%BA%A4%E4%BA%92%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%99%A8%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0Aconst%20handleMouseEnter%20%3D%20useCallback((index%3A%20number)%20%3D%3E%20%7B%0Aconst%20currentData%20%3D%20planetsDataRef.current%3B%0Aconst%20newData%20%3D%20currentData.map((planet%2C%20i)%20%3D%3E%0Ai%20%3D%3D%3D%20index%20%3F%20%7B...planet%2C%20isPaused%3A%20true%2C%20isHovered%3A%20true%7D%20%3A%20planet%0A)%3B%0AplanetsDataRef.current%20%3D%20newData%3B%0AsetPlanetsData(newData)%3B%0A%7D%2C%20%5B%5D)%3B%0Aconst%20handleMouseLeave%20%3D%20useCallback((index%3A%20number)%20%3D%3E%20%7B%0Aconst%20currentData%20%3D%20planetsDataRef.current%3B%0Aconst%20newData%20%3D%20currentData.map((planet%2C%20i)%20%3D%3E%0Ai%20%3D%3D%3D%20index%20%3F%20%7B...planet%2C%20isPaused%3A%20false%2C%20isHovered%3A%20false%7D%20%3A%20planet%0A)%3B%0AplanetsDataRef.current%20%3D%20newData%3B%0AsetPlanetsData(newData)%3B%0A%7D%2C%20%5B%5D)%3B%0Aconst%20handleParticleComplete%20%3D%20useCallback((index%3A%20number)%20%3D%3E%20%7B%0Aconst%20currentData%20%3D%20planetsDataRef.current%3B%0Aconst%20newData%20%3D%20currentData.map((planet%2C%20i)%20%3D%3E%0Ai%20%3D%3D%3D%20index%20%3F%20%7B...planet%2C%20showParticles%3A%20false%7D%20%3A%20planet%0A)%3B%0AplanetsDataRef.current%20%3D%20newData%3B%0AsetPlanetsData(newData)%3B%0A%7D%2C%20%5B%5D)%3B%0A%2F%2F%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%E6%90%85%E5%8A%A8%E5%8A%9F%E8%83%BD%E7%9A%84%E9%98%B2%E6%8A%96%E6%9C%BA%E5%88%B6%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0Aconst%20handleStirPlanets%20%3D%20useCallback(()%20%3D%3E%20%7B%0Aif%20(isStirring)%20return%3B%20%2F%2F%20%E9%98%B2%E6%8A%96%E4%BF%9D%E6%8A%A4%0AsetIsStirring(true)%3B%0Aconst%20currentData%20%3D%20planetsDataRef.current%3B%0Aconst%20numPlanetsToStir%20%3D%20Math.min(currentData.length%2C%20Math.floor(currentData.length%20*%20Math.random()%20%2B%201))%3B%0Aconst%20indicesToStir%3A%20number%5B%5D%20%3D%20%5B%5D%3B%0A%2F%2F%20%E9%9A%8F%E6%9C%BA%E9%80%89%E6%8B%A9%E8%A6%81%E6%90%85%E5%8A%A8%E7%9A%84%E6%98%9F%E7%90%83%EF%BC%88%E9%81%BF%E5%85%8D%E9%87%8D%E5%A4%8D%EF%BC%89%0Awhile%20(indicesToStir.length%20const%20randomIndex%20%3D%20Math.floor(Math.random()%20*%20currentData.length)%3B%0Aif%20(!indicesToStir.includes(randomIndex))%20%7B%0AindicesToStir.push(randomIndex)%3B%0A%7D%0A%7D%0A%2F%2F%20%E6%89%B9%E9%87%8F%E6%9B%B4%E6%96%B0%E6%90%85%E5%8A%A8%E7%8A%B6%E6%80%81%0Aconst%20stirredData%20%3D%20currentData.map((planet%2C%20index)%20%3D%3E%0AindicesToStir.includes(index)%0A%3F%20%7B...planet%2C%20speedMultiplier%3A%204%20%2B%20Math.random()%20*%2010%7D%0A%3A%20planet%0A)%3B%0AplanetsDataRef.current%20%3D%20stirredData%3B%0AsetPlanetsData(stirredData)%3B%0A%2F%2F%203%E7%A7%92%E5%90%8E%E9%87%8D%E7%BD%AE%E9%80%9F%E5%BA%A6%0AsetTimeout(()%20%3D%3E%20%7B%0Aconst%20currentData%20%3D%20planetsDataRef.current%3B%0Aconst%20resetData%20%3D%20currentData.map((planet%2C%20index)%20%3D%3E%0AindicesToStir.includes(index)%0A%3F%20%7B...planet%2C%20speedMultiplier%3A%201%7D%0A%3A%20planet%0A)%3B%0AplanetsDataRef.current%20%3D%20resetData%3B%0AsetPlanetsData(resetData)%3B%0AsetIsStirring(false)%3B%0A%7D%2C%203000)%3B%0A%7D%2C%20%5BisStirring%5D)%3B%0A%2F%2F%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%E8%AE%B0%E5%BF%86%E5%8C%96%E6%98%9F%E7%90%83%E6%B8%B2%E6%9F%93%E5%99%A8%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0Aconst%20memoizedPlanets%20%3D%20useMemo(()%20%3D%3E%0AplanetsData.map((planetData)%20%3D%3E%20(%0APlanetRenderer%0Akey%3D%7B%60planet-%24%7BplanetData.index%7D%60%7D%0AplanetData%3D%7BplanetData%7D%0AgalaxyCenter%3D%7BgalaxyCenter%7D%0AonHover%3D%7BsetHoveredSkill%7D%0AonMouseEnter%3D%7BhandleMouseEnter%7D%0AonMouseLeave%3D%7BhandleMouseLeave%7D%0AonParticleComplete%3D%7BhandleParticleComplete%7D%0A%2F%3E%0A))%2C%20%5BplanetsData%2C%20galaxyCenter%2C%20handleMouseEnter%2C%20handleMouseLeave%2C%20handleParticleComplete%5D)%3B%0A%2F%2F%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%E7%BB%84%E4%BB%B6%E6%B8%B2%E6%9F%93%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0Areturn%20(%0Amotion.div%0Ainitial%3D%7B%7Bopacity%3A%200%2C%20y%3A%2050%2C%20scale%3A%200.95%7D%7D%0Aanimate%3D%7B%7Bopacity%3A%201%2C%20y%3A%200%2C%20scale%3A%201%7D%7D%0Aexit%3D%7B%7Bopacity%3A%200%2C%20y%3A%2050%2C%20scale%3A%200.95%7D%7D%0Atransition%3D%7B%7Bduration%3A%200.8%2C%20ease%3A%20%22easeOut%22%7D%7D%0AclassName%3D%22mt-8%20relative%20overflow-hidden%22%0A%3E%0A%7B%2F*%20%E6%98%9F%E7%B3%BB%E5%86%85%E5%AE%B9%E5%8C%BA%E5%9F%9F%20*%2F%7D%0Adiv%20className%3D%22relative%20p-8%20md%3Ap-12%20min-h-%5B800px%5D%22%3E%0A%7B%2F*%20%E6%98%9F%E7%B3%BB%E5%A4%B4%E9%83%A8%20*%2F%7D%0Adiv%20className%3D%22flex%20justify-between%20items-center%20mb-16%20relative%20z-10%22%3E%0Ah3%20className%3D%22text-2xl%20md%3Atext-3xl%20font-bold%20text-white%22%3E%0A%7Bt('personal.skillGalaxy')%7D%0Ah3%3E%0Adiv%20className%3D%22flex%20gap-4%22%3E%0A%7B%2F*%20%E6%90%85%E5%8A%A8%E6%8C%89%E9%92%AE%20*%2F%7D%0Amotion.button%0AonClick%3D%7BhandleStirPlanets%7D%0Adisabled%3D%7BisStirring%7D%0AclassName%3D%7B%60px-4%20py-2%20border%20rounded-lg%20transition-all%20duration-300%20hover%3Ascale-105%20%24%7B%0AisStirring%0A%3F%20'bg-purple-500%2F10%20border-purple-500%2F20%20text-purple-400%2F50%20cursor-not-allowed'%0A%3A%20'bg-purple-500%2F20%20hover%3Abg-purple-500%2F30%20border-purple-500%2F40%20text-purple-300'%0A%7D%60%7D%0AwhileHover%3D%7B!isStirring%20%3F%20%7Bscale%3A%201.05%7D%20%3A%20%7B%7D%7D%0AwhileTap%3D%7B!isStirring%20%3F%20%7Bscale%3A%200.95%7D%20%3A%20%7B%7D%7D%0A%3E%0A%7BisStirring%20%3F%20t('personal.stirring')%20%7C%7C%20'Stirring...'%20%3A%20t('personal.stirGalaxy')%7D%0Amotion.button%3E%0Abutton%0AonClick%3D%7BonCloseAction%7D%0AclassName%3D%22px-4%20py-2%20bg-red-500%2F20%20hover%3Abg-red-500%2F30%20border%20border-red-500%2F40%20rounded-lg%20text-red-300%20transition-all%20duration-300%20hover%3Ascale-105%22%0A%3E%0A%7Bt('personal.closeResume')%7D%0Abutton%3E%0Adiv%3E%0Adiv%3E%0A%7B%2F*%20%E6%8A%80%E8%83%BD%E6%98%9F%E7%B3%BB%E5%AE%B9%E5%99%A8%20*%2F%7D%0Adiv%0Aref%3D%7BgalaxyRef%7D%0AclassName%3D%22relative%20flex%20items-center%20justify-center%20mb-33%22%0Astyle%3D%7B%7Bheight%3A%20'700px'%7D%7D%0A%3E%0A%7B%2F*%20%E4%B8%AD%E5%A4%AE%E6%A0%B8%E5%BF%83%EF%BC%88%E5%A4%AA%E9%98%B3%EF%BC%89*%2F%7D%0Amotion.div%0AclassName%3D%22absolute%20z-20%20w-24%20h-24%20rounded-full%20bg-gradient-to-br%20from-amber-300%20via-yellow-400%20to-orange-500%20shadow-2xl%22%0Astyle%3D%7B%7B%0Aleft%3A%20galaxyCenter.x%20-%2048%2C%0Atop%3A%20galaxyCenter.y%20-%2048%2C%0A%7D%7D%0Aanimate%3D%7B%7B%0A%2F%2F%20%E5%91%BC%E5%90%B8%E8%88%AC%E7%9A%84%E5%85%89%E6%99%95%E5%8F%98%E5%8C%96%0AboxShadow%3A%20%5B%0A%220%200%2030px%20rgba(255%2C%20193%2C%207%2C%200.5)%22%2C%0A%220%200%2050px%20rgba(255%2C%20193%2C%207%2C%200.8)%22%2C%0A%220%200%2030px%20rgba(255%2C%20193%2C%207%2C%200.5)%22%0A%5D%0A%7D%7D%0Atransition%3D%7B%7B%0Aduration%3A%203%2C%0Arepeat%3A%20Infinity%2C%0Aease%3A%20%22easeInOut%22%0A%7D%7D%0AonMouseEnter%3D%7B()%20%3D%3E%20setHoveredSkill(%7B%0Acategory%3A%20%22MilkWind%22%2C%0Adescription%3A%20personalDescription%0A%7D)%7D%0AonMouseLeave%3D%7B()%20%3D%3E%20setHoveredSkill(null)%7D%0A%3E%0Adiv%0AclassName%3D%22w-full%20h-full%20rounded-full%20flex%20items-center%20justify-center%20text-2xl%20font-bold%20text-white%20select-none%22%3E%0A%F0%9F%91%A8%E2%80%8D%F0%9F%92%BB%0Adiv%3E%0A%7B%2F*%20%E5%A4%9A%E5%B1%82%E5%85%89%E6%99%95%E6%95%88%E6%9E%9C%20*%2F%7D%0Adiv%0AclassName%3D%22absolute%20inset-0%20rounded-full%20bg-gradient-to-br%20from-amber-300%2F30%20to-orange-500%2F30%20animate-pulse%20-z-10%20scale-150%22%2F%3E%0Amotion.div%3E%0A%7B%2F*%20%E6%B8%B2%E6%9F%93%E8%AE%B0%E5%BF%86%E5%8C%96%E6%98%9F%E7%90%83%20*%2F%7D%0A%7BmemoizedPlanets%7D%0Adiv%3E%0Adiv%3E%0A%7B%2F*%20%E4%BF%A1%E6%81%AF%E9%9D%A2%E6%9D%BF%20*%2F%7D%0Amotion.div%0AclassName%3D%22absolute%20bottom-0%20left-0%20right-0%20h-32%20p-6%20flex%20items-center%20justify-center%22%0Ainitial%3D%7B%7By%3A%20100%2C%20opacity%3A%200%7D%7D%0Aanimate%3D%7B%7By%3A%200%2C%20opacity%3A%201%7D%7D%0Atransition%3D%7B%7Bdelay%3A%200.5%7D%7D%0A%3E%0Adiv%20className%3D%22text-center%20max-w-4xl%22%3E%0AAnimatePresence%20mode%3D%22wait%22%3E%0Amotion.div%0Akey%3D%7BhoveredSkill%3F.category%20%7C%7C%20'default'%7D%0Ainitial%3D%7B%7Bopacity%3A%200%2C%20y%3A%2020%7D%7D%0Aanimate%3D%7B%7Bopacity%3A%201%2C%20y%3A%200%7D%7D%0Aexit%3D%7B%7Bopacity%3A%200%2C%20y%3A%20-20%7D%7D%0Atransition%3D%7B%7Bduration%3A%200.3%7D%7D%0A%3E%0Ah4%20className%3D%22text-xl%20font-bold%20text-white%20mb-2%22%3E%0A%7BhoveredSkill%3F.category%20%7C%7C%20t('personal.fullStackEngineer')%7D%0Ah4%3E%0Ap%20className%3D%22text-gray-300%20text-sm%20leading-relaxed%22%3E%0A%7BhoveredSkill%3F.description%20%7C%7C%20t('personal.galaxyDefaultDescription')%7D%0Ap%3E%0Amotion.div%3E%0AAnimatePresence%3E%0Adiv%3E%0Amotion.div%3E%0Amotion.div%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-string inline">&#x27;use client&#x27;</span>;

<span class="hljs-keyword inline">import</span> <span class="hljs-title class_ inline">React</span>, {useCallback, useEffect, useRef, useState, useMemo} <span class="hljs-keyword inline">from</span> <span class="hljs-string inline">&#x27;react&#x27;</span>;
<span class="hljs-keyword inline">import</span> {<span class="hljs-title class_ inline">AnimatePresence</span>, motion} <span class="hljs-keyword inline">from</span> <span class="hljs-string inline">&#x27;framer-motion&#x27;</span>;
<span class="hljs-keyword inline">import</span> {useTranslation} <span class="hljs-keyword inline">from</span> <span class="hljs-string inline">&#x27;@/lib/hooks/useTranslation&#x27;</span>;

<span class="hljs-comment inline">// ==================== 类型定义 ====================</span>
<span class="hljs-keyword inline">interface</span> <span class="hljs-title class_ inline">ResumeData</span> {
    <span class="hljs-attr inline">skills</span>: {
        <span class="hljs-attr inline">category</span>: <span class="hljs-built_in inline">string</span>;
        <span class="hljs-attr inline">description</span>: <span class="hljs-built_in inline">string</span>;
    }[];
}

<span class="hljs-keyword inline">interface</span> <span class="hljs-title class_ inline">SkillGalaxyProps</span> {
    <span class="hljs-attr inline">resumeData</span>: <span class="hljs-title class_ inline">ResumeData</span>;
    <span class="hljs-attr inline">personalDescription</span>: <span class="hljs-built_in inline">string</span>;
    <span class="hljs-attr inline">onCloseAction</span>: <span class="hljs-function inline">() =&gt;</span> <span class="hljs-built_in inline">void</span>;
}

<span class="hljs-comment inline">// 星球数据结构：集中管理所有星球的状态</span>
<span class="hljs-keyword inline">interface</span> <span class="hljs-title class_ inline">PlanetData</span> {
    <span class="hljs-attr inline">index</span>: <span class="hljs-built_in inline">number</span>;              <span class="hljs-comment inline">// 星球索引</span>
    <span class="hljs-attr inline">skill</span>: { <span class="hljs-attr inline">category</span>: <span class="hljs-built_in inline">string</span>; <span class="hljs-attr inline">description</span>: <span class="hljs-built_in inline">string</span> };  <span class="hljs-comment inline">// 技能信息</span>
    <span class="hljs-attr inline">angle</span>: <span class="hljs-built_in inline">number</span>;              <span class="hljs-comment inline">// 当前角度位置</span>
    <span class="hljs-attr inline">orbitIndex</span>: <span class="hljs-built_in inline">number</span>;         <span class="hljs-comment inline">// 轨道索引（0-6）</span>
    <span class="hljs-attr inline">orbitRadius</span>: <span class="hljs-built_in inline">number</span>;        <span class="hljs-comment inline">// 轨道半径</span>
    <span class="hljs-attr inline">x</span>: <span class="hljs-built_in inline">number</span>;                  <span class="hljs-comment inline">// 屏幕X坐标</span>
    <span class="hljs-attr inline">y</span>: <span class="hljs-built_in inline">number</span>;                  <span class="hljs-comment inline">// 屏幕Y坐标</span>
    <span class="hljs-attr inline">isCollided</span>: <span class="hljs-built_in inline">boolean</span>;        <span class="hljs-comment inline">// 碰撞状态</span>
    <span class="hljs-attr inline">showParticles</span>: <span class="hljs-built_in inline">boolean</span>;     <span class="hljs-comment inline">// 粒子效果显示状态</span>
    <span class="hljs-attr inline">collisionSpeedBoost</span>: <span class="hljs-built_in inline">number</span>; <span class="hljs-comment inline">// 碰撞速度加成（4-14倍）</span>
    <span class="hljs-attr inline">isPaused</span>: <span class="hljs-built_in inline">boolean</span>;          <span class="hljs-comment inline">// 暂停状态（鼠标悬停时）</span>
    <span class="hljs-attr inline">speedMultiplier</span>: <span class="hljs-built_in inline">number</span>;    <span class="hljs-comment inline">// 搅动速度倍数（4-14倍）</span>
    <span class="hljs-attr inline">isHovered</span>: <span class="hljs-built_in inline">boolean</span>;         <span class="hljs-comment inline">// 悬停状态</span>
}

<span class="hljs-comment inline">// ==================== 粒子效果组件 ====================</span>
<span class="hljs-keyword inline">interface</span> <span class="hljs-title class_ inline">ParticleEffectProps</span> {
    <span class="hljs-attr inline">x</span>: <span class="hljs-built_in inline">number</span>;
    <span class="hljs-attr inline">y</span>: <span class="hljs-built_in inline">number</span>;
    <span class="hljs-attr inline">isActive</span>: <span class="hljs-built_in inline">boolean</span>;
    <span class="hljs-attr inline">onComplete</span>: <span class="hljs-function inline">() =&gt;</span> <span class="hljs-built_in inline">void</span>;
}

<span class="hljs-comment inline">// 使用React.memo优化粒子效果组件性能</span>
<span class="hljs-keyword inline">const</span> <span class="hljs-title class_ inline">ParticleEffect</span> = <span class="hljs-title class_ inline">React</span>.<span class="hljs-title function_ inline">memo</span>(<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">ParticleEffect</span>(<span class="hljs-params inline">{x, y, isActive, onComplete}: <span class="hljs-title class_ inline">ParticleEffectProps</span></span>) {
    <span class="hljs-title function_ inline">useEffect</span>(<span class="hljs-function inline">() =&gt;</span> {
        <span class="hljs-keyword inline">if</span> (isActive) {
            <span class="hljs-comment inline">// 3秒后自动完成粒子效果</span>
            <span class="hljs-keyword inline">const</span> timer = <span class="hljs-built_in inline">setTimeout</span>(onComplete, <span class="hljs-number inline">3000</span>);
            <span class="hljs-keyword inline">return</span> <span class="hljs-function inline">() =&gt;</span> <span class="hljs-built_in inline">clearTimeout</span>(timer);
        }
    }, [isActive, onComplete]);

    <span class="hljs-keyword inline">if</span> (!isActive) <span class="hljs-keyword inline">return</span> <span class="hljs-literal inline">null</span>;

    <span class="hljs-keyword inline">return</span> (
        <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
            <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;absolute pointer-events-none&quot;</span>
            <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{</span>
                <span class="hljs-attr inline">left:</span> <span class="hljs-attr inline">x</span> <span class="hljs-attr inline">-</span> <span class="hljs-attr inline">25</span>,   // <span class="hljs-attr inline">居中定位</span>
                <span class="hljs-attr inline">top:</span> <span class="hljs-attr inline">y</span> <span class="hljs-attr inline">-</span> <span class="hljs-attr inline">25</span>,
                <span class="hljs-attr inline">width:</span> <span class="hljs-attr inline">50</span>,
                <span class="hljs-attr inline">height:</span> <span class="hljs-attr inline">50</span>,
            }}
            <span class="hljs-attr inline">initial</span>=<span class="hljs-string inline">{{opacity:</span> <span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">scale:</span> <span class="hljs-attr inline">0</span>}}
            <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">{{opacity:</span> <span class="hljs-attr inline">1</span>, <span class="hljs-attr inline">scale:</span> <span class="hljs-attr inline">1</span>}}
            <span class="hljs-attr inline">exit</span>=<span class="hljs-string inline">{{opacity:</span> <span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">scale:</span> <span class="hljs-attr inline">0</span>}}
            <span class="hljs-attr inline">transition</span>=<span class="hljs-string inline">{{duration:</span> <span class="hljs-attr inline">3</span>}}
        &gt;</span>
            {/* 32个粒子呈放射状散开 */}
            {[...Array(32)].map((_, i) =&gt; (
                <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
                    <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{i}</span>
                    <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;absolute w-5 h-5 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full&quot;</span>
                    <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{</span>
                        <span class="hljs-attr inline">left:</span> <span class="hljs-attr inline">25</span>,
                        <span class="hljs-attr inline">top:</span> <span class="hljs-attr inline">25</span>,
                    }}
                    <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">{{</span>
                        // <span class="hljs-attr inline">放射状运动</span>：<span class="hljs-attr inline">每个粒子间隔11.25度</span>
                        <span class="hljs-attr inline">x:</span> <span class="hljs-attr inline">Math.cos</span>((<span class="hljs-attr inline">i</span> * <span class="hljs-attr inline">11.25</span>) * <span class="hljs-attr inline">Math.PI</span> / <span class="hljs-attr inline">180</span>) * <span class="hljs-attr inline">150</span>,
                        <span class="hljs-attr inline">y:</span> <span class="hljs-attr inline">Math.sin</span>((<span class="hljs-attr inline">i</span> * <span class="hljs-attr inline">11.25</span>) * <span class="hljs-attr inline">Math.PI</span> / <span class="hljs-attr inline">180</span>) * <span class="hljs-attr inline">150</span>,
                        <span class="hljs-attr inline">opacity:</span> [<span class="hljs-attr inline">1</span>, <span class="hljs-attr inline">0</span>],    // <span class="hljs-attr inline">渐隐效果</span>
                        <span class="hljs-attr inline">scale:</span> [<span class="hljs-attr inline">1</span>, <span class="hljs-attr inline">0.2</span>],    // <span class="hljs-attr inline">缩小效果</span>
                    }}
                    <span class="hljs-attr inline">transition</span>=<span class="hljs-string inline">{{</span>
                        <span class="hljs-attr inline">duration:</span> <span class="hljs-attr inline">3</span>,        // <span class="hljs-attr inline">3秒动画时长</span>
                        <span class="hljs-attr inline">ease:</span> &quot;<span class="hljs-attr inline">easeOut</span>&quot;     // <span class="hljs-attr inline">自然减速</span>
                    }}
                /&gt;</span>
            ))}
        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.div</span>&gt;</span></span>
    );
});

<span class="hljs-comment inline">// ==================== 单个星球渲染器 ====================</span>
<span class="hljs-keyword inline">interface</span> <span class="hljs-title class_ inline">PlanetRendererProps</span> {
    <span class="hljs-attr inline">planetData</span>: <span class="hljs-title class_ inline">PlanetData</span>;
    <span class="hljs-attr inline">galaxyCenter</span>: { <span class="hljs-attr inline">x</span>: <span class="hljs-built_in inline">number</span>; <span class="hljs-attr inline">y</span>: <span class="hljs-built_in inline">number</span> };
    <span class="hljs-attr inline">onHover</span>: <span class="hljs-function inline">(<span class="hljs-params inline"><span class="hljs-attr inline">skill</span>: { category: <span class="hljs-built_in inline">string</span>; description: <span class="hljs-built_in inline">string</span> } | <span class="hljs-literal inline">null</span></span>) =&gt;</span> <span class="hljs-built_in inline">void</span>;
    <span class="hljs-attr inline">onMouseEnter</span>: <span class="hljs-function inline">(<span class="hljs-params inline"><span class="hljs-attr inline">index</span>: <span class="hljs-built_in inline">number</span></span>) =&gt;</span> <span class="hljs-built_in inline">void</span>;
    <span class="hljs-attr inline">onMouseLeave</span>: <span class="hljs-function inline">(<span class="hljs-params inline"><span class="hljs-attr inline">index</span>: <span class="hljs-built_in inline">number</span></span>) =&gt;</span> <span class="hljs-built_in inline">void</span>;
    <span class="hljs-attr inline">onParticleComplete</span>: <span class="hljs-function inline">(<span class="hljs-params inline"><span class="hljs-attr inline">index</span>: <span class="hljs-built_in inline">number</span></span>) =&gt;</span> <span class="hljs-built_in inline">void</span>;
}

<span class="hljs-comment inline">// 使用React.memo优化单个星球的渲染性能</span>
<span class="hljs-keyword inline">const</span> <span class="hljs-title class_ inline">PlanetRenderer</span> = <span class="hljs-title class_ inline">React</span>.<span class="hljs-title function_ inline">memo</span>(<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">PlanetRenderer</span>(<span class="hljs-params inline">{
                            planetData,
                            galaxyCenter,
                            onHover,
                            onMouseEnter,
                            onMouseLeave,
                            onParticleComplete
                        }: <span class="hljs-title class_ inline">PlanetRendererProps</span></span>) {
    
    <span class="hljs-comment inline">// 使用useCallback确保回调函数的引用稳定性</span>
    <span class="hljs-keyword inline">const</span> handleMouseEnter = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">() =&gt;</span> {
        <span class="hljs-title function_ inline">onMouseEnter</span>(planetData.<span class="hljs-property inline">index</span>);
        <span class="hljs-title function_ inline">onHover</span>(planetData.<span class="hljs-property inline">skill</span>);
    }, [planetData.<span class="hljs-property inline">index</span>, planetData.<span class="hljs-property inline">skill</span>, onMouseEnter, onHover]);

    <span class="hljs-keyword inline">const</span> handleMouseLeave = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">() =&gt;</span> {
        <span class="hljs-title function_ inline">onMouseLeave</span>(planetData.<span class="hljs-property inline">index</span>);
        <span class="hljs-title function_ inline">onHover</span>(<span class="hljs-literal inline">null</span>);
    }, [planetData.<span class="hljs-property inline">index</span>, onMouseLeave, onHover]);

    <span class="hljs-keyword inline">const</span> handleParticleComplete = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">() =&gt;</span> {
        <span class="hljs-title function_ inline">onParticleComplete</span>(planetData.<span class="hljs-property inline">index</span>);
    }, [planetData.<span class="hljs-property inline">index</span>, onParticleComplete]);

    <span class="hljs-keyword inline">return</span> (
        <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span> <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;absolute inset-0 pointer-events-none&quot;</span>&gt;</span>
            {/* 轨道路径：半透明圆环 */}
            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>
                <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;absolute border border-white/10 rounded-full pointer-events-none&quot;</span>
                <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{</span>
                    <span class="hljs-attr inline">width:</span> <span class="hljs-attr inline">planetData.orbitRadius</span> * <span class="hljs-attr inline">2</span>,
                    <span class="hljs-attr inline">height:</span> <span class="hljs-attr inline">planetData.orbitRadius</span> * <span class="hljs-attr inline">2</span>,
                    <span class="hljs-attr inline">left:</span> <span class="hljs-attr inline">galaxyCenter.x</span> <span class="hljs-attr inline">-</span> <span class="hljs-attr inline">planetData.orbitRadius</span>,
                    <span class="hljs-attr inline">top:</span> <span class="hljs-attr inline">galaxyCenter.y</span> <span class="hljs-attr inline">-</span> <span class="hljs-attr inline">planetData.orbitRadius</span>,
                }}
            /&gt;</span>

            {/* 星球本体 */}
            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
                <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;absolute pointer-events-auto select-none&quot;</span>
                <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{</span>
                    <span class="hljs-attr inline">left:</span> <span class="hljs-attr inline">planetData.x</span> <span class="hljs-attr inline">-</span> <span class="hljs-attr inline">32</span>,   // <span class="hljs-attr inline">居中64px星球</span>
                    <span class="hljs-attr inline">top:</span> <span class="hljs-attr inline">planetData.y</span> <span class="hljs-attr inline">-</span> <span class="hljs-attr inline">32</span>,
                }}
                <span class="hljs-attr inline">onMouseEnter</span>=<span class="hljs-string inline">{handleMouseEnter}</span>
                <span class="hljs-attr inline">onMouseLeave</span>=<span class="hljs-string inline">{handleMouseLeave}</span>
                <span class="hljs-attr inline">whileHover</span>=<span class="hljs-string inline">{{scale:</span> <span class="hljs-attr inline">1.2</span>}}      // <span class="hljs-attr inline">悬停放大效果</span>
                <span class="hljs-attr inline">transition</span>=<span class="hljs-string inline">{{duration:</span> <span class="hljs-attr inline">0.2</span>}}
            &gt;</span>
                {/* 多层次状态样式系统 */}
                <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span> <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">{</span>`
                    <span class="hljs-attr inline">w-16</span> <span class="hljs-attr inline">h-16</span> <span class="hljs-attr inline">rounded-full</span> 
                    <span class="hljs-attr inline">bg-gradient-to-br</span> <span class="hljs-attr inline">from-white</span>/<span class="hljs-attr inline">20</span> <span class="hljs-attr inline">to-white</span>/<span class="hljs-attr inline">5</span>
                    <span class="hljs-attr inline">backdrop-blur-sm</span> <span class="hljs-attr inline">border</span> <span class="hljs-attr inline">border-white</span>/<span class="hljs-attr inline">20</span>
                    <span class="hljs-attr inline">flex</span> <span class="hljs-attr inline">items-center</span> <span class="hljs-attr inline">justify-center</span>
                    <span class="hljs-attr inline">transition-all</span> <span class="hljs-attr inline">duration-300</span>
                    ${<span class="hljs-attr inline">planetData.isHovered</span> ? &#x27;<span class="hljs-attr inline">bg-primary</span>/<span class="hljs-attr inline">30</span> <span class="hljs-attr inline">border-primary</span>/<span class="hljs-attr inline">50</span> <span class="hljs-attr inline">shadow-lg</span> <span class="hljs-attr inline">shadow-primary</span>/<span class="hljs-attr inline">20</span>&#x27; <span class="hljs-attr inline">:</span> &#x27;&#x27;}
                    ${<span class="hljs-attr inline">planetData.speedMultiplier</span> &gt;</span> 1 ? &#x27;bg-purple-500/30 border-purple-400/50 shadow-lg shadow-purple-400/20&#x27; : &#x27;&#x27;}
                    ${planetData.isCollided ? &#x27;bg-red-500/30 border-red-400/50 shadow-lg shadow-red-400/20&#x27; : &#x27;&#x27;}
                    ${planetData.collisionSpeedBoost &gt; 1 ? &#x27;bg-yellow-500/30 border-yellow-400/50 shadow-lg shadow-yellow-400/20&#x27; : &#x27;&#x27;}
                `}&gt;
                    <span class="hljs-tag inline">&lt;<span class="hljs-name inline">span</span> <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;text-xs font-medium text-white text-center px-1&quot;</span>&gt;</span>
                        {planetData.skill.category}
                    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">span</span>&gt;</span>
                <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
            <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.div</span>&gt;</span>

            {/* 粒子爆炸效果 */}
            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">AnimatePresence</span>&gt;</span>
                {planetData.showParticles &amp;&amp; (
                    <span class="hljs-tag inline">&lt;<span class="hljs-name inline">ParticleEffect</span>
                        <span class="hljs-attr inline">x</span>=<span class="hljs-string inline">{planetData.x}</span>
                        <span class="hljs-attr inline">y</span>=<span class="hljs-string inline">{planetData.y}</span>
                        <span class="hljs-attr inline">isActive</span>=<span class="hljs-string inline">{planetData.showParticles}</span>
                        <span class="hljs-attr inline">onComplete</span>=<span class="hljs-string inline">{handleParticleComplete}</span>
                    /&gt;</span>
                )}
            <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">AnimatePresence</span>&gt;</span>
        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
    );
});

<span class="hljs-comment inline">// ==================== 主要组件：技能星系 ====================</span>
<span class="hljs-keyword inline">export</span> <span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">SkillGalaxy</span>(<span class="hljs-params inline">{resumeData, personalDescription, onCloseAction}: <span class="hljs-title class_ inline">SkillGalaxyProps</span></span>) {
    <span class="hljs-comment inline">// ==================== 状态管理 ====================</span>
    <span class="hljs-keyword inline">const</span> [hoveredSkill, setHoveredSkill] = useState&lt;{ <span class="hljs-attr inline">category</span>: <span class="hljs-built_in inline">string</span>; <span class="hljs-attr inline">description</span>: <span class="hljs-built_in inline">string</span> } | <span class="hljs-literal inline">null</span>&gt;(<span class="hljs-literal inline">null</span>);
    <span class="hljs-keyword inline">const</span> [galaxyCenter, setGalaxyCenter] = <span class="hljs-title function_ inline">useState</span>({<span class="hljs-attr inline">x</span>: <span class="hljs-number inline">350</span>, <span class="hljs-attr inline">y</span>: <span class="hljs-number inline">350</span>});  <span class="hljs-comment inline">// 星系中心坐标</span>
    <span class="hljs-keyword inline">const</span> [isStirring, setIsStirring] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-literal inline">false</span>);                <span class="hljs-comment inline">// 搅动状态防抖</span>
    
    <span class="hljs-comment inline">// ==================== Refs管理 ====================</span>
    <span class="hljs-keyword inline">const</span> galaxyRef = useRef&lt;<span class="hljs-title class_ inline">HTMLDivElement</span>&gt;(<span class="hljs-literal inline">null</span>);                     <span class="hljs-comment inline">// 星系容器引用</span>
    <span class="hljs-keyword inline">const</span> animationRef = useRef&lt;<span class="hljs-built_in inline">number</span> | <span class="hljs-literal inline">null</span>&gt;(<span class="hljs-literal inline">null</span>);                   <span class="hljs-comment inline">// 动画ID引用</span>
    <span class="hljs-keyword inline">const</span> lastTimeRef = useRef&lt;<span class="hljs-built_in inline">number</span> | <span class="hljs-literal inline">null</span>&gt;(<span class="hljs-literal inline">null</span>);                    <span class="hljs-comment inline">// 上一帧时间戳</span>
    <span class="hljs-keyword inline">const</span> collisionTimeoutsRef = useRef&lt;<span class="hljs-title class_ inline">Map</span>&lt;<span class="hljs-built_in inline">number</span>, <span class="hljs-title class_ inline">NodeJS</span>.<span class="hljs-property inline">Timeout</span>&gt;&gt;(<span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">Map</span>()); <span class="hljs-comment inline">// 碰撞定时器映射</span>
    <span class="hljs-keyword inline">const</span> planetsDataRef = useRef&lt;<span class="hljs-title class_ inline">PlanetData</span>[]&gt;([]);                    <span class="hljs-comment inline">// 星球数据引用（影子状态）</span>
    <span class="hljs-keyword inline">const</span> frameCountRef = <span class="hljs-title function_ inline">useRef</span>(<span class="hljs-number inline">0</span>);                                    <span class="hljs-comment inline">// 帧计数器</span>
    
    <span class="hljs-keyword inline">const</span> {t} = <span class="hljs-title function_ inline">useTranslation</span>();

    <span class="hljs-comment inline">// ==================== 星球数据初始化 ====================</span>
    <span class="hljs-keyword inline">const</span> [planetsData, setPlanetsData] = useState&lt;<span class="hljs-title class_ inline">PlanetData</span>[]&gt;(<span class="hljs-function inline">() =&gt;</span> {
        <span class="hljs-keyword inline">const</span> initialData = resumeData.<span class="hljs-property inline">skills</span>.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline">(<span class="hljs-params inline">skill, index</span>) =&gt;</span> {
            <span class="hljs-keyword inline">const</span> orbitIndex = index % <span class="hljs-number inline">7</span>;                       <span class="hljs-comment inline">// 7条轨道循环分配</span>
            <span class="hljs-keyword inline">const</span> orbitRadius = <span class="hljs-number inline">100</span> + orbitIndex * <span class="hljs-number inline">50</span>;          <span class="hljs-comment inline">// 轨道半径：100px, 150px, 200px...</span>
            <span class="hljs-keyword inline">const</span> initialAngle = index * <span class="hljs-number inline">60</span>;                    <span class="hljs-comment inline">// 初始角度分散</span>

            <span class="hljs-keyword inline">return</span> {
                index,
                skill,
                <span class="hljs-attr inline">angle</span>: initialAngle,
                orbitIndex,
                orbitRadius,
                <span class="hljs-comment inline">// 极坐标转笛卡尔坐标</span>
                <span class="hljs-attr inline">x</span>: galaxyCenter.<span class="hljs-property inline">x</span> + <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">cos</span>(initialAngle * <span class="hljs-title class_ inline">Math</span>.<span class="hljs-property inline">PI</span> / <span class="hljs-number inline">180</span>) * orbitRadius,
                <span class="hljs-attr inline">y</span>: galaxyCenter.<span class="hljs-property inline">y</span> + <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">sin</span>(initialAngle * <span class="hljs-title class_ inline">Math</span>.<span class="hljs-property inline">PI</span> / <span class="hljs-number inline">180</span>) * orbitRadius,
                <span class="hljs-attr inline">isCollided</span>: <span class="hljs-literal inline">false</span>,
                <span class="hljs-attr inline">showParticles</span>: <span class="hljs-literal inline">false</span>,
                <span class="hljs-attr inline">collisionSpeedBoost</span>: <span class="hljs-number inline">1</span>,         <span class="hljs-comment inline">// 碰撞加速倍数</span>
                <span class="hljs-attr inline">isPaused</span>: <span class="hljs-literal inline">false</span>,                <span class="hljs-comment inline">// 鼠标悬停暂停</span>
                <span class="hljs-attr inline">speedMultiplier</span>: <span class="hljs-number inline">1</span>,             <span class="hljs-comment inline">// 搅动速度倍数</span>
                <span class="hljs-attr inline">isHovered</span>: <span class="hljs-literal inline">false</span>
            };
        });
        planetsDataRef.<span class="hljs-property inline">current</span> = initialData;   <span class="hljs-comment inline">// 同步影子状态</span>
        <span class="hljs-keyword inline">return</span> initialData;
    });

    <span class="hljs-comment inline">// ==================== 响应式中心定位系统 ====================</span>
    <span class="hljs-title function_ inline">useEffect</span>(<span class="hljs-function inline">() =&gt;</span> {
        <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">updateCenter</span> = (<span class="hljs-params inline"></span>) =&gt; {
            <span class="hljs-keyword inline">if</span> (galaxyRef.<span class="hljs-property inline">current</span>) {
                <span class="hljs-keyword inline">const</span> rect = galaxyRef.<span class="hljs-property inline">current</span>.<span class="hljs-title function_ inline">getBoundingClientRect</span>();
                <span class="hljs-keyword inline">const</span> newCenter = {
                    <span class="hljs-attr inline">x</span>: rect.<span class="hljs-property inline">width</span> / <span class="hljs-number inline">2</span>,
                    <span class="hljs-attr inline">y</span>: rect.<span class="hljs-property inline">height</span> / <span class="hljs-number inline">2</span>
                };
                <span class="hljs-title function_ inline">setGalaxyCenter</span>(newCenter);

                <span class="hljs-comment inline">// 基于新中心更新所有星球位置</span>
                <span class="hljs-keyword inline">const</span> updatedData = planetsDataRef.<span class="hljs-property inline">current</span>.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline"><span class="hljs-params inline">planet</span> =&gt;</span> ({
                    ...planet,
                    <span class="hljs-attr inline">x</span>: newCenter.<span class="hljs-property inline">x</span> + <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">cos</span>(planet.<span class="hljs-property inline">angle</span> * <span class="hljs-title class_ inline">Math</span>.<span class="hljs-property inline">PI</span> / <span class="hljs-number inline">180</span>) * planet.<span class="hljs-property inline">orbitRadius</span>,
                    <span class="hljs-attr inline">y</span>: newCenter.<span class="hljs-property inline">y</span> + <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">sin</span>(planet.<span class="hljs-property inline">angle</span> * <span class="hljs-title class_ inline">Math</span>.<span class="hljs-property inline">PI</span> / <span class="hljs-number inline">180</span>) * planet.<span class="hljs-property inline">orbitRadius</span>,
                }));
                
                planetsDataRef.<span class="hljs-property inline">current</span> = updatedData;
                <span class="hljs-title function_ inline">setPlanetsData</span>(updatedData);
            }
        };

        <span class="hljs-title function_ inline">updateCenter</span>();
        <span class="hljs-variable language_ inline">window</span>.<span class="hljs-title function_ inline">addEventListener</span>(<span class="hljs-string inline">&#x27;resize&#x27;</span>, updateCenter);
        <span class="hljs-keyword inline">return</span> <span class="hljs-function inline">() =&gt;</span> <span class="hljs-variable language_ inline">window</span>.<span class="hljs-title function_ inline">removeEventListener</span>(<span class="hljs-string inline">&#x27;resize&#x27;</span>, updateCenter);
    }, []);

    <span class="hljs-comment inline">// ==================== 高效碰撞检测算法 ====================</span>
    <span class="hljs-keyword inline">const</span> detectCollisions = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">(<span class="hljs-params inline"><span class="hljs-attr inline">planets</span>: <span class="hljs-title class_ inline">PlanetData</span>[]</span>) =&gt;</span> {
        <span class="hljs-keyword inline">const</span> collisionThreshold = <span class="hljs-number inline">13</span>;  <span class="hljs-comment inline">// 13度碰撞阈值</span>
        <span class="hljs-keyword inline">let</span> hasChanges = <span class="hljs-literal inline">false</span>;
        <span class="hljs-keyword inline">const</span> updatedPlanets = [...planets];

        <span class="hljs-comment inline">// 双重循环优化：避免重复比较</span>
        <span class="hljs-keyword inline">for</span> (<span class="hljs-keyword inline">let</span> i = <span class="hljs-number inline">0</span>; i &lt; updatedPlanets.<span class="hljs-property inline">length</span>; i++) {
            <span class="hljs-keyword inline">const</span> planet = updatedPlanets[i];
            <span class="hljs-keyword inline">let</span> hasNearbyPlanet = <span class="hljs-literal inline">false</span>;

            <span class="hljs-comment inline">// 只检测同轨道星球</span>
            <span class="hljs-keyword inline">for</span> (<span class="hljs-keyword inline">let</span> j = i + <span class="hljs-number inline">1</span>; j &lt; updatedPlanets.<span class="hljs-property inline">length</span>; j++) {
                <span class="hljs-keyword inline">if</span> (updatedPlanets[j].<span class="hljs-property inline">orbitIndex</span> !== planet.<span class="hljs-property inline">orbitIndex</span>) <span class="hljs-keyword inline">continue</span>;

                <span class="hljs-keyword inline">const</span> otherPlanet = updatedPlanets[j];
                <span class="hljs-keyword inline">const</span> angleDiff = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">abs</span>(otherPlanet.<span class="hljs-property inline">angle</span> - planet.<span class="hljs-property inline">angle</span>);
                <span class="hljs-comment inline">// 处理跨越0°边界的情况</span>
                <span class="hljs-keyword inline">const</span> normalizedAngleDiff = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">min</span>(angleDiff, <span class="hljs-number inline">360</span> - angleDiff);

                <span class="hljs-keyword inline">if</span> (normalizedAngleDiff &lt; collisionThreshold) {
                    hasNearbyPlanet = <span class="hljs-literal inline">true</span>;
                    <span class="hljs-keyword inline">break</span>;
                }
            }

            <span class="hljs-keyword inline">if</span> (hasNearbyPlanet &amp;&amp; !planet.<span class="hljs-property inline">isCollided</span>) {
                <span class="hljs-comment inline">// 首次碰撞：触发效果</span>
                updatedPlanets[i] = {
                    ...planet,
                    <span class="hljs-attr inline">isCollided</span>: <span class="hljs-literal inline">true</span>,
                    <span class="hljs-attr inline">showParticles</span>: <span class="hljs-literal inline">true</span>,
                    <span class="hljs-attr inline">collisionSpeedBoost</span>: <span class="hljs-number inline">4</span> + <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">random</span>() * <span class="hljs-number inline">10</span>  <span class="hljs-comment inline">// 4-14倍随机加速</span>
                };
                hasChanges = <span class="hljs-literal inline">true</span>;

                <span class="hljs-comment inline">// 碰撞加速重置定时器：100ms后恢复</span>
                <span class="hljs-keyword inline">const</span> existingTimeout = collisionTimeoutsRef.<span class="hljs-property inline">current</span>.<span class="hljs-title function_ inline">get</span>(i);
                <span class="hljs-keyword inline">if</span> (existingTimeout) {
                    <span class="hljs-built_in inline">clearTimeout</span>(existingTimeout);
                }

                <span class="hljs-keyword inline">const</span> timeout = <span class="hljs-built_in inline">setTimeout</span>(<span class="hljs-function inline">() =&gt;</span> {
                    <span class="hljs-keyword inline">const</span> currentData = planetsDataRef.<span class="hljs-property inline">current</span>;
                    <span class="hljs-keyword inline">const</span> newData = currentData.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline">(<span class="hljs-params inline">p, idx</span>) =&gt;</span>
                        idx === i ? {...p, <span class="hljs-attr inline">collisionSpeedBoost</span>: <span class="hljs-number inline">1</span>} : p
                    );
                    planetsDataRef.<span class="hljs-property inline">current</span> = newData;
                    <span class="hljs-title function_ inline">setPlanetsData</span>(newData);
                    collisionTimeoutsRef.<span class="hljs-property inline">current</span>.<span class="hljs-title function_ inline">delete</span>(i);
                }, <span class="hljs-number inline">100</span>);

                collisionTimeoutsRef.<span class="hljs-property inline">current</span>.<span class="hljs-title function_ inline">set</span>(i, timeout);

            } <span class="hljs-keyword inline">else</span> <span class="hljs-keyword inline">if</span> (!hasNearbyPlanet &amp;&amp; planet.<span class="hljs-property inline">isCollided</span>) {
                <span class="hljs-comment inline">// 清除碰撞标记</span>
                updatedPlanets[i] = {
                    ...planet,
                    <span class="hljs-attr inline">isCollided</span>: <span class="hljs-literal inline">false</span>
                };
                hasChanges = <span class="hljs-literal inline">true</span>;
            }
        }

        <span class="hljs-keyword inline">return</span> hasChanges ? updatedPlanets : planets;
    }, []);

    <span class="hljs-comment inline">// ==================== 高性能动画循环 ====================</span>
    <span class="hljs-title function_ inline">useEffect</span>(<span class="hljs-function inline">() =&gt;</span> {
        <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">animate</span> = (<span class="hljs-params inline"><span class="hljs-attr inline">currentTime</span>: <span class="hljs-built_in inline">number</span></span>) =&gt; {
            <span class="hljs-keyword inline">if</span> (!lastTimeRef.<span class="hljs-property inline">current</span>) lastTimeRef.<span class="hljs-property inline">current</span> = currentTime;
            <span class="hljs-keyword inline">const</span> deltaTime = currentTime - lastTimeRef.<span class="hljs-property inline">current</span>;
            lastTimeRef.<span class="hljs-property inline">current</span> = currentTime;

            frameCountRef.<span class="hljs-property inline">current</span>++;
            
            <span class="hljs-comment inline">// 帧率控制：每2帧更新一次位置（30fps）</span>
            <span class="hljs-keyword inline">if</span> (frameCountRef.<span class="hljs-property inline">current</span> % <span class="hljs-number inline">2</span> === <span class="hljs-number inline">0</span>) {
                <span class="hljs-keyword inline">const</span> currentData = planetsDataRef.<span class="hljs-property inline">current</span>;
                
                <span class="hljs-comment inline">// 更新星球位置和角度</span>
                <span class="hljs-keyword inline">const</span> updatedPlanets = currentData.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline"><span class="hljs-params inline">planet</span> =&gt;</span> {
                    <span class="hljs-keyword inline">if</span> (planet.<span class="hljs-property inline">isPaused</span>) <span class="hljs-keyword inline">return</span> planet;

                    <span class="hljs-comment inline">// 7种轨道速度：0.15, 0.23, 0.31, 0.39, 0.47, 0.55, 0.63</span>
                    <span class="hljs-keyword inline">const</span> baseSpeed = <span class="hljs-number inline">0.15</span> + planet.<span class="hljs-property inline">orbitIndex</span> * <span class="hljs-number inline">0.08</span>;
                    <span class="hljs-keyword inline">const</span> currentSpeed = baseSpeed * planet.<span class="hljs-property inline">speedMultiplier</span> * planet.<span class="hljs-property inline">collisionSpeedBoost</span>;
                    <span class="hljs-keyword inline">const</span> newAngle = (planet.<span class="hljs-property inline">angle</span> + currentSpeed * deltaTime * <span class="hljs-number inline">0.01</span>) % <span class="hljs-number inline">360</span>;
                    <span class="hljs-keyword inline">const</span> normalizedAngle = newAngle &lt; <span class="hljs-number inline">0</span> ? newAngle + <span class="hljs-number inline">360</span> : newAngle;

                    <span class="hljs-keyword inline">return</span> {
                        ...planet,
                        <span class="hljs-attr inline">angle</span>: normalizedAngle,
                        <span class="hljs-comment inline">// 极坐标转笛卡尔坐标</span>
                        <span class="hljs-attr inline">x</span>: galaxyCenter.<span class="hljs-property inline">x</span> + <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">cos</span>(normalizedAngle * <span class="hljs-title class_ inline">Math</span>.<span class="hljs-property inline">PI</span> / <span class="hljs-number inline">180</span>) * planet.<span class="hljs-property inline">orbitRadius</span>,
                        <span class="hljs-attr inline">y</span>: galaxyCenter.<span class="hljs-property inline">y</span> + <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">sin</span>(normalizedAngle * <span class="hljs-title class_ inline">Math</span>.<span class="hljs-property inline">PI</span> / <span class="hljs-number inline">180</span>) * planet.<span class="hljs-property inline">orbitRadius</span>,
                    };
                });

                <span class="hljs-comment inline">// 每4帧进行一次碰撞检测（15fps）</span>
                <span class="hljs-keyword inline">let</span> finalPlanets = updatedPlanets;
                <span class="hljs-keyword inline">if</span> (frameCountRef.<span class="hljs-property inline">current</span> % <span class="hljs-number inline">4</span> === <span class="hljs-number inline">0</span> || isStirring) {
                    finalPlanets = <span class="hljs-title function_ inline">detectCollisions</span>(updatedPlanets);
                }

                <span class="hljs-comment inline">// 按需更新：只在有实际变化时更新状态</span>
                <span class="hljs-keyword inline">if</span> (finalPlanets !== currentData) {
                    planetsDataRef.<span class="hljs-property inline">current</span> = finalPlanets;
                    <span class="hljs-title function_ inline">setPlanetsData</span>(finalPlanets);
                }
            }

            animationRef.<span class="hljs-property inline">current</span> = <span class="hljs-title function_ inline">requestAnimationFrame</span>(animate);
        };

        animationRef.<span class="hljs-property inline">current</span> = <span class="hljs-title function_ inline">requestAnimationFrame</span>(animate);

        <span class="hljs-keyword inline">return</span> <span class="hljs-function inline">() =&gt;</span> {
            <span class="hljs-keyword inline">if</span> (animationRef.<span class="hljs-property inline">current</span>) {
                <span class="hljs-title function_ inline">cancelAnimationFrame</span>(animationRef.<span class="hljs-property inline">current</span>);
            }
            <span class="hljs-comment inline">// 清理所有碰撞定时器</span>
            collisionTimeoutsRef.<span class="hljs-property inline">current</span>.<span class="hljs-title function_ inline">forEach</span>(<span class="hljs-function inline"><span class="hljs-params inline">timeout</span> =&gt;</span> <span class="hljs-built_in inline">clearTimeout</span>(timeout));
            collisionTimeoutsRef.<span class="hljs-property inline">current</span>.<span class="hljs-title function_ inline">clear</span>();
        };
    }, [galaxyCenter, detectCollisions, isStirring]);

    <span class="hljs-comment inline">// ==================== 交互事件处理器 ====================</span>
    <span class="hljs-keyword inline">const</span> handleMouseEnter = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">(<span class="hljs-params inline"><span class="hljs-attr inline">index</span>: <span class="hljs-built_in inline">number</span></span>) =&gt;</span> {
        <span class="hljs-keyword inline">const</span> currentData = planetsDataRef.<span class="hljs-property inline">current</span>;
        <span class="hljs-keyword inline">const</span> newData = currentData.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline">(<span class="hljs-params inline">planet, i</span>) =&gt;</span>
            i === index ? {...planet, <span class="hljs-attr inline">isPaused</span>: <span class="hljs-literal inline">true</span>, <span class="hljs-attr inline">isHovered</span>: <span class="hljs-literal inline">true</span>} : planet
        );
        planetsDataRef.<span class="hljs-property inline">current</span> = newData;
        <span class="hljs-title function_ inline">setPlanetsData</span>(newData);
    }, []);

    <span class="hljs-keyword inline">const</span> handleMouseLeave = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">(<span class="hljs-params inline"><span class="hljs-attr inline">index</span>: <span class="hljs-built_in inline">number</span></span>) =&gt;</span> {
        <span class="hljs-keyword inline">const</span> currentData = planetsDataRef.<span class="hljs-property inline">current</span>;
        <span class="hljs-keyword inline">const</span> newData = currentData.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline">(<span class="hljs-params inline">planet, i</span>) =&gt;</span>
            i === index ? {...planet, <span class="hljs-attr inline">isPaused</span>: <span class="hljs-literal inline">false</span>, <span class="hljs-attr inline">isHovered</span>: <span class="hljs-literal inline">false</span>} : planet
        );
        planetsDataRef.<span class="hljs-property inline">current</span> = newData;
        <span class="hljs-title function_ inline">setPlanetsData</span>(newData);
    }, []);

    <span class="hljs-keyword inline">const</span> handleParticleComplete = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">(<span class="hljs-params inline"><span class="hljs-attr inline">index</span>: <span class="hljs-built_in inline">number</span></span>) =&gt;</span> {
        <span class="hljs-keyword inline">const</span> currentData = planetsDataRef.<span class="hljs-property inline">current</span>;
        <span class="hljs-keyword inline">const</span> newData = currentData.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline">(<span class="hljs-params inline">planet, i</span>) =&gt;</span>
            i === index ? {...planet, <span class="hljs-attr inline">showParticles</span>: <span class="hljs-literal inline">false</span>} : planet
        );
        planetsDataRef.<span class="hljs-property inline">current</span> = newData;
        <span class="hljs-title function_ inline">setPlanetsData</span>(newData);
    }, []);

    <span class="hljs-comment inline">// ==================== 搅动功能的防抖机制 ====================</span>
    <span class="hljs-keyword inline">const</span> handleStirPlanets = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">() =&gt;</span> {
        <span class="hljs-keyword inline">if</span> (isStirring) <span class="hljs-keyword inline">return</span>; <span class="hljs-comment inline">// 防抖保护</span>
        
        <span class="hljs-title function_ inline">setIsStirring</span>(<span class="hljs-literal inline">true</span>);
        
        <span class="hljs-keyword inline">const</span> currentData = planetsDataRef.<span class="hljs-property inline">current</span>;
        <span class="hljs-keyword inline">const</span> numPlanetsToStir = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">min</span>(currentData.<span class="hljs-property inline">length</span>, <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">floor</span>(currentData.<span class="hljs-property inline">length</span> * <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">random</span>() + <span class="hljs-number inline">1</span>));
        <span class="hljs-keyword inline">const</span> <span class="hljs-attr inline">indicesToStir</span>: <span class="hljs-built_in inline">number</span>[] = [];

        <span class="hljs-comment inline">// 随机选择要搅动的星球（避免重复）</span>
        <span class="hljs-keyword inline">while</span> (indicesToStir.<span class="hljs-property inline">length</span> &lt; numPlanetsToStir) {
            <span class="hljs-keyword inline">const</span> randomIndex = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">floor</span>(<span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">random</span>() * currentData.<span class="hljs-property inline">length</span>);
            <span class="hljs-keyword inline">if</span> (!indicesToStir.<span class="hljs-title function_ inline">includes</span>(randomIndex)) {
                indicesToStir.<span class="hljs-title function_ inline">push</span>(randomIndex);
            }
        }

        <span class="hljs-comment inline">// 批量更新搅动状态</span>
        <span class="hljs-keyword inline">const</span> stirredData = currentData.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline">(<span class="hljs-params inline">planet, index</span>) =&gt;</span>
            indicesToStir.<span class="hljs-title function_ inline">includes</span>(index)
                ? {...planet, <span class="hljs-attr inline">speedMultiplier</span>: <span class="hljs-number inline">4</span> + <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">random</span>() * <span class="hljs-number inline">10</span>}
                : planet
        );

        planetsDataRef.<span class="hljs-property inline">current</span> = stirredData;
        <span class="hljs-title function_ inline">setPlanetsData</span>(stirredData);

        <span class="hljs-comment inline">// 3秒后重置速度</span>
        <span class="hljs-built_in inline">setTimeout</span>(<span class="hljs-function inline">() =&gt;</span> {
            <span class="hljs-keyword inline">const</span> currentData = planetsDataRef.<span class="hljs-property inline">current</span>;
            <span class="hljs-keyword inline">const</span> resetData = currentData.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline">(<span class="hljs-params inline">planet, index</span>) =&gt;</span>
                indicesToStir.<span class="hljs-title function_ inline">includes</span>(index)
                    ? {...planet, <span class="hljs-attr inline">speedMultiplier</span>: <span class="hljs-number inline">1</span>}
                    : planet
            );
            planetsDataRef.<span class="hljs-property inline">current</span> = resetData;
            <span class="hljs-title function_ inline">setPlanetsData</span>(resetData);
            <span class="hljs-title function_ inline">setIsStirring</span>(<span class="hljs-literal inline">false</span>);
        }, <span class="hljs-number inline">3000</span>);
    }, [isStirring]);

    <span class="hljs-comment inline">// ==================== 记忆化星球渲染器 ====================</span>
    <span class="hljs-keyword inline">const</span> memoizedPlanets = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> 
        planetsData.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline">(<span class="hljs-params inline">planetData</span>) =&gt;</span> (
            <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">PlanetRenderer</span>
                <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{</span>`<span class="hljs-attr inline">planet-</span>${<span class="hljs-attr inline">planetData.index</span>}`}
                <span class="hljs-attr inline">planetData</span>=<span class="hljs-string inline">{planetData}</span>
                <span class="hljs-attr inline">galaxyCenter</span>=<span class="hljs-string inline">{galaxyCenter}</span>
                <span class="hljs-attr inline">onHover</span>=<span class="hljs-string inline">{setHoveredSkill}</span>
                <span class="hljs-attr inline">onMouseEnter</span>=<span class="hljs-string inline">{handleMouseEnter}</span>
                <span class="hljs-attr inline">onMouseLeave</span>=<span class="hljs-string inline">{handleMouseLeave}</span>
                <span class="hljs-attr inline">onParticleComplete</span>=<span class="hljs-string inline">{handleParticleComplete}</span>
            /&gt;</span></span>
        )), [planetsData, galaxyCenter, handleMouseEnter, handleMouseLeave, handleParticleComplete]);

    <span class="hljs-comment inline">// ==================== 组件渲染 ====================</span>
    <span class="hljs-keyword inline">return</span> (
        <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
            <span class="hljs-attr inline">initial</span>=<span class="hljs-string inline">{{opacity:</span> <span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">y:</span> <span class="hljs-attr inline">50</span>, <span class="hljs-attr inline">scale:</span> <span class="hljs-attr inline">0.95</span>}}
            <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">{{opacity:</span> <span class="hljs-attr inline">1</span>, <span class="hljs-attr inline">y:</span> <span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">scale:</span> <span class="hljs-attr inline">1</span>}}
            <span class="hljs-attr inline">exit</span>=<span class="hljs-string inline">{{opacity:</span> <span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">y:</span> <span class="hljs-attr inline">50</span>, <span class="hljs-attr inline">scale:</span> <span class="hljs-attr inline">0.95</span>}}
            <span class="hljs-attr inline">transition</span>=<span class="hljs-string inline">{{duration:</span> <span class="hljs-attr inline">0.8</span>, <span class="hljs-attr inline">ease:</span> &quot;<span class="hljs-attr inline">easeOut</span>&quot;}}
            <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;mt-8 relative overflow-hidden&quot;</span>
        &gt;</span>
            {/* 星系内容区域 */}
            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span> <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;relative p-8 md:p-12 min-h-[800px]&quot;</span>&gt;</span>
                {/* 星系头部 */}
                <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span> <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;flex justify-between items-center mb-16 relative z-10&quot;</span>&gt;</span>
                    <span class="hljs-tag inline">&lt;<span class="hljs-name inline">h3</span> <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;text-2xl md:text-3xl font-bold text-white&quot;</span>&gt;</span>
                        {t(&#x27;personal.skillGalaxy&#x27;)}
                    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">h3</span>&gt;</span>
                    <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span> <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;flex gap-4&quot;</span>&gt;</span>
                        {/* 搅动按钮 */}
                        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.button</span>
                            <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{handleStirPlanets}</span>
                            <span class="hljs-attr inline">disabled</span>=<span class="hljs-string inline">{isStirring}</span>
                            <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">{</span>`<span class="hljs-attr inline">px-4</span> <span class="hljs-attr inline">py-2</span> <span class="hljs-attr inline">border</span> <span class="hljs-attr inline">rounded-lg</span> <span class="hljs-attr inline">transition-all</span> <span class="hljs-attr inline">duration-300</span> <span class="hljs-attr inline">hover:scale-105</span> ${
                                <span class="hljs-attr inline">isStirring</span> 
                                    ? &#x27;<span class="hljs-attr inline">bg-purple-500</span>/<span class="hljs-attr inline">10</span> <span class="hljs-attr inline">border-purple-500</span>/<span class="hljs-attr inline">20</span> <span class="hljs-attr inline">text-purple-400</span>/<span class="hljs-attr inline">50</span> <span class="hljs-attr inline">cursor-not-allowed</span>&#x27;
                                    <span class="hljs-attr inline">:</span> &#x27;<span class="hljs-attr inline">bg-purple-500</span>/<span class="hljs-attr inline">20</span> <span class="hljs-attr inline">hover:bg-purple-500</span>/<span class="hljs-attr inline">30</span> <span class="hljs-attr inline">border-purple-500</span>/<span class="hljs-attr inline">40</span> <span class="hljs-attr inline">text-purple-300</span>&#x27;
                            }`}
                            <span class="hljs-attr inline">whileHover</span>=<span class="hljs-string inline">{!isStirring</span> ? {<span class="hljs-attr inline">scale:</span> <span class="hljs-attr inline">1.05</span>} <span class="hljs-attr inline">:</span> {}}
                            <span class="hljs-attr inline">whileTap</span>=<span class="hljs-string inline">{!isStirring</span> ? {<span class="hljs-attr inline">scale:</span> <span class="hljs-attr inline">0.95</span>} <span class="hljs-attr inline">:</span> {}}
                        &gt;</span>
                            {isStirring ? t(&#x27;personal.stirring&#x27;) || &#x27;Stirring...&#x27; : t(&#x27;personal.stirGalaxy&#x27;)}
                        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.button</span>&gt;</span>
                        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span>
                            <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{onCloseAction}</span>
                            <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;px-4 py-2 bg-red-500/20 hover:bg-red-500/30 border border-red-500/40 rounded-lg text-red-300 transition-all duration-300 hover:scale-105&quot;</span>
                        &gt;</span>
                            {t(&#x27;personal.closeResume&#x27;)}
                        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
                    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
                <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>

                {/* 技能星系容器 */}
                <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>
                    <span class="hljs-attr inline">ref</span>=<span class="hljs-string inline">{galaxyRef}</span>
                    <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;relative flex items-center justify-center mb-33&quot;</span>
                    <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{height:</span> &#x27;<span class="hljs-attr inline">700px</span>&#x27;}}
                &gt;</span>
                    {/* 中央核心（太阳）*/}
                    <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
                        <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;absolute z-20 w-24 h-24 rounded-full bg-gradient-to-br from-amber-300 via-yellow-400 to-orange-500 shadow-2xl&quot;</span>
                        <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{</span>
                            <span class="hljs-attr inline">left:</span> <span class="hljs-attr inline">galaxyCenter.x</span> <span class="hljs-attr inline">-</span> <span class="hljs-attr inline">48</span>,
                            <span class="hljs-attr inline">top:</span> <span class="hljs-attr inline">galaxyCenter.y</span> <span class="hljs-attr inline">-</span> <span class="hljs-attr inline">48</span>,
                        }}
                        <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">{{</span>
                            // <span class="hljs-attr inline">呼吸般的光晕变化</span>
                            <span class="hljs-attr inline">boxShadow:</span> [
                                &quot;<span class="hljs-attr inline">0</span> <span class="hljs-attr inline">0</span> <span class="hljs-attr inline">30px</span> <span class="hljs-attr inline">rgba</span>(<span class="hljs-attr inline">255</span>, <span class="hljs-attr inline">193</span>, <span class="hljs-attr inline">7</span>, <span class="hljs-attr inline">0.5</span>)&quot;,
                                &quot;<span class="hljs-attr inline">0</span> <span class="hljs-attr inline">0</span> <span class="hljs-attr inline">50px</span> <span class="hljs-attr inline">rgba</span>(<span class="hljs-attr inline">255</span>, <span class="hljs-attr inline">193</span>, <span class="hljs-attr inline">7</span>, <span class="hljs-attr inline">0.8</span>)&quot;,
                                &quot;<span class="hljs-attr inline">0</span> <span class="hljs-attr inline">0</span> <span class="hljs-attr inline">30px</span> <span class="hljs-attr inline">rgba</span>(<span class="hljs-attr inline">255</span>, <span class="hljs-attr inline">193</span>, <span class="hljs-attr inline">7</span>, <span class="hljs-attr inline">0.5</span>)&quot;
                            ]
                        }}
                        <span class="hljs-attr inline">transition</span>=<span class="hljs-string inline">{{</span>
                            <span class="hljs-attr inline">duration:</span> <span class="hljs-attr inline">3</span>,
                            <span class="hljs-attr inline">repeat:</span> <span class="hljs-attr inline">Infinity</span>,
                            <span class="hljs-attr inline">ease:</span> &quot;<span class="hljs-attr inline">easeInOut</span>&quot;
                        }}
                        <span class="hljs-attr inline">onMouseEnter</span>=<span class="hljs-string inline">{()</span> =&gt;</span> setHoveredSkill({
                            category: &quot;MilkWind&quot;,
                            description: personalDescription
                        })}
                        onMouseLeave={() =&gt; setHoveredSkill(null)}
                    &gt;
                        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>
                            <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;w-full h-full rounded-full flex items-center justify-center text-2xl font-bold text-white select-none&quot;</span>&gt;</span>
                            👨‍💻
                        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
                        {/* 多层光晕效果 */}
                        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>
                            <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;absolute inset-0 rounded-full bg-gradient-to-br from-amber-300/30 to-orange-500/30 animate-pulse -z-10 scale-150&quot;</span>/&gt;</span>
                    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.div</span>&gt;</span>

                    {/* 渲染记忆化星球 */}
                    {memoizedPlanets}
                <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
            <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>

            {/* 信息面板 */}
            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
                <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;absolute bottom-0 left-0 right-0 h-32 p-6 flex items-center justify-center&quot;</span>
                <span class="hljs-attr inline">initial</span>=<span class="hljs-string inline">{{y:</span> <span class="hljs-attr inline">100</span>, <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">0</span>}}
                <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">{{y:</span> <span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">1</span>}}
                <span class="hljs-attr inline">transition</span>=<span class="hljs-string inline">{{delay:</span> <span class="hljs-attr inline">0.5</span>}}
            &gt;</span>
                <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span> <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;text-center max-w-4xl&quot;</span>&gt;</span>
                    <span class="hljs-tag inline">&lt;<span class="hljs-name inline">AnimatePresence</span> <span class="hljs-attr inline">mode</span>=<span class="hljs-string inline">&quot;wait&quot;</span>&gt;</span>
                        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
                            <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{hoveredSkill?.category</span> || &#x27;<span class="hljs-attr inline">default</span>&#x27;}
                            <span class="hljs-attr inline">initial</span>=<span class="hljs-string inline">{{opacity:</span> <span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">y:</span> <span class="hljs-attr inline">20</span>}}
                            <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">{{opacity:</span> <span class="hljs-attr inline">1</span>, <span class="hljs-attr inline">y:</span> <span class="hljs-attr inline">0</span>}}
                            <span class="hljs-attr inline">exit</span>=<span class="hljs-string inline">{{opacity:</span> <span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">y:</span> <span class="hljs-attr inline">-20</span>}}
                            <span class="hljs-attr inline">transition</span>=<span class="hljs-string inline">{{duration:</span> <span class="hljs-attr inline">0.3</span>}}
                        &gt;</span>
                            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">h4</span> <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;text-xl font-bold text-white mb-2&quot;</span>&gt;</span>
                                {hoveredSkill?.category || t(&#x27;personal.fullStackEngineer&#x27;)}
                            <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">h4</span>&gt;</span>
                            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span> <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;text-gray-300 text-sm leading-relaxed&quot;</span>&gt;</span>
                                {hoveredSkill?.description || t(&#x27;personal.galaxyDefaultDescription&#x27;)}
                            <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
                        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.div</span>&gt;</span>
                    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">AnimatePresence</span>&gt;</span>
                <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
            <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.div</span>&gt;</span>
        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.div</span>&gt;</span></span>
    );
}
</code></pre>
            </div>
        
<h3 id="核心算法架构图" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#核心算法架构图" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 核心算法架构图">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            核心算法架构图
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="" data-code="%E5%88%9D%E5%A7%8B%E5%8C%96%E9%98%B6%E6%AE%B5%20%E2%86%92%20%E5%93%8D%E5%BA%94%E5%BC%8F%E5%B8%83%E5%B1%80%20%E2%86%92%20%E5%8A%A8%E7%94%BB%E5%BE%AA%E7%8E%AF%20%E2%86%92%20%E4%BA%A4%E4%BA%92%E5%A4%84%E7%90%86%20%E2%86%92%20%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%0A%E2%86%93%20%20%20%20%20%20%20%20%20%20%20%E2%86%93%20%20%20%20%20%20%20%20%20%20%20%E2%86%93%20%20%20%20%20%20%20%20%20%E2%86%93%20%20%20%20%20%20%20%20%20%E2%86%93%0A%E6%98%9F%E7%90%83%E6%95%B0%E6%8D%AE%E7%94%9F%E6%88%90%20%20%20%E4%B8%AD%E5%BF%83%E5%AE%9A%E4%BD%8D%20%20%20%20%20RAF%E9%A9%B1%E5%8A%A8%20%20%20%E4%BA%8B%E4%BB%B6%E5%9B%9E%E8%B0%83%20%20%20%E7%BB%84%E4%BB%B6%E7%BC%93%E5%AD%98%0A%E2%86%93%20%20%20%20%20%20%20%20%20%20%20%E2%86%93%20%20%20%20%20%20%20%20%20%20%20%E2%86%93%20%20%20%20%20%20%20%20%20%E2%86%93%20%20%20%20%20%20%20%20%20%E2%86%93%0A%E8%BD%A8%E9%81%93%E5%88%86%E9%85%8D%20%20%20%20%20%20%E5%9D%90%E6%A0%87%E8%BD%AC%E6%8D%A2%20%20%20%20%20%E4%BD%8D%E7%BD%AE%E6%9B%B4%E6%96%B0%20%20%20%E7%8A%B6%E6%80%81%E5%90%8C%E6%AD%A5%20%20%20%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%0A%E2%86%93%20%20%20%20%20%20%20%20%20%20%20%E2%86%93%20%20%20%20%20%20%20%20%20%20%20%E2%86%93%20%20%20%20%20%20%20%20%20%E2%86%93%20%20%20%20%20%20%20%20%20%E2%86%93%0A%E8%A7%92%E5%BA%A6%E5%88%86%E6%95%A3%20%20%20%20%20%20%E7%AA%97%E5%8F%A3%E7%9B%91%E5%90%AC%20%20%20%20%20%E7%A2%B0%E6%92%9E%E6%A3%80%E6%B5%8B%20%20%20%E9%98%B2%E6%8A%96%E6%9C%BA%E5%88%B6%20%20%20%E6%89%B9%E9%87%8F%E6%9B%B4%E6%96%B0">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">code</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code>初始化阶段 → 响应式布局 → 动画循环 → 交互处理 → 性能优化
<span class="hljs-code inline">    ↓           ↓           ↓         ↓         ↓
星球数据生成   中心定位     RAF驱动   事件回调   组件缓存
    ↓           ↓           ↓         ↓         ↓
轨道分配      坐标转换     位置更新   状态同步   内存管理
    ↓           ↓           ↓         ↓         ↓
角度分散      窗口监听     碰撞检测   防抖机制   批量更新
</span></code></pre>
            </div>
        
<h3 id="关键技术要点总结" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#关键技术要点总结" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 关键技术要点总结">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            关键技术要点总结
        </h3>
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">1. 双重状态管理架构</strong></p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%2F%2F%20%E5%BD%B1%E5%AD%90%E7%8A%B6%E6%80%81%EF%BC%9A%E9%AB%98%E9%A2%91%E6%9B%B4%E6%96%B0%EF%BC%8C%E9%81%BF%E5%85%8DReact%E9%87%8D%E6%B8%B2%E6%9F%93%0Aconst%20planetsDataRef%20%3D%20useRefPlanetData%5B%5D%3E(%5B%5D)%3B%0A%2F%2F%20React%E7%8A%B6%E6%80%81%EF%BC%9AUI%E5%90%8C%E6%AD%A5%EF%BC%8C%E6%8C%89%E9%9C%80%E6%9B%B4%E6%96%B0%0Aconst%20%5BplanetsData%2C%20setPlanetsData%5D%20%3D%20useStatePlanetData%5B%5D%3E(%5B%5D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-comment inline">// 影子状态：高频更新，避免React重渲染</span>
<span class="hljs-keyword inline">const</span> planetsDataRef = useRef&lt;<span class="hljs-title class_ inline">PlanetData</span>[]&gt;([]);
<span class="hljs-comment inline">// React状态：UI同步，按需更新</span>
<span class="hljs-keyword inline">const</span> [planetsData, setPlanetsData] = useState&lt;<span class="hljs-title class_ inline">PlanetData</span>[]&gt;([]);
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">2. 帧率控制与性能优化</strong></p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%2F%2F%20%E4%BD%8D%E7%BD%AE%E6%9B%B4%E6%96%B0%EF%BC%9A%E6%AF%8F2%E5%B8%A7%E6%89%A7%E8%A1%8C%EF%BC%8830fps%EF%BC%89%0Aif%20(frameCountRef.current%20%25%202%20%3D%3D%3D%200)%20%7B%20%2F*%20%E6%9B%B4%E6%96%B0%E4%BD%8D%E7%BD%AE%20*%2F%20%7D%0A%2F%2F%20%E7%A2%B0%E6%92%9E%E6%A3%80%E6%B5%8B%EF%BC%9A%E6%AF%8F4%E5%B8%A7%E6%89%A7%E8%A1%8C%EF%BC%8815fps%EF%BC%89%0Aif%20(frameCountRef.current%20%25%204%20%3D%3D%3D%200%20%7C%7C%20isStirring)%20%7B%20%2F*%20%E7%A2%B0%E6%92%9E%E6%A3%80%E6%B5%8B%20*%2F%20%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-comment inline">// 位置更新：每2帧执行（30fps）</span>
<span class="hljs-keyword inline">if</span> (frameCountRef.<span class="hljs-property inline">current</span> % <span class="hljs-number inline">2</span> === <span class="hljs-number inline">0</span>) { <span class="hljs-comment inline">/* 更新位置 */</span> }
<span class="hljs-comment inline">// 碰撞检测：每4帧执行（15fps）</span>
<span class="hljs-keyword inline">if</span> (frameCountRef.<span class="hljs-property inline">current</span> % <span class="hljs-number inline">4</span> === <span class="hljs-number inline">0</span> || isStirring) { <span class="hljs-comment inline">/* 碰撞检测 */</span> }
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">3. 数学模型：极坐标转换</strong></p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%2F%2F%20%E6%A0%B8%E5%BF%83%E8%BD%AC%E6%8D%A2%E5%85%AC%E5%BC%8F%0Ax%20%3D%20galaxyCenter.x%20%2B%20Math.cos(angle%20*%20Math.PI%20%2F%20180)%20*%20orbitRadius%3B%0Ay%20%3D%20galaxyCenter.y%20%2B%20Math.sin(angle%20*%20Math.PI%20%2F%20180)%20*%20orbitRadius%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-comment inline">// 核心转换公式</span>
x = galaxyCenter.<span class="hljs-property inline">x</span> + <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">cos</span>(angle * <span class="hljs-title class_ inline">Math</span>.<span class="hljs-property inline">PI</span> / <span class="hljs-number inline">180</span>) * orbitRadius;
y = galaxyCenter.<span class="hljs-property inline">y</span> + <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">sin</span>(angle * <span class="hljs-title class_ inline">Math</span>.<span class="hljs-property inline">PI</span> / <span class="hljs-number inline">180</span>) * orbitRadius;
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">4. 碰撞检测优化算法</strong></p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%2F%2F%20%E5%8F%8C%E9%87%8D%E5%BE%AA%E7%8E%AF%E4%BC%98%E5%8C%96%EF%BC%9A%E9%81%BF%E5%85%8D%E9%87%8D%E5%A4%8D%E6%AF%94%E8%BE%83%20(i%2Cj)%20%E5%92%8C%20(j%2Ci)%0Afor%20(let%20i%20%3D%200%3B%20i%20length%3B%20i%2B%2B)%20%7B%0Afor%20(let%20j%20%3D%20i%20%2B%201%3B%20j%20length%3B%20j%2B%2B)%20%7B%0A%2F%2F%20%E5%90%8C%E8%BD%A8%E9%81%93%E9%A2%84%E8%BF%87%E6%BB%A4%20%2B%20%E8%A7%92%E5%BA%A6%E5%B7%AE%E8%AE%A1%E7%AE%97%0A%7D%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-comment inline">// 双重循环优化：避免重复比较 (i,j) 和 (j,i)</span>
<span class="hljs-keyword inline">for</span> (<span class="hljs-keyword inline">let</span> i = <span class="hljs-number inline">0</span>; i &lt; planets.<span class="hljs-property inline">length</span>; i++) {
    <span class="hljs-keyword inline">for</span> (<span class="hljs-keyword inline">let</span> j = i + <span class="hljs-number inline">1</span>; j &lt; planets.<span class="hljs-property inline">length</span>; j++) {
        <span class="hljs-comment inline">// 同轨道预过滤 + 角度差计算</span>
    }
}
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">5. 多层次视觉状态系统</strong></p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%2F%2F%20%E6%9D%A1%E4%BB%B6%E6%A0%B7%E5%BC%8F%EF%BC%9A%E6%82%AC%E5%81%9C%E3%80%81%E6%90%85%E5%8A%A8%E3%80%81%E7%A2%B0%E6%92%9E%E3%80%81%E5%8A%A0%E9%80%9F%E5%9B%9B%E7%A7%8D%E7%8A%B6%E6%80%81%0A%24%7BisHovered%20%3F%20'bg-primary%2F30'%20%3A%20''%7D%0A%24%7BspeedMultiplier%20%3E%201%20%3F%20'bg-purple-500%2F30'%20%3A%20''%7D%0A%24%7BisCollided%20%3F%20'bg-red-500%2F30'%20%3A%20''%7D%0A%24%7BcollisionSpeedBoost%20%3E%201%20%3F%20'bg-yellow-500%2F30'%20%3A%20''%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-comment inline">// 条件样式：悬停、搅动、碰撞、加速四种状态</span>
${isHovered ? <span class="hljs-string inline">&#x27;bg-primary/30&#x27;</span> : <span class="hljs-string inline">&#x27;&#x27;</span>}
${speedMultiplier &gt; <span class="hljs-number inline">1</span> ? <span class="hljs-string inline">&#x27;bg-purple-500/30&#x27;</span> : <span class="hljs-string inline">&#x27;&#x27;</span>}
${isCollided ? <span class="hljs-string inline">&#x27;bg-red-500/30&#x27;</span> : <span class="hljs-string inline">&#x27;&#x27;</span>}
${collisionSpeedBoost &gt; <span class="hljs-number inline">1</span> ? <span class="hljs-string inline">&#x27;bg-yellow-500/30&#x27;</span> : <span class="hljs-string inline">&#x27;&#x27;</span>}
</code></pre>
            </div>
        
<h2 id="写在最后" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#写在最后" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 写在最后">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            写在最后
        </h2>
<p class="text-base leading-7 mb-4 text-foreground">技能星系可以说是我迄今以来实现过的，最复杂且考虑项最多的动态效果了，尤其是性能优化部分。在该效果实际优化前，频繁的重渲染会导致</p>
<p class="text-base leading-7 mb-4 text-foreground"><em class="italic text-foreground">愿你的代码如星辰般闪耀，如星系般和谐运转。</em> ✨</p>
d:["$","$L1d",null,{"htmlContent":"$1e","frontMatter":{"title":"技能星系：当你盘坐在内心的星海之上","description":"详细解析「技能星系」功能所包含的各部分结构及其中原理","date":"2025-06-22","author":"MilkWind","tags":["交互设计"],"references":{}},"readingTime":"48 min read","category":"personal-website","tocItems":[{"id":"技能星系：从概念到实现","text":"技能星系：从概念到实现","level":1},{"id":"圆周运动的数学基础","text":"圆周运动的数学基础","level":2},{"id":"极坐标系统的转换","text":"极坐标系统的转换","level":3},{"id":"简单示例：让一个点转起来","text":"简单示例：让一个点转起来","level":3},{"id":"多层轨道系统的实现策略","text":"多层轨道系统的实现策略","level":2},{"id":"轨道数是如何指定的？而星球又是如何平均分配到这些轨道上的？","text":"轨道数是如何指定的？而星球又是如何平均分配到这些轨道上的？","level":3},{"id":"轨道半径的计算","text":"轨道半径的计算","level":3},{"id":"避免星球在一开始就挤在一起","text":"避免星球在一开始就挤在一起","level":3},{"id":"轨道的视觉实现","text":"轨道的视觉实现","level":3},{"id":"z-index与渲染层次控制","text":"Z-index与渲染层次控制","level":2},{"id":"动画循环实现","text":"动画循环实现","level":2},{"id":"为什么选择requestanimationframe？","text":"为什么选择requestAnimationFrame？","level":3},{"id":"动画循环核心实现","text":"动画循环核心实现","level":3},{"id":"控制星球初始公转速度的001系数","text":"控制星球初始公转速度的0.01系数","level":3},{"id":"动画生命周期的管理","text":"动画生命周期的管理","level":3},{"id":"仿真天体运行的速度差异","text":"仿真天体运行的速度差异","level":2},{"id":"交互反馈","text":"交互反馈","level":2},{"id":"智能暂停机制","text":"智能暂停机制","level":3},{"id":"多层次状态样式系统","text":"多层次状态样式系统","level":3},{"id":"信息面板的动态更新","text":"信息面板的动态更新","level":3},{"id":"动态交互的随机化实现","text":"动态交互的随机化实现","level":2},{"id":"随机选择算法","text":"随机选择算法","level":3},{"id":"避免重复选择","text":"避免重复选择","level":3},{"id":"速度的增加算法","text":"速度的增加算法","level":3},{"id":"恢复机制","text":"恢复机制","level":3},{"id":"高速状态的视觉提示","text":"高速状态的视觉提示","level":3},{"id":"中心天体的动态光效设计","text":"中心天体的动态光效设计","level":2},{"id":"呼吸般的光晕变化","text":"呼吸般的光晕变化","level":3},{"id":"多层光晕","text":"多层光晕","level":3},{"id":"动态布局的中心定位系统","text":"动态布局的中心定位系统","level":2},{"id":"中心计算","text":"中心计算","level":3},{"id":"响应式监听","text":"响应式监听","level":3},{"id":"默认值的保险策略","text":"默认值的保险策略","level":3},{"id":"getboundingclientrect-vs-offsetwidth","text":"getBoundingClientRect vs offsetWidth","level":3},{"id":"星球碰撞系统","text":"星球碰撞系统","level":2},{"id":"碰撞检测的数学原理","text":"碰撞检测的数学原理","level":3},{"id":"碰撞阈值","text":"碰撞阈值","level":3},{"id":"同轨道碰撞原则","text":"同轨道碰撞原则","level":3},{"id":"碰撞生命周期","text":"碰撞生命周期","level":3},{"id":"粒子效果","text":"粒子效果","level":3},{"id":"速度爆发","text":"速度爆发","level":3},{"id":"视觉状态的层次化设计","text":"视觉状态的层次化设计","level":3},{"id":"高性能动画架构设计","text":"高性能动画架构设计","level":2},{"id":"智能帧率控制策略","text":"智能帧率控制策略","level":3},{"id":"双重状态管理模式","text":"双重状态管理模式","level":3},{"id":"组件记忆化架构","text":"组件记忆化架构","level":3},{"id":"高效的碰撞检测算法","text":"高效的碰撞检测算法","level":3},{"id":"高效的粒子效果系统","text":"高效的粒子效果系统","level":3},{"id":"搅动功能的防抖机制","text":"搅动功能的防抖机制","level":3},{"id":"实现回顾","text":"实现回顾","level":2},{"id":"技术要点总结","text":"技术要点总结","level":3},{"id":"设计模式的可复用性","text":"设计模式的可复用性","level":3},{"id":"完整源码全解析","text":"完整源码全解析","level":2},{"id":"核心算法架构图","text":"核心算法架构图","level":3},{"id":"关键技术要点总结","text":"关键技术要点总结","level":3},{"id":"写在最后","text":"写在最后","level":2}],"translations":{"common":{"welcome":"欢迎","loading":"加载中...","error":"出现了一些问题","retry":"重试","theme":"主题","language":"语言","light":"浅色","dark":"深色"},"navigation":{"home":"首页","personal":"个人","works":"作品","contributions":"贡献","documents":"文档","about":"关于","contact":"联系"},"personal":{"technicalSkills":"技术技能","email":"邮箱","github":"代码仓库","resume":"简历","codeRepository":"代码仓库","loadingPersonalInfo":"加载个人信息中...","loadingResume":"加载简历中...","closeResume":"关闭简历","emailCopied":"邮箱已复制到剪贴板！","galaxyDefaultDescription":"精通全栈开发技术，具备跨平台架构能力，擅长AI技术整合与高性能系统优化","skillGalaxy":"技能星系","stirGalaxy":"搅动星系","stirring":"搅动中...","fullStackEngineer":"MilkWind - 全栈工程师","professionalProfile":"关于我"},"documents":{"technicalDocuments":"技术文档","description":"基本原理、代码拆分以及一些碎碎念。","articles":"文章","categories":"分类","allCategories":"所有分类","noArticlesFound":"未找到文章","noArticlesAvailable":"中文暂无文章。","noArticlesInCategory":"该分类下未找到文章。","readMore":"阅读更多","loadingDocuments":"加载文档中...","backToDocuments":"← 返回文档","documentNotFound":"文档未找到","documentNotFoundDescription":"请求的文档无法找到。","technicalInsights":"技术拆解","untitledDocument":"无标题文档","byAuthor":"作者：","search":"搜索文章...","searchByTags":"按标签筛选","searching":"搜索中...","noSearchResults":"没有找到符合搜索条件的文章","clearSearch":"清除搜索","selectedTags":"已选标签","allTags":"所有标签","searchInTitle":"在标题、描述和内容中搜索","enterImmersiveMode":"沉浸阅读","exitImmersiveMode":"退出沉浸模式","immersiveReading":"沉浸阅读模式","exploreContent":"按分类探索内容","browseBy":"浏览方式","exploreAll":"所有内容汇总","categoryDescription":"该分类下的文章","totalArticles":"文章","totalCategories":"分类","foundArticles":"找到文章","categoriesWithResults":"有结果的分类"},"works":{"workCases":"作品案例","projects":"作品集","loadingProjects":"加载项目中...","grid":"网格","stack":"堆叠","of":"共","workCasesPageTitle":"作品案例页面","pageWorkingCorrectly":"此页面运行正常！路由配置正确。","try3DVersion":"尝试3D版本","dragToScroll":"拖拽滚动","dragToChange":"拖拽切换","swipeCards":"切换卡片","keyboardNav":"键盘导航"},"contributions":{"contributionCases":"开源项目","contributions":"贡献","loadingContributions":"加载贡献中...","grid":"网格","stack":"堆叠","of":"共","contributionCasesPageTitle":"贡献案例页面","pageWorkingCorrectly":"此页面运行正常！路由配置正确。","try3DVersion":"尝试3D版本","dragToScroll":"拖拽滚动","dragToChange":"拖拽切换","swipeCards":"切换卡片","keyboardNav":"键盘导航"},"contribution":{"contributionPreview":"贡献预览","accessible":"可访问","code":"代码","maintenance":"维护","enhancement":"增强","documentation":"文档","community":"社区","moreItems":"更多","technicalDetails":"技术详情","technologies":"技术栈：","contributionDetail":"贡献详情","description":"描述：","seeDetails":"查看详情","github":"代码仓库","viewContribution":"查看贡献","viewCode":"查看代码"},"project":{"projectPreview":"项目预览","accessible":"可访问","tool":"工具","plugin":"插件","toy":"小玩意","moreItems":"更多","technicalDetails":"技术详情","technologies":"技术栈：","description":"描述：","seeDetails":"查看详情","github":"GitHub","gitee":"Gitee","viewLiveDemo":"查看演示","viewCode":"查看代码","access":"访问","videos":"视频","watchVideo":"观看视频","hasVideo":"有视频"},"codeblock":{"copy":"复制","copySuccess":"代码已复制到剪贴板！","copyError":"复制代码失败","copyTooltip":"复制代码"},"toc":{"contents":"目录","autoScroll":"自动滚动到章节","collapse":"折叠","expand":"展开"},"loading":{"loading":"加载中","preparingExperience":"准备体验中"}},"lang":"zh","theme":"light"}]
12:null
18:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
11:null
1c:{"metadata":[["$","title","0",{"children":"技能星系：当你盘坐在内心的星海之上 | Interactive Portfolio"}],["$","meta","1",{"name":"description","content":"详细解析「技能星系」功能所包含的各部分结构及其中原理"}],["$","meta","2",{"name":"author","content":"Developer"}],["$","meta","3",{"name":"keywords","content":"portfolio,3D,interactive,web development,Three.js,Next.js"}],["$","meta","4",{"property":"og:title","content":"技能星系：当你盘坐在内心的星海之上 | Interactive Portfolio"}],["$","meta","5",{"property":"og:description","content":"详细解析「技能星系」功能所包含的各部分结构及其中原理"}],["$","meta","6",{"property":"og:type","content":"article"}],["$","meta","7",{"property":"article:published_time","content":"2025-06-22"}],["$","meta","8",{"property":"article:tag","content":"交互设计"}],["$","meta","9",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","10",{"name":"twitter:title","content":"技能星系：当你盘坐在内心的星海之上 | Interactive Portfolio"}],["$","meta","11",{"name":"twitter:description","content":"详细解析「技能星系」功能所包含的各部分结构及其中原理"}],["$","link","12",{"rel":"icon","href":"/MilkWind-Website/favicon.ico","type":"image/x-icon","sizes":"32x32"}]],"error":null,"digest":"$undefined"}
14:{"metadata":"$1c:metadata","error":null,"digest":"$undefined"}
