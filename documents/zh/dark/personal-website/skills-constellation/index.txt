1:"$Sreact.fragment"
2:I[38735,["46","static/chunks/46-268e24d727b280ef.js","7177","static/chunks/app/layout-af4a6e723c0ff668.js"],"default"]
3:I[19945,["46","static/chunks/46-268e24d727b280ef.js","7177","static/chunks/app/layout-af4a6e723c0ff668.js"],"default"]
4:I[65337,["46","static/chunks/46-268e24d727b280ef.js","7177","static/chunks/app/layout-af4a6e723c0ff668.js"],"default"]
5:I[96190,["46","static/chunks/46-268e24d727b280ef.js","7177","static/chunks/app/layout-af4a6e723c0ff668.js"],"ClientProviders"]
6:I[87555,[],""]
7:I[51901,["8039","static/chunks/app/error-dda32be1d095a86c.js"],"default"]
8:I[31295,[],""]
9:I[6874,["6874","static/chunks/6874-fbe9a08eb79b991c.js","4345","static/chunks/app/not-found-9ff98b2ccf24cac7.js"],""]
a:I[94970,[],"ClientSegmentRoot"]
b:I[44065,["206","static/chunks/206-4f4cbf4d7156f437.js","3092","static/chunks/app/documents/layout-28408791defde09e.js"],"default"]
e:I[59665,[],"MetadataBoundary"]
10:I[59665,[],"OutletBoundary"]
13:I[74911,[],"AsyncMetadataOutlet"]
15:I[39460,["2415","static/chunks/2415-689c103fb3d2c28d.js","8610","static/chunks/8610-7bd3f91f3cf2a4d6.js","5650","static/chunks/app/documents/loading-1fa3f98b6e5a8e78.js"],"default"]
16:I[88610,["2415","static/chunks/2415-689c103fb3d2c28d.js","8610","static/chunks/8610-7bd3f91f3cf2a4d6.js","4209","static/chunks/app/loading-68f227fb49b3ac8c.js"],"default"]
17:I[59665,[],"ViewportBoundary"]
19:I[26614,[],""]
:HL["/MilkWind-Website/_next/static/css/f034c804622acb16.css","style"]
:HL["/MilkWind-Website/_next/static/css/276b387d8ca46690.css","style"]
:HL["/MilkWind-Website/_next/static/css/5eacd01f773eed7f.css","style"]
0:{"P":null,"b":"ZB-xVo91GcWurycYUaga2","p":"/MilkWind-Website","c":["","documents","zh","dark","personal-website","skills-constellation",""],"i":false,"f":[[["",{"children":["documents",{"children":[["slug","zh/dark/personal-website/skills-constellation","c"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/MilkWind-Website/_next/static/css/f034c804622acb16.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/MilkWind-Website/_next/static/css/276b387d8ca46690.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en","suppressHydrationWarning":true,"children":["$","body",null,{"className":"__variable_9b7fb1 __variable_ca2a15 __variable_591dcc font-sans antialiased min-h-screen bg-background text-foreground","suppressHydrationWarning":true,"children":[["$","$L2",null,{}],["$","$L3",null,{}],["$","$L4",null,{}],["$","$L5",null,{"children":["$","$L6",null,{"parallelRouterKey":"children","error":"$7","errorStyles":[],"errorScripts":[],"template":["$","$L8",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","div",null,{"className":"z-10 relative min-h-screen flex items-center justify-center bg-background p-8","children":["$","div",null,{"className":"text-center max-w-md","children":[["$","div",null,{"className":"text-8xl font-bold text-primary mb-4","children":"404"}],["$","h2",null,{"className":"text-2xl font-bold text-foreground mb-4","children":"Page Not Found"}],["$","p",null,{"className":"text-foreground/70 mb-8","children":"The page you're looking for doesn't exist or has been moved to a different location."}],["$","div",null,{"className":"flex flex-col sm:flex-row gap-4 justify-center","children":[["$","$L9",null,{"href":"/","className":"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/80 transition-colors","children":"Go Home"}],["$","$L9",null,{"href":"/works","className":"px-6 py-2 border border-primary text-primary rounded-lg hover:bg-primary/10 transition-colors","children":"View Works"}]]}],["$","div",null,{"className":"absolute inset-0 overflow-hidden pointer-events-none -z-10","children":[["$","div",null,{"className":"absolute top-1/4 left-1/4 w-2 h-2 bg-primary/20 rounded-full animate-float"}],["$","div",null,{"className":"absolute top-3/4 right-1/4 w-3 h-3 bg-accent/20 rounded-full animate-float","style":{"animationDelay":"1s"}}],["$","div",null,{"className":"absolute bottom-1/4 left-1/3 w-1 h-1 bg-secondary/20 rounded-full animate-float","style":{"animationDelay":"2s"}}]]}]]}]}],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]]}]}]]}],{"children":["documents",["$","$1","c",{"children":[null,["$","$La",null,{"Component":"$b","slots":{"children":["$","$L6",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L8",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]},"params":{},"promise":"$@c"}]]}],{"children":[["slug","zh/dark/personal-website/skills-constellation","c"],["$","$1","c",{"children":[null,["$","$L6",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L8",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$Ld",["$","$Le",null,{"children":"$Lf"}],[["$","link","0",{"rel":"stylesheet","href":"/MilkWind-Website/_next/static/css/5eacd01f773eed7f.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","$L10",null,{"children":["$L11","$L12",["$","$L13",null,{"promise":"$@14"}]]}]]}],{},null,false]},null,false]},[["$","$L15","l",{}],[],[]],false]},[["$","$L16","l",{}],[],[]],false],["$","$1","h",{"children":[null,["$","$1","-VwOGsSzlbXOTco-02alb",{"children":[["$","$L17",null,{"children":"$L18"}],null]}],null]}],false]],"m":"$undefined","G":["$19","$undefined"],"s":false,"S":true}
1a:"$Sreact.suspense"
1b:I[74911,[],"AsyncMetadata"]
c:{}
f:["$","$1a",null,{"fallback":null,"children":["$","$L1b",null,{"promise":"$@1c"}]}]
1d:I[57340,["5584","static/chunks/b498d07c-095637f0f10883c6.js","2415","static/chunks/2415-689c103fb3d2c28d.js","6874","static/chunks/6874-fbe9a08eb79b991c.js","9554","static/chunks/9554-b714f9de28e85d30.js","1873","static/chunks/app/documents/%5B...slug%5D/page-8f3efa7e6c6c5377.js"],"DocumentPageClient"]
1e:T4216e,<h1 id="技能星座：每个人都是自己的宇宙" class="group relative text-4xl font-bold mt-8 mb-4 text-foreground leading-tight">
            <a href="#技能星座：每个人都是自己的宇宙" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 技能星座：每个人都是自己的宇宙">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            技能星座：每个人都是自己的宇宙
        </h1>
<p class="text-base leading-7 mb-4 text-foreground">宇宙闪烁之…走错地儿了，不好意思。</p>
<p class="text-base leading-7 mb-4 text-foreground">咳咳，回归正题，本篇会详细解析技能星座所用到的动态布局、概率算法、SVG连线和复杂动画的每一处设计细节，期待能给你带来些许灵感。</p>
<h2 id="双层结构设计" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#双层结构设计" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 双层结构设计">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            双层结构设计
        </h2>
<p class="text-base leading-7 mb-4 text-foreground">div战神的匠心力作…好吧，只是为标题和星座功能各分配了一个承载容器。</p>
<h3 id="容器层设计" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#容器层设计" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 容器层设计">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            容器层设计
        </h3>
<p class="text-base leading-7 mb-4 text-foreground">组件的最外层是一个双容器系统。</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="const%20containerRef%20%3D%20useRefHTMLDivElement%3E(null)%3B%0Aconst%20boxRef%20%3D%20useRefHTMLDivElement%3E(null)%3B%0Aconst%20svgRef%20%3D%20useRefSVGSVGElement%3E(null)%3B%0Aconst%20%5BcontainerSize%2C%20setContainerSize%5D%20%3D%20useStatePosition%3E(%7Bx%3A%20320%2C%20y%3A%20320%7D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">const</span> containerRef = useRef&lt;<span class="hljs-title class_ inline">HTMLDivElement</span>&gt;(<span class="hljs-literal inline">null</span>);
<span class="hljs-keyword inline">const</span> boxRef = useRef&lt;<span class="hljs-title class_ inline">HTMLDivElement</span>&gt;(<span class="hljs-literal inline">null</span>);
<span class="hljs-keyword inline">const</span> svgRef = useRef&lt;<span class="hljs-title class_ inline">SVGSVGElement</span>&gt;(<span class="hljs-literal inline">null</span>);
<span class="hljs-keyword inline">const</span> [containerSize, setContainerSize] = useState&lt;<span class="hljs-title class_ inline">Position</span>&gt;({<span class="hljs-attr inline">x</span>: <span class="hljs-number inline">320</span>, <span class="hljs-attr inline">y</span>: <span class="hljs-number inline">320</span>});
</code></pre>
            </div>
        
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">boxRef</strong>: 负责整个组件的外层包装，主要用于标题文字效果的定位计算</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">containerRef</strong>: 负责星座区域的布局容器，专门处理气泡的位置计算和响应式变化</li>
</ul>
<p class="text-base leading-7 mb-4 text-foreground">这种分离设计的作用在于：当我需要计算文字效果时，我只关心 <code>boxRef</code>；当我需要重新布局气泡时，我只关心 <code>containerRef</code>。</p>
<h3 id="svg连接线条层" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#svg连接线条层" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to SVG连接线条层">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            SVG连接线条层
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%7B%2F*%20Connecting%20Lines%20*%2F%7D%0A%22absolute%20inset-0%20w-full%20h-full%20pointer-events-none%22%2F%3E">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript">{<span class="hljs-comment inline">/* Connecting Lines */</span>}
&lt;svg ref={svgRef} className=<span class="hljs-string inline">&quot;absolute inset-0 w-full h-full pointer-events-none&quot;</span>/&gt;
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">为什么连接线需要独立的 SVG 层</strong>？</p>
<ol class="list-decimal list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">渲染性能</strong>: SVG 是矢量图形，适合绘制动态线条，GPU 友好</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">层级管理</strong>: <code>pointer-events-none</code> 确保不干扰气泡的点击事件</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">坐标系统</strong>: SVG 有自己的坐标系统，便于处理百分比定位</li>
</ol>
<h3 id="坐标系统管理" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#坐标系统管理" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 坐标系统管理">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            坐标系统管理
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="const%20%5BcontainerSize%2C%20setContainerSize%5D%20%3D%20useStatePosition%3E(%7Bx%3A%20320%2C%20y%3A%20320%7D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">const</span> [containerSize, setContainerSize] = useState&lt;<span class="hljs-title class_ inline">Position</span>&gt;({<span class="hljs-attr inline">x</span>: <span class="hljs-number inline">320</span>, <span class="hljs-attr inline">y</span>: <span class="hljs-number inline">320</span>});
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><code>containerSize</code> 作用：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">像素坐标 → 百分比坐标</strong>: 用于 SVG 线条的定位</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">响应式计算</strong>: 当容器尺寸变化时，所有元素需要重新计算位置</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">边界约束</strong>: 确保所有气泡都在可视范围内</li>
</ul>
<h2 id="气泡组件的生命周期管理" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#气泡组件的生命周期管理" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 气泡组件的生命周期管理">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            气泡组件的生命周期管理
        </h2>
<p class="text-base leading-7 mb-4 text-foreground">每个技能气泡都是一个独立的个体，有着自己的生命周期和行为模式。</p>
<h3 id="skillbubble-组件解析" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#skillbubble-组件解析" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to SkillBubble 组件解析">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            SkillBubble 组件解析
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="const%20SkillBubble%20%3D%20React.memo((%7B%0Askill%2C%0Aindex%2C%0Asize%2C%0AcolorClass%2C%0AelementRef%2C%0AinitialRotation%2C%0AborderRadius%0A%7D%3A%20%7B%0Askill%3A%20string%3B%0Aindex%3A%20number%3B%0Asize%3A%20number%3B%0AcolorClass%3A%20string%3B%0AelementRef%3A%20React.RefObjectnull%3E%3B%0AinitialRotation%3A%20number%3B%0AborderRadius%3A%20string%3B%0A%7D)%20%3D%3E%20%7B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">const</span> <span class="hljs-title class_ inline">SkillBubble</span> = <span class="hljs-title class_ inline">React</span>.<span class="hljs-title function_ inline">memo</span>(<span class="hljs-function inline">(<span class="hljs-params inline">{
    skill,
    index,
    size,
    colorClass,
    elementRef,
    initialRotation,
    borderRadius
}: {
    skill: <span class="hljs-built_in inline">string</span>;
    index: <span class="hljs-built_in inline">number</span>;
    size: <span class="hljs-built_in inline">number</span>;
    colorClass: <span class="hljs-built_in inline">string</span>;
    elementRef: React.RefObject&lt;HTMLDivElement | <span class="hljs-literal inline">null</span>&gt;;
    initialRotation: <span class="hljs-built_in inline">number</span>;
    borderRadius: <span class="hljs-built_in inline">string</span>;
}</span>) =&gt;</span> {
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">React.memo 的性能优化意义</strong>：</p>
<p class="text-base leading-7 mb-4 text-foreground">在一个包含多个气泡的系统中，任何一个气泡的重新渲染都可能触发其他气泡的不必要更新。<code>React.memo</code> 确保只有当 props 真正发生变化时，气泡才会重新渲染。</p>
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Props 参数解释</strong>：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">skill</strong>: 显示的技能文本</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">index</strong>: 用于计算动画延迟和各种差异化效果</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">size</strong>: 气泡大小，统一为75px但可扩展</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">colorClass</strong>: 预定义的渐变颜色类</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">elementRef</strong>: DOM 引用，用于位置操作</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">initialRotation</strong>: 初始旋转角度，营造自然感</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">borderRadius</strong>: 边框圆角样式，增加形状多样性</li>
</ul>
<h3 id="初始化动画序列：渐进式入场" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#初始化动画序列：渐进式入场" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 初始化动画序列：渐进式入场">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            初始化动画序列：渐进式入场
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="initial%3D%7B%7B%0Aopacity%3A%200%2C%0Ascale%3A%200%2C%0Arotate%3A%20initialRotation%2C%0A%7D%7D%0Aanimate%3D%7B%7B%0Aopacity%3A%201%2C%0Ascale%3A%201%2C%0Arotate%3A%20initialRotation%2C%0Atransition%3A%20%7B%0Aduration%3A%200.5%2C%0Adelay%3A%201%20%2B%20(index%20*%200.15)%2C%0A%7D%2C%0A%7D%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript">initial={{
    <span class="hljs-attr inline">opacity</span>: <span class="hljs-number inline">0</span>,
    <span class="hljs-attr inline">scale</span>: <span class="hljs-number inline">0</span>,
    <span class="hljs-attr inline">rotate</span>: initialRotation,
}}
animate={{
    <span class="hljs-attr inline">opacity</span>: <span class="hljs-number inline">1</span>,
    <span class="hljs-attr inline">scale</span>: <span class="hljs-number inline">1</span>,
    <span class="hljs-attr inline">rotate</span>: initialRotation,
    <span class="hljs-attr inline">transition</span>: {
        <span class="hljs-attr inline">duration</span>: <span class="hljs-number inline">0.5</span>,
        <span class="hljs-attr inline">delay</span>: <span class="hljs-number inline">1</span> + (index * <span class="hljs-number inline">0.15</span>),
    },
}}
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">动画延迟计算</strong>：</p>
<p class="text-base leading-7 mb-4 text-foreground"><span class="katex-display inline"><span class="katex inline"><span class="katex-mathml inline"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>延迟时间</mtext><mo>=</mo><mn>1</mn><mo>+</mo><mo stretchy="false">(</mo><mi>i</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>x</mi><mo>×</mo><mn>0.15</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">延迟时间 = 1 + (index \times 0.15)</annotation></semantics></math></span><span class="katex-html inline" aria-hidden="true" style="display:none"><span class="base inline"><span class="strut inline" style="height:0.6833em;"></span><span class="mord cjk_fallback inline">延迟时间</span><span class="mspace inline" style="margin-right:0.2778em;"></span><span class="mrel inline">=</span><span class="mspace inline" style="margin-right:0.2778em;"></span></span><span class="base inline"><span class="strut inline" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord inline">1</span><span class="mspace inline" style="margin-right:0.2222em;"></span><span class="mbin inline">+</span><span class="mspace inline" style="margin-right:0.2222em;"></span></span><span class="base inline"><span class="strut inline" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen inline">(</span><span class="mord mathnormal inline">in</span><span class="mord mathnormal inline">d</span><span class="mord mathnormal inline">e</span><span class="mord mathnormal inline">x</span><span class="mspace inline" style="margin-right:0.2222em;"></span><span class="mbin inline">×</span><span class="mspace inline" style="margin-right:0.2222em;"></span></span><span class="base inline"><span class="strut inline" style="height:1em;vertical-align:-0.25em;"></span><span class="mord inline">0.15</span><span class="mclose inline">)</span></span></span></span></span></p>
<p class="text-base leading-7 mb-4 text-foreground">假设有8个技能，延迟时间序列为：1.0s, 1.15s, 1.30s, 1.45s, 1.60s, 1.75s, 1.90s, 2.05s</p>
<p class="text-base leading-7 mb-4 text-foreground">总的入场时间约为2.5秒，既不会让用户等太久，也能充分展现动画的层次感。</p>
<h3 id="悬浮交互系统" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#悬浮交互系统" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 悬浮交互系统">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            悬浮交互系统
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="whileHover%3D%7B%7B%0Ascale%3A%201.2%2C%0Arotate%3A%200%2C%0AzIndex%3A%2010%2C%0A%7D%7D%0Atransition%3D%7B%7B%0Aduration%3A%201.5%2C%0Atype%3A%20%22spring%22%20as%20const%2C%0Astiffness%3A%20120%2C%0Adamping%3A%2015%2C%0A%7D%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript">whileHover={{
    <span class="hljs-attr inline">scale</span>: <span class="hljs-number inline">1.2</span>,
    <span class="hljs-attr inline">rotate</span>: <span class="hljs-number inline">0</span>,
    <span class="hljs-attr inline">zIndex</span>: <span class="hljs-number inline">10</span>,
}}
transition={{
    <span class="hljs-attr inline">duration</span>: <span class="hljs-number inline">1.5</span>,
    <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&quot;spring&quot;</span> <span class="hljs-keyword inline">as</span> <span class="hljs-keyword inline">const</span>,
    <span class="hljs-attr inline">stiffness</span>: <span class="hljs-number inline">120</span>,
    <span class="hljs-attr inline">damping</span>: <span class="hljs-number inline">15</span>,
}}
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">Spring 动画模拟了真实的物理弹簧系统，比传统的缓动函数更自然：</p>
<p class="text-base leading-7 mb-4 text-foreground"><span class="katex-display inline"><span class="katex inline"><span class="katex-mathml inline"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>F</mi><mo>=</mo><mo>−</mo><mi>k</mi><mi>x</mi><mo>−</mo><mi>b</mi><mi>v</mi></mrow><annotation encoding="application/x-tex">F = -kx - bv</annotation></semantics></math></span><span class="katex-html inline" aria-hidden="true" style="display:none"><span class="base inline"><span class="strut inline" style="height:0.6833em;"></span><span class="mord mathnormal inline" style="margin-right:0.13889em;">F</span><span class="mspace inline" style="margin-right:0.2778em;"></span><span class="mrel inline">=</span><span class="mspace inline" style="margin-right:0.2778em;"></span></span><span class="base inline"><span class="strut inline" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord inline">−</span><span class="mord mathnormal inline" style="margin-right:0.03148em;">k</span><span class="mord mathnormal inline">x</span><span class="mspace inline" style="margin-right:0.2222em;"></span><span class="mbin inline">−</span><span class="mspace inline" style="margin-right:0.2222em;"></span></span><span class="base inline"><span class="strut inline" style="height:0.6944em;"></span><span class="mord mathnormal inline">b</span><span class="mord mathnormal inline" style="margin-right:0.03588em;">v</span></span></span></span></span></p>
<p class="text-base leading-7 mb-4 text-foreground">其中：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">k (stiffness)</strong>: 弹簧常数，值为120，决定&quot;弹性&quot;强度</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">b (damping)</strong>: 阻尼系数，值为15，决定&quot;摩擦力&quot;大小</li>
</ul>
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">参数设定</strong>：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">stiffness: 120</strong>: 适中的弹性，既不会太&quot;硬&quot;也不会太&quot;软&quot;</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">damping: 15</strong>: 轻微的阻尼，避免过度震荡但保留弹性感</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">duration: 1.5s</strong>: 给足时间展现spring效果的全过程</li>
</ul>
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">状态变化</strong>：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">scale: 1.2</strong>: 20%的放大</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">rotate: 0</strong>: 重置旋转，让倾斜的气泡&quot;站直&quot;</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">zIndex: 10</strong>: 提升层级，确保悬浮的气泡在最上层</li>
</ul>
<h2 id="视觉效果设计" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#视觉效果设计" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 视觉效果设计">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            视觉效果设计
        </h2>
<p class="text-base leading-7 mb-4 text-foreground">“你这玩意怎么是个贴图啊？”</p>
<p class="text-base leading-7 mb-4 text-foreground">“毛！”</p>
<h3 id="轨道旋转系统" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#轨道旋转系统" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 轨道旋转系统">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            轨道旋转系统
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%7B%2F*%20Orbital%20Ring%20*%2F%7D%0Adiv%0Aanimate%3D%7B%7B%0Arotate%3A%20360%2C%0A%7D%7D%0Atransition%3D%7B%7B%0Aduration%3A%2020%20%2B%20index%20*%202%2C%0Arepeat%3A%20Infinity%2C%0Aease%3A%20%22linear%22%2C%0A%7D%7D%0AclassName%3D%22absolute%20inset-0%20border%20border-primary%2F20%22%0Astyle%3D%7B%7B%20borderRadius%20%7D%7D%0A%2F%3E">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript">{<span class="hljs-comment inline">/* Orbital Ring */</span>}
&lt;motion.<span class="hljs-property inline">div</span>
    animate={{
        <span class="hljs-attr inline">rotate</span>: <span class="hljs-number inline">360</span>,
    }}
    transition={{
        <span class="hljs-attr inline">duration</span>: <span class="hljs-number inline">20</span> + index * <span class="hljs-number inline">2</span>,
        <span class="hljs-attr inline">repeat</span>: <span class="hljs-title class_ inline">Infinity</span>,
        <span class="hljs-attr inline">ease</span>: <span class="hljs-string inline">&quot;linear&quot;</span>,
    }}
    className=<span class="hljs-string inline">&quot;absolute inset-0 border border-primary/20&quot;</span>
    style={{ borderRadius }}
/&gt;
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">轨道设计思考</strong>：</p>
<p class="text-base leading-7 mb-4 text-foreground">我没有使用复杂的 SVG 圆形路径，而是简单地复用了气泡的 border 样式。<code>border + borderRadius</code> 的组合既创造了轨道环效果，又保持了与气泡形状的一致性。</p>
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">旋转周期的差异化策略</strong>：</p>
<p class="text-base leading-7 mb-4 text-foreground"><span class="katex-display inline"><span class="katex inline"><span class="katex-mathml inline"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>旋转周期</mtext><mo>=</mo><mn>20</mn><mo>+</mo><mo stretchy="false">(</mo><mi>i</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>x</mi><mo>×</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">旋转周期 = 20 + (index \times 2)</annotation></semantics></math></span><span class="katex-html inline" aria-hidden="true" style="display:none"><span class="base inline"><span class="strut inline" style="height:0.6833em;"></span><span class="mord cjk_fallback inline">旋转周期</span><span class="mspace inline" style="margin-right:0.2778em;"></span><span class="mrel inline">=</span><span class="mspace inline" style="margin-right:0.2778em;"></span></span><span class="base inline"><span class="strut inline" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord inline">20</span><span class="mspace inline" style="margin-right:0.2222em;"></span><span class="mbin inline">+</span><span class="mspace inline" style="margin-right:0.2222em;"></span></span><span class="base inline"><span class="strut inline" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen inline">(</span><span class="mord mathnormal inline">in</span><span class="mord mathnormal inline">d</span><span class="mord mathnormal inline">e</span><span class="mord mathnormal inline">x</span><span class="mspace inline" style="margin-right:0.2222em;"></span><span class="mbin inline">×</span><span class="mspace inline" style="margin-right:0.2222em;"></span></span><span class="base inline"><span class="strut inline" style="height:1em;vertical-align:-0.25em;"></span><span class="mord inline">2</span><span class="mclose inline">)</span></span></span></span></span></p>
<p class="text-base leading-7 mb-4 text-foreground">这意味着：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">第1个气泡：20秒一圈</li>
<li class="text-foreground leading-relaxed">第2个气泡：22秒一圈</li>
<li class="text-foreground leading-relaxed">第3个气泡：24秒一圈</li>
<li class="text-foreground leading-relaxed">…</li>
</ul>
<p class="text-base leading-7 mb-4 text-foreground">不同的旋转速度模拟了真实的行星系统，每个星球都有自己的公转周期。</p>
<h3 id="呼吸效果" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#呼吸效果" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 呼吸效果">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            呼吸效果
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="div%0Aanimate%3D%7B%7B%0Ay%3A%20%5B0%2C%20-5%2C%200%5D%2C%0A%7D%7D%0Atransition%3D%7B%7B%0Aduration%3A%203%20%2B%20index%20*%200.2%2C%0Arepeat%3A%20Infinity%2C%0Aease%3A%20%22easeInOut%22%2C%0A%7D%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript">&lt;motion.<span class="hljs-property inline">div</span>
    animate={{
        <span class="hljs-attr inline">y</span>: [<span class="hljs-number inline">0</span>, -<span class="hljs-number inline">5</span>, <span class="hljs-number inline">0</span>],
    }}
    transition={{
        <span class="hljs-attr inline">duration</span>: <span class="hljs-number inline">3</span> + index * <span class="hljs-number inline">0.2</span>,
        <span class="hljs-attr inline">repeat</span>: <span class="hljs-title class_ inline">Infinity</span>,
        <span class="hljs-attr inline">ease</span>: <span class="hljs-string inline">&quot;easeInOut&quot;</span>,
    }}
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Y轴浮动的数学原理</strong>：</p>
<p class="text-base leading-7 mb-4 text-foreground">关键帧序列 <code>[0, -5, 0]</code> 创造了一个完整的呼吸周期：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">起始位置 (0)</strong>: 正常位置</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">高峰位置 (-5)</strong>: 向上浮动5像素</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">结束位置 (0)</strong>: 回到正常位置</li>
</ul>
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">周期差异化的自然感</strong>：</p>
<p class="text-base leading-7 mb-4 text-foreground"><span class="katex-display inline"><span class="katex inline"><span class="katex-mathml inline"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>呼吸周期</mtext><mo>=</mo><mn>3</mn><mo>+</mo><mo stretchy="false">(</mo><mi>i</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>x</mi><mo>×</mo><mn>0.2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">呼吸周期 = 3 + (index \times 0.2)</annotation></semantics></math></span><span class="katex-html inline" aria-hidden="true" style="display:none"><span class="base inline"><span class="strut inline" style="height:0.6833em;"></span><span class="mord cjk_fallback inline">呼吸周期</span><span class="mspace inline" style="margin-right:0.2778em;"></span><span class="mrel inline">=</span><span class="mspace inline" style="margin-right:0.2778em;"></span></span><span class="base inline"><span class="strut inline" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord inline">3</span><span class="mspace inline" style="margin-right:0.2222em;"></span><span class="mbin inline">+</span><span class="mspace inline" style="margin-right:0.2222em;"></span></span><span class="base inline"><span class="strut inline" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen inline">(</span><span class="mord mathnormal inline">in</span><span class="mord mathnormal inline">d</span><span class="mord mathnormal inline">e</span><span class="mord mathnormal inline">x</span><span class="mspace inline" style="margin-right:0.2222em;"></span><span class="mbin inline">×</span><span class="mspace inline" style="margin-right:0.2222em;"></span></span><span class="base inline"><span class="strut inline" style="height:1em;vertical-align:-0.25em;"></span><span class="mord inline">0.2</span><span class="mclose inline">)</span></span></span></span></span></p>
<p class="text-base leading-7 mb-4 text-foreground">这个公式确保每个气泡都有轻微不同的呼吸节奏，避免了机械式的同步摆动。3秒的基础周期接近人类的自然呼吸频率，0.2秒的差异足以打破同步但不会太明显。</p>
<h3 id="shimmer-渐变" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#shimmer-渐变" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Shimmer 渐变">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Shimmer 渐变
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%7B%2F*%20Shimmer%20Effect%20*%2F%7D%0Adiv%0Aanimate%3D%7B%7B%0Ax%3A%20%5B'-100%25'%2C%20'100%25'%5D%2C%0A%7D%7D%0Atransition%3D%7B%7B%0Aduration%3A%202%2C%0Arepeat%3A%20Infinity%2C%0ArepeatDelay%3A%203%2C%0Aease%3A%20%22easeInOut%22%2C%0A%7D%7D%0AclassName%3D%22absolute%20-inset-4%20bg-gradient-to-r%20from-transparent%20via-white%2F20%20to-transparent%20transform%20rotate-45%22%0A%2F%3E">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript">{<span class="hljs-comment inline">/* Shimmer Effect */</span>}
&lt;motion.<span class="hljs-property inline">div</span>
    animate={{
        <span class="hljs-attr inline">x</span>: [<span class="hljs-string inline">&#x27;-100%&#x27;</span>, <span class="hljs-string inline">&#x27;100%&#x27;</span>],
    }}
    transition={{
        <span class="hljs-attr inline">duration</span>: <span class="hljs-number inline">2</span>,
        <span class="hljs-attr inline">repeat</span>: <span class="hljs-title class_ inline">Infinity</span>,
        <span class="hljs-attr inline">repeatDelay</span>: <span class="hljs-number inline">3</span>,
        <span class="hljs-attr inline">ease</span>: <span class="hljs-string inline">&quot;easeInOut&quot;</span>,
    }}
    className=<span class="hljs-string inline">&quot;absolute -inset-4 bg-gradient-to-r from-transparent via-white/20 to-transparent transform rotate-45&quot;</span>
/&gt;
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Shimmer 光晕的工作原理</strong>：</p>
<ol class="list-decimal list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">渐变遮罩</strong>: <code>from-transparent via-white/20 to-transparent</code> 创造了一个中间亮、两端透明的光带</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">旋转变换</strong>: <code>rotate-45</code> 将光带倾斜45度，模拟真实的光线角度</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">移动动画</strong>: <code>x: ['-100%', '100%']</code> 让光带从左到右扫过整个气泡</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">完整覆盖:</strong><code>-inset-4</code>确保光带能够完整覆盖那些不规则的星座形状</li>
</ol>
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">动画时序</strong>：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">duration: 2s</strong>: 光晕扫过的时间</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">repeatDelay: 3s</strong>: 间隔3秒</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">总周期</strong>: 2s动画 + 3s间隔 = 5s</li>
</ul>
<h2 id="背景星空生成" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#背景星空生成" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 背景星空生成">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            背景星空生成
        </h2>
<p class="text-base leading-7 mb-4 text-foreground">总感觉空白的背景空荡荡的。</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%2F%2F%20%E8%AE%B0%E5%BF%86%E5%8C%96%E8%83%8C%E6%99%AF%E6%98%9F%E7%A9%BA%0Aconst%20backgroundStars%20%3D%20useMemo(()%20%3D%3E%20(%0AArray.from(%7Blength%3A%2020%7D).map((_%2C%20i)%20%3D%3E%20(%0Amotion.div%0Akey%3D%7B%60star-%24%7Bi%7D%60%7D%0Ainitial%3D%7B%7Bopacity%3A%200%2C%20scale%3A%200%7D%7D%0Aanimate%3D%7B%7B%0Aopacity%3A%20%5B0%2C%201%2C%200.3%2C%201%5D%2C%0Ascale%3A%20%5B0%2C%201%2C%200.8%2C%201%5D%2C%0A%7D%7D%0Atransition%3D%7B%7B%0Aduration%3A%202%20%2B%20Math.random()%20*%203%2C%0Arepeat%3A%20Infinity%2C%0Adelay%3A%20Math.random()%20*%202%2C%0A%7D%7D%0AclassName%3D%22absolute%20w-1%20h-1%20bg-primary%2F40%20rounded-full%22%0Astyle%3D%7B%7B%0Aleft%3A%20%60%24%7BMath.random()%20*%20100%7D%25%60%2C%0Atop%3A%20%60%24%7BMath.random()%20*%20100%7D%25%60%2C%0A%7D%7D%0A%2F%3E%0A))%0A)%2C%20%5B%5D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript">    <span class="hljs-comment inline">// 记忆化背景星空</span>
<span class="hljs-keyword inline">const</span> backgroundStars = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> (
    <span class="hljs-title class_ inline">Array</span>.<span class="hljs-title function_ inline">from</span>({<span class="hljs-attr inline">length</span>: <span class="hljs-number inline">20</span>}).<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline">(<span class="hljs-params inline">_, i</span>) =&gt;</span> (
        <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
            <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{</span>`<span class="hljs-attr inline">star-</span>${<span class="hljs-attr inline">i</span>}`}
            <span class="hljs-attr inline">initial</span>=<span class="hljs-string inline">{{opacity:</span> <span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">scale:</span> <span class="hljs-attr inline">0</span>}}
            <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">{{</span>
                <span class="hljs-attr inline">opacity:</span> [<span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">1</span>, <span class="hljs-attr inline">0.3</span>, <span class="hljs-attr inline">1</span>],
                <span class="hljs-attr inline">scale:</span> [<span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">1</span>, <span class="hljs-attr inline">0.8</span>, <span class="hljs-attr inline">1</span>],
            }}
            <span class="hljs-attr inline">transition</span>=<span class="hljs-string inline">{{</span>
                <span class="hljs-attr inline">duration:</span> <span class="hljs-attr inline">2</span> + <span class="hljs-attr inline">Math.random</span>() * <span class="hljs-attr inline">3</span>,
                <span class="hljs-attr inline">repeat:</span> <span class="hljs-attr inline">Infinity</span>,
                <span class="hljs-attr inline">delay:</span> <span class="hljs-attr inline">Math.random</span>() * <span class="hljs-attr inline">2</span>,
            }}
            <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;absolute w-1 h-1 bg-primary/40 rounded-full&quot;</span>
            <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{</span>
                <span class="hljs-attr inline">left:</span> `${<span class="hljs-attr inline">Math.random</span>() * <span class="hljs-attr inline">100</span>}%`,
                <span class="hljs-attr inline">top:</span> `${<span class="hljs-attr inline">Math.random</span>() * <span class="hljs-attr inline">100</span>}%`,
            }}
        /&gt;</span></span>
    ))
), []);
</code></pre>
            </div>
        
<h3 id="随机分布算法" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#随机分布算法" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 随机分布算法">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            随机分布算法
        </h3>
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">位置随机化</strong>：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="left%3A%20%60%24%7BMath.random()%20*%20100%7D%25%60%2C%0Atop%3A%20%60%24%7BMath.random()%20*%20100%7D%25%60%2C">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-attr inline">left</span>: <span class="hljs-string inline">`<span class="hljs-subst inline">${<span class="hljs-built_in inline">Math</span>.random() * <span class="hljs-number inline">100</span>}</span>%`</span>,
<span class="hljs-attr inline">top</span>: <span class="hljs-string inline">`<span class="hljs-subst inline">${<span class="hljs-built_in inline">Math</span>.random() * <span class="hljs-number inline">100</span>}</span>%`</span>,
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><code>Math.random()</code> 产生 [0, 1) 区间的均匀分布随机数，乘以100转换为百分比坐标。这确保了每颗星星都有相等的概率出现在容器的任何位置。</p>
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">动画随机化的层次设计</strong>：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">持续时间</strong>: <code>2 + Math.random() * 3</code> → [2, 5)秒的随机周期</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">延迟启动</strong>: <code>Math.random() * 2</code> → [0, 2)秒的随机延迟</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">闪烁序列</strong>: <code>[0, 1, 0.3, 1]</code> → 渐现-全亮-半暗-全亮的自然闪烁</li>
</ul>
<h3 id="usememo-优化" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#usememo-优化" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to useMemo 优化">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            useMemo 优化
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="const%20backgroundStars%20%3D%20useMemo(()%20%3D%3E%20(">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">const</span> backgroundStars = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> (
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">为什么星空需要 useMemo</strong>？</p>
<p class="text-base leading-7 mb-4 text-foreground">星空的生成涉及20次随机计算和DOM元素创建，如果在每次组件渲染时都重新生成，会导致：</p>
<ol class="list-decimal list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">性能问题</strong>: 重复的随机计算和元素创建</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">视觉问题</strong>: 星星位置不断变化，破坏了静态背景的效果</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">动画问题</strong>: 重新创建的星星会重新开始动画，导致闪烁</li>
</ol>
<p class="text-base leading-7 mb-4 text-foreground">通过 <code>useMemo</code>，我们确保星空只在组件首次渲染时生成一次，之后保持稳定。</p>
<h2 id="布局算法：随机与秩序的平衡" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#布局算法：随机与秩序的平衡" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 布局算法：随机与秩序的平衡">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            布局算法：随机与秩序的平衡
        </h2>
<p class="text-base leading-7 mb-4 text-foreground"><del class="line-through opacity-60">（抽卡总得有保底是不是）</del></p>
<p class="text-base leading-7 mb-4 text-foreground">其实是技能变多了之后不易于阅读，所以加了个整齐排列的隐藏触发。</p>
<h3 id="随机分布模式" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#随机分布模式" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 随机分布模式">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            随机分布模式
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%2F%2F%20%E7%94%9F%E6%88%90%E9%9A%8F%E6%9C%BA%E4%BD%8D%E7%BD%AE%E5%B9%B6%E7%9B%B4%E6%8E%A5%E6%9B%B4%E6%96%B0DOM%0Aconst%20updatePositions%20%3D%20useCallback(()%20%3D%3E%20%7B%0Aif%20(!containerRef.current)%20return%3B%0Aconst%20containerWidth%20%3D%20containerRef.current.offsetWidth%3B%0Aconst%20containerHeight%20%3D%20containerRef.current.offsetHeight%3B%0Aconst%20padding%20%3D%2080%3B%0A%2F%2F%20%E5%87%8F%E5%B0%91%E6%B0%94%E6%B3%A1%E7%9A%84%E5%AE%BD%E5%BA%A6%E5%92%8C%E9%AB%98%E5%BA%A6%0Aconst%20minX%20%3D%20padding%20-%2075%3B%0Aconst%20minY%20%3D%20padding%20-%2075%3B%0Aconst%20maxX%20%3D%20containerWidth%20-%20padding%3B%0Aconst%20maxY%20%3D%20containerHeight%20-%20padding%3B%0AsetContainerSize(%7Bx%3A%20containerWidth%2C%20y%3A%20containerHeight%7D)%3B%0A%2F%2F%20%E4%BD%BF%E7%94%A8%E7%9B%B4%E6%8E%A5DOM%E6%93%8D%E4%BD%9C%E6%9B%B4%E6%96%B0%E4%BD%8D%E7%BD%AE%0AskillRefs.forEach((skillRef)%20%3D%3E%20%7B%0Aif%20(skillRef.elementRef.current)%20%7B%0Aconst%20newX%20%3D%20Math.random()%20*%20(maxX%20-%20minX)%20%2B%20minX%3B%0Aconst%20newY%20%3D%20Math.random()%20*%20(maxY%20-%20minY)%20%2B%20minY%3B%0A%2F%2F%20%E5%9C%A8ref%E4%B8%AD%E6%9B%B4%E6%96%B0%E4%BD%8D%E7%BD%AE%0AskillRef.position%20%3D%20%7Bx%3A%20newX%2C%20y%3A%20newY%7D%3B%0A%2F%2F%20%E4%BD%BF%E7%94%A8Framer%20Motion%E7%9A%84animate%E5%87%BD%E6%95%B0%E6%89%A7%E8%A1%8C%E4%BD%8D%E7%BD%AE%E5%8A%A8%E7%94%BB%0Aconst%20element%20%3D%20skillRef.elementRef.current%3B%0Aif%20(element.animate)%20%7B%0Aelement.animate(%0A%7B%0Aleft%3A%20%60%24%7BnewX%7Dpx%60%2C%0Atop%3A%20%60%24%7BnewY%7Dpx%60%0A%7D%2C%0A%7B%0Aduration%3A%201500%2C%0Aeasing%3A%20'cubic-bezier(0.4%2C%200%2C%200.2%2C%201)'%2C%0Afill%3A%20'forwards'%0A%7D%0A)%3B%0A%7D%0A%7D%0A%7D)%3B%0A%2F%2F%20%E6%9B%B4%E6%96%B0%E8%BF%9E%E6%8E%A5%E7%BA%BF%0AupdateConnectingLines()%3B%0A%7D%2C%20%5BskillRefs%5D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-comment inline">// 生成随机位置并直接更新DOM</span>
<span class="hljs-keyword inline">const</span> updatePositions = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-keyword inline">if</span> (!containerRef.<span class="hljs-property inline">current</span>) <span class="hljs-keyword inline">return</span>;

    <span class="hljs-keyword inline">const</span> containerWidth = containerRef.<span class="hljs-property inline">current</span>.<span class="hljs-property inline">offsetWidth</span>;
    <span class="hljs-keyword inline">const</span> containerHeight = containerRef.<span class="hljs-property inline">current</span>.<span class="hljs-property inline">offsetHeight</span>;
    <span class="hljs-keyword inline">const</span> padding = <span class="hljs-number inline">80</span>;
    <span class="hljs-comment inline">// 减少气泡的宽度和高度</span>
    <span class="hljs-keyword inline">const</span> minX = padding - <span class="hljs-number inline">75</span>;
    <span class="hljs-keyword inline">const</span> minY = padding - <span class="hljs-number inline">75</span>;
    <span class="hljs-keyword inline">const</span> maxX = containerWidth - padding;
    <span class="hljs-keyword inline">const</span> maxY = containerHeight - padding;

    <span class="hljs-title function_ inline">setContainerSize</span>({<span class="hljs-attr inline">x</span>: containerWidth, <span class="hljs-attr inline">y</span>: containerHeight});

    <span class="hljs-comment inline">// 使用直接DOM操作更新位置</span>
    skillRefs.<span class="hljs-title function_ inline">forEach</span>(<span class="hljs-function inline">(<span class="hljs-params inline">skillRef</span>) =&gt;</span> {
        <span class="hljs-keyword inline">if</span> (skillRef.<span class="hljs-property inline">elementRef</span>.<span class="hljs-property inline">current</span>) {

            <span class="hljs-keyword inline">const</span> newX = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">random</span>() * (maxX - minX) + minX;
            <span class="hljs-keyword inline">const</span> newY = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">random</span>() * (maxY - minY) + minY;

            <span class="hljs-comment inline">// 在ref中更新位置</span>
            skillRef.<span class="hljs-property inline">position</span> = {<span class="hljs-attr inline">x</span>: newX, <span class="hljs-attr inline">y</span>: newY};

            <span class="hljs-comment inline">// 使用Framer Motion的animate函数执行位置动画</span>
            <span class="hljs-keyword inline">const</span> element = skillRef.<span class="hljs-property inline">elementRef</span>.<span class="hljs-property inline">current</span>;
            <span class="hljs-keyword inline">if</span> (element.<span class="hljs-property inline">animate</span>) {
                element.<span class="hljs-title function_ inline">animate</span>(
                    {
                        <span class="hljs-attr inline">left</span>: <span class="hljs-string inline">`<span class="hljs-subst inline">${newX}</span>px`</span>,
                        <span class="hljs-attr inline">top</span>: <span class="hljs-string inline">`<span class="hljs-subst inline">${newY}</span>px`</span>
                    },
                    {
                        <span class="hljs-attr inline">duration</span>: <span class="hljs-number inline">1500</span>,
                        <span class="hljs-attr inline">easing</span>: <span class="hljs-string inline">&#x27;cubic-bezier(0.4, 0, 0.2, 1)&#x27;</span>,
                        <span class="hljs-attr inline">fill</span>: <span class="hljs-string inline">&#x27;forwards&#x27;</span>
                    }
                );
            }
        }
    });

    <span class="hljs-comment inline">// 更新连接线</span>
    <span class="hljs-title function_ inline">updateConnectingLines</span>();
}, [skillRefs]);
</code></pre>
            </div>
        
<h3 id="边界约束计算" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#边界约束计算" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 边界约束计算">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            边界约束计算
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="const%20padding%20%3D%2080%3B%0Aconst%20minX%20%3D%20padding%20-%2075%3B%20%20%2F%2F%20-75%E6%98%AF%E6%B0%94%E6%B3%A1%E5%B0%BA%E5%AF%B8%E7%9A%84%E4%B8%80%E5%8D%8A%2B%E4%BD%99%E9%87%8F%0Aconst%20minY%20%3D%20padding%20-%2075%3B%0Aconst%20maxX%20%3D%20containerWidth%20-%20padding%3B%0Aconst%20maxY%20%3D%20containerHeight%20-%20padding%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">const</span> padding = <span class="hljs-number inline">80</span>;
<span class="hljs-keyword inline">const</span> minX = padding - <span class="hljs-number inline">75</span>;  <span class="hljs-comment inline">// -75是气泡尺寸的一半+余量</span>
<span class="hljs-keyword inline">const</span> minY = padding - <span class="hljs-number inline">75</span>;
<span class="hljs-keyword inline">const</span> maxX = containerWidth - padding;
<span class="hljs-keyword inline">const</span> maxY = containerHeight - padding;
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">这个看似简单的计算实际上解决了一个复杂的几何问题：</p>
<p class="text-base leading-7 mb-4 text-foreground"><span class="katex-display inline"><span class="katex inline"><span class="katex-mathml inline"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>有效区域</mtext><mo>=</mo><mtext>容器尺寸</mtext><mo>−</mo><mn>2</mn><mo>×</mo><mi>p</mi><mi>a</mi><mi>d</mi><mi>d</mi><mi>i</mi><mi>n</mi><mi>g</mi><mo>−</mo><mtext>气泡尺寸</mtext></mrow><annotation encoding="application/x-tex">有效区域 = 容器尺寸 - 2 \times padding - 气泡尺寸</annotation></semantics></math></span><span class="katex-html inline" aria-hidden="true" style="display:none"><span class="base inline"><span class="strut inline" style="height:0.6833em;"></span><span class="mord cjk_fallback inline">有效区域</span><span class="mspace inline" style="margin-right:0.2778em;"></span><span class="mrel inline">=</span><span class="mspace inline" style="margin-right:0.2778em;"></span></span><span class="base inline"><span class="strut inline" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord cjk_fallback inline">容器尺寸</span><span class="mspace inline" style="margin-right:0.2222em;"></span><span class="mbin inline">−</span><span class="mspace inline" style="margin-right:0.2222em;"></span></span><span class="base inline"><span class="strut inline" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord inline">2</span><span class="mspace inline" style="margin-right:0.2222em;"></span><span class="mbin inline">×</span><span class="mspace inline" style="margin-right:0.2222em;"></span></span><span class="base inline"><span class="strut inline" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal inline">p</span><span class="mord mathnormal inline">a</span><span class="mord mathnormal inline">dd</span><span class="mord mathnormal inline">in</span><span class="mord mathnormal inline" style="margin-right:0.03588em;">g</span><span class="mspace inline" style="margin-right:0.2222em;"></span><span class="mbin inline">−</span><span class="mspace inline" style="margin-right:0.2222em;"></span></span><span class="base inline"><span class="strut inline" style="height:0.6833em;"></span><span class="mord cjk_fallback inline">气泡尺寸</span></span></span></span></span></p>
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">为什么 minX 要减去75？</strong></p>
<p class="text-base leading-7 mb-4 text-foreground">因为CSS的 <code>left</code> 属性定位的是元素的左上角，而我们希望整个气泡（包括中心和边缘）都在可视范围内。75px 包含了：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">气泡半径：37.5px</li>
<li class="text-foreground leading-relaxed">安全余量：37.5px（确保悬浮效果不会超出边界）</li>
</ul>
<h3 id="dom-直接操作" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#dom-直接操作" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to DOM 直接操作">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            DOM 直接操作
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%2F%2F%20%E4%BD%BF%E7%94%A8Framer%20Motion%E7%9A%84animate%E5%87%BD%E6%95%B0%E6%89%A7%E8%A1%8C%E4%BD%8D%E7%BD%AE%E5%8A%A8%E7%94%BB%0Aconst%20element%20%3D%20skillRef.elementRef.current%3B%0Aif%20(element.animate)%20%7B%0Aelement.animate(%0A%7B%0Aleft%3A%20%60%24%7BnewX%7Dpx%60%2C%0Atop%3A%20%60%24%7BnewY%7Dpx%60%0A%7D%2C%0A%7B%0Aduration%3A%201500%2C%0Aeasing%3A%20'cubic-bezier(0.4%2C%200%2C%200.2%2C%201)'%2C%0Afill%3A%20'forwards'%0A%7D%0A)%3B%0A%7D%20else%20%7B%0A%2F%2F%20%E4%B8%8D%E6%94%AF%E6%8C%81Web%20Animations%20API%E7%9A%84%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E9%99%8D%E7%BA%A7%E6%96%B9%E6%A1%88%0Aelement.style.transition%20%3D%20'left%201.5s%20ease%2C%20top%201.5s%20ease'%3B%0Aelement.style.left%20%3D%20%60%24%7BnewX%7Dpx%60%3B%0Aelement.style.top%20%3D%20%60%24%7BnewY%7Dpx%60%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-comment inline">// 使用Framer Motion的animate函数执行位置动画</span>
<span class="hljs-keyword inline">const</span> element = skillRef.<span class="hljs-property inline">elementRef</span>.<span class="hljs-property inline">current</span>;
<span class="hljs-keyword inline">if</span> (element.<span class="hljs-property inline">animate</span>) {
    element.<span class="hljs-title function_ inline">animate</span>(
        {
            <span class="hljs-attr inline">left</span>: <span class="hljs-string inline">`<span class="hljs-subst inline">${newX}</span>px`</span>,
            <span class="hljs-attr inline">top</span>: <span class="hljs-string inline">`<span class="hljs-subst inline">${newY}</span>px`</span>
        },
        {
            <span class="hljs-attr inline">duration</span>: <span class="hljs-number inline">1500</span>,
            <span class="hljs-attr inline">easing</span>: <span class="hljs-string inline">&#x27;cubic-bezier(0.4, 0, 0.2, 1)&#x27;</span>,
            <span class="hljs-attr inline">fill</span>: <span class="hljs-string inline">&#x27;forwards&#x27;</span>
        }
    );
} <span class="hljs-keyword inline">else</span> {
    <span class="hljs-comment inline">// 不支持Web Animations API的浏览器的降级方案</span>
    element.<span class="hljs-property inline">style</span>.<span class="hljs-property inline">transition</span> = <span class="hljs-string inline">&#x27;left 1.5s ease, top 1.5s ease&#x27;</span>;
    element.<span class="hljs-property inline">style</span>.<span class="hljs-property inline">left</span> = <span class="hljs-string inline">`<span class="hljs-subst inline">${newX}</span>px`</span>;
    element.<span class="hljs-property inline">style</span>.<span class="hljs-property inline">top</span> = <span class="hljs-string inline">`<span class="hljs-subst inline">${newY}</span>px`</span>;
}
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">为什么选择直接DOM操作而不是状态更新？</strong></p>
<p class="text-base leading-7 mb-4 text-foreground">8个气泡同时更新位置，如果通过state，会触发8次组件重渲染，因此简单选择Web Animations API 直接在合成器线程运行。</p>
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">降级策略</strong>：</p>
<p class="text-base leading-7 mb-4 text-foreground">对于不支持 Web Animations API 的浏览器，程序额外提供了 CSS transition 的fallback方案，确保在所有环境下都有平滑的动画效果。</p>
<h3 id="网格布局模式" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#网格布局模式" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 网格布局模式">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            网格布局模式
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%2F%2F%20%E7%94%9F%E6%88%90%E6%95%B4%E9%BD%90%E7%BD%91%E6%A0%BC%E5%B8%83%E5%B1%80%0Aconst%20updatePositionsNeat%20%3D%20useCallback(()%20%3D%3E%20%7B%0Aif%20(!containerRef.current)%20return%3B%0Aconst%20containerWidth%20%3D%20containerRef.current.offsetWidth%3B%0Aconst%20containerHeight%20%3D%20containerRef.current.offsetHeight%3B%0AsetContainerSize(%7Bx%3A%20containerWidth%2C%20y%3A%20containerHeight%7D)%3B%0A%2F%2F%20%E8%AE%A1%E7%AE%97%E7%BD%91%E6%A0%BC%E5%B8%83%E5%B1%80%0Aconst%20skillCount%20%3D%20skillRefs.length%3B%0Aconst%20cols%20%3D%20Math.ceil(Math.sqrt(skillCount))%3B%0Aconst%20rows%20%3D%20Math.ceil(skillCount%20%2F%20cols)%3B%0A%2F%2F%20%E8%AE%A1%E7%AE%97%E9%97%B4%E8%B7%9D%E4%BB%A5%E4%BD%BF%E7%BD%91%E6%A0%BC%E5%B1%85%E4%B8%AD%0Aconst%20padding%20%3D%205%3B%0Aconst%20availableWidth%20%3D%20containerWidth%20-%20(2%20*%20padding)%3B%0Aconst%20availableHeight%20%3D%20containerHeight%20-%20(2%20*%20padding)%3B%0Aconst%20cellWidth%20%3D%20availableWidth%20%2F%20cols%3B%0Aconst%20cellHeight%20%3D%20availableHeight%20%2F%20rows%3B%0AskillRefs.forEach((skillRef%2C%20index)%20%3D%3E%20%7B%0Aif%20(skillRef.elementRef.current)%20%7B%0Aconst%20col%20%3D%20index%20%25%20cols%3B%0Aconst%20row%20%3D%20Math.floor(index%20%2F%20cols)%3B%0A%2F%2F%20%E5%9C%A8%E6%B0%B4%E5%B9%B3%E5%92%8C%E5%9E%82%E7%9B%B4%E6%96%B9%E5%90%91%E4%B8%8A%E9%83%BD%E4%BD%BF%E7%BD%91%E6%A0%BC%E5%B1%85%E4%B8%AD%0Aconst%20startX%20%3D%20padding%20%2B%20(cellWidth%20%2F%202)%20-%2038%3B%0Aconst%20startY%20%3D%20padding%20%2B%20(cellHeight%20%2F%202)%20-%2038%3B%0Aconst%20newX%20%3D%20startX%20%2B%20(col%20*%20cellWidth)%3B%0Aconst%20newY%20%3D%20startY%20%2B%20(row%20*%20cellHeight)%3B%0A%2F%2F%20%E5%9C%A8ref%E4%B8%AD%E6%9B%B4%E6%96%B0%E4%BD%8D%E7%BD%AE%0AskillRef.position%20%3D%20%7Bx%3A%20newX%2C%20y%3A%20newY%7D%3B%0A%2F%2F%20%E4%BD%BF%E7%94%A8Web%20Animations%20API%E6%89%A7%E8%A1%8C%E4%BD%8D%E7%BD%AE%E5%8A%A8%E7%94%BB%0Aconst%20element%20%3D%20skillRef.elementRef.current%3B%0Aif%20(element.animate)%20%7B%0Aelement.animate(%0A%7B%0Aleft%3A%20%60%24%7BnewX%7Dpx%60%2C%0Atop%3A%20%60%24%7BnewY%7Dpx%60%0A%7D%2C%0A%7B%0Aduration%3A%201500%2C%0Aeasing%3A%20'cubic-bezier(0.4%2C%200%2C%200.2%2C%201)'%2C%0Afill%3A%20'forwards'%0A%7D%0A)%3B%0A%7D%0A%7D%0A%7D)%3B%0A%2F%2F%20%E6%9B%B4%E6%96%B0%E8%BF%9E%E6%8E%A5%E7%BA%BF%0AupdateConnectingLines()%3B%0A%7D%2C%20%5BskillRefs%5D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-comment inline">// 生成整齐网格布局</span>
<span class="hljs-keyword inline">const</span> updatePositionsNeat = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-keyword inline">if</span> (!containerRef.<span class="hljs-property inline">current</span>) <span class="hljs-keyword inline">return</span>;

    <span class="hljs-keyword inline">const</span> containerWidth = containerRef.<span class="hljs-property inline">current</span>.<span class="hljs-property inline">offsetWidth</span>;
    <span class="hljs-keyword inline">const</span> containerHeight = containerRef.<span class="hljs-property inline">current</span>.<span class="hljs-property inline">offsetHeight</span>;

    <span class="hljs-title function_ inline">setContainerSize</span>({<span class="hljs-attr inline">x</span>: containerWidth, <span class="hljs-attr inline">y</span>: containerHeight});

    <span class="hljs-comment inline">// 计算网格布局</span>
    <span class="hljs-keyword inline">const</span> skillCount = skillRefs.<span class="hljs-property inline">length</span>;
    <span class="hljs-keyword inline">const</span> cols = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">ceil</span>(<span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">sqrt</span>(skillCount));
    <span class="hljs-keyword inline">const</span> rows = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">ceil</span>(skillCount / cols);

    <span class="hljs-comment inline">// 计算间距以使网格居中</span>
    <span class="hljs-keyword inline">const</span> padding = <span class="hljs-number inline">5</span>;
    <span class="hljs-keyword inline">const</span> availableWidth = containerWidth - (<span class="hljs-number inline">2</span> * padding);
    <span class="hljs-keyword inline">const</span> availableHeight = containerHeight - (<span class="hljs-number inline">2</span> * padding);
    <span class="hljs-keyword inline">const</span> cellWidth = availableWidth / cols;
    <span class="hljs-keyword inline">const</span> cellHeight = availableHeight / rows;

    skillRefs.<span class="hljs-title function_ inline">forEach</span>(<span class="hljs-function inline">(<span class="hljs-params inline">skillRef, index</span>) =&gt;</span> {
        <span class="hljs-keyword inline">if</span> (skillRef.<span class="hljs-property inline">elementRef</span>.<span class="hljs-property inline">current</span>) {
            <span class="hljs-keyword inline">const</span> col = index % cols;
            <span class="hljs-keyword inline">const</span> row = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">floor</span>(index / cols);

            <span class="hljs-comment inline">// 在水平和垂直方向上都使网格居中</span>
            <span class="hljs-keyword inline">const</span> startX = padding + (cellWidth / <span class="hljs-number inline">2</span>) - <span class="hljs-number inline">38</span>;
            <span class="hljs-keyword inline">const</span> startY = padding + (cellHeight / <span class="hljs-number inline">2</span>) - <span class="hljs-number inline">38</span>;

            <span class="hljs-keyword inline">const</span> newX = startX + (col * cellWidth);
            <span class="hljs-keyword inline">const</span> newY = startY + (row * cellHeight);

            <span class="hljs-comment inline">// 在ref中更新位置</span>
            skillRef.<span class="hljs-property inline">position</span> = {<span class="hljs-attr inline">x</span>: newX, <span class="hljs-attr inline">y</span>: newY};

            <span class="hljs-comment inline">// 使用Web Animations API执行位置动画</span>
            <span class="hljs-keyword inline">const</span> element = skillRef.<span class="hljs-property inline">elementRef</span>.<span class="hljs-property inline">current</span>;
            <span class="hljs-keyword inline">if</span> (element.<span class="hljs-property inline">animate</span>) {
                element.<span class="hljs-title function_ inline">animate</span>(
                    {
                        <span class="hljs-attr inline">left</span>: <span class="hljs-string inline">`<span class="hljs-subst inline">${newX}</span>px`</span>,
                        <span class="hljs-attr inline">top</span>: <span class="hljs-string inline">`<span class="hljs-subst inline">${newY}</span>px`</span>
                    },
                    {
                        <span class="hljs-attr inline">duration</span>: <span class="hljs-number inline">1500</span>,
                        <span class="hljs-attr inline">easing</span>: <span class="hljs-string inline">&#x27;cubic-bezier(0.4, 0, 0.2, 1)&#x27;</span>,
                        <span class="hljs-attr inline">fill</span>: <span class="hljs-string inline">&#x27;forwards&#x27;</span>
                    }
                );
            }
        }
    });

    <span class="hljs-comment inline">// 更新连接线</span>
    <span class="hljs-title function_ inline">updateConnectingLines</span>();
}, [skillRefs]);
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">网格计算解析</strong>：</p>
<p class="text-base leading-7 mb-4 text-foreground">核心思想是创建一个接近正方形的网格布局：</p>
<p class="text-base leading-7 mb-4 text-foreground"><span class="katex-display inline"><span class="katex inline"><span class="katex-mathml inline"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>列数</mtext><mo>=</mo><msqrt><mtext>技能数量</mtext></msqrt></mrow><annotation encoding="application/x-tex">列数 = \sqrt{技能数量}</annotation></semantics></math></span><span class="katex-html inline" aria-hidden="true" style="display:none"><span class="base inline"><span class="strut inline" style="height:0.6833em;"></span><span class="mord cjk_fallback inline">列数</span><span class="mspace inline" style="margin-right:0.2778em;"></span><span class="mrel inline">=</span><span class="mspace inline" style="margin-right:0.2778em;"></span></span><span class="base inline"><span class="strut inline" style="height:1.04em;vertical-align:-0.0645em;"></span><span class="mord sqrt inline"><span class="vlist-t vlist-t2 inline"><span class="vlist-r inline"><span class="vlist inline" style="height:0.9755em;"><span class="svg-align inline" style="top:-3em;"><span class="pstrut inline" style="height:3em;"></span><span class="mord inline" style="padding-left:0.833em;"><span class="mord cjk_fallback inline">技能数量</span></span></span><span style="top:-2.9355em;" class="inline"><span class="pstrut inline" style="height:3em;"></span><span class="hide-tail inline" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s inline">​</span></span><span class="vlist-r inline"><span class="vlist inline" style="height:0.0645em;"><span class="inline"></span></span></span></span></span></span></span></span></span><br class="block">
<span class="katex-display inline"><span class="katex inline"><span class="katex-mathml inline"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>行数</mtext><mo>=</mo><mfrac><mtext>技能数量</mtext><mtext>列数</mtext></mfrac></mrow><annotation encoding="application/x-tex">行数 = \frac{技能数量}{列数}</annotation></semantics></math></span><span class="katex-html inline" aria-hidden="true" style="display:none"><span class="base inline"><span class="strut inline" style="height:0.6833em;"></span><span class="mord cjk_fallback inline">行数</span><span class="mspace inline" style="margin-right:0.2778em;"></span><span class="mrel inline">=</span><span class="mspace inline" style="margin-right:0.2778em;"></span></span><span class="base inline"><span class="strut inline" style="height:2.0463em;vertical-align:-0.686em;"></span><span class="mord inline"><span class="mopen nulldelimiter inline"></span><span class="mfrac inline"><span class="vlist-t vlist-t2 inline"><span class="vlist-r inline"><span class="vlist inline" style="height:1.3603em;"><span style="top:-2.314em;" class="inline"><span class="pstrut inline" style="height:3em;"></span><span class="mord inline"><span class="mord cjk_fallback inline">列数</span></span></span><span style="top:-3.23em;" class="inline"><span class="pstrut inline" style="height:3em;"></span><span class="frac-line inline" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;" class="inline"><span class="pstrut inline" style="height:3em;"></span><span class="mord inline"><span class="mord cjk_fallback inline">技能数量</span></span></span></span><span class="vlist-s inline">​</span></span><span class="vlist-r inline"><span class="vlist inline" style="height:0.686em;"><span class="inline"></span></span></span></span></span><span class="mclose nulldelimiter inline"></span></span></span></span></span></span></p>
<p class="text-base leading-7 mb-4 text-foreground">例如，8个技能的计算过程：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><span class="katex inline"><span class="katex-mathml inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mn>8</mn></msqrt><mo>=</mo><mn>2.83</mn></mrow><annotation encoding="application/x-tex">\sqrt{8} = 2.83</annotation></semantics></math></span><span class="katex-html inline" aria-hidden="true" style="display:none"><span class="base inline"><span class="strut inline" style="height:1.04em;vertical-align:-0.1328em;"></span><span class="mord sqrt inline"><span class="vlist-t vlist-t2 inline"><span class="vlist-r inline"><span class="vlist inline" style="height:0.9072em;"><span class="svg-align inline" style="top:-3em;"><span class="pstrut inline" style="height:3em;"></span><span class="mord inline" style="padding-left:0.833em;"><span class="mord inline">8</span></span></span><span style="top:-2.8672em;" class="inline"><span class="pstrut inline" style="height:3em;"></span><span class="hide-tail inline" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s inline">​</span></span><span class="vlist-r inline"><span class="vlist inline" style="height:0.1328em;"><span class="inline"></span></span></span></span></span><span class="mspace inline" style="margin-right:0.2778em;"></span><span class="mrel inline">=</span><span class="mspace inline" style="margin-right:0.2778em;"></span></span><span class="base inline"><span class="strut inline" style="height:0.6444em;"></span><span class="mord inline">2.83</span></span></span></span></li>
<li class="text-foreground leading-relaxed"><span class="katex inline"><span class="katex-mathml inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>列数</mtext><mo>=</mo><mo stretchy="false">⌈</mo><mn>2.83</mn><mo stretchy="false">⌉</mo><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">列数 = \lceil 2.83 \rceil = 3</annotation></semantics></math></span><span class="katex-html inline" aria-hidden="true" style="display:none"><span class="base inline"><span class="strut inline" style="height:0.6833em;"></span><span class="mord cjk_fallback inline">列数</span><span class="mspace inline" style="margin-right:0.2778em;"></span><span class="mrel inline">=</span><span class="mspace inline" style="margin-right:0.2778em;"></span></span><span class="base inline"><span class="strut inline" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen inline">⌈</span><span class="mord inline">2.83</span><span class="mclose inline">⌉</span><span class="mspace inline" style="margin-right:0.2778em;"></span><span class="mrel inline">=</span><span class="mspace inline" style="margin-right:0.2778em;"></span></span><span class="base inline"><span class="strut inline" style="height:0.6444em;"></span><span class="mord inline">3</span></span></span></span></li>
<li class="text-foreground leading-relaxed"><span class="katex inline"><span class="katex-mathml inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>行数</mtext><mo>=</mo><mo stretchy="false">⌈</mo><mfrac><mn>8</mn><mn>3</mn></mfrac><mo stretchy="false">⌉</mo><mo>=</mo><mo stretchy="false">⌈</mo><mn>2.67</mn><mo stretchy="false">⌉</mo><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">行数 = \lceil \frac{8}{3} \rceil = \lceil 2.67 \rceil = 3</annotation></semantics></math></span><span class="katex-html inline" aria-hidden="true" style="display:none"><span class="base inline"><span class="strut inline" style="height:0.6833em;"></span><span class="mord cjk_fallback inline">行数</span><span class="mspace inline" style="margin-right:0.2778em;"></span><span class="mrel inline">=</span><span class="mspace inline" style="margin-right:0.2778em;"></span></span><span class="base inline"><span class="strut inline" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mopen inline">⌈</span><span class="mord inline"><span class="mopen nulldelimiter inline"></span><span class="mfrac inline"><span class="vlist-t vlist-t2 inline"><span class="vlist-r inline"><span class="vlist inline" style="height:0.8451em;"><span style="top:-2.655em;" class="inline"><span class="pstrut inline" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight inline"><span class="mord mtight inline"><span class="mord mtight inline">3</span></span></span></span><span style="top:-3.23em;" class="inline"><span class="pstrut inline" style="height:3em;"></span><span class="frac-line inline" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;" class="inline"><span class="pstrut inline" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight inline"><span class="mord mtight inline"><span class="mord mtight inline">8</span></span></span></span></span><span class="vlist-s inline">​</span></span><span class="vlist-r inline"><span class="vlist inline" style="height:0.345em;"><span class="inline"></span></span></span></span></span><span class="mclose nulldelimiter inline"></span></span><span class="mclose inline">⌉</span><span class="mspace inline" style="margin-right:0.2778em;"></span><span class="mrel inline">=</span><span class="mspace inline" style="margin-right:0.2778em;"></span></span><span class="base inline"><span class="strut inline" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen inline">⌈</span><span class="mord inline">2.67</span><span class="mclose inline">⌉</span><span class="mspace inline" style="margin-right:0.2778em;"></span><span class="mrel inline">=</span><span class="mspace inline" style="margin-right:0.2778em;"></span></span><span class="base inline"><span class="strut inline" style="height:0.6444em;"></span><span class="mord inline">3</span></span></span></span></li>
</ul>
<p class="text-base leading-7 mb-4 text-foreground">最终得到一个 3×3 的网格，其中最后一个位置为空。</p>
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">居中对齐的几何计算</strong>：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="const%20startX%20%3D%20padding%20%2B%20(cellWidth%20%2F%202)%20-%2038%3B%0Aconst%20startY%20%3D%20padding%20%2B%20(cellHeight%20%2F%202)%20-%2038%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">const</span> startX = padding + (cellWidth / <span class="hljs-number inline">2</span>) - <span class="hljs-number inline">38</span>;
<span class="hljs-keyword inline">const</span> startY = padding + (cellHeight / <span class="hljs-number inline">2</span>) - <span class="hljs-number inline">38</span>;
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">确保每个气泡的中心点对齐到网格的中心点：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>cellWidth / 2</code>: 网格单元的中心</li>
<li class="text-foreground leading-relaxed"><code>- 38</code>: 气泡半径的偏移（75px / 2 ≈ 38px）</li>
</ul>
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">响应式间距的动态计算</strong>：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="const%20cellWidth%20%3D%20availableWidth%20%2F%20cols%3B%0Aconst%20cellHeight%20%3D%20availableHeight%20%2F%20rows%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">const</span> cellWidth = availableWidth / cols;
<span class="hljs-keyword inline">const</span> cellHeight = availableHeight / rows;
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">无论容器大小如何变化，网格都会自动调整间距，保持完美的比例和对齐。</p>
<h2 id="保底概率" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#保底概率" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 保底概率">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            保底概率
        </h2>
<h3 id="点击概率机制" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#点击概率机制" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 点击概率机制">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            点击概率机制
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%2F%2F%20%E6%95%B4%E9%BD%90%E5%B8%83%E5%B1%80%E7%9A%84%E6%A6%82%E7%8E%87%E7%B3%BB%E7%BB%9F%0Aconst%20%5BclickCount%2C%20setClickCount%5D%20%3D%20useState(0)%3B%0Aconst%20baseProbability%20%3D%200.1%3B%20%2F%2F%2010%25%E5%9F%BA%E7%A1%80%E6%A6%82%E7%8E%87">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-comment inline">// 整齐布局的概率系统</span>
<span class="hljs-keyword inline">const</span> [clickCount, setClickCount] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-number inline">0</span>);
<span class="hljs-keyword inline">const</span> baseProbability = <span class="hljs-number inline">0.1</span>; <span class="hljs-comment inline">// 10%基础概率</span>
</code></pre>
            </div>
        

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%2F%2F%20%E5%B8%A6%E6%A6%82%E7%8E%87%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%8A%82%E6%B5%81%E7%82%B9%E5%87%BB%E5%A4%84%E7%90%86%E5%99%A8%0Aconst%20handleContainerClick%20%3D%20useCallback(()%20%3D%3E%20%7B%0Aconst%20currentTime%20%3D%20Date.now()%3B%0Aif%20(currentTime%20-%20lastClickTime.current%20%3E%3D%20throttleDelay)%20%7B%0AlastClickTime.current%20%3D%20currentTime%3B%0A%2F%2F%20%E8%AE%A1%E7%AE%97%E5%BD%93%E5%89%8D%E6%A6%82%E7%8E%87%EF%BC%88%E9%9A%8F%E6%AF%8F%E6%AC%A1%E7%82%B9%E5%87%BB%E9%80%92%E5%A2%9E%EF%BC%89%0Aconst%20currentProbability%20%3D%20Math.min(baseProbability%20%2B%20(clickCount%20*%200.15)%2C%200.9)%3B%20%2F%2F%20%E6%9C%80%E5%A4%A790%25%0Aconst%20shouldUseNeatArrangement%20%3D%20Math.random()%20if%20(shouldUseNeatArrangement)%20%7B%0AupdatePositionsNeat()%3B%0AsetClickCount(0)%3B%20%2F%2F%20%E6%88%90%E5%8A%9F%E6%95%B4%E9%BD%90%E5%B8%83%E5%B1%80%E5%90%8E%E9%87%8D%E7%BD%AE%E6%A6%82%E7%8E%87%0A%7D%20else%20%7B%0AupdatePositions()%3B%0AsetClickCount(prev%20%3D%3E%20prev%20%2B%201)%3B%20%2F%2F%20%E5%A2%9E%E5%8A%A0%E7%82%B9%E5%87%BB%E8%AE%A1%E6%95%B0%E4%BB%A5%E6%8F%90%E9%AB%98%E6%A6%82%E7%8E%87%0A%7D%0A%7D%0A%7D%2C%20%5BupdatePositions%2C%20updatePositionsNeat%2C%20clickCount%2C%20baseProbability%2C%20throttleDelay%5D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-comment inline">// 带概率系统的节流点击处理器</span>
<span class="hljs-keyword inline">const</span> handleContainerClick = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-keyword inline">const</span> currentTime = <span class="hljs-title class_ inline">Date</span>.<span class="hljs-title function_ inline">now</span>();
    <span class="hljs-keyword inline">if</span> (currentTime - lastClickTime.<span class="hljs-property inline">current</span> &gt;= throttleDelay) {
        lastClickTime.<span class="hljs-property inline">current</span> = currentTime;

        <span class="hljs-comment inline">// 计算当前概率（随每次点击递增）</span>
        <span class="hljs-keyword inline">const</span> currentProbability = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">min</span>(baseProbability + (clickCount * <span class="hljs-number inline">0.15</span>), <span class="hljs-number inline">0.9</span>); <span class="hljs-comment inline">// 最大90%</span>
        <span class="hljs-keyword inline">const</span> shouldUseNeatArrangement = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">random</span>() &lt; currentProbability;

        <span class="hljs-keyword inline">if</span> (shouldUseNeatArrangement) {
            <span class="hljs-title function_ inline">updatePositionsNeat</span>();
            <span class="hljs-title function_ inline">setClickCount</span>(<span class="hljs-number inline">0</span>); <span class="hljs-comment inline">// 成功整齐布局后重置概率</span>
        } <span class="hljs-keyword inline">else</span> {
            <span class="hljs-title function_ inline">updatePositions</span>();
            <span class="hljs-title function_ inline">setClickCount</span>(<span class="hljs-function inline"><span class="hljs-params inline">prev</span> =&gt;</span> prev + <span class="hljs-number inline">1</span>); <span class="hljs-comment inline">// 增加点击计数以提高概率</span>
        }
    }
}, [updatePositions, updatePositionsNeat, clickCount, baseProbability, throttleDelay]);
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">概率递增算法</strong>：</p>
<p class="text-base leading-7 mb-4 text-foreground"><span class="katex-display inline"><span class="katex inline"><span class="katex-mathml inline"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mtext>整齐布局</mtext><mo stretchy="false">)</mo><mo>=</mo><mi>min</mi><mo>⁡</mo><mo stretchy="false">(</mo><mn>0.1</mn><mo>+</mo><mtext>点击次数</mtext><mo>×</mo><mn>0.15</mn><mo separator="true">,</mo><mn>0.9</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(整齐布局) = \min(0.1 + 点击次数 \times 0.15, 0.9)</annotation></semantics></math></span><span class="katex-html inline" aria-hidden="true" style="display:none"><span class="base inline"><span class="strut inline" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal inline" style="margin-right:0.13889em;">P</span><span class="mopen inline">(</span><span class="mord cjk_fallback inline">整齐布局</span><span class="mclose inline">)</span><span class="mspace inline" style="margin-right:0.2778em;"></span><span class="mrel inline">=</span><span class="mspace inline" style="margin-right:0.2778em;"></span></span><span class="base inline"><span class="strut inline" style="height:1em;vertical-align:-0.25em;"></span><span class="mop inline">min</span><span class="mopen inline">(</span><span class="mord inline">0.1</span><span class="mspace inline" style="margin-right:0.2222em;"></span><span class="mbin inline">+</span><span class="mspace inline" style="margin-right:0.2222em;"></span></span><span class="base inline"><span class="strut inline" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord cjk_fallback inline">点击次数</span><span class="mspace inline" style="margin-right:0.2222em;"></span><span class="mbin inline">×</span><span class="mspace inline" style="margin-right:0.2222em;"></span></span><span class="base inline"><span class="strut inline" style="height:1em;vertical-align:-0.25em;"></span><span class="mord inline">0.15</span><span class="mpunct inline">,</span><span class="mspace inline" style="margin-right:0.1667em;"></span><span class="mord inline">0.9</span><span class="mclose inline">)</span></span></span></span></span></p>
<table class="w-full border-collapse mb-4 shadow-sm rounded-lg overflow-hidden">
<thead class="bg-surface">
<tr class="border-b border-gray-200"><th class="px-4 py-3 text-left text-xs font-medium text-foreground uppercase tracking-wider bg-surface">点击次数</th><th class="px-4 py-3 text-left text-xs font-medium text-foreground uppercase tracking-wider bg-surface">概率值</th></tr>
</thead>
<tbody class="bg-background divide-y divide-gray-200">
<tr class="border-b border-gray-200"><td class="px-4 py-3 text-sm text-foreground">1</td><td class="px-4 py-3 text-sm text-foreground">10%</td></tr>
<tr class="border-b border-gray-200"><td class="px-4 py-3 text-sm text-foreground">3</td><td class="px-4 py-3 text-sm text-foreground">55%</td></tr>
<tr class="border-b border-gray-200"><td class="px-4 py-3 text-sm text-foreground">5</td><td class="px-4 py-3 text-sm text-foreground">85%</td></tr>
<tr class="border-b border-gray-200"><td class="px-4 py-3 text-sm text-foreground">6+</td><td class="px-4 py-3 text-sm text-foreground">90%</td></tr>
</tbody>
</table>
<p class="text-base leading-7 mb-4 text-foreground">确保用户在若干次点击后能够一次性清晰地阅览所有技能。</p>
<h3 id="节流防抖" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#节流防抖" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 节流防抖">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            节流防抖
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="const%20lastClickTime%20%3D%20useRefnumber%3E(0)%3B%0Aconst%20throttleDelay%20%3D%20500%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">const</span> lastClickTime = useRef&lt;<span class="hljs-built_in inline">number</span>&gt;(<span class="hljs-number inline">0</span>);
<span class="hljs-keyword inline">const</span> throttleDelay = <span class="hljs-number inline">500</span>;
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">500ms间隔</strong></p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="if%20(currentTime%20-%20lastClickTime.current%20%3E%3D%20throttleDelay)%20%7B%0AlastClickTime.current%20%3D%20currentTime%3B%0A%2F%2F%20%E6%89%A7%E8%A1%8C%E5%B8%83%E5%B1%80%E5%88%87%E6%8D%A2%E9%80%BB%E8%BE%91%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">if</span> (currentTime - lastClickTime.<span class="hljs-property inline">current</span> &gt;= throttleDelay) {
    lastClickTime.<span class="hljs-property inline">current</span> = currentTime;
    <span class="hljs-comment inline">// 执行布局切换逻辑</span>
}
</code></pre>
            </div>
        
<h2 id="svg-连接线" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#svg-连接线" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to SVG 连接线">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            SVG 连接线
        </h2>
<h3 id="动态线条生成" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#动态线条生成" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 动态线条生成">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            动态线条生成
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%2F%2F%20%E6%9B%B4%E6%96%B0SVG%E8%BF%9E%E6%8E%A5%E7%BA%BF%0Aconst%20updateConnectingLines%20%3D%20useCallback(()%20%3D%3E%20%7B%0Aif%20(!svgRef.current%20%7C%7C%20!containerSize.x%20%7C%7C%20!containerSize.y)%20return%3B%0Aconst%20svg%20%3D%20svgRef.current%3B%0A%2F%2F%20%E6%B8%85%E9%99%A4%E7%8E%B0%E6%9C%89%E7%BA%BF%E6%9D%A1%0Asvg.innerHTML%20%3D%20''%3B%0AskillRefs.forEach((skillRef%2C%20index)%20%3D%3E%20%7B%0Aif%20(index%20%3D%3D%3D%20skillRefs.length%20-%201)%20return%3B%0Aconst%20currentPos%20%3D%20skillRef.position%3B%0Aconst%20nextPos%20%3D%20skillRefs%5Bindex%20%2B%201%5D.position%3B%0Aconst%20x1%20%3D%20(currentPos.x%20%2F%20containerSize.x)%20*%20100%20-%2080%3B%0Aconst%20y1%20%3D%20(currentPos.y%20%2F%20containerSize.y)%20*%20100%3B%0Aconst%20x2%20%3D%20(nextPos.x%20%2F%20containerSize.x)%20*%20100%20-%2080%3B%0Aconst%20y2%20%3D%20(nextPos.y%20%2F%20containerSize.y)%20*%20100%20%2B%2075%3B%0Aconst%20line%20%3D%20document.createElementNS(%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%2C%20%22line%22)%3B%0Aline.setAttribute(%22x1%22%2C%20%60%24%7Bx1%7D%25%60)%3B%0Aline.setAttribute(%22y1%22%2C%20%60%24%7By1%7D%25%60)%3B%0Aline.setAttribute(%22x2%22%2C%20%60%24%7Bx2%7D%25%60)%3B%0Aline.setAttribute(%22y2%22%2C%20%60%24%7By2%7D%25%60)%3B%0Aline.setAttribute(%22stroke%22%2C%20%22currentColor%22)%3B%0Aline.setAttribute(%22stroke-width%22%2C%20%221%22)%3B%0Aline.setAttribute(%22stroke-dasharray%22%2C%20%225%2C5%22)%3B%0Aline.setAttribute(%22class%22%2C%20%22text-primary%2F30%22)%3B%0Aline.style.opacity%20%3D%20'0'%3B%0Asvg.appendChild(line)%3B%0A%2F%2F%20%E7%BA%BF%E6%9D%A1%E5%87%BA%E7%8E%B0%E5%8A%A8%E7%94%BB%0AsetTimeout(()%20%3D%3E%20%7B%0Aline.style.transition%20%3D%20'opacity%202s%20ease-in-out'%3B%0Aline.style.opacity%20%3D%20'0.3'%3B%0A%7D%2C%202000%20%2B%20index%20*%20100)%3B%0A%7D)%3B%0A%7D%2C%20%5BskillRefs%2C%20containerSize%5D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-comment inline">// 更新SVG连接线</span>
<span class="hljs-keyword inline">const</span> updateConnectingLines = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-keyword inline">if</span> (!svgRef.<span class="hljs-property inline">current</span> || !containerSize.<span class="hljs-property inline">x</span> || !containerSize.<span class="hljs-property inline">y</span>) <span class="hljs-keyword inline">return</span>;

    <span class="hljs-keyword inline">const</span> svg = svgRef.<span class="hljs-property inline">current</span>;
    <span class="hljs-comment inline">// 清除现有线条</span>
    svg.<span class="hljs-property inline">innerHTML</span> = <span class="hljs-string inline">&#x27;&#x27;</span>;

    skillRefs.<span class="hljs-title function_ inline">forEach</span>(<span class="hljs-function inline">(<span class="hljs-params inline">skillRef, index</span>) =&gt;</span> {
        <span class="hljs-keyword inline">if</span> (index === skillRefs.<span class="hljs-property inline">length</span> - <span class="hljs-number inline">1</span>) <span class="hljs-keyword inline">return</span>;

        <span class="hljs-keyword inline">const</span> currentPos = skillRef.<span class="hljs-property inline">position</span>;
        <span class="hljs-keyword inline">const</span> nextPos = skillRefs[index + <span class="hljs-number inline">1</span>].<span class="hljs-property inline">position</span>;

        <span class="hljs-keyword inline">const</span> x1 = (currentPos.<span class="hljs-property inline">x</span> / containerSize.<span class="hljs-property inline">x</span>) * <span class="hljs-number inline">100</span> - <span class="hljs-number inline">80</span>;
        <span class="hljs-keyword inline">const</span> y1 = (currentPos.<span class="hljs-property inline">y</span> / containerSize.<span class="hljs-property inline">y</span>) * <span class="hljs-number inline">100</span>;
        <span class="hljs-keyword inline">const</span> x2 = (nextPos.<span class="hljs-property inline">x</span> / containerSize.<span class="hljs-property inline">x</span>) * <span class="hljs-number inline">100</span> - <span class="hljs-number inline">80</span>;
        <span class="hljs-keyword inline">const</span> y2 = (nextPos.<span class="hljs-property inline">y</span> / containerSize.<span class="hljs-property inline">y</span>) * <span class="hljs-number inline">100</span> + <span class="hljs-number inline">75</span>;

        <span class="hljs-keyword inline">const</span> line = <span class="hljs-variable language_ inline">document</span>.<span class="hljs-title function_ inline">createElementNS</span>(<span class="hljs-string inline">&quot;http://www.w3.org/2000/svg&quot;</span>, <span class="hljs-string inline">&quot;line&quot;</span>);
        line.<span class="hljs-title function_ inline">setAttribute</span>(<span class="hljs-string inline">&quot;x1&quot;</span>, <span class="hljs-string inline">`<span class="hljs-subst inline">${x1}</span>%`</span>);
        line.<span class="hljs-title function_ inline">setAttribute</span>(<span class="hljs-string inline">&quot;y1&quot;</span>, <span class="hljs-string inline">`<span class="hljs-subst inline">${y1}</span>%`</span>);
        line.<span class="hljs-title function_ inline">setAttribute</span>(<span class="hljs-string inline">&quot;x2&quot;</span>, <span class="hljs-string inline">`<span class="hljs-subst inline">${x2}</span>%`</span>);
        line.<span class="hljs-title function_ inline">setAttribute</span>(<span class="hljs-string inline">&quot;y2&quot;</span>, <span class="hljs-string inline">`<span class="hljs-subst inline">${y2}</span>%`</span>);
        line.<span class="hljs-title function_ inline">setAttribute</span>(<span class="hljs-string inline">&quot;stroke&quot;</span>, <span class="hljs-string inline">&quot;currentColor&quot;</span>);
        line.<span class="hljs-title function_ inline">setAttribute</span>(<span class="hljs-string inline">&quot;stroke-width&quot;</span>, <span class="hljs-string inline">&quot;1&quot;</span>);
        line.<span class="hljs-title function_ inline">setAttribute</span>(<span class="hljs-string inline">&quot;stroke-dasharray&quot;</span>, <span class="hljs-string inline">&quot;5,5&quot;</span>);
        line.<span class="hljs-title function_ inline">setAttribute</span>(<span class="hljs-string inline">&quot;class&quot;</span>, <span class="hljs-string inline">&quot;text-primary/30&quot;</span>);
        line.<span class="hljs-property inline">style</span>.<span class="hljs-property inline">opacity</span> = <span class="hljs-string inline">&#x27;0&#x27;</span>;

        svg.<span class="hljs-title function_ inline">appendChild</span>(line);

        <span class="hljs-comment inline">// 线条出现动画</span>
        <span class="hljs-built_in inline">setTimeout</span>(<span class="hljs-function inline">() =&gt;</span> {
            line.<span class="hljs-property inline">style</span>.<span class="hljs-property inline">transition</span> = <span class="hljs-string inline">&#x27;opacity 2s ease-in-out&#x27;</span>;
            line.<span class="hljs-property inline">style</span>.<span class="hljs-property inline">opacity</span> = <span class="hljs-string inline">&#x27;0.3&#x27;</span>;
        }, <span class="hljs-number inline">2000</span> + index * <span class="hljs-number inline">100</span>);
    });
}, [skillRefs, containerSize]);
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">坐标变换的数学原理</strong>：</p>
<p class="text-base leading-7 mb-4 text-foreground">从像素坐标到SVG百分比坐标的转换：</p>
<p class="text-base leading-7 mb-4 text-foreground"><span class="katex-display inline"><span class="katex inline"><span class="katex-mathml inline"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>S</mi><mi>V</mi><msub><mi>G</mi><mi>x</mi></msub><mo>=</mo><mfrac><mrow><mi>P</mi><mi>i</mi><mi>x</mi><mi>e</mi><msub><mi>l</mi><mi>x</mi></msub></mrow><mrow><mi>C</mi><mi>o</mi><mi>n</mi><mi>t</mi><mi>a</mi><mi>i</mi><mi>n</mi><mi>e</mi><msub><mi>r</mi><mrow><mi>w</mi><mi>i</mi><mi>d</mi><mi>t</mi><mi>h</mi></mrow></msub></mrow></mfrac><mo>×</mo><mn>100</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">SVG_x = \frac{Pixel_x}{Container_{width}} \times 100\%</annotation></semantics></math></span><span class="katex-html inline" aria-hidden="true" style="display:none"><span class="base inline"><span class="strut inline" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal inline" style="margin-right:0.05764em;">S</span><span class="mord mathnormal inline" style="margin-right:0.22222em;">V</span><span class="mord inline"><span class="mord mathnormal inline">G</span><span class="msupsub inline"><span class="vlist-t vlist-t2 inline"><span class="vlist-r inline"><span class="vlist inline" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;" class="inline"><span class="pstrut inline" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight inline"><span class="mord mathnormal mtight inline">x</span></span></span></span><span class="vlist-s inline">​</span></span><span class="vlist-r inline"><span class="vlist inline" style="height:0.15em;"><span class="inline"></span></span></span></span></span></span><span class="mspace inline" style="margin-right:0.2778em;"></span><span class="mrel inline">=</span><span class="mspace inline" style="margin-right:0.2778em;"></span></span><span class="base inline"><span class="strut inline" style="height:2.2074em;vertical-align:-0.836em;"></span><span class="mord inline"><span class="mopen nulldelimiter inline"></span><span class="mfrac inline"><span class="vlist-t vlist-t2 inline"><span class="vlist-r inline"><span class="vlist inline" style="height:1.3714em;"><span style="top:-2.314em;" class="inline"><span class="pstrut inline" style="height:3em;"></span><span class="mord inline"><span class="mord mathnormal inline" style="margin-right:0.07153em;">C</span><span class="mord mathnormal inline">o</span><span class="mord mathnormal inline">n</span><span class="mord mathnormal inline">t</span><span class="mord mathnormal inline">ain</span><span class="mord mathnormal inline">e</span><span class="mord inline"><span class="mord mathnormal inline" style="margin-right:0.02778em;">r</span><span class="msupsub inline"><span class="vlist-t vlist-t2 inline"><span class="vlist-r inline"><span class="vlist inline" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;" class="inline"><span class="pstrut inline" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight inline"><span class="mord mtight inline"><span class="mord mathnormal mtight inline" style="margin-right:0.02691em;">w</span><span class="mord mathnormal mtight inline">i</span><span class="mord mathnormal mtight inline">d</span><span class="mord mathnormal mtight inline">t</span><span class="mord mathnormal mtight inline">h</span></span></span></span></span><span class="vlist-s inline">​</span></span><span class="vlist-r inline"><span class="vlist inline" style="height:0.15em;"><span class="inline"></span></span></span></span></span></span></span></span><span style="top:-3.23em;" class="inline"><span class="pstrut inline" style="height:3em;"></span><span class="frac-line inline" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;" class="inline"><span class="pstrut inline" style="height:3em;"></span><span class="mord inline"><span class="mord mathnormal inline" style="margin-right:0.13889em;">P</span><span class="mord mathnormal inline">i</span><span class="mord mathnormal inline">x</span><span class="mord mathnormal inline">e</span><span class="mord inline"><span class="mord mathnormal inline" style="margin-right:0.01968em;">l</span><span class="msupsub inline"><span class="vlist-t vlist-t2 inline"><span class="vlist-r inline"><span class="vlist inline" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0197em;margin-right:0.05em;" class="inline"><span class="pstrut inline" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight inline"><span class="mord mathnormal mtight inline">x</span></span></span></span><span class="vlist-s inline">​</span></span><span class="vlist-r inline"><span class="vlist inline" style="height:0.15em;"><span class="inline"></span></span></span></span></span></span></span></span></span><span class="vlist-s inline">​</span></span><span class="vlist-r inline"><span class="vlist inline" style="height:0.836em;"><span class="inline"></span></span></span></span></span><span class="mclose nulldelimiter inline"></span></span><span class="mspace inline" style="margin-right:0.2222em;"></span><span class="mbin inline">×</span><span class="mspace inline" style="margin-right:0.2222em;"></span></span><span class="base inline"><span class="strut inline" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord inline">100%</span></span></span></span></span><br class="block">
<span class="katex-display inline"><span class="katex inline"><span class="katex-mathml inline"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>S</mi><mi>V</mi><msub><mi>G</mi><mi>y</mi></msub><mo>=</mo><mfrac><mrow><mi>P</mi><mi>i</mi><mi>x</mi><mi>e</mi><msub><mi>l</mi><mi>y</mi></msub></mrow><mrow><mi>C</mi><mi>o</mi><mi>n</mi><mi>t</mi><mi>a</mi><mi>i</mi><mi>n</mi><mi>e</mi><msub><mi>r</mi><mrow><mi>h</mi><mi>e</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi></mrow></msub></mrow></mfrac><mo>×</mo><mn>100</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">SVG_y = \frac{Pixel_y}{Container_{height}} \times 100\%</annotation></semantics></math></span><span class="katex-html inline" aria-hidden="true" style="display:none"><span class="base inline"><span class="strut inline" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord mathnormal inline" style="margin-right:0.05764em;">S</span><span class="mord mathnormal inline" style="margin-right:0.22222em;">V</span><span class="mord inline"><span class="mord mathnormal inline">G</span><span class="msupsub inline"><span class="vlist-t vlist-t2 inline"><span class="vlist-r inline"><span class="vlist inline" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;" class="inline"><span class="pstrut inline" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight inline"><span class="mord mathnormal mtight inline" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s inline">​</span></span><span class="vlist-r inline"><span class="vlist inline" style="height:0.2861em;"><span class="inline"></span></span></span></span></span></span><span class="mspace inline" style="margin-right:0.2778em;"></span><span class="mrel inline">=</span><span class="mspace inline" style="margin-right:0.2778em;"></span></span><span class="base inline"><span class="strut inline" style="height:2.3435em;vertical-align:-0.9721em;"></span><span class="mord inline"><span class="mopen nulldelimiter inline"></span><span class="mfrac inline"><span class="vlist-t vlist-t2 inline"><span class="vlist-r inline"><span class="vlist inline" style="height:1.3714em;"><span style="top:-2.314em;" class="inline"><span class="pstrut inline" style="height:3em;"></span><span class="mord inline"><span class="mord mathnormal inline" style="margin-right:0.07153em;">C</span><span class="mord mathnormal inline">o</span><span class="mord mathnormal inline">n</span><span class="mord mathnormal inline">t</span><span class="mord mathnormal inline">ain</span><span class="mord mathnormal inline">e</span><span class="mord inline"><span class="mord mathnormal inline" style="margin-right:0.02778em;">r</span><span class="msupsub inline"><span class="vlist-t vlist-t2 inline"><span class="vlist-r inline"><span class="vlist inline" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;" class="inline"><span class="pstrut inline" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight inline"><span class="mord mtight inline"><span class="mord mathnormal mtight inline">h</span><span class="mord mathnormal mtight inline">e</span><span class="mord mathnormal mtight inline">i</span><span class="mord mathnormal mtight inline" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight inline">h</span><span class="mord mathnormal mtight inline">t</span></span></span></span></span><span class="vlist-s inline">​</span></span><span class="vlist-r inline"><span class="vlist inline" style="height:0.2861em;"><span class="inline"></span></span></span></span></span></span></span></span><span style="top:-3.23em;" class="inline"><span class="pstrut inline" style="height:3em;"></span><span class="frac-line inline" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;" class="inline"><span class="pstrut inline" style="height:3em;"></span><span class="mord inline"><span class="mord mathnormal inline" style="margin-right:0.13889em;">P</span><span class="mord mathnormal inline">i</span><span class="mord mathnormal inline">x</span><span class="mord mathnormal inline">e</span><span class="mord inline"><span class="mord mathnormal inline" style="margin-right:0.01968em;">l</span><span class="msupsub inline"><span class="vlist-t vlist-t2 inline"><span class="vlist-r inline"><span class="vlist inline" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0197em;margin-right:0.05em;" class="inline"><span class="pstrut inline" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight inline"><span class="mord mathnormal mtight inline" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s inline">​</span></span><span class="vlist-r inline"><span class="vlist inline" style="height:0.2861em;"><span class="inline"></span></span></span></span></span></span></span></span></span><span class="vlist-s inline">​</span></span><span class="vlist-r inline"><span class="vlist inline" style="height:0.9721em;"><span class="inline"></span></span></span></span></span><span class="mclose nulldelimiter inline"></span></span><span class="mspace inline" style="margin-right:0.2222em;"></span><span class="mbin inline">×</span><span class="mspace inline" style="margin-right:0.2222em;"></span></span><span class="base inline"><span class="strut inline" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord inline">100%</span></span></span></span></span></p>
<h3 id="线条动画编排" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#线条动画编排" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 线条动画编排">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            线条动画编排
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%2F%2F%20%E7%BA%BF%E6%9D%A1%E5%87%BA%E7%8E%B0%E5%8A%A8%E7%94%BB%0AsetTimeout(()%20%3D%3E%20%7B%0Aline.style.transition%20%3D%20'opacity%202s%20ease-in-out'%3B%0Aline.style.opacity%20%3D%20'0.3'%3B%0A%7D%2C%202000%20%2B%20index%20*%20100)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-comment inline">// 线条出现动画</span>
<span class="hljs-built_in inline">setTimeout</span>(<span class="hljs-function inline">() =&gt;</span> {
    line.<span class="hljs-property inline">style</span>.<span class="hljs-property inline">transition</span> = <span class="hljs-string inline">&#x27;opacity 2s ease-in-out&#x27;</span>;
    line.<span class="hljs-property inline">style</span>.<span class="hljs-property inline">opacity</span> = <span class="hljs-string inline">&#x27;0.3&#x27;</span>;
}, <span class="hljs-number inline">2000</span> + index * <span class="hljs-number inline">100</span>);
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">渐进式显示的时序设计</strong>：</p>
<p class="text-base leading-7 mb-4 text-foreground"><span class="katex-display inline"><span class="katex inline"><span class="katex-mathml inline"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>延迟时间</mtext><mo>=</mo><mn>2000</mn><mo>+</mo><mi>i</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>x</mi><mo>×</mo><mn>100</mn></mrow><annotation encoding="application/x-tex">延迟时间 = 2000 + index \times 100</annotation></semantics></math></span><span class="katex-html inline" aria-hidden="true" style="display:none"><span class="base inline"><span class="strut inline" style="height:0.6833em;"></span><span class="mord cjk_fallback inline">延迟时间</span><span class="mspace inline" style="margin-right:0.2778em;"></span><span class="mrel inline">=</span><span class="mspace inline" style="margin-right:0.2778em;"></span></span><span class="base inline"><span class="strut inline" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord inline">2000</span><span class="mspace inline" style="margin-right:0.2222em;"></span><span class="mbin inline">+</span><span class="mspace inline" style="margin-right:0.2222em;"></span></span><span class="base inline"><span class="strut inline" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal inline">in</span><span class="mord mathnormal inline">d</span><span class="mord mathnormal inline">e</span><span class="mord mathnormal inline">x</span><span class="mspace inline" style="margin-right:0.2222em;"></span><span class="mbin inline">×</span><span class="mspace inline" style="margin-right:0.2222em;"></span></span><span class="base inline"><span class="strut inline" style="height:0.6444em;"></span><span class="mord inline">100</span></span></span></span></span></p>
<p class="text-base leading-7 mb-4 text-foreground">公式解析：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">基础延迟 2秒</strong>: 给气泡足够的入场时间</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">递增间隔 100ms</strong>: 线条按顺序依次显现</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">总时间控制</strong>: 对于8个气泡，最后一条线在2.7秒时出现</li>
</ul>
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">线条牵引逻辑</strong>：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%2F%2F%20%E8%BF%9E%E6%8E%A5%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E5%88%B0%E7%AC%AC%E4%B8%80%E4%B8%AA%0Aif%20(skillRefs.length%20%3E%202)%20%7B%0Aconst%20lastPos%20%3D%20skillRefs%5BskillRefs.length%20-%201%5D.position%3B%0Aconst%20firstPos%20%3D%20skillRefs%5B0%5D.position%3B%0Aconst%20x1%20%3D%20(lastPos.x%20%2F%20containerSize.x)%20*%20100%3B%0Aconst%20y1%20%3D%20(lastPos.y%20%2F%20containerSize.y)%20*%20100%3B%0Aconst%20x2%20%3D%20(firstPos.x%20%2F%20containerSize.x)%20*%20100%3B%0Aconst%20y2%20%3D%20(firstPos.y%20%2F%20containerSize.y)%20*%20100%3B%0Aconst%20line%20%3D%20document.createElementNS(%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%2C%20%22line%22)%3B%0Aline.setAttribute(%22x1%22%2C%20%60%24%7Bx1%7D%25%60)%3B%0Aline.setAttribute(%22y1%22%2C%20%60%24%7By1%7D%25%60)%3B%0Aline.setAttribute(%22x2%22%2C%20%60%24%7Bx2%7D%25%60)%3B%0Aline.setAttribute(%22y2%22%2C%20%60%24%7By2%7D%25%60)%3B%0Aline.setAttribute(%22stroke%22%2C%20%22currentColor%22)%3B%0Aline.setAttribute(%22stroke-width%22%2C%20%221%22)%3B%0Aline.setAttribute(%22stroke-dasharray%22%2C%20%225%2C5%22)%3B%0Aline.setAttribute(%22class%22%2C%20%22text-primary%2F30%22)%3B%0Aline.style.opacity%20%3D%20'0'%3B%0Asvg.appendChild(line)%3B%0AsetTimeout(()%20%3D%3E%20%7B%0Aline.style.transition%20%3D%20'opacity%202s%20ease-in-out'%3B%0Aline.style.opacity%20%3D%20'0.3'%3B%0A%7D%2C%202000%20%2B%20skillRefs.length%20*%20100)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-comment inline">// 连接最后一个到第一个</span>
<span class="hljs-keyword inline">if</span> (skillRefs.<span class="hljs-property inline">length</span> &gt; <span class="hljs-number inline">2</span>) {
    <span class="hljs-keyword inline">const</span> lastPos = skillRefs[skillRefs.<span class="hljs-property inline">length</span> - <span class="hljs-number inline">1</span>].<span class="hljs-property inline">position</span>;
    <span class="hljs-keyword inline">const</span> firstPos = skillRefs[<span class="hljs-number inline">0</span>].<span class="hljs-property inline">position</span>;

    <span class="hljs-keyword inline">const</span> x1 = (lastPos.<span class="hljs-property inline">x</span> / containerSize.<span class="hljs-property inline">x</span>) * <span class="hljs-number inline">100</span>;
    <span class="hljs-keyword inline">const</span> y1 = (lastPos.<span class="hljs-property inline">y</span> / containerSize.<span class="hljs-property inline">y</span>) * <span class="hljs-number inline">100</span>;
    <span class="hljs-keyword inline">const</span> x2 = (firstPos.<span class="hljs-property inline">x</span> / containerSize.<span class="hljs-property inline">x</span>) * <span class="hljs-number inline">100</span>;
    <span class="hljs-keyword inline">const</span> y2 = (firstPos.<span class="hljs-property inline">y</span> / containerSize.<span class="hljs-property inline">y</span>) * <span class="hljs-number inline">100</span>;

    <span class="hljs-keyword inline">const</span> line = <span class="hljs-variable language_ inline">document</span>.<span class="hljs-title function_ inline">createElementNS</span>(<span class="hljs-string inline">&quot;http://www.w3.org/2000/svg&quot;</span>, <span class="hljs-string inline">&quot;line&quot;</span>);
    line.<span class="hljs-title function_ inline">setAttribute</span>(<span class="hljs-string inline">&quot;x1&quot;</span>, <span class="hljs-string inline">`<span class="hljs-subst inline">${x1}</span>%`</span>);
    line.<span class="hljs-title function_ inline">setAttribute</span>(<span class="hljs-string inline">&quot;y1&quot;</span>, <span class="hljs-string inline">`<span class="hljs-subst inline">${y1}</span>%`</span>);
    line.<span class="hljs-title function_ inline">setAttribute</span>(<span class="hljs-string inline">&quot;x2&quot;</span>, <span class="hljs-string inline">`<span class="hljs-subst inline">${x2}</span>%`</span>);
    line.<span class="hljs-title function_ inline">setAttribute</span>(<span class="hljs-string inline">&quot;y2&quot;</span>, <span class="hljs-string inline">`<span class="hljs-subst inline">${y2}</span>%`</span>);
    line.<span class="hljs-title function_ inline">setAttribute</span>(<span class="hljs-string inline">&quot;stroke&quot;</span>, <span class="hljs-string inline">&quot;currentColor&quot;</span>);
    line.<span class="hljs-title function_ inline">setAttribute</span>(<span class="hljs-string inline">&quot;stroke-width&quot;</span>, <span class="hljs-string inline">&quot;1&quot;</span>);
    line.<span class="hljs-title function_ inline">setAttribute</span>(<span class="hljs-string inline">&quot;stroke-dasharray&quot;</span>, <span class="hljs-string inline">&quot;5,5&quot;</span>);
    line.<span class="hljs-title function_ inline">setAttribute</span>(<span class="hljs-string inline">&quot;class&quot;</span>, <span class="hljs-string inline">&quot;text-primary/30&quot;</span>);
    line.<span class="hljs-property inline">style</span>.<span class="hljs-property inline">opacity</span> = <span class="hljs-string inline">&#x27;0&#x27;</span>;

    svg.<span class="hljs-title function_ inline">appendChild</span>(line);

    <span class="hljs-built_in inline">setTimeout</span>(<span class="hljs-function inline">() =&gt;</span> {
        line.<span class="hljs-property inline">style</span>.<span class="hljs-property inline">transition</span> = <span class="hljs-string inline">&#x27;opacity 2s ease-in-out&#x27;</span>;
        line.<span class="hljs-property inline">style</span>.<span class="hljs-property inline">opacity</span> = <span class="hljs-string inline">&#x27;0.3&#x27;</span>;
    }, <span class="hljs-number inline">2000</span> + skillRefs.<span class="hljs-property inline">length</span> * <span class="hljs-number inline">100</span>);
}
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">这个闭环设计创造了真正的&quot;星座&quot;效果——所有技能气泡都被连接在一个完整的图形中，象征着技能之间的相互关联。</p>
<h2 id="性能优化与内存管理" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#性能优化与内存管理" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 性能优化与内存管理">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            性能优化与内存管理
        </h2>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%2F%2F%20%E4%B8%BA%E6%8A%80%E8%83%BD%E5%85%83%E7%B4%A0%E5%88%9B%E5%BB%BA%E7%A8%B3%E5%AE%9A%E7%9A%84%E5%BC%95%E7%94%A8%0Aconst%20skillRefs%20%3D%20useMemo(()%20%3D%3E%20%7B%0Areturn%20skills.map((skill)%20%3D%3E%20(%7B%0Aid%3A%20skill%2C%0AelementRef%3A%20React.createRefHTMLDivElement%3E()%2C%0Aposition%3A%20%7Bx%3A%200%2C%20y%3A%200%7D%0A%7D))%3B%0A%7D%2C%20%5Bskills%5D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-comment inline">// 为技能元素创建稳定的引用</span>
<span class="hljs-keyword inline">const</span> skillRefs = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-keyword inline">return</span> skills.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline">(<span class="hljs-params inline">skill</span>) =&gt;</span> ({
        <span class="hljs-attr inline">id</span>: skill,
        <span class="hljs-attr inline">elementRef</span>: <span class="hljs-title class_ inline">React</span>.<span class="hljs-property inline">createRef</span>&lt;<span class="hljs-title class_ inline">HTMLDivElement</span>&gt;(),
        <span class="hljs-attr inline">position</span>: {<span class="hljs-attr inline">x</span>: <span class="hljs-number inline">0</span>, <span class="hljs-attr inline">y</span>: <span class="hljs-number inline">0</span>}
    }));
}, [skills]);
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">为什么使用 useMemo 缓存引用数组</strong>？</p>
<p class="text-base leading-7 mb-4 text-foreground">每个 <code>skillRef</code> 对象包含：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">id</strong>: 技能名称标识</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">elementRef</strong>: DOM 元素引用</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">position</strong>: 位置状态缓存</li>
</ul>
<p class="text-base leading-7 mb-4 text-foreground">如果不使用 <code>useMemo</code>，每次组件重渲染都会创建新的引用对象，导致：</p>
<ol class="list-decimal list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">不必要的子组件重渲染</strong></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">DOM 引用丢失</strong></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">位置状态重置</strong></li>
</ol>
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">位置状态缓存设计</strong>：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="skillRef.position%20%3D%20%7Bx%3A%20newX%2C%20y%3A%20newY%7D%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript">skillRef.<span class="hljs-property inline">position</span> = {<span class="hljs-attr inline">x</span>: newX, <span class="hljs-attr inline">y</span>: newY};
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">避免频繁的 getBoundingClientRect 调用。</p>
<h2 id="响应式设计" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#响应式设计" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 响应式设计">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            响应式设计
        </h2>
<h3 id="容器尺寸监听：智能重布局" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#容器尺寸监听：智能重布局" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 容器尺寸监听：智能重布局">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            容器尺寸监听：智能重布局
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="%2F%2F%20%E5%A4%84%E7%90%86%E5%AE%B9%E5%99%A8%E5%A4%A7%E5%B0%8F%E8%B0%83%E6%95%B4%0AuseEffect(()%20%3D%3E%20%7B%0Aconst%20handleResize%20%3D%20()%20%3D%3E%20%7B%0Aif%20(containerRef.current)%20%7B%0AupdatePositions()%3B%0A%7D%0A%7D%3B%0Awindow.addEventListener('resize'%2C%20handleResize)%3B%0Areturn%20()%20%3D%3E%20window.removeEventListener('resize'%2C%20handleResize)%3B%0A%7D%2C%20%5BupdatePositions%5D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-comment inline">// 处理容器大小调整</span>
<span class="hljs-title function_ inline">useEffect</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">handleResize</span> = (<span class="hljs-params inline"></span>) =&gt; {
        <span class="hljs-keyword inline">if</span> (containerRef.<span class="hljs-property inline">current</span>) {
            <span class="hljs-title function_ inline">updatePositions</span>();
        }
    };

    <span class="hljs-variable language_ inline">window</span>.<span class="hljs-title function_ inline">addEventListener</span>(<span class="hljs-string inline">&#x27;resize&#x27;</span>, handleResize);
    <span class="hljs-keyword inline">return</span> <span class="hljs-function inline">() =&gt;</span> <span class="hljs-variable language_ inline">window</span>.<span class="hljs-title function_ inline">removeEventListener</span>(<span class="hljs-string inline">&#x27;resize&#x27;</span>, handleResize);
}, [updatePositions]);
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">当窗口大小变化时，各个技能重新随机分布。</p>
<h3 id="边界保护算法" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#边界保护算法" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 边界保护算法">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            边界保护算法
        </h3>
<p class="text-base leading-7 mb-4 text-foreground">无论在什么尺寸的设备上，所有气泡都必须完全可见：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="const%20padding%20%3D%2080%3B%0Aconst%20minX%20%3D%20padding%20-%2075%3B%0Aconst%20minY%20%3D%20padding%20-%2075%3B%0Aconst%20maxX%20%3D%20containerWidth%20-%20padding%3B%0Aconst%20maxY%20%3D%20containerHeight%20-%20padding%3B%0A%2F%2F%20%E8%BE%B9%E7%95%8C%E7%BA%A6%E6%9D%9F%0AnewPos.x%20%3D%20Math.max(minX%2C%20Math.min(maxX%2C%20newX))%3B%0AnewPos.y%20%3D%20Math.max(minY%2C%20Math.min(maxY%2C%20newY))%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-keyword inline">const</span> padding = <span class="hljs-number inline">80</span>;
<span class="hljs-keyword inline">const</span> minX = padding - <span class="hljs-number inline">75</span>;
<span class="hljs-keyword inline">const</span> minY = padding - <span class="hljs-number inline">75</span>;
<span class="hljs-keyword inline">const</span> maxX = containerWidth - padding;
<span class="hljs-keyword inline">const</span> maxY = containerHeight - padding;

<span class="hljs-comment inline">// 边界约束</span>
newPos.<span class="hljs-property inline">x</span> = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">max</span>(minX, <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">min</span>(maxX, newX));
newPos.<span class="hljs-property inline">y</span> = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">max</span>(minY, <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">min</span>(maxY, newY));
</code></pre>
            </div>
        
<h2 id="完整源码全解析" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#完整源码全解析" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 完整源码全解析">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            完整源码全解析
        </h2>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="typescript" data-code="'use%20client'%3B%0Aimport%20React%2C%20%7BuseCallback%2C%20useEffect%2C%20useMemo%2C%20useRef%2C%20useState%7D%20from%20'react'%3B%0Aimport%20%7Bmotion%7D%20from%20'framer-motion'%3B%0Aimport%20VariableProximity%20from%20%22%40%2Fcomponents%2Fui%2Ftext%2FVariableProximity%22%3B%0A%2F%2F%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%E7%B1%BB%E5%9E%8B%E5%AE%9A%E4%B9%89%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0Ainterface%20SkillsConstellationProps%20%7B%0Askills%3A%20string%5B%5D%3B%20%20%20%20%20%20%2F%2F%20%E6%8A%80%E8%83%BD%E5%88%97%E8%A1%A8%0Atitle%3A%20string%3B%20%20%20%20%20%20%20%20%20%2F%2F%20%E6%A0%87%E9%A2%98%E6%96%87%E6%9C%AC%0A%7D%0Ainterface%20Position%20%7B%0Ax%3A%20number%3B%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20X%E5%9D%90%E6%A0%87%0Ay%3A%20number%3B%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Y%E5%9D%90%E6%A0%87%0A%7D%0A%2F%2F%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%E6%8A%80%E8%83%BD%E6%B0%94%E6%B3%A1%E7%BB%84%E4%BB%B6%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0A%2F**%0A*%20%E5%8D%95%E4%B8%AA%E6%8A%80%E8%83%BD%E6%B0%94%E6%B3%A1%E7%BB%84%E4%BB%B6%EF%BC%8C%E4%BD%BF%E7%94%A8React.memo%E4%BC%98%E5%8C%96%E6%B8%B2%E6%9F%93%E6%80%A7%E8%83%BD%0A*%20%E5%8C%85%E5%90%AB%E5%AE%8C%E6%95%B4%E7%9A%84%E5%8A%A8%E7%94%BB%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%9A%E5%85%A5%E5%9C%BA%20%E2%86%92%20%E6%82%AC%E6%B5%AE%20%E2%86%92%20%E4%BA%A4%E4%BA%92%0A*%2F%0Aconst%20SkillBubble%20%3D%20React.memo((%7B%0Askill%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E6%8A%80%E8%83%BD%E5%90%8D%E7%A7%B0%0Aindex%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E5%BA%8F%E5%8F%B7%EF%BC%88%E7%94%A8%E4%BA%8E%E8%AE%A1%E7%AE%97%E5%8A%A8%E7%94%BB%E5%BB%B6%E8%BF%9F%EF%BC%89%0Asize%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E6%B0%94%E6%B3%A1%E5%A4%A7%E5%B0%8F%0AcolorClass%2C%20%20%20%20%20%20%20%20%20%2F%2F%20%E9%A2%9C%E8%89%B2%E6%A0%B7%E5%BC%8F%E7%B1%BB%0AelementRef%2C%20%20%20%20%20%20%20%20%20%2F%2F%20DOM%E5%BC%95%E7%94%A8%0AinitialRotation%2C%20%20%20%20%2F%2F%20%E5%88%9D%E5%A7%8B%E6%97%8B%E8%BD%AC%E8%A7%92%E5%BA%A6%0AborderRadius%20%20%20%20%20%20%20%2F%2F%20%E8%BE%B9%E6%A1%86%E5%9C%86%E8%A7%92%E6%A0%B7%E5%BC%8F%0A%7D%3A%20%7B%0Askill%3A%20string%3B%0Aindex%3A%20number%3B%0Asize%3A%20number%3B%0AcolorClass%3A%20string%3B%0AelementRef%3A%20React.RefObjectnull%3E%3B%0AinitialRotation%3A%20number%3B%0AborderRadius%3A%20string%3B%0A%7D)%20%3D%3E%20%7B%0Areturn%20(%0Amotion.div%0Aref%3D%7BelementRef%7D%0Akey%3D%7Bskill%7D%0A%2F%2F%20%E5%85%A5%E5%9C%BA%E5%8A%A8%E7%94%BB%EF%BC%9A%E4%BB%8E%E9%80%8F%E6%98%8E%E7%BC%A9%E6%94%BE%E5%88%B0%E6%AD%A3%E5%B8%B8%E7%8A%B6%E6%80%81%0Ainitial%3D%7B%7B%0Aopacity%3A%200%2C%0Ascale%3A%200%2C%0Arotate%3A%20initialRotation%2C%0A%7D%7D%0Aanimate%3D%7B%7B%0Aopacity%3A%201%2C%0Ascale%3A%201%2C%0Arotate%3A%20initialRotation%2C%0Atransition%3A%20%7B%0Aduration%3A%200.5%2C%0Adelay%3A%201%20%2B%20(index%20*%200.15)%2C%20%20%2F%2F%20%E6%B8%90%E8%BF%9B%E5%BC%8F%E5%85%A5%E5%9C%BA%0A%7D%2C%0A%7D%7D%0A%2F%2F%20%E6%82%AC%E6%B5%AE%E4%BA%A4%E4%BA%92%EF%BC%9A%E6%94%BE%E5%A4%A7%2B%E9%87%8D%E7%BD%AE%E6%97%8B%E8%BD%AC%2B%E6%8F%90%E5%8D%87%E5%B1%82%E7%BA%A7%0AwhileHover%3D%7B%7B%0Ascale%3A%201.2%2C%0Arotate%3A%200%2C%0AzIndex%3A%2010%2C%0A%7D%7D%0Atransition%3D%7B%7B%0Aduration%3A%201.5%2C%0Atype%3A%20%22spring%22%2C%0Astiffness%3A%20120%2C%20%20%20%20%2F%2F%20%E5%BC%B9%E7%B0%A7%E7%A1%AC%E5%BA%A6%0Adamping%3A%2015%2C%20%20%20%20%20%20%20%2F%2F%20%E9%98%BB%E5%B0%BC%E7%B3%BB%E6%95%B0%0A%7D%7D%0AclassName%3D%22absolute%20group%20select-none%22%0Astyle%3D%7B%7B%0Awidth%3A%20%60%24%7Bsize%7Dpx%60%2C%0Aheight%3A%20%60%24%7Bsize%7Dpx%60%2C%0Atransform%3A%20%60translate(-50%25%2C%20-50%25)%60%2C%0Aleft%3A%20'50%25'%2C%0Atop%3A%20'50%25'%2C%0A%7D%7D%0A%3E%0A%7B%2F*%20%E8%BD%A8%E9%81%93%E7%8E%AF%EF%BC%9A%E5%88%9B%E9%80%A0%E5%A4%A9%E4%BD%93%E8%BF%90%E8%A1%8C%E7%9A%84%E8%A7%86%E8%A7%89%E6%95%88%E6%9E%9C%20*%2F%7D%0Amotion.div%0Aanimate%3D%7B%7B%0Arotate%3A%20360%2C%0A%7D%7D%0Atransition%3D%7B%7B%0Aduration%3A%2020%20%2B%20index%20*%202%2C%20%20%2F%2F%20%E5%B7%AE%E5%BC%82%E5%8C%96%E6%97%8B%E8%BD%AC%E5%91%A8%E6%9C%9F%0Arepeat%3A%20Infinity%2C%0Aease%3A%20%22linear%22%2C%0A%7D%7D%0AclassName%3D%22absolute%20inset-0%20border%20border-primary%2F20%22%0Astyle%3D%7B%7B%20borderRadius%20%7D%7D%0A%2F%3E%0A%7B%2F*%20%E4%B8%BB%E4%BD%93%E6%B0%94%E6%B3%A1%EF%BC%9A%E5%8C%85%E5%90%AB%E5%91%BC%E5%90%B8%E6%95%88%E6%9E%9C%E5%92%8C%E5%A4%9A%E5%B1%82%E7%89%B9%E6%95%88%20*%2F%7D%0Amotion.div%0Aanimate%3D%7B%7B%0Ay%3A%20%5B0%2C%20-5%2C%200%5D%2C%20%20%2F%2F%20%E5%91%BC%E5%90%B8%E5%BC%8F%E6%B5%AE%E5%8A%A8%0A%7D%7D%0Atransition%3D%7B%7B%0Aduration%3A%203%20%2B%20index%20*%200.2%2C%20%20%2F%2F%20%E5%B7%AE%E5%BC%82%E5%8C%96%E5%91%BC%E5%90%B8%E5%91%A8%E6%9C%9F%0Arepeat%3A%20Infinity%2C%0Aease%3A%20%22easeInOut%22%2C%0A%7D%7D%0AclassName%3D%7B%60w-full%20h-full%20bg-gradient-to-br%20%24%7BcolorClass%7D%20backdrop-blur-sm%20flex%20items-center%20justify-center%20border-2%20transition-all%20duration-300%20relative%20overflow-hidden%60%7D%0Astyle%3D%7B%7B%20borderRadius%20%7D%7D%0A%3E%0A%7B%2F*%20Shimmer%E5%85%89%E6%99%95%E6%95%88%E6%9E%9C%EF%BC%9A%E5%91%A8%E6%9C%9F%E6%80%A7%E7%9A%84%E5%85%89%E7%BA%BF%E6%89%AB%E8%BF%87%20*%2F%7D%0Amotion.div%0Aanimate%3D%7B%7B%0Ax%3A%20%5B'-100%25'%2C%20'100%25'%5D%2C%0A%7D%7D%0Atransition%3D%7B%7B%0Aduration%3A%202%2C%0Arepeat%3A%20Infinity%2C%0ArepeatDelay%3A%203%2C%0Aease%3A%20%22easeInOut%22%2C%0A%7D%7D%0AclassName%3D%22absolute%20-inset-4%20bg-gradient-to-r%20from-transparent%20via-white%2F20%20to-transparent%20transform%20rotate-45%22%0A%2F%3E%0A%7B%2F*%20%E6%8A%80%E8%83%BD%E6%96%87%E6%9C%AC%EF%BC%9A%E4%B8%BB%E8%A6%81%E5%86%85%E5%AE%B9%E5%B1%95%E7%A4%BA%20*%2F%7D%0Aspan%20className%3D%22text-xs%20font-semibold%20text-center%20px-2%20leading-tight%20z-10%20text-foreground%22%3E%0A%7Bskill%7D%0Aspan%3E%0A%7B%2F*%20%E6%82%AC%E6%B5%AE%E7%B2%92%E5%AD%90%E6%95%88%E6%9E%9C%EF%BC%9A8%E4%B8%AA%E7%B2%92%E5%AD%90%E7%9A%84%E5%9C%86%E5%BD%A2%E7%88%86%E5%8F%91%20*%2F%7D%0Amotion.div%0Ainitial%3D%7B%7Bopacity%3A%200%2C%20scale%3A%200%7D%7D%0AwhileHover%3D%7B%7Bopacity%3A%201%2C%20scale%3A%201%7D%7D%0AclassName%3D%22absolute%20-inset-2%22%0A%3E%0A%7BArray.from(%7Blength%3A%208%7D).map((_%2C%20i)%20%3D%3E%20(%0Amotion.div%0Akey%3D%7Bi%7D%0Ainitial%3D%7B%7Bopacity%3A%200%2C%20scale%3A%200%7D%7D%0AwhileHover%3D%7B%7B%0Aopacity%3A%20%5B0%2C%201%2C%200%5D%2C%0Ascale%3A%20%5B0%2C%201%2C%200%5D%2C%0Ax%3A%20Math.cos(i%20*%200.785)%20*%2030%2C%20%20%2F%2F%20%E5%9C%86%E5%BD%A2%E5%88%86%E5%B8%83%0Ay%3A%20Math.sin(i%20*%200.785)%20*%2030%2C%0A%7D%7D%0Atransition%3D%7B%7B%0Aduration%3A%200.6%2C%0Adelay%3A%20i%20*%200.05%2C%0A%7D%7D%0AclassName%3D%22absolute%20top-1%2F2%20left-1%2F2%20w-1%20h-1%20bg-primary%20rounded-full%22%0A%2F%3E%0A))%7D%0Amotion.div%3E%0Amotion.div%3E%0Amotion.div%3E%0A)%3B%0A%7D)%3B%0ASkillBubble.displayName%20%3D%20'SkillBubble'%3B%0A%2F%2F%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%E4%B8%BB%E7%BB%84%E4%BB%B6%EF%BC%9A%E6%8A%80%E8%83%BD%E6%98%9F%E5%BA%A7%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0Aexport%20function%20SkillsConstellation(%7Bskills%2C%20title%7D%3A%20SkillsConstellationProps)%20%7B%0A%2F%2F%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0Aconst%20containerRef%20%3D%20useRefHTMLDivElement%3E(null)%3B%0Aconst%20boxRef%20%3D%20useRefHTMLDivElement%3E(null)%3B%0Aconst%20svgRef%20%3D%20useRefSVGSVGElement%3E(null)%3B%0Aconst%20%5BcontainerSize%2C%20setContainerSize%5D%20%3D%20useStatePosition%3E(%7Bx%3A%20320%2C%20y%3A%20320%7D)%3B%0Aconst%20lastClickTime%20%3D%20useRefnumber%3E(0)%3B%0Aconst%20throttleDelay%20%3D%20500%3B%0A%2F%2F%20%E6%A6%82%E7%8E%87%E7%B3%BB%E7%BB%9F%EF%BC%9A%E6%99%BA%E8%83%BD%E4%BA%A4%E4%BA%92%E7%9A%84%E6%A0%B8%E5%BF%83%0Aconst%20%5BclickCount%2C%20setClickCount%5D%20%3D%20useState(0)%3B%0Aconst%20baseProbability%20%3D%200.1%3B%20%2F%2F%2010%25%E5%9F%BA%E7%A1%80%E6%A6%82%E7%8E%87%0A%2F%2F%20%E7%A8%B3%E5%AE%9A%E7%9A%84%E6%8A%80%E8%83%BD%E5%BC%95%E7%94%A8%E6%95%B0%E7%BB%84%0Aconst%20skillRefs%20%3D%20useMemo(()%20%3D%3E%20%7B%0Areturn%20skills.map((skill)%20%3D%3E%20(%7B%0Aid%3A%20skill%2C%0AelementRef%3A%20React.createRefHTMLDivElement%3E()%2C%0Aposition%3A%20%7Bx%3A%200%2C%20y%3A%200%7D%20%20%2F%2F%20%E4%BD%8D%E7%BD%AE%E7%8A%B6%E6%80%81%E7%BC%93%E5%AD%98%0A%7D))%3B%0A%7D%2C%20%5Bskills%5D)%3B%0A%2F%2F%20%E9%A2%9C%E8%89%B2%E5%92%8C%E5%B1%9E%E6%80%A7%E7%9A%84%E9%A2%84%E8%AE%A1%E7%AE%97%0Aconst%20skillColors%20%3D%20useMemo(()%20%3D%3E%20%5B%0A'from-blue-500%2F20%20to-purple-500%2F20%20border-blue-400%2F50'%2C%0A'from-green-500%2F20%20to-teal-500%2F20%20border-green-400%2F50'%2C%0A'from-orange-500%2F20%20to-red-500%2F20%20border-orange-400%2F50'%2C%0A%2F%2F%20...%20%E6%9B%B4%E5%A4%9A%E9%A2%9C%E8%89%B2%E9%85%8D%E7%BD%AE%0A%5D%2C%20%5B%5D)%3B%0Aconst%20skillProperties%20%3D%20useMemo(()%20%3D%3E%20%7B%0Areturn%20skills.map((_%2C%20index)%20%3D%3E%20%7B%0Aconst%20initialRotation%20%3D%20(Math.random()%20-%200.5)%20*%2030%3B%0Aconst%20borderRadiusVariations%20%3D%20%5B%0A'50%25'%2C%20'40%25%2060%25%2060%25%2040%25'%2C%20'30%25%2070%25%2070%25%2030%25'%2C%0A%2F%2F%20...%20%E6%9B%B4%E5%A4%9A%E5%BD%A2%E7%8A%B6%E5%8F%98%E5%8C%96%0A%5D%3B%0Areturn%20%7B%0AinitialRotation%2C%0AborderRadius%3A%20borderRadiusVariations%5Bindex%20%25%20borderRadiusVariations.length%5D%2C%0AcolorClass%3A%20skillColors%5Bindex%20%25%20skillColors.length%5D%0A%7D%3B%0A%7D)%3B%0A%7D%2C%20%5Bskills%2C%20skillColors%5D)%3B%0A%2F%2F%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%E6%A0%B8%E5%BF%83%E7%AE%97%E6%B3%95%EF%BC%9A%E5%B8%83%E5%B1%80%E6%9B%B4%E6%96%B0%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0A%2F**%0A*%20%E9%9A%8F%E6%9C%BA%E5%88%86%E5%B8%83%E6%A8%A1%E5%BC%8F%EF%BC%9A%E6%A8%A1%E6%8B%9F%E7%9C%9F%E5%AE%9E%E5%AE%87%E5%AE%99%E7%9A%84%E9%9A%8F%E6%9C%BA%E6%80%A7%0A*%2F%0Aconst%20updatePositions%20%3D%20useCallback(()%20%3D%3E%20%7B%0Aif%20(!containerRef.current)%20return%3B%0Aconst%20containerWidth%20%3D%20containerRef.current.offsetWidth%3B%0Aconst%20containerHeight%20%3D%20containerRef.current.offsetHeight%3B%0Aconst%20padding%20%3D%2080%3B%0Aconst%20minX%20%3D%20padding%20-%2075%3B%0Aconst%20minY%20%3D%20padding%20-%2075%3B%0Aconst%20maxX%20%3D%20containerWidth%20-%20padding%3B%0Aconst%20maxY%20%3D%20containerHeight%20-%20padding%3B%0AsetContainerSize(%7Bx%3A%20containerWidth%2C%20y%3A%20containerHeight%7D)%3B%0AskillRefs.forEach((skillRef)%20%3D%3E%20%7B%0Aif%20(skillRef.elementRef.current)%20%7B%0A%2F%2F%20%E9%9A%8F%E6%9C%BA%E4%BD%8D%E7%BD%AE%E8%AE%A1%E7%AE%97%0Aconst%20newX%20%3D%20Math.random()%20*%20(maxX%20-%20minX)%20%2B%20minX%3B%0Aconst%20newY%20%3D%20Math.random()%20*%20(maxY%20-%20minY)%20%2B%20minY%3B%0A%2F%2F%20%E6%9B%B4%E6%96%B0%E4%BD%8D%E7%BD%AE%E7%BC%93%E5%AD%98%0AskillRef.position%20%3D%20%7Bx%3A%20newX%2C%20y%3A%20newY%7D%3B%0A%2F%2F%20%E6%89%A7%E8%A1%8C%E5%8A%A8%E7%94%BB%EF%BC%88Web%20Animations%20API%20%2B%20CSS%20fallback%EF%BC%89%0Aconst%20element%20%3D%20skillRef.elementRef.current%3B%0Aif%20(element.animate)%20%7B%0Aelement.animate(%0A%7Bleft%3A%20%60%24%7BnewX%7Dpx%60%2C%20top%3A%20%60%24%7BnewY%7Dpx%60%7D%2C%0A%7Bduration%3A%201500%2C%20easing%3A%20'cubic-bezier(0.4%2C%200%2C%200.2%2C%201)'%2C%20fill%3A%20'forwards'%7D%0A)%3B%0A%7D%20else%20%7B%0Aelement.style.transition%20%3D%20'left%201.5s%20ease%2C%20top%201.5s%20ease'%3B%0Aelement.style.left%20%3D%20%60%24%7BnewX%7Dpx%60%3B%0Aelement.style.top%20%3D%20%60%24%7BnewY%7Dpx%60%3B%0A%7D%0A%7D%0A%7D)%3B%0AupdateConnectingLines()%3B%0A%7D%2C%20%5BskillRefs%5D)%3B%0A%2F**%0A*%20%E7%BD%91%E6%A0%BC%E5%B8%83%E5%B1%80%E6%A8%A1%E5%BC%8F%0A*%2F%0Aconst%20updatePositionsNeat%20%3D%20useCallback(()%20%3D%3E%20%7B%0Aif%20(!containerRef.current)%20return%3B%0Aconst%20containerWidth%20%3D%20containerRef.current.offsetWidth%3B%0Aconst%20containerHeight%20%3D%20containerRef.current.offsetHeight%3B%0AsetContainerSize(%7Bx%3A%20containerWidth%2C%20y%3A%20containerHeight%7D)%3B%0A%2F%2F%20%E6%99%BA%E8%83%BD%E7%BD%91%E6%A0%BC%E8%AE%A1%E7%AE%97%0Aconst%20skillCount%20%3D%20skillRefs.length%3B%0Aconst%20cols%20%3D%20Math.ceil(Math.sqrt(skillCount))%3B%0Aconst%20rows%20%3D%20Math.ceil(skillCount%20%2F%20cols)%3B%0Aconst%20padding%20%3D%205%3B%0Aconst%20availableWidth%20%3D%20containerWidth%20-%20(2%20*%20padding)%3B%0Aconst%20availableHeight%20%3D%20containerHeight%20-%20(2%20*%20padding)%3B%0Aconst%20cellWidth%20%3D%20availableWidth%20%2F%20cols%3B%0Aconst%20cellHeight%20%3D%20availableHeight%20%2F%20rows%3B%0AskillRefs.forEach((skillRef%2C%20index)%20%3D%3E%20%7B%0Aif%20(skillRef.elementRef.current)%20%7B%0Aconst%20col%20%3D%20index%20%25%20cols%3B%0Aconst%20row%20%3D%20Math.floor(index%20%2F%20cols)%3B%0A%2F%2F%20%E5%B1%85%E4%B8%AD%E5%AF%B9%E9%BD%90%E8%AE%A1%E7%AE%97%0Aconst%20startX%20%3D%20padding%20%2B%20(cellWidth%20%2F%202)%20-%2038%3B%0Aconst%20startY%20%3D%20padding%20%2B%20(cellHeight%20%2F%202)%20-%2038%3B%0Aconst%20newX%20%3D%20startX%20%2B%20(col%20*%20cellWidth)%3B%0Aconst%20newY%20%3D%20startY%20%2B%20(row%20*%20cellHeight)%3B%0AskillRef.position%20%3D%20%7Bx%3A%20newX%2C%20y%3A%20newY%7D%3B%0A%2F%2F%20%E6%89%A7%E8%A1%8C%E4%BD%8D%E7%BD%AE%E5%8A%A8%E7%94%BB%0Aconst%20element%20%3D%20skillRef.elementRef.current%3B%0Aif%20(element.animate)%20%7B%0Aelement.animate(%0A%7Bleft%3A%20%60%24%7BnewX%7Dpx%60%2C%20top%3A%20%60%24%7BnewY%7Dpx%60%7D%2C%0A%7Bduration%3A%201500%2C%20easing%3A%20'cubic-bezier(0.4%2C%200%2C%200.2%2C%201)'%2C%20fill%3A%20'forwards'%7D%0A)%3B%0A%7D%0A%7D%0A%7D)%3B%0AupdateConnectingLines()%3B%0A%7D%2C%20%5BskillRefs%5D)%3B%0A%2F**%0A*%20SVG%E8%BF%9E%E6%8E%A5%E7%BA%BF%E7%B3%BB%E7%BB%9F%0A*%2F%0Aconst%20updateConnectingLines%20%3D%20useCallback(()%20%3D%3E%20%7B%0Aif%20(!svgRef.current%20%7C%7C%20!containerSize.x%20%7C%7C%20!containerSize.y)%20return%3B%0Aconst%20svg%20%3D%20svgRef.current%3B%0Asvg.innerHTML%20%3D%20''%3B%20%2F%2F%20%E6%B8%85%E9%99%A4%E7%8E%B0%E6%9C%89%E7%BA%BF%E6%9D%A1%0A%2F%2F%20%E6%A0%B9%E6%8D%AE%E6%8A%80%E8%83%BD%E6%B0%94%E6%B3%A1%E7%BB%98%E5%88%B6%E7%9B%B8%E5%AF%B9%E5%BA%94%E5%88%86%E5%B8%83%E7%9A%84%E7%BA%BF%E6%9D%A1%0AskillRefs.forEach((skillRef%2C%20index)%20%3D%3E%20%7B%0Aif%20(index%20%3D%3D%3D%20skillRefs.length%20-%201)%20return%3B%0Aconst%20currentPos%20%3D%20skillRef.position%3B%0Aconst%20nextPos%20%3D%20skillRefs%5Bindex%20%2B%201%5D.position%3B%0A%2F%2F%20%E5%9D%90%E6%A0%87%E8%BD%AC%E6%8D%A2%EF%BC%9A%E5%83%8F%E7%B4%A0%20%E2%86%92%20%E7%99%BE%E5%88%86%E6%AF%94%0Aconst%20x1%20%3D%20(currentPos.x%20%2F%20containerSize.x)%20*%20100%20-%2080%3B%0Aconst%20y1%20%3D%20(currentPos.y%20%2F%20containerSize.y)%20*%20100%3B%0Aconst%20x2%20%3D%20(nextPos.x%20%2F%20containerSize.x)%20*%20100%20-%2080%3B%0Aconst%20y2%20%3D%20(nextPos.y%20%2F%20containerSize.y)%20*%20100%20%2B%2075%3B%0A%2F%2F%20%E5%88%9B%E5%BB%BASVG%E7%BA%BF%E6%9D%A1%E5%85%83%E7%B4%A0%0Aconst%20line%20%3D%20document.createElementNS(%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%2C%20%22line%22)%3B%0Aline.setAttribute(%22x1%22%2C%20%60%24%7Bx1%7D%25%60)%3B%0Aline.setAttribute(%22y1%22%2C%20%60%24%7By1%7D%25%60)%3B%0Aline.setAttribute(%22x2%22%2C%20%60%24%7Bx2%7D%25%60)%3B%0Aline.setAttribute(%22y2%22%2C%20%60%24%7By2%7D%25%60)%3B%0Aline.setAttribute(%22stroke%22%2C%20%22currentColor%22)%3B%0Aline.setAttribute(%22stroke-width%22%2C%20%221%22)%3B%0Aline.setAttribute(%22stroke-dasharray%22%2C%20%225%2C5%22)%3B%0Aline.setAttribute(%22class%22%2C%20%22text-primary%2F30%22)%3B%0Aline.style.opacity%20%3D%20'0'%3B%0Asvg.appendChild(line)%3B%0A%2F%2F%20%E5%BB%B6%E8%BF%9F%E6%98%BE%E7%A4%BA%E5%8A%A8%E7%94%BB%0AsetTimeout(()%20%3D%3E%20%7B%0Aline.style.transition%20%3D%20'opacity%202s%20ease-in-out'%3B%0Aline.style.opacity%20%3D%20'0.3'%3B%0A%7D%2C%202000%20%2B%20index%20*%20100)%3B%0A%7D)%3B%0A%2F%2F%20%E7%BA%BF%E6%9D%A1%E7%89%B5%E5%BC%95%E8%BF%9E%E6%8E%A5%0Aif%20(skillRefs.length%20%3E%202)%20%7B%0Aconst%20lastPos%20%3D%20skillRefs%5BskillRefs.length%20-%201%5D.position%3B%0Aconst%20firstPos%20%3D%20skillRefs%5B0%5D.position%3B%0Aconst%20x1%20%3D%20(lastPos.x%20%2F%20containerSize.x)%20*%20100%3B%0Aconst%20y1%20%3D%20(lastPos.y%20%2F%20containerSize.y)%20*%20100%3B%0Aconst%20x2%20%3D%20(firstPos.x%20%2F%20containerSize.x)%20*%20100%3B%0Aconst%20y2%20%3D%20(firstPos.y%20%2F%20containerSize.y)%20*%20100%3B%0Aconst%20line%20%3D%20document.createElementNS(%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%2C%20%22line%22)%3B%0A%2F%2F%20...%20%E8%AE%BE%E7%BD%AE%E7%BA%BF%E6%9D%A1%E5%B1%9E%E6%80%A7%0Asvg.appendChild(line)%3B%0AsetTimeout(()%20%3D%3E%20%7B%0Aline.style.transition%20%3D%20'opacity%202s%20ease-in-out'%3B%0Aline.style.opacity%20%3D%20'0.3'%3B%0A%7D%2C%202000%20%2B%20skillRefs.length%20*%20100)%3B%0A%7D%0A%7D%2C%20%5BskillRefs%2C%20containerSize%5D)%3B%0A%2F%2F%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%E4%BA%A4%E4%BA%92%E7%B3%BB%E7%BB%9F%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0A%2F**%0A*%20%E6%A6%82%E7%8E%87%E9%A9%B1%E5%8A%A8%E7%9A%84%E7%82%B9%E5%87%BB%E5%A4%84%E7%90%86%0A*%2F%0Aconst%20handleContainerClick%20%3D%20useCallback(()%20%3D%3E%20%7B%0Aconst%20currentTime%20%3D%20Date.now()%3B%0Aif%20(currentTime%20-%20lastClickTime.current%20%3E%3D%20throttleDelay)%20%7B%0AlastClickTime.current%20%3D%20currentTime%3B%0A%2F%2F%20%E6%A6%82%E7%8E%87%E8%AE%A1%E7%AE%97%EF%BC%9A%E5%9F%BA%E7%A1%80%E6%A6%82%E7%8E%87%20%2B%20%E7%B4%AF%E7%A7%AF%E5%A2%9E%E9%95%BF%0Aconst%20currentProbability%20%3D%20Math.min(baseProbability%20%2B%20(clickCount%20*%200.15)%2C%200.9)%3B%0Aconst%20shouldUseNeatArrangement%20%3D%20Math.random()%20if%20(shouldUseNeatArrangement)%20%7B%0AupdatePositionsNeat()%3B%0AsetClickCount(0)%3B%20%2F%2F%20%E6%88%90%E5%8A%9F%E5%90%8E%E9%87%8D%E7%BD%AE%0A%7D%20else%20%7B%0AupdatePositions()%3B%0AsetClickCount(prev%20%3D%3E%20prev%20%2B%201)%3B%20%2F%2F%20%E5%A4%B1%E8%B4%A5%E5%90%8E%E9%80%92%E5%A2%9E%0A%7D%0A%7D%0A%7D%2C%20%5BupdatePositions%2C%20updatePositionsNeat%2C%20clickCount%2C%20baseProbability%2C%20throttleDelay%5D)%3B%0A%2F%2F%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%AE%A1%E7%90%86%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0A%2F%2F%20%E5%88%9D%E5%A7%8B%E5%8C%96%E8%AE%BE%E7%BD%AE%0AuseEffect(()%20%3D%3E%20%7B%0Aif%20(containerRef.current%20%26%26%20skills.length%20%3E%200)%20%7B%0AsetTimeout(()%20%3D%3E%20%7B%0AupdatePositions()%3B%0A%7D%2C%201500)%3B%0A%7D%0A%7D%2C%20%5BupdatePositions%2C%20skills%5D)%3B%0A%2F%2F%20%E5%93%8D%E5%BA%94%E5%BC%8F%E9%87%8D%E5%B8%83%E5%B1%80%0AuseEffect(()%20%3D%3E%20%7B%0Aconst%20handleResize%20%3D%20()%20%3D%3E%20%7B%0Aif%20(containerRef.current)%20%7B%0AupdatePositions()%3B%0A%7D%0A%7D%3B%0Awindow.addEventListener('resize'%2C%20handleResize)%3B%0Areturn%20()%20%3D%3E%20window.removeEventListener('resize'%2C%20handleResize)%3B%0A%7D%2C%20%5BupdatePositions%5D)%3B%0A%2F%2F%20%E8%83%8C%E6%99%AF%E6%98%9F%E7%A9%BA%E7%9A%84%E8%AE%B0%E5%BF%86%E5%8C%96%E7%94%9F%E6%88%90%0Aconst%20backgroundStars%20%3D%20useMemo(()%20%3D%3E%20(%0AArray.from(%7Blength%3A%2020%7D).map((_%2C%20i)%20%3D%3E%20(%0Amotion.div%0Akey%3D%7B%60star-%24%7Bi%7D%60%7D%0Ainitial%3D%7B%7Bopacity%3A%200%2C%20scale%3A%200%7D%7D%0Aanimate%3D%7B%7B%0Aopacity%3A%20%5B0%2C%201%2C%200.3%2C%201%5D%2C%0Ascale%3A%20%5B0%2C%201%2C%200.8%2C%201%5D%2C%0A%7D%7D%0Atransition%3D%7B%7B%0Aduration%3A%202%20%2B%20Math.random()%20*%203%2C%0Arepeat%3A%20Infinity%2C%0Adelay%3A%20Math.random()%20*%202%2C%0A%7D%7D%0AclassName%3D%22absolute%20w-1%20h-1%20bg-primary%2F40%20rounded-full%22%0Astyle%3D%7B%7B%0Aleft%3A%20%60%24%7BMath.random()%20*%20100%7D%25%60%2C%0Atop%3A%20%60%24%7BMath.random()%20*%20100%7D%25%60%2C%0A%7D%7D%0A%2F%3E%0A))%0A)%2C%20%5B%5D)%3B%0A%2F%2F%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%20%E6%B8%B2%E6%9F%93%E7%BB%93%E6%9E%84%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0Areturn%20(%0Amotion.div%0Aref%3D%7BboxRef%7D%0Ainitial%3D%7B%7Bopacity%3A%200%2C%20y%3A%2020%7D%7D%0Aanimate%3D%7B%7Bopacity%3A%201%2C%20y%3A%200%7D%7D%0Atransition%3D%7B%7Bdelay%3A%201.1%2C%20duration%3A%200.8%7D%7D%0AclassName%3D%22mb-8%20relative%20text-center%22%0A%3E%0A%7B%2F*%20%E6%A0%87%E9%A2%98%EF%BC%9A%E5%93%8D%E5%BA%94%E5%BC%8F%E6%96%87%E5%AD%97%E6%95%88%E6%9E%9C%20*%2F%7D%0AVariableProximity%0Alabel%3D%7Btitle%7D%0AclassName%3D%7B'text-2xl%20text-foreground%2F90%20mb-8%20variable-proximity'%7D%0AcontainerRef%3D%7BboxRef%7D%0Aradius%3D%7B100%7D%0Afalloff%3D'linear'%0A%2F%3E%0A%7B%2F*%20%E6%98%9F%E5%BA%A7%E5%AE%B9%E5%99%A8%EF%BC%9A%E5%8F%8C%E5%B1%82%E7%BB%93%E6%9E%84%E7%9A%84%E6%A0%B8%E5%BF%83%20*%2F%7D%0Adiv%0AclassName%3D%22relative%20w-full%20h-80%20mx-auto%20overflow-hidden%22%0AonClick%3D%7BhandleContainerClick%7D%0A%3E%0A%7B%2F*%20%E8%83%8C%E6%99%AF%E6%98%9F%E7%A9%BA%E5%B1%82%20*%2F%7D%0Adiv%20className%3D%22absolute%20inset-0%22%3E%0A%7BbackgroundStars%7D%0Adiv%3E%0A%7B%2F*%20%E6%8A%80%E8%83%BD%E6%98%9F%E5%BA%A7%E5%B1%82%20*%2F%7D%0Adiv%20ref%3D%7BcontainerRef%7D%20className%3D%22relative%20w-full%20h-full%22%3E%0A%7BskillRefs.map((skillRef%2C%20index)%20%3D%3E%20(%0ASkillBubble%0Akey%3D%7BskillRef.id%7D%0Askill%3D%7BskillRef.id%7D%0Aindex%3D%7Bindex%7D%0Asize%3D%7B75%7D%0AcolorClass%3D%7BskillProperties%5Bindex%5D.colorClass%7D%0AelementRef%3D%7BskillRef.elementRef%7D%0AinitialRotation%3D%7BskillProperties%5Bindex%5D.initialRotation%7D%0AborderRadius%3D%7BskillProperties%5Bindex%5D.borderRadius%7D%0A%2F%3E%0A))%7D%0A%7B%2F*%20SVG%E8%BF%9E%E6%8E%A5%E7%BA%BF%E5%B1%82%20*%2F%7D%0Asvg%20ref%3D%7BsvgRef%7D%20className%3D%22absolute%20inset-0%20w-full%20h-full%20pointer-events-none%22%2F%3E%0Adiv%3E%0Adiv%3E%0Amotion.div%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">typescript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-typescript"><span class="hljs-string inline">&#x27;use client&#x27;</span>;

<span class="hljs-keyword inline">import</span> <span class="hljs-title class_ inline">React</span>, {useCallback, useEffect, useMemo, useRef, useState} <span class="hljs-keyword inline">from</span> <span class="hljs-string inline">&#x27;react&#x27;</span>;
<span class="hljs-keyword inline">import</span> {motion} <span class="hljs-keyword inline">from</span> <span class="hljs-string inline">&#x27;framer-motion&#x27;</span>;
<span class="hljs-keyword inline">import</span> <span class="hljs-title class_ inline">VariableProximity</span> <span class="hljs-keyword inline">from</span> <span class="hljs-string inline">&quot;@/components/ui/text/VariableProximity&quot;</span>;

<span class="hljs-comment inline">// ==================== 类型定义 ====================</span>
<span class="hljs-keyword inline">interface</span> <span class="hljs-title class_ inline">SkillsConstellationProps</span> {
    <span class="hljs-attr inline">skills</span>: <span class="hljs-built_in inline">string</span>[];      <span class="hljs-comment inline">// 技能列表</span>
    <span class="hljs-attr inline">title</span>: <span class="hljs-built_in inline">string</span>;         <span class="hljs-comment inline">// 标题文本</span>
}

<span class="hljs-keyword inline">interface</span> <span class="hljs-title class_ inline">Position</span> {
    <span class="hljs-attr inline">x</span>: <span class="hljs-built_in inline">number</span>;            <span class="hljs-comment inline">// X坐标</span>
    <span class="hljs-attr inline">y</span>: <span class="hljs-built_in inline">number</span>;            <span class="hljs-comment inline">// Y坐标</span>
}

<span class="hljs-comment inline">// ==================== 技能气泡组件 ====================</span>
<span class="hljs-comment inline">/**
 * 单个技能气泡组件，使用React.memo优化渲染性能
 * 包含完整的动画生命周期：入场 → 悬浮 → 交互
 */</span>
<span class="hljs-keyword inline">const</span> <span class="hljs-title class_ inline">SkillBubble</span> = <span class="hljs-title class_ inline">React</span>.<span class="hljs-title function_ inline">memo</span>(<span class="hljs-function inline">(<span class="hljs-params inline">{
    skill,              // 技能名称
    index,              // 序号（用于计算动画延迟）
    size,               // 气泡大小
    colorClass,         // 颜色样式类
    elementRef,         // DOM引用
    initialRotation,    // 初始旋转角度
    borderRadius       // 边框圆角样式
}: {
    skill: <span class="hljs-built_in inline">string</span>;
    index: <span class="hljs-built_in inline">number</span>;
    size: <span class="hljs-built_in inline">number</span>;
    colorClass: <span class="hljs-built_in inline">string</span>;
    elementRef: React.RefObject&lt;HTMLDivElement | <span class="hljs-literal inline">null</span>&gt;;
    initialRotation: <span class="hljs-built_in inline">number</span>;
    borderRadius: <span class="hljs-built_in inline">string</span>;
}</span>) =&gt;</span> {
    <span class="hljs-keyword inline">return</span> (
        <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
            <span class="hljs-attr inline">ref</span>=<span class="hljs-string inline">{elementRef}</span>
            <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{skill}</span>
            // <span class="hljs-attr inline">入场动画</span>：<span class="hljs-attr inline">从透明缩放到正常状态</span>
            <span class="hljs-attr inline">initial</span>=<span class="hljs-string inline">{{</span>
                <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">0</span>,
                <span class="hljs-attr inline">scale:</span> <span class="hljs-attr inline">0</span>,
                <span class="hljs-attr inline">rotate:</span> <span class="hljs-attr inline">initialRotation</span>,
            }}
            <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">{{</span>
                <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">1</span>,
                <span class="hljs-attr inline">scale:</span> <span class="hljs-attr inline">1</span>,
                <span class="hljs-attr inline">rotate:</span> <span class="hljs-attr inline">initialRotation</span>,
                <span class="hljs-attr inline">transition:</span> {
                    <span class="hljs-attr inline">duration:</span> <span class="hljs-attr inline">0.5</span>,
                    <span class="hljs-attr inline">delay:</span> <span class="hljs-attr inline">1</span> + (<span class="hljs-attr inline">index</span> * <span class="hljs-attr inline">0.15</span>),  // <span class="hljs-attr inline">渐进式入场</span>
                },
            }}
            // <span class="hljs-attr inline">悬浮交互</span>：<span class="hljs-attr inline">放大</span>+<span class="hljs-attr inline">重置旋转</span>+<span class="hljs-attr inline">提升层级</span>
            <span class="hljs-attr inline">whileHover</span>=<span class="hljs-string inline">{{</span>
                <span class="hljs-attr inline">scale:</span> <span class="hljs-attr inline">1.2</span>,
                <span class="hljs-attr inline">rotate:</span> <span class="hljs-attr inline">0</span>,
                <span class="hljs-attr inline">zIndex:</span> <span class="hljs-attr inline">10</span>,
            }}
            <span class="hljs-attr inline">transition</span>=<span class="hljs-string inline">{{</span>
                <span class="hljs-attr inline">duration:</span> <span class="hljs-attr inline">1.5</span>,
                <span class="hljs-attr inline">type:</span> &quot;<span class="hljs-attr inline">spring</span>&quot;,
                <span class="hljs-attr inline">stiffness:</span> <span class="hljs-attr inline">120</span>,    // <span class="hljs-attr inline">弹簧硬度</span>
                <span class="hljs-attr inline">damping:</span> <span class="hljs-attr inline">15</span>,       // <span class="hljs-attr inline">阻尼系数</span>
            }}
            <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;absolute group select-none&quot;</span>
            <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{</span>
                <span class="hljs-attr inline">width:</span> `${<span class="hljs-attr inline">size</span>}<span class="hljs-attr inline">px</span>`,
                <span class="hljs-attr inline">height:</span> `${<span class="hljs-attr inline">size</span>}<span class="hljs-attr inline">px</span>`,
                <span class="hljs-attr inline">transform:</span> `<span class="hljs-attr inline">translate</span>(<span class="hljs-attr inline">-50</span>%, <span class="hljs-attr inline">-50</span>%)`,
                <span class="hljs-attr inline">left:</span> &#x27;<span class="hljs-attr inline">50</span>%&#x27;,
                <span class="hljs-attr inline">top:</span> &#x27;<span class="hljs-attr inline">50</span>%&#x27;,
            }}
        &gt;</span>
            {/* 轨道环：创造天体运行的视觉效果 */}
            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
                <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">{{</span>
                    <span class="hljs-attr inline">rotate:</span> <span class="hljs-attr inline">360</span>,
                }}
                <span class="hljs-attr inline">transition</span>=<span class="hljs-string inline">{{</span>
                    <span class="hljs-attr inline">duration:</span> <span class="hljs-attr inline">20</span> + <span class="hljs-attr inline">index</span> * <span class="hljs-attr inline">2</span>,  // <span class="hljs-attr inline">差异化旋转周期</span>
                    <span class="hljs-attr inline">repeat:</span> <span class="hljs-attr inline">Infinity</span>,
                    <span class="hljs-attr inline">ease:</span> &quot;<span class="hljs-attr inline">linear</span>&quot;,
                }}
                <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;absolute inset-0 border border-primary/20&quot;</span>
                <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">borderRadius</span> }}
            /&gt;</span>

            {/* 主体气泡：包含呼吸效果和多层特效 */}
            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
                <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">{{</span>
                    <span class="hljs-attr inline">y:</span> [<span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">-5</span>, <span class="hljs-attr inline">0</span>],  // <span class="hljs-attr inline">呼吸式浮动</span>
                }}
                <span class="hljs-attr inline">transition</span>=<span class="hljs-string inline">{{</span>
                    <span class="hljs-attr inline">duration:</span> <span class="hljs-attr inline">3</span> + <span class="hljs-attr inline">index</span> * <span class="hljs-attr inline">0.2</span>,  // <span class="hljs-attr inline">差异化呼吸周期</span>
                    <span class="hljs-attr inline">repeat:</span> <span class="hljs-attr inline">Infinity</span>,
                    <span class="hljs-attr inline">ease:</span> &quot;<span class="hljs-attr inline">easeInOut</span>&quot;,
                }}
                <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">{</span>`<span class="hljs-attr inline">w-full</span> <span class="hljs-attr inline">h-full</span> <span class="hljs-attr inline">bg-gradient-to-br</span> ${<span class="hljs-attr inline">colorClass</span>} <span class="hljs-attr inline">backdrop-blur-sm</span> <span class="hljs-attr inline">flex</span> <span class="hljs-attr inline">items-center</span> <span class="hljs-attr inline">justify-center</span> <span class="hljs-attr inline">border-2</span> <span class="hljs-attr inline">transition-all</span> <span class="hljs-attr inline">duration-300</span> <span class="hljs-attr inline">relative</span> <span class="hljs-attr inline">overflow-hidden</span>`}
                <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">borderRadius</span> }}
            &gt;</span>
                {/* Shimmer光晕效果：周期性的光线扫过 */}
                <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
                    <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">{{</span>
                        <span class="hljs-attr inline">x:</span> [&#x27;<span class="hljs-attr inline">-100</span>%&#x27;, &#x27;<span class="hljs-attr inline">100</span>%&#x27;],
                    }}
                    <span class="hljs-attr inline">transition</span>=<span class="hljs-string inline">{{</span>
                        <span class="hljs-attr inline">duration:</span> <span class="hljs-attr inline">2</span>,
                        <span class="hljs-attr inline">repeat:</span> <span class="hljs-attr inline">Infinity</span>,
                        <span class="hljs-attr inline">repeatDelay:</span> <span class="hljs-attr inline">3</span>,
                        <span class="hljs-attr inline">ease:</span> &quot;<span class="hljs-attr inline">easeInOut</span>&quot;,
                    }}
                    <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;absolute -inset-4 bg-gradient-to-r from-transparent via-white/20 to-transparent transform rotate-45&quot;</span>
                /&gt;</span>

                {/* 技能文本：主要内容展示 */}
                <span class="hljs-tag inline">&lt;<span class="hljs-name inline">span</span> <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;text-xs font-semibold text-center px-2 leading-tight z-10 text-foreground&quot;</span>&gt;</span>
                    {skill}
                <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">span</span>&gt;</span>

                {/* 悬浮粒子效果：8个粒子的圆形爆发 */}
                <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
                    <span class="hljs-attr inline">initial</span>=<span class="hljs-string inline">{{opacity:</span> <span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">scale:</span> <span class="hljs-attr inline">0</span>}}
                    <span class="hljs-attr inline">whileHover</span>=<span class="hljs-string inline">{{opacity:</span> <span class="hljs-attr inline">1</span>, <span class="hljs-attr inline">scale:</span> <span class="hljs-attr inline">1</span>}}
                    <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;absolute -inset-2&quot;</span>
                &gt;</span>
                    {Array.from({length: 8}).map((_, i) =&gt; (
                        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
                            <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{i}</span>
                            <span class="hljs-attr inline">initial</span>=<span class="hljs-string inline">{{opacity:</span> <span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">scale:</span> <span class="hljs-attr inline">0</span>}}
                            <span class="hljs-attr inline">whileHover</span>=<span class="hljs-string inline">{{</span>
                                <span class="hljs-attr inline">opacity:</span> [<span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">1</span>, <span class="hljs-attr inline">0</span>],
                                <span class="hljs-attr inline">scale:</span> [<span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">1</span>, <span class="hljs-attr inline">0</span>],
                                <span class="hljs-attr inline">x:</span> <span class="hljs-attr inline">Math.cos</span>(<span class="hljs-attr inline">i</span> * <span class="hljs-attr inline">0.785</span>) * <span class="hljs-attr inline">30</span>,  // <span class="hljs-attr inline">圆形分布</span>
                                <span class="hljs-attr inline">y:</span> <span class="hljs-attr inline">Math.sin</span>(<span class="hljs-attr inline">i</span> * <span class="hljs-attr inline">0.785</span>) * <span class="hljs-attr inline">30</span>,
                            }}
                            <span class="hljs-attr inline">transition</span>=<span class="hljs-string inline">{{</span>
                                <span class="hljs-attr inline">duration:</span> <span class="hljs-attr inline">0.6</span>,
                                <span class="hljs-attr inline">delay:</span> <span class="hljs-attr inline">i</span> * <span class="hljs-attr inline">0.05</span>,
                            }}
                            <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;absolute top-1/2 left-1/2 w-1 h-1 bg-primary rounded-full&quot;</span>
                        /&gt;</span>
                    ))}
                <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.div</span>&gt;</span>
            <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.div</span>&gt;</span>
        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.div</span>&gt;</span></span>
    );
});

<span class="hljs-title class_ inline">SkillBubble</span>.<span class="hljs-property inline">displayName</span> = <span class="hljs-string inline">&#x27;SkillBubble&#x27;</span>;

<span class="hljs-comment inline">// ==================== 主组件：技能星座 ====================</span>
<span class="hljs-keyword inline">export</span> <span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">SkillsConstellation</span>(<span class="hljs-params inline">{skills, title}: <span class="hljs-title class_ inline">SkillsConstellationProps</span></span>) {
    <span class="hljs-comment inline">// ==================== 状态管理 ====================</span>
    <span class="hljs-keyword inline">const</span> containerRef = useRef&lt;<span class="hljs-title class_ inline">HTMLDivElement</span>&gt;(<span class="hljs-literal inline">null</span>);
    <span class="hljs-keyword inline">const</span> boxRef = useRef&lt;<span class="hljs-title class_ inline">HTMLDivElement</span>&gt;(<span class="hljs-literal inline">null</span>);
    <span class="hljs-keyword inline">const</span> svgRef = useRef&lt;<span class="hljs-title class_ inline">SVGSVGElement</span>&gt;(<span class="hljs-literal inline">null</span>);
    <span class="hljs-keyword inline">const</span> [containerSize, setContainerSize] = useState&lt;<span class="hljs-title class_ inline">Position</span>&gt;({<span class="hljs-attr inline">x</span>: <span class="hljs-number inline">320</span>, <span class="hljs-attr inline">y</span>: <span class="hljs-number inline">320</span>});
    <span class="hljs-keyword inline">const</span> lastClickTime = useRef&lt;<span class="hljs-built_in inline">number</span>&gt;(<span class="hljs-number inline">0</span>);
    <span class="hljs-keyword inline">const</span> throttleDelay = <span class="hljs-number inline">500</span>;

    <span class="hljs-comment inline">// 概率系统：智能交互的核心</span>
    <span class="hljs-keyword inline">const</span> [clickCount, setClickCount] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-number inline">0</span>);
    <span class="hljs-keyword inline">const</span> baseProbability = <span class="hljs-number inline">0.1</span>; <span class="hljs-comment inline">// 10%基础概率</span>

    <span class="hljs-comment inline">// 稳定的技能引用数组</span>
    <span class="hljs-keyword inline">const</span> skillRefs = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> {
        <span class="hljs-keyword inline">return</span> skills.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline">(<span class="hljs-params inline">skill</span>) =&gt;</span> ({
            <span class="hljs-attr inline">id</span>: skill,
            <span class="hljs-attr inline">elementRef</span>: <span class="hljs-title class_ inline">React</span>.<span class="hljs-property inline">createRef</span>&lt;<span class="hljs-title class_ inline">HTMLDivElement</span>&gt;(),
            <span class="hljs-attr inline">position</span>: {<span class="hljs-attr inline">x</span>: <span class="hljs-number inline">0</span>, <span class="hljs-attr inline">y</span>: <span class="hljs-number inline">0</span>}  <span class="hljs-comment inline">// 位置状态缓存</span>
        }));
    }, [skills]);

    <span class="hljs-comment inline">// 颜色和属性的预计算</span>
    <span class="hljs-keyword inline">const</span> skillColors = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> [
        <span class="hljs-string inline">&#x27;from-blue-500/20 to-purple-500/20 border-blue-400/50&#x27;</span>,
        <span class="hljs-string inline">&#x27;from-green-500/20 to-teal-500/20 border-green-400/50&#x27;</span>,
        <span class="hljs-string inline">&#x27;from-orange-500/20 to-red-500/20 border-orange-400/50&#x27;</span>,
        <span class="hljs-comment inline">// ... 更多颜色配置</span>
    ], []);

    <span class="hljs-keyword inline">const</span> skillProperties = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> {
        <span class="hljs-keyword inline">return</span> skills.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline">(<span class="hljs-params inline">_, index</span>) =&gt;</span> {
            <span class="hljs-keyword inline">const</span> initialRotation = (<span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">random</span>() - <span class="hljs-number inline">0.5</span>) * <span class="hljs-number inline">30</span>;
            <span class="hljs-keyword inline">const</span> borderRadiusVariations = [
                <span class="hljs-string inline">&#x27;50%&#x27;</span>, <span class="hljs-string inline">&#x27;40% 60% 60% 40%&#x27;</span>, <span class="hljs-string inline">&#x27;30% 70% 70% 30%&#x27;</span>,
                <span class="hljs-comment inline">// ... 更多形状变化</span>
            ];
            
            <span class="hljs-keyword inline">return</span> {
                initialRotation,
                <span class="hljs-attr inline">borderRadius</span>: borderRadiusVariations[index % borderRadiusVariations.<span class="hljs-property inline">length</span>],
                <span class="hljs-attr inline">colorClass</span>: skillColors[index % skillColors.<span class="hljs-property inline">length</span>]
            };
        });
    }, [skills, skillColors]);

    <span class="hljs-comment inline">// ==================== 核心算法：布局更新 ====================</span>
    
    <span class="hljs-comment inline">/**
     * 随机分布模式：模拟真实宇宙的随机性
     */</span>
    <span class="hljs-keyword inline">const</span> updatePositions = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">() =&gt;</span> {
        <span class="hljs-keyword inline">if</span> (!containerRef.<span class="hljs-property inline">current</span>) <span class="hljs-keyword inline">return</span>;

        <span class="hljs-keyword inline">const</span> containerWidth = containerRef.<span class="hljs-property inline">current</span>.<span class="hljs-property inline">offsetWidth</span>;
        <span class="hljs-keyword inline">const</span> containerHeight = containerRef.<span class="hljs-property inline">current</span>.<span class="hljs-property inline">offsetHeight</span>;
        <span class="hljs-keyword inline">const</span> padding = <span class="hljs-number inline">80</span>;
        <span class="hljs-keyword inline">const</span> minX = padding - <span class="hljs-number inline">75</span>;
        <span class="hljs-keyword inline">const</span> minY = padding - <span class="hljs-number inline">75</span>;
        <span class="hljs-keyword inline">const</span> maxX = containerWidth - padding;
        <span class="hljs-keyword inline">const</span> maxY = containerHeight - padding;

        <span class="hljs-title function_ inline">setContainerSize</span>({<span class="hljs-attr inline">x</span>: containerWidth, <span class="hljs-attr inline">y</span>: containerHeight});

        skillRefs.<span class="hljs-title function_ inline">forEach</span>(<span class="hljs-function inline">(<span class="hljs-params inline">skillRef</span>) =&gt;</span> {
            <span class="hljs-keyword inline">if</span> (skillRef.<span class="hljs-property inline">elementRef</span>.<span class="hljs-property inline">current</span>) {
                <span class="hljs-comment inline">// 随机位置计算</span>
                <span class="hljs-keyword inline">const</span> newX = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">random</span>() * (maxX - minX) + minX;
                <span class="hljs-keyword inline">const</span> newY = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">random</span>() * (maxY - minY) + minY;

                <span class="hljs-comment inline">// 更新位置缓存</span>
                skillRef.<span class="hljs-property inline">position</span> = {<span class="hljs-attr inline">x</span>: newX, <span class="hljs-attr inline">y</span>: newY};

                <span class="hljs-comment inline">// 执行动画（Web Animations API + CSS fallback）</span>
                <span class="hljs-keyword inline">const</span> element = skillRef.<span class="hljs-property inline">elementRef</span>.<span class="hljs-property inline">current</span>;
                <span class="hljs-keyword inline">if</span> (element.<span class="hljs-property inline">animate</span>) {
                    element.<span class="hljs-title function_ inline">animate</span>(
                        {<span class="hljs-attr inline">left</span>: <span class="hljs-string inline">`<span class="hljs-subst inline">${newX}</span>px`</span>, <span class="hljs-attr inline">top</span>: <span class="hljs-string inline">`<span class="hljs-subst inline">${newY}</span>px`</span>},
                        {<span class="hljs-attr inline">duration</span>: <span class="hljs-number inline">1500</span>, <span class="hljs-attr inline">easing</span>: <span class="hljs-string inline">&#x27;cubic-bezier(0.4, 0, 0.2, 1)&#x27;</span>, <span class="hljs-attr inline">fill</span>: <span class="hljs-string inline">&#x27;forwards&#x27;</span>}
                    );
                } <span class="hljs-keyword inline">else</span> {
                    element.<span class="hljs-property inline">style</span>.<span class="hljs-property inline">transition</span> = <span class="hljs-string inline">&#x27;left 1.5s ease, top 1.5s ease&#x27;</span>;
                    element.<span class="hljs-property inline">style</span>.<span class="hljs-property inline">left</span> = <span class="hljs-string inline">`<span class="hljs-subst inline">${newX}</span>px`</span>;
                    element.<span class="hljs-property inline">style</span>.<span class="hljs-property inline">top</span> = <span class="hljs-string inline">`<span class="hljs-subst inline">${newY}</span>px`</span>;
                }
            }
        });

        <span class="hljs-title function_ inline">updateConnectingLines</span>();
    }, [skillRefs]);

    <span class="hljs-comment inline">/**
     * 网格布局模式
     */</span>
    <span class="hljs-keyword inline">const</span> updatePositionsNeat = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">() =&gt;</span> {
        <span class="hljs-keyword inline">if</span> (!containerRef.<span class="hljs-property inline">current</span>) <span class="hljs-keyword inline">return</span>;

        <span class="hljs-keyword inline">const</span> containerWidth = containerRef.<span class="hljs-property inline">current</span>.<span class="hljs-property inline">offsetWidth</span>;
        <span class="hljs-keyword inline">const</span> containerHeight = containerRef.<span class="hljs-property inline">current</span>.<span class="hljs-property inline">offsetHeight</span>;
        <span class="hljs-title function_ inline">setContainerSize</span>({<span class="hljs-attr inline">x</span>: containerWidth, <span class="hljs-attr inline">y</span>: containerHeight});

        <span class="hljs-comment inline">// 智能网格计算</span>
        <span class="hljs-keyword inline">const</span> skillCount = skillRefs.<span class="hljs-property inline">length</span>;
        <span class="hljs-keyword inline">const</span> cols = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">ceil</span>(<span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">sqrt</span>(skillCount));
        <span class="hljs-keyword inline">const</span> rows = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">ceil</span>(skillCount / cols);

        <span class="hljs-keyword inline">const</span> padding = <span class="hljs-number inline">5</span>;
        <span class="hljs-keyword inline">const</span> availableWidth = containerWidth - (<span class="hljs-number inline">2</span> * padding);
        <span class="hljs-keyword inline">const</span> availableHeight = containerHeight - (<span class="hljs-number inline">2</span> * padding);
        <span class="hljs-keyword inline">const</span> cellWidth = availableWidth / cols;
        <span class="hljs-keyword inline">const</span> cellHeight = availableHeight / rows;

        skillRefs.<span class="hljs-title function_ inline">forEach</span>(<span class="hljs-function inline">(<span class="hljs-params inline">skillRef, index</span>) =&gt;</span> {
            <span class="hljs-keyword inline">if</span> (skillRef.<span class="hljs-property inline">elementRef</span>.<span class="hljs-property inline">current</span>) {
                <span class="hljs-keyword inline">const</span> col = index % cols;
                <span class="hljs-keyword inline">const</span> row = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">floor</span>(index / cols);

                <span class="hljs-comment inline">// 居中对齐计算</span>
                <span class="hljs-keyword inline">const</span> startX = padding + (cellWidth / <span class="hljs-number inline">2</span>) - <span class="hljs-number inline">38</span>;
                <span class="hljs-keyword inline">const</span> startY = padding + (cellHeight / <span class="hljs-number inline">2</span>) - <span class="hljs-number inline">38</span>;
                <span class="hljs-keyword inline">const</span> newX = startX + (col * cellWidth);
                <span class="hljs-keyword inline">const</span> newY = startY + (row * cellHeight);

                skillRef.<span class="hljs-property inline">position</span> = {<span class="hljs-attr inline">x</span>: newX, <span class="hljs-attr inline">y</span>: newY};

                <span class="hljs-comment inline">// 执行位置动画</span>
                <span class="hljs-keyword inline">const</span> element = skillRef.<span class="hljs-property inline">elementRef</span>.<span class="hljs-property inline">current</span>;
                <span class="hljs-keyword inline">if</span> (element.<span class="hljs-property inline">animate</span>) {
                    element.<span class="hljs-title function_ inline">animate</span>(
                        {<span class="hljs-attr inline">left</span>: <span class="hljs-string inline">`<span class="hljs-subst inline">${newX}</span>px`</span>, <span class="hljs-attr inline">top</span>: <span class="hljs-string inline">`<span class="hljs-subst inline">${newY}</span>px`</span>},
                        {<span class="hljs-attr inline">duration</span>: <span class="hljs-number inline">1500</span>, <span class="hljs-attr inline">easing</span>: <span class="hljs-string inline">&#x27;cubic-bezier(0.4, 0, 0.2, 1)&#x27;</span>, <span class="hljs-attr inline">fill</span>: <span class="hljs-string inline">&#x27;forwards&#x27;</span>}
                    );
                }
            }
        });

        <span class="hljs-title function_ inline">updateConnectingLines</span>();
    }, [skillRefs]);

    <span class="hljs-comment inline">/**
     * SVG连接线系统
     */</span>
    <span class="hljs-keyword inline">const</span> updateConnectingLines = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">() =&gt;</span> {
        <span class="hljs-keyword inline">if</span> (!svgRef.<span class="hljs-property inline">current</span> || !containerSize.<span class="hljs-property inline">x</span> || !containerSize.<span class="hljs-property inline">y</span>) <span class="hljs-keyword inline">return</span>;

        <span class="hljs-keyword inline">const</span> svg = svgRef.<span class="hljs-property inline">current</span>;
        svg.<span class="hljs-property inline">innerHTML</span> = <span class="hljs-string inline">&#x27;&#x27;</span>; <span class="hljs-comment inline">// 清除现有线条</span>

        <span class="hljs-comment inline">// 根据技能气泡绘制相对应分布的线条</span>
        skillRefs.<span class="hljs-title function_ inline">forEach</span>(<span class="hljs-function inline">(<span class="hljs-params inline">skillRef, index</span>) =&gt;</span> {
            <span class="hljs-keyword inline">if</span> (index === skillRefs.<span class="hljs-property inline">length</span> - <span class="hljs-number inline">1</span>) <span class="hljs-keyword inline">return</span>;

            <span class="hljs-keyword inline">const</span> currentPos = skillRef.<span class="hljs-property inline">position</span>;
            <span class="hljs-keyword inline">const</span> nextPos = skillRefs[index + <span class="hljs-number inline">1</span>].<span class="hljs-property inline">position</span>;

            <span class="hljs-comment inline">// 坐标转换：像素 → 百分比</span>
            <span class="hljs-keyword inline">const</span> x1 = (currentPos.<span class="hljs-property inline">x</span> / containerSize.<span class="hljs-property inline">x</span>) * <span class="hljs-number inline">100</span> - <span class="hljs-number inline">80</span>;
            <span class="hljs-keyword inline">const</span> y1 = (currentPos.<span class="hljs-property inline">y</span> / containerSize.<span class="hljs-property inline">y</span>) * <span class="hljs-number inline">100</span>;
            <span class="hljs-keyword inline">const</span> x2 = (nextPos.<span class="hljs-property inline">x</span> / containerSize.<span class="hljs-property inline">x</span>) * <span class="hljs-number inline">100</span> - <span class="hljs-number inline">80</span>;
            <span class="hljs-keyword inline">const</span> y2 = (nextPos.<span class="hljs-property inline">y</span> / containerSize.<span class="hljs-property inline">y</span>) * <span class="hljs-number inline">100</span> + <span class="hljs-number inline">75</span>;

            <span class="hljs-comment inline">// 创建SVG线条元素</span>
            <span class="hljs-keyword inline">const</span> line = <span class="hljs-variable language_ inline">document</span>.<span class="hljs-title function_ inline">createElementNS</span>(<span class="hljs-string inline">&quot;http://www.w3.org/2000/svg&quot;</span>, <span class="hljs-string inline">&quot;line&quot;</span>);
            line.<span class="hljs-title function_ inline">setAttribute</span>(<span class="hljs-string inline">&quot;x1&quot;</span>, <span class="hljs-string inline">`<span class="hljs-subst inline">${x1}</span>%`</span>);
            line.<span class="hljs-title function_ inline">setAttribute</span>(<span class="hljs-string inline">&quot;y1&quot;</span>, <span class="hljs-string inline">`<span class="hljs-subst inline">${y1}</span>%`</span>);
            line.<span class="hljs-title function_ inline">setAttribute</span>(<span class="hljs-string inline">&quot;x2&quot;</span>, <span class="hljs-string inline">`<span class="hljs-subst inline">${x2}</span>%`</span>);
            line.<span class="hljs-title function_ inline">setAttribute</span>(<span class="hljs-string inline">&quot;y2&quot;</span>, <span class="hljs-string inline">`<span class="hljs-subst inline">${y2}</span>%`</span>);
            line.<span class="hljs-title function_ inline">setAttribute</span>(<span class="hljs-string inline">&quot;stroke&quot;</span>, <span class="hljs-string inline">&quot;currentColor&quot;</span>);
            line.<span class="hljs-title function_ inline">setAttribute</span>(<span class="hljs-string inline">&quot;stroke-width&quot;</span>, <span class="hljs-string inline">&quot;1&quot;</span>);
            line.<span class="hljs-title function_ inline">setAttribute</span>(<span class="hljs-string inline">&quot;stroke-dasharray&quot;</span>, <span class="hljs-string inline">&quot;5,5&quot;</span>);
            line.<span class="hljs-title function_ inline">setAttribute</span>(<span class="hljs-string inline">&quot;class&quot;</span>, <span class="hljs-string inline">&quot;text-primary/30&quot;</span>);
            line.<span class="hljs-property inline">style</span>.<span class="hljs-property inline">opacity</span> = <span class="hljs-string inline">&#x27;0&#x27;</span>;

            svg.<span class="hljs-title function_ inline">appendChild</span>(line);

            <span class="hljs-comment inline">// 延迟显示动画</span>
            <span class="hljs-built_in inline">setTimeout</span>(<span class="hljs-function inline">() =&gt;</span> {
                line.<span class="hljs-property inline">style</span>.<span class="hljs-property inline">transition</span> = <span class="hljs-string inline">&#x27;opacity 2s ease-in-out&#x27;</span>;
                line.<span class="hljs-property inline">style</span>.<span class="hljs-property inline">opacity</span> = <span class="hljs-string inline">&#x27;0.3&#x27;</span>;
            }, <span class="hljs-number inline">2000</span> + index * <span class="hljs-number inline">100</span>);
        });

        <span class="hljs-comment inline">// 线条牵引连接</span>
        <span class="hljs-keyword inline">if</span> (skillRefs.<span class="hljs-property inline">length</span> &gt; <span class="hljs-number inline">2</span>) {
            <span class="hljs-keyword inline">const</span> lastPos = skillRefs[skillRefs.<span class="hljs-property inline">length</span> - <span class="hljs-number inline">1</span>].<span class="hljs-property inline">position</span>;
            <span class="hljs-keyword inline">const</span> firstPos = skillRefs[<span class="hljs-number inline">0</span>].<span class="hljs-property inline">position</span>;

            <span class="hljs-keyword inline">const</span> x1 = (lastPos.<span class="hljs-property inline">x</span> / containerSize.<span class="hljs-property inline">x</span>) * <span class="hljs-number inline">100</span>;
            <span class="hljs-keyword inline">const</span> y1 = (lastPos.<span class="hljs-property inline">y</span> / containerSize.<span class="hljs-property inline">y</span>) * <span class="hljs-number inline">100</span>;
            <span class="hljs-keyword inline">const</span> x2 = (firstPos.<span class="hljs-property inline">x</span> / containerSize.<span class="hljs-property inline">x</span>) * <span class="hljs-number inline">100</span>;
            <span class="hljs-keyword inline">const</span> y2 = (firstPos.<span class="hljs-property inline">y</span> / containerSize.<span class="hljs-property inline">y</span>) * <span class="hljs-number inline">100</span>;

            <span class="hljs-keyword inline">const</span> line = <span class="hljs-variable language_ inline">document</span>.<span class="hljs-title function_ inline">createElementNS</span>(<span class="hljs-string inline">&quot;http://www.w3.org/2000/svg&quot;</span>, <span class="hljs-string inline">&quot;line&quot;</span>);
            <span class="hljs-comment inline">// ... 设置线条属性</span>
            svg.<span class="hljs-title function_ inline">appendChild</span>(line);

            <span class="hljs-built_in inline">setTimeout</span>(<span class="hljs-function inline">() =&gt;</span> {
                line.<span class="hljs-property inline">style</span>.<span class="hljs-property inline">transition</span> = <span class="hljs-string inline">&#x27;opacity 2s ease-in-out&#x27;</span>;
                line.<span class="hljs-property inline">style</span>.<span class="hljs-property inline">opacity</span> = <span class="hljs-string inline">&#x27;0.3&#x27;</span>;
            }, <span class="hljs-number inline">2000</span> + skillRefs.<span class="hljs-property inline">length</span> * <span class="hljs-number inline">100</span>);
        }
    }, [skillRefs, containerSize]);

    <span class="hljs-comment inline">// ==================== 交互系统 ====================</span>
    
    <span class="hljs-comment inline">/**
     * 概率驱动的点击处理
     */</span>
    <span class="hljs-keyword inline">const</span> handleContainerClick = <span class="hljs-title function_ inline">useCallback</span>(<span class="hljs-function inline">() =&gt;</span> {
        <span class="hljs-keyword inline">const</span> currentTime = <span class="hljs-title class_ inline">Date</span>.<span class="hljs-title function_ inline">now</span>();
        <span class="hljs-keyword inline">if</span> (currentTime - lastClickTime.<span class="hljs-property inline">current</span> &gt;= throttleDelay) {
            lastClickTime.<span class="hljs-property inline">current</span> = currentTime;

            <span class="hljs-comment inline">// 概率计算：基础概率 + 累积增长</span>
            <span class="hljs-keyword inline">const</span> currentProbability = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">min</span>(baseProbability + (clickCount * <span class="hljs-number inline">0.15</span>), <span class="hljs-number inline">0.9</span>);
            <span class="hljs-keyword inline">const</span> shouldUseNeatArrangement = <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">random</span>() &lt; currentProbability;

            <span class="hljs-keyword inline">if</span> (shouldUseNeatArrangement) {
                <span class="hljs-title function_ inline">updatePositionsNeat</span>();
                <span class="hljs-title function_ inline">setClickCount</span>(<span class="hljs-number inline">0</span>); <span class="hljs-comment inline">// 成功后重置</span>
            } <span class="hljs-keyword inline">else</span> {
                <span class="hljs-title function_ inline">updatePositions</span>();
                <span class="hljs-title function_ inline">setClickCount</span>(<span class="hljs-function inline"><span class="hljs-params inline">prev</span> =&gt;</span> prev + <span class="hljs-number inline">1</span>); <span class="hljs-comment inline">// 失败后递增</span>
            }
        }
    }, [updatePositions, updatePositionsNeat, clickCount, baseProbability, throttleDelay]);

    <span class="hljs-comment inline">// ==================== 生命周期管理 ====================</span>
    
    <span class="hljs-comment inline">// 初始化设置</span>
    <span class="hljs-title function_ inline">useEffect</span>(<span class="hljs-function inline">() =&gt;</span> {
        <span class="hljs-keyword inline">if</span> (containerRef.<span class="hljs-property inline">current</span> &amp;&amp; skills.<span class="hljs-property inline">length</span> &gt; <span class="hljs-number inline">0</span>) {
            <span class="hljs-built_in inline">setTimeout</span>(<span class="hljs-function inline">() =&gt;</span> {
                <span class="hljs-title function_ inline">updatePositions</span>();
            }, <span class="hljs-number inline">1500</span>);
        }
    }, [updatePositions, skills]);

    <span class="hljs-comment inline">// 响应式重布局</span>
    <span class="hljs-title function_ inline">useEffect</span>(<span class="hljs-function inline">() =&gt;</span> {
        <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">handleResize</span> = (<span class="hljs-params inline"></span>) =&gt; {
            <span class="hljs-keyword inline">if</span> (containerRef.<span class="hljs-property inline">current</span>) {
                <span class="hljs-title function_ inline">updatePositions</span>();
            }
        };

        <span class="hljs-variable language_ inline">window</span>.<span class="hljs-title function_ inline">addEventListener</span>(<span class="hljs-string inline">&#x27;resize&#x27;</span>, handleResize);
        <span class="hljs-keyword inline">return</span> <span class="hljs-function inline">() =&gt;</span> <span class="hljs-variable language_ inline">window</span>.<span class="hljs-title function_ inline">removeEventListener</span>(<span class="hljs-string inline">&#x27;resize&#x27;</span>, handleResize);
    }, [updatePositions]);

    <span class="hljs-comment inline">// 背景星空的记忆化生成</span>
    <span class="hljs-keyword inline">const</span> backgroundStars = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> (
        <span class="hljs-title class_ inline">Array</span>.<span class="hljs-title function_ inline">from</span>({<span class="hljs-attr inline">length</span>: <span class="hljs-number inline">20</span>}).<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline">(<span class="hljs-params inline">_, i</span>) =&gt;</span> (
            <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
                <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{</span>`<span class="hljs-attr inline">star-</span>${<span class="hljs-attr inline">i</span>}`}
                <span class="hljs-attr inline">initial</span>=<span class="hljs-string inline">{{opacity:</span> <span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">scale:</span> <span class="hljs-attr inline">0</span>}}
                <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">{{</span>
                    <span class="hljs-attr inline">opacity:</span> [<span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">1</span>, <span class="hljs-attr inline">0.3</span>, <span class="hljs-attr inline">1</span>],
                    <span class="hljs-attr inline">scale:</span> [<span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">1</span>, <span class="hljs-attr inline">0.8</span>, <span class="hljs-attr inline">1</span>],
                }}
                <span class="hljs-attr inline">transition</span>=<span class="hljs-string inline">{{</span>
                    <span class="hljs-attr inline">duration:</span> <span class="hljs-attr inline">2</span> + <span class="hljs-attr inline">Math.random</span>() * <span class="hljs-attr inline">3</span>,
                    <span class="hljs-attr inline">repeat:</span> <span class="hljs-attr inline">Infinity</span>,
                    <span class="hljs-attr inline">delay:</span> <span class="hljs-attr inline">Math.random</span>() * <span class="hljs-attr inline">2</span>,
                }}
                <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;absolute w-1 h-1 bg-primary/40 rounded-full&quot;</span>
                <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{</span>
                    <span class="hljs-attr inline">left:</span> `${<span class="hljs-attr inline">Math.random</span>() * <span class="hljs-attr inline">100</span>}%`,
                    <span class="hljs-attr inline">top:</span> `${<span class="hljs-attr inline">Math.random</span>() * <span class="hljs-attr inline">100</span>}%`,
                }}
            /&gt;</span></span>
        ))
    ), []);

    <span class="hljs-comment inline">// ==================== 渲染结构 ====================</span>
    <span class="hljs-keyword inline">return</span> (
        <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
            <span class="hljs-attr inline">ref</span>=<span class="hljs-string inline">{boxRef}</span>
            <span class="hljs-attr inline">initial</span>=<span class="hljs-string inline">{{opacity:</span> <span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">y:</span> <span class="hljs-attr inline">20</span>}}
            <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">{{opacity:</span> <span class="hljs-attr inline">1</span>, <span class="hljs-attr inline">y:</span> <span class="hljs-attr inline">0</span>}}
            <span class="hljs-attr inline">transition</span>=<span class="hljs-string inline">{{delay:</span> <span class="hljs-attr inline">1.1</span>, <span class="hljs-attr inline">duration:</span> <span class="hljs-attr inline">0.8</span>}}
            <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;mb-8 relative text-center&quot;</span>
        &gt;</span>
            {/* 标题：响应式文字效果 */}
            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">VariableProximity</span>
                <span class="hljs-attr inline">label</span>=<span class="hljs-string inline">{title}</span>
                <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">{</span>&#x27;<span class="hljs-attr inline">text-2xl</span> <span class="hljs-attr inline">text-foreground</span>/<span class="hljs-attr inline">90</span> <span class="hljs-attr inline">mb-8</span> <span class="hljs-attr inline">variable-proximity</span>&#x27;}
                <span class="hljs-attr inline">containerRef</span>=<span class="hljs-string inline">{boxRef}</span>
                <span class="hljs-attr inline">radius</span>=<span class="hljs-string inline">{100}</span>
                <span class="hljs-attr inline">falloff</span>=<span class="hljs-string inline">&#x27;linear&#x27;</span>
            /&gt;</span>

            {/* 星座容器：双层结构的核心 */}
            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>
                <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;relative w-full h-80 mx-auto overflow-hidden&quot;</span>
                <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{handleContainerClick}</span>
            &gt;</span>
                {/* 背景星空层 */}
                <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span> <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;absolute inset-0&quot;</span>&gt;</span>
                    {backgroundStars}
                <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>

                {/* 技能星座层 */}
                <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span> <span class="hljs-attr inline">ref</span>=<span class="hljs-string inline">{containerRef}</span> <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;relative w-full h-full&quot;</span>&gt;</span>
                    {skillRefs.map((skillRef, index) =&gt; (
                        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">SkillBubble</span>
                            <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{skillRef.id}</span>
                            <span class="hljs-attr inline">skill</span>=<span class="hljs-string inline">{skillRef.id}</span>
                            <span class="hljs-attr inline">index</span>=<span class="hljs-string inline">{index}</span>
                            <span class="hljs-attr inline">size</span>=<span class="hljs-string inline">{75}</span>
                            <span class="hljs-attr inline">colorClass</span>=<span class="hljs-string inline">{skillProperties[index].colorClass}</span>
                            <span class="hljs-attr inline">elementRef</span>=<span class="hljs-string inline">{skillRef.elementRef}</span>
                            <span class="hljs-attr inline">initialRotation</span>=<span class="hljs-string inline">{skillProperties[index].initialRotation}</span>
                            <span class="hljs-attr inline">borderRadius</span>=<span class="hljs-string inline">{skillProperties[index].borderRadius}</span>
                        /&gt;</span>
                    ))}

                    {/* SVG连接线层 */}
                    <span class="hljs-tag inline">&lt;<span class="hljs-name inline">svg</span> <span class="hljs-attr inline">ref</span>=<span class="hljs-string inline">{svgRef}</span> <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;absolute inset-0 w-full h-full pointer-events-none&quot;</span>/&gt;</span>
                <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
            <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.div</span>&gt;</span></span>
    );
}
</code></pre>
            </div>
        
<h2 id="写在最后" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#写在最后" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 写在最后">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            写在最后
        </h2>
<p class="text-base leading-7 mb-4 text-foreground">我总觉得，人应当做一些不一样的创造，来让自己的作品显得不那么单调，即便是一个很简单的功能也有玩出花的可能。实际上从这个角度看，前端设计的潜力是无限的。</p>
<p class="text-base leading-7 mb-4 text-foreground"><em class="italic text-foreground">愿你的技能如星座般闪耀，在代码的宇宙中编织出最美的图案。</em> ✨</p>
d:["$","$L1d",null,{"htmlContent":"$1e","frontMatter":{"title":"技能星座：React组件的宇宙级交互设计","description":"深度解析动态气泡布局、概率算法、SVG连线系统的完整实现原理","date":"2025-06-22","author":"MilkWind","tags":["交互设计"],"references":{}},"readingTime":"30 min read","category":"personal-website","tocItems":[{"id":"技能星座：每个人都是自己的宇宙","text":"技能星座：每个人都是自己的宇宙","level":1},{"id":"双层结构设计","text":"双层结构设计","level":2},{"id":"容器层设计","text":"容器层设计","level":3},{"id":"svg连接线条层","text":"SVG连接线条层","level":3},{"id":"坐标系统管理","text":"坐标系统管理","level":3},{"id":"气泡组件的生命周期管理","text":"气泡组件的生命周期管理","level":2},{"id":"skillbubble-组件解析","text":"SkillBubble 组件解析","level":3},{"id":"初始化动画序列：渐进式入场","text":"初始化动画序列：渐进式入场","level":3},{"id":"悬浮交互系统","text":"悬浮交互系统","level":3},{"id":"视觉效果设计","text":"视觉效果设计","level":2},{"id":"轨道旋转系统","text":"轨道旋转系统","level":3},{"id":"呼吸效果","text":"呼吸效果","level":3},{"id":"shimmer-渐变","text":"Shimmer 渐变","level":3},{"id":"背景星空生成","text":"背景星空生成","level":2},{"id":"随机分布算法","text":"随机分布算法","level":3},{"id":"usememo-优化","text":"useMemo 优化","level":3},{"id":"布局算法：随机与秩序的平衡","text":"布局算法：随机与秩序的平衡","level":2},{"id":"随机分布模式","text":"随机分布模式","level":3},{"id":"边界约束计算","text":"边界约束计算","level":3},{"id":"dom-直接操作","text":"DOM 直接操作","level":3},{"id":"网格布局模式","text":"网格布局模式","level":3},{"id":"保底概率","text":"保底概率","level":2},{"id":"点击概率机制","text":"点击概率机制","level":3},{"id":"节流防抖","text":"节流防抖","level":3},{"id":"svg-连接线","text":"SVG 连接线","level":2},{"id":"动态线条生成","text":"动态线条生成","level":3},{"id":"线条动画编排","text":"线条动画编排","level":3},{"id":"性能优化与内存管理","text":"性能优化与内存管理","level":2},{"id":"响应式设计","text":"响应式设计","level":2},{"id":"容器尺寸监听：智能重布局","text":"容器尺寸监听：智能重布局","level":3},{"id":"边界保护算法","text":"边界保护算法","level":3},{"id":"完整源码全解析","text":"完整源码全解析","level":2},{"id":"写在最后","text":"写在最后","level":2}],"translations":{"common":{"welcome":"欢迎","loading":"加载中...","error":"出现了一些问题","retry":"重试","theme":"主题","language":"语言","light":"浅色","dark":"深色"},"navigation":{"home":"首页","personal":"个人","works":"作品","contributions":"贡献","documents":"文档","about":"关于","contact":"联系"},"personal":{"technicalSkills":"技术技能","email":"邮箱","github":"代码仓库","resume":"简历","codeRepository":"代码仓库","loadingPersonalInfo":"加载个人信息中...","loadingResume":"加载简历中...","closeResume":"关闭简历","emailCopied":"邮箱已复制到剪贴板！","galaxyDefaultDescription":"精通全栈开发技术，具备跨平台架构能力，擅长AI技术整合与高性能系统优化","skillGalaxy":"技能星系","stirGalaxy":"搅动星系","stirring":"搅动中...","fullStackEngineer":"MilkWind - 全栈工程师","professionalProfile":"关于我"},"documents":{"technicalDocuments":"技术文档","description":"基本原理、代码拆分以及一些碎碎念。","articles":"文章","categories":"分类","allCategories":"所有分类","noArticlesFound":"未找到文章","noArticlesAvailable":"中文暂无文章。","noArticlesInCategory":"该分类下未找到文章。","readMore":"阅读更多","loadingDocuments":"加载文档中...","backToDocuments":"← 返回文档","documentNotFound":"文档未找到","documentNotFoundDescription":"请求的文档无法找到。","technicalInsights":"技术拆解","untitledDocument":"无标题文档","byAuthor":"作者：","search":"搜索文章...","searchByTags":"按标签筛选","searching":"搜索中...","noSearchResults":"没有找到符合搜索条件的文章","clearSearch":"清除搜索","selectedTags":"已选标签","allTags":"所有标签","searchInTitle":"在标题、描述和内容中搜索","enterImmersiveMode":"沉浸阅读","exitImmersiveMode":"退出沉浸模式","immersiveReading":"沉浸阅读模式","exploreContent":"按分类探索内容","browseBy":"浏览方式","exploreAll":"所有内容汇总","categoryDescription":"该分类下的文章","totalArticles":"文章","totalCategories":"分类","foundArticles":"找到文章","categoriesWithResults":"有结果的分类"},"works":{"workCases":"作品案例","projects":"作品集","loadingProjects":"加载项目中...","grid":"网格","stack":"堆叠","of":"共","workCasesPageTitle":"作品案例页面","pageWorkingCorrectly":"此页面运行正常！路由配置正确。","try3DVersion":"尝试3D版本","dragToScroll":"拖拽滚动","dragToChange":"拖拽切换","swipeCards":"切换卡片","keyboardNav":"键盘导航"},"contributions":{"contributionCases":"开源项目","contributions":"贡献","loadingContributions":"加载贡献中...","grid":"网格","stack":"堆叠","of":"共","contributionCasesPageTitle":"贡献案例页面","pageWorkingCorrectly":"此页面运行正常！路由配置正确。","try3DVersion":"尝试3D版本","dragToScroll":"拖拽滚动","dragToChange":"拖拽切换","swipeCards":"切换卡片","keyboardNav":"键盘导航"},"contribution":{"contributionPreview":"贡献预览","accessible":"可访问","code":"代码","maintenance":"维护","enhancement":"增强","documentation":"文档","community":"社区","moreItems":"更多","technicalDetails":"技术详情","technologies":"技术栈：","contributionDetail":"贡献详情","description":"描述：","seeDetails":"查看详情","github":"代码仓库","viewContribution":"查看贡献","viewCode":"查看代码"},"project":{"projectPreview":"项目预览","accessible":"可访问","tool":"工具","plugin":"插件","toy":"小玩意","moreItems":"更多","technicalDetails":"技术详情","technologies":"技术栈：","description":"描述：","seeDetails":"查看详情","github":"GitHub","gitee":"Gitee","viewLiveDemo":"查看演示","viewCode":"查看代码","access":"访问","videos":"视频","watchVideo":"观看视频","hasVideo":"有视频"},"codeblock":{"copy":"复制","copySuccess":"代码已复制到剪贴板！","copyError":"复制代码失败","copyTooltip":"复制代码"},"toc":{"contents":"目录","autoScroll":"自动滚动到章节","collapse":"折叠","expand":"展开"},"loading":{"loading":"加载中","preparingExperience":"准备体验中"}},"lang":"zh","theme":"dark"}]
12:null
18:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
11:null
1c:{"metadata":[["$","title","0",{"children":"技能星座：React组件的宇宙级交互设计 | Interactive Portfolio"}],["$","meta","1",{"name":"description","content":"深度解析动态气泡布局、概率算法、SVG连线系统的完整实现原理"}],["$","meta","2",{"name":"author","content":"Developer"}],["$","meta","3",{"name":"keywords","content":"portfolio,3D,interactive,web development,Three.js,Next.js"}],["$","meta","4",{"property":"og:title","content":"技能星座：React组件的宇宙级交互设计 | Interactive Portfolio"}],["$","meta","5",{"property":"og:description","content":"深度解析动态气泡布局、概率算法、SVG连线系统的完整实现原理"}],["$","meta","6",{"property":"og:type","content":"article"}],["$","meta","7",{"property":"article:published_time","content":"2025-06-22"}],["$","meta","8",{"property":"article:tag","content":"交互设计"}],["$","meta","9",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","10",{"name":"twitter:title","content":"技能星座：React组件的宇宙级交互设计 | Interactive Portfolio"}],["$","meta","11",{"name":"twitter:description","content":"深度解析动态气泡布局、概率算法、SVG连线系统的完整实现原理"}],["$","link","12",{"rel":"icon","href":"/MilkWind-Website/favicon.ico","type":"image/x-icon","sizes":"32x32"}]],"error":null,"digest":"$undefined"}
14:{"metadata":"$1c:metadata","error":null,"digest":"$undefined"}
