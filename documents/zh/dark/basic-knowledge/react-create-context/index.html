<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/de70bee13400563f.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/38943437573ce53c.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/5eacd01f773eed7f.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-d118f969809e6d65.js"/><script src="/_next/static/chunks/4bd1b696-5119e10e90c1bd1b.js" async=""></script><script src="/_next/static/chunks/1684-be5e4efdb509cc75.js" async=""></script><script src="/_next/static/chunks/main-app-c135286a205d98a2.js" async=""></script><script src="/_next/static/chunks/1899-6f0bb42883f79753.js" async=""></script><script src="/_next/static/chunks/app/layout-5c95b441a38f3a56.js" async=""></script><script src="/_next/static/chunks/app/error-10ebab2e11865aaf.js" async=""></script><script src="/_next/static/chunks/6874-fbe9a08eb79b991c.js" async=""></script><script src="/_next/static/chunks/app/not-found-38b9d1a0bc95ac08.js" async=""></script><script src="/_next/static/chunks/206-4f4cbf4d7156f437.js" async=""></script><script src="/_next/static/chunks/app/documents/layout-5f4e66d848ce7829.js" async=""></script><script src="/_next/static/chunks/2415-689c103fb3d2c28d.js" async=""></script><script src="/_next/static/chunks/8610-7bd3f91f3cf2a4d6.js" async=""></script><script src="/_next/static/chunks/app/documents/loading-552c4cd17346a076.js" async=""></script><script src="/_next/static/chunks/app/loading-0c530d99d5132c05.js" async=""></script><script src="/_next/static/chunks/b498d07c-095637f0f10883c6.js" async=""></script><script src="/_next/static/chunks/9554-b714f9de28e85d30.js" async=""></script><script src="/_next/static/chunks/app/documents/%5B...slug%5D/page-9ee3d086bd3810e0.js" async=""></script><title>React.createContext | Interactive Portfolio</title><meta name="description" content="React基础知识篇-React.createContext"/><meta name="author" content="Developer"/><meta name="keywords" content="portfolio,3D,interactive,web development,Three.js,Next.js"/><meta property="og:title" content="React.createContext | Interactive Portfolio"/><meta property="og:description" content="React基础知识篇-React.createContext"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2025-06-22"/><meta property="article:tag" content="React"/><meta property="article:tag" content="基础知识"/><meta property="article:tag" content="createContext"/><meta property="article:tag" content="Context API"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="React.createContext | Interactive Portfolio"/><meta name="twitter:description" content="React基础知识篇-React.createContext"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="32x32"/><script>document.querySelectorAll('body link[rel="icon"], body link[rel="apple-touch-icon"]').forEach(el => document.head.appendChild(el))</script><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__variable_188709 __variable_9a8899 font-sans antialiased min-h-screen bg-background text-foreground"><div class="fixed inset-0 w-full h-full overflow-hidden pointer-events-none z-0" style="background:linear-gradient(135deg, hsl(210, 80%, 60%), hsl(180, 40%, 50%))"></div><div class="fixed top-20 right-5 z-50"><div class="w-16 h-16 rounded-full backdrop-blur-md border animate-pulse bg-surface/60 border-surface/40"></div></div><!--$--><style>
:root {
  --bprogress-color: #0066cc;
  --bprogress-height: 4px;
  --bprogress-spinner-size: 18px;
  --bprogress-spinner-animation-duration: 400ms;
  --bprogress-spinner-border-size: 2px;
  --bprogress-box-shadow: 0 0 10px #0066cc, 0 0 5px #0066cc;
  --bprogress-z-index: 99999;
  --bprogress-spinner-top: 15px;
  --bprogress-spinner-bottom: auto;
  --bprogress-spinner-right: 15px;
  --bprogress-spinner-left: auto;
}

.bprogress {
  width: 0;
  height: 0;
  pointer-events: none;
  z-index: var(--bprogress-z-index);
}

.bprogress .bar {
  background: var(--bprogress-color);
  position: fixed;
  z-index: var(--bprogress-z-index);
  top: 0;
  left: 0;
  width: 100%;
  height: var(--bprogress-height);
}

/* Fancy blur effect */
.bprogress .peg {
  display: block;
  position: absolute;
  right: 0;
  width: 100px;
  height: 100%;
  box-shadow: var(--bprogress-box-shadow);
  opacity: 1.0;
  transform: rotate(3deg) translate(0px, -4px);
}

/* Remove these to get rid of the spinner */
.bprogress .spinner {
  display: block;
  position: fixed;
  z-index: var(--bprogress-z-index);
  top: var(--bprogress-spinner-top);
  bottom: var(--bprogress-spinner-bottom);
  right: var(--bprogress-spinner-right);
  left: var(--bprogress-spinner-left);
}

.bprogress .spinner-icon {
  width: var(--bprogress-spinner-size);
  height: var(--bprogress-spinner-size);
  box-sizing: border-box;
  border: solid var(--bprogress-spinner-border-size) transparent;
  border-top-color: var(--bprogress-color);
  border-left-color: var(--bprogress-color);
  border-radius: 50%;
  -webkit-animation: bprogress-spinner var(--bprogress-spinner-animation-duration) linear infinite;
  animation: bprogress-spinner var(--bprogress-spinner-animation-duration) linear infinite;
}

.bprogress-custom-parent {
  overflow: hidden;
  position: relative;
}

.bprogress-custom-parent .bprogress .spinner,
.bprogress-custom-parent .bprogress .bar {
  position: absolute;
}

.bprogress .indeterminate {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--bprogress-height);
  overflow: hidden;
}

.bprogress .indeterminate .inc,
.bprogress .indeterminate .dec {
  position: absolute;
  top: 0;
  height: 100%;
  background-color: var(--bprogress-color);
}

.bprogress .indeterminate .inc {
  animation: bprogress-indeterminate-increase 2s infinite;
}

.bprogress .indeterminate .dec {
  animation: bprogress-indeterminate-decrease 2s 0.5s infinite;
}

@-webkit-keyframes bprogress-spinner {
  0%   { -webkit-transform: rotate(0deg); transform: rotate(0deg); }
  100% { -webkit-transform: rotate(360deg); transform: rotate(360deg); }
}

@keyframes bprogress-spinner {
  0%   { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes bprogress-indeterminate-increase {
  from { left: -5%; width: 5%; }
  to { left: 130%; width: 100%; }
}

@keyframes bprogress-indeterminate-decrease {
  from { left: -80%; width: 80%; }
  to { left: 110%; width: 10%; }
}
</style><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--><!--$--><div class="relative z-30 min-h-screen bg-background "><div class="container mx-auto px-4 py-8 max-w-4xl"><div class="mb-8"><a class="inline-flex items-center text-primary hover:text-primary/80 transition-colors" href="/documents/">documents.backToDocuments</a></div><header class="mb-12"><div class="flex items-center gap-4 mb-4 text-sm text-foreground/60"><span class="px-3 py-1 bg-primary/20 text-primary rounded-full capitalize">basic knowledge</span><span>13 min read</span></div><h1 class="font-bold mb-4 bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent text-4xl md:text-5xl">React.createContext</h1><p class="text-xl text-foreground/80 max-w-3xl">React基础知识篇-React.createContext</p><div class="flex flex-wrap gap-2 mt-6"><span class="px-3 py-1 text-sm bg-accent/20 text-accent rounded-full">React</span><span class="px-3 py-1 text-sm bg-accent/20 text-accent rounded-full">基础知识</span><span class="px-3 py-1 text-sm bg-accent/20 text-accent rounded-full">createContext</span><span class="px-3 py-1 text-sm bg-accent/20 text-accent rounded-full">Context API</span></div></header><article class="prose prose-headings:mt-8 prose-headings:font-semibold prose-headings:text-foreground prose-h1:text-5xl prose-h2:text-4xl prose-h3:text-3xl prose-h4:text-2xl prose-h5:text-xl prose-h6:text-lg max-w-none "><div class="prose-pre:p-4 prose-pre:bg-surface w-full"><p class="text-base leading-7 mb-4 text-foreground"><code>React.createContext</code> 是 React 提供的 Context API 的核心函数，用于创建一个 Context 对象，解决组件间跨层级数据传递的问题，避免 &quot;props drilling&quot;（属性钻取）。</p>
<h3 id="基本作用" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#基本作用" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 基本作用">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">基本作用</strong>
        </h3>
<p class="text-base leading-7 mb-4 text-foreground">Context 提供了一种在组件树中共享数据的方式，无需通过每层组件手动传递 props：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">解决 props drilling 问题</strong>：避免在多层嵌套组件中逐层传递 props</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">全局状态管理</strong>：在组件树中共享主题、用户信息、语言设置等全局数据</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">跨组件通信</strong>：让任意层级的组件都能访问共享数据</li>
</ul>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="import%20React%2C%20%7B%20createContext%20%7D%20from%20'react'%3B%0A%2F%2F%20%E5%88%9B%E5%BB%BA%20Context%0Aconst%20ThemeContext%20%3D%20createContext()%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">import</span> <span class="hljs-title class_ inline">React</span>, { createContext } <span class="hljs-keyword inline">from</span> <span class="hljs-string inline">&#x27;react&#x27;</span>;

<span class="hljs-comment inline">// 创建 Context</span>
<span class="hljs-keyword inline">const</span> <span class="hljs-title class_ inline">ThemeContext</span> = <span class="hljs-title function_ inline">createContext</span>();
</code></pre>
            </div>
        
<h3 id="基本语法" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#基本语法" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 基本语法">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">基本语法</strong>
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="const%20MyContext%20%3D%20createContext(defaultValue)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">const</span> <span class="hljs-title class_ inline">MyContext</span> = <span class="hljs-title function_ inline">createContext</span>(defaultValue);
</code></pre>
            </div>
        
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">defaultValue</strong>：当组件树中没有匹配的 Provider 时使用的默认值</li>
</ul>
<h3 id="完整使用流程" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#完整使用流程" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 完整使用流程">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">完整使用流程</strong>
        </h3>
<h4 id="1-创建-context-和自定义-hook" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#1-创建-context-和自定义-hook" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 1. 创建 Context 和自定义 Hook">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">1. 创建 Context 和自定义 Hook</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="import%20React%2C%20%7B%20createContext%2C%20useContext%2C%20useState%2C%20useMemo%20%7D%20from%20'react'%3B%0A%2F%2F%20%E5%88%9B%E5%BB%BA%E4%B8%BB%E9%A2%98%20Context%EF%BC%88%E4%BF%9D%E6%8C%81%E7%A7%81%E6%9C%89%EF%BC%8C%E4%B8%8D%E5%AF%BC%E5%87%BA%EF%BC%89%0Aconst%20ThemeContext%20%3D%20createContext()%3B%0A%2F%2F%20%E8%87%AA%E5%AE%9A%E4%B9%89%20Hook%0Afunction%20useTheme()%20%7B%0Aconst%20context%20%3D%20useContext(ThemeContext)%3B%0Aif%20(!context)%20%7B%0Athrow%20new%20Error('useTheme%20%E5%BF%85%E9%A1%BB%E5%9C%A8%20ThemeProvider%20%E5%86%85%E9%83%A8%E4%BD%BF%E7%94%A8')%3B%0A%7D%0Areturn%20context%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">import</span> <span class="hljs-title class_ inline">React</span>, { createContext, useContext, useState, useMemo } <span class="hljs-keyword inline">from</span> <span class="hljs-string inline">&#x27;react&#x27;</span>;

<span class="hljs-comment inline">// 创建主题 Context（保持私有，不导出）</span>
<span class="hljs-keyword inline">const</span> <span class="hljs-title class_ inline">ThemeContext</span> = <span class="hljs-title function_ inline">createContext</span>();

<span class="hljs-comment inline">// 自定义 Hook</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">useTheme</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> context = <span class="hljs-title function_ inline">useContext</span>(<span class="hljs-title class_ inline">ThemeContext</span>);
  
  <span class="hljs-keyword inline">if</span> (!context) {
    <span class="hljs-keyword inline">throw</span> <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">Error</span>(<span class="hljs-string inline">&#x27;useTheme 必须在 ThemeProvider 内部使用&#x27;</span>);
  }
  
  <span class="hljs-keyword inline">return</span> context;
}
</code></pre>
            </div>
        
<h4 id="2-创建-provider-组件" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#2-创建-provider-组件" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 2. 创建 Provider 组件">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">2. 创建 Provider 组件</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20ThemeProvider(%7B%20children%20%7D)%20%7B%0Aconst%20%5Btheme%2C%20setTheme%5D%20%3D%20useState('light')%3B%0Aconst%20toggleTheme%20%3D%20()%20%3D%3E%20%7B%0AsetTheme(prev%20%3D%3E%20prev%20%3D%3D%3D%20'light'%20%3F%20'dark'%20%3A%20'light')%3B%0A%7D%3B%0A%2F%2F%20%E4%BD%BF%E7%94%A8%20useMemo%20%E4%BC%98%E5%8C%96%E6%80%A7%E8%83%BD%0Aconst%20value%20%3D%20useMemo(()%20%3D%3E%20(%7B%0Atheme%2C%0AtoggleTheme%0A%7D)%2C%20%5Btheme%5D)%3B%0Areturn%20(%0AThemeContext.Provider%20value%3D%7Bvalue%7D%3E%0A%7Bchildren%7D%0AThemeContext.Provider%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">ThemeProvider</span>(<span class="hljs-params inline">{ children }</span>) {
  <span class="hljs-keyword inline">const</span> [theme, setTheme] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-string inline">&#x27;light&#x27;</span>);

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">toggleTheme</span> = (<span class="hljs-params inline"></span>) =&gt; {
    <span class="hljs-title function_ inline">setTheme</span>(<span class="hljs-function inline"><span class="hljs-params inline">prev</span> =&gt;</span> prev === <span class="hljs-string inline">&#x27;light&#x27;</span> ? <span class="hljs-string inline">&#x27;dark&#x27;</span> : <span class="hljs-string inline">&#x27;light&#x27;</span>);
  };

  <span class="hljs-comment inline">// 使用 useMemo 优化性能</span>
  <span class="hljs-keyword inline">const</span> value = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> ({
    theme,
    toggleTheme
  }), [theme]);

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">ThemeContext.Provider</span> <span class="hljs-attr inline">value</span>=<span class="hljs-string inline">{value}</span>&gt;</span>
      {children}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">ThemeContext.Provider</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h4 id="3-使用自定义-hook-获取数据" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#3-使用自定义-hook-获取数据" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 3. 使用自定义 Hook 获取数据">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">3. 使用自定义 Hook 获取数据</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20Header()%20%7B%0Aconst%20%7B%20theme%2C%20toggleTheme%20%7D%20%3D%20useTheme()%3B%0Areturn%20(%0Aheader%20style%3D%7B%7B%0Abackground%3A%20theme%20%3D%3D%3D%20'light'%20%3F%20'%23fff'%20%3A%20'%23333'%2C%0Acolor%3A%20theme%20%3D%3D%3D%20'light'%20%3F%20'%23333'%20%3A%20'%23fff'%0A%7D%7D%3E%0Ah1%3E%E6%88%91%E7%9A%84%E5%BA%94%E7%94%A8h1%3E%0Abutton%20onClick%3D%7BtoggleTheme%7D%3E%0A%E5%88%87%E6%8D%A2%E5%88%B0%20%7Btheme%20%3D%3D%3D%20'light'%20%3F%20'%E6%9A%97%E8%89%B2'%20%3A%20'%E4%BA%AE%E8%89%B2'%7D%20%E4%B8%BB%E9%A2%98%0Abutton%3E%0Aheader%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">Header</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> { theme, toggleTheme } = <span class="hljs-title function_ inline">useTheme</span>();

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">header</span> <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{</span> 
      <span class="hljs-attr inline">background:</span> <span class="hljs-attr inline">theme</span> === <span class="hljs-string inline">&#x27;light&#x27;</span> ? &#x27;#<span class="hljs-attr inline">fff</span>&#x27; <span class="hljs-attr inline">:</span> &#x27;#<span class="hljs-attr inline">333</span>&#x27;,
      <span class="hljs-attr inline">color:</span> <span class="hljs-attr inline">theme</span> === <span class="hljs-string inline">&#x27;light&#x27;</span> ? &#x27;#<span class="hljs-attr inline">333</span>&#x27; <span class="hljs-attr inline">:</span> &#x27;#<span class="hljs-attr inline">fff</span>&#x27;
    }}&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">h1</span>&gt;</span>我的应用<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">h1</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{toggleTheme}</span>&gt;</span>
        切换到 {theme === &#x27;light&#x27; ? &#x27;暗色&#x27; : &#x27;亮色&#x27;} 主题
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">header</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h4 id="4-完整应用示例" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#4-完整应用示例" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 4. 完整应用示例">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">4. 完整应用示例</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20App()%20%7B%0Areturn%20(%0AThemeProvider%3E%0Adiv%3E%0AHeader%20%2F%3E%0AContent%20%2F%3E%0Adiv%3E%0AThemeProvider%3E%0A)%3B%0A%7D%0Afunction%20Content()%20%7B%0Aconst%20%7B%20theme%20%7D%20%3D%20useTheme()%3B%0Areturn%20(%0Amain%20style%3D%7B%7B%0Abackground%3A%20theme%20%3D%3D%3D%20'light'%20%3F%20'%23f5f5f5'%20%3A%20'%23222'%2C%0Acolor%3A%20theme%20%3D%3D%3D%20'light'%20%3F%20'%23333'%20%3A%20'%23fff'%2C%0Apadding%3A%20'20px'%0A%7D%7D%3E%0Ap%3E%E8%BF%99%E6%98%AF%E4%B8%BB%E8%A6%81%E5%86%85%E5%AE%B9%E5%8C%BA%E5%9F%9Fp%3E%0ASidebar%20%2F%3E%0Amain%3E%0A)%3B%0A%7D%0Afunction%20Sidebar()%20%7B%0Aconst%20%7B%20theme%20%7D%20%3D%20useTheme()%3B%0Areturn%20(%0Aaside%20style%3D%7B%7B%0Abackground%3A%20theme%20%3D%3D%3D%20'light'%20%3F%20'%23e0e0e0'%20%3A%20'%23444'%2C%0Apadding%3A%20'10px'%0A%7D%7D%3E%0Ap%3E%E4%BE%A7%E8%BE%B9%E6%A0%8F%E5%86%85%E5%AE%B9p%3E%0Aaside%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">App</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">ThemeProvider</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">Header</span> /&gt;</span>
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">Content</span> /&gt;</span>
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">ThemeProvider</span>&gt;</span></span>
  );
}

<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">Content</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> { theme } = <span class="hljs-title function_ inline">useTheme</span>();
  
  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">main</span> <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{</span>
      <span class="hljs-attr inline">background:</span> <span class="hljs-attr inline">theme</span> === <span class="hljs-string inline">&#x27;light&#x27;</span> ? &#x27;#<span class="hljs-attr inline">f5f5f5</span>&#x27; <span class="hljs-attr inline">:</span> &#x27;#<span class="hljs-attr inline">222</span>&#x27;,
      <span class="hljs-attr inline">color:</span> <span class="hljs-attr inline">theme</span> === <span class="hljs-string inline">&#x27;light&#x27;</span> ? &#x27;#<span class="hljs-attr inline">333</span>&#x27; <span class="hljs-attr inline">:</span> &#x27;#<span class="hljs-attr inline">fff</span>&#x27;,
      <span class="hljs-attr inline">padding:</span> &#x27;<span class="hljs-attr inline">20px</span>&#x27;
    }}&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>这是主要内容区域<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">Sidebar</span> /&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">main</span>&gt;</span></span>
  );
}

<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">Sidebar</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> { theme } = <span class="hljs-title function_ inline">useTheme</span>();
  
  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">aside</span> <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{</span>
      <span class="hljs-attr inline">background:</span> <span class="hljs-attr inline">theme</span> === <span class="hljs-string inline">&#x27;light&#x27;</span> ? &#x27;#<span class="hljs-attr inline">e0e0e0</span>&#x27; <span class="hljs-attr inline">:</span> &#x27;#<span class="hljs-attr inline">444</span>&#x27;,
      <span class="hljs-attr inline">padding:</span> &#x27;<span class="hljs-attr inline">10px</span>&#x27;
    }}&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>侧边栏内容<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">aside</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="多个-context-的使用" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#多个-context-的使用" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 多个 Context 的使用">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">多个 Context 的使用</strong>
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="%2F%2F%20%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%20Context%0Aconst%20UserContext%20%3D%20createContext()%3B%0A%2F%2F%20%E8%AF%AD%E8%A8%80%20Context%0Aconst%20LanguageContext%20%3D%20createContext()%3B%0A%2F%2F%20%E7%BB%84%E5%90%88%E5%A4%9A%E4%B8%AA%20Provider%0Afunction%20AppProviders(%7B%20children%20%7D)%20%7B%0Aconst%20%5Buser%2C%20setUser%5D%20%3D%20useState(null)%3B%0Aconst%20%5Blanguage%2C%20setLanguage%5D%20%3D%20useState('zh')%3B%0Areturn%20(%0AUserContext.Provider%20value%3D%7B%7B%20user%2C%20setUser%20%7D%7D%3E%0ALanguageContext.Provider%20value%3D%7B%7B%20language%2C%20setLanguage%20%7D%7D%3E%0AThemeContext.Provider%20value%3D%7B%7B%20theme%3A%20'light'%20%7D%7D%3E%0A%7Bchildren%7D%0AThemeContext.Provider%3E%0ALanguageContext.Provider%3E%0AUserContext.Provider%3E%0A)%3B%0A%7D%0A%2F%2F%20%E4%BD%BF%E7%94%A8%E5%A4%9A%E4%B8%AA%20Context%0Afunction%20UserProfile()%20%7B%0Aconst%20%7B%20user%20%7D%20%3D%20useContext(UserContext)%3B%0Aconst%20%7B%20language%20%7D%20%3D%20useContext(LanguageContext)%3B%0Aconst%20%7B%20theme%20%7D%20%3D%20useTheme()%3B%20%2F%2F%20ThemeContext%E5%B7%B2%E6%9C%89%E8%87%AA%E5%AE%9A%E4%B9%89Hook%0Areturn%20(%0Adiv%3E%0Ap%3E%E7%94%A8%E6%88%B7%3A%20%7Buser%3F.name%7Dp%3E%0Ap%3E%E8%AF%AD%E8%A8%80%3A%20%7Blanguage%7Dp%3E%0Ap%3E%E4%B8%BB%E9%A2%98%3A%20%7Btheme%7Dp%3E%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-comment inline">// 用户信息 Context</span>
<span class="hljs-keyword inline">const</span> <span class="hljs-title class_ inline">UserContext</span> = <span class="hljs-title function_ inline">createContext</span>();

<span class="hljs-comment inline">// 语言 Context  </span>
<span class="hljs-keyword inline">const</span> <span class="hljs-title class_ inline">LanguageContext</span> = <span class="hljs-title function_ inline">createContext</span>();

<span class="hljs-comment inline">// 组合多个 Provider</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">AppProviders</span>(<span class="hljs-params inline">{ children }</span>) {
  <span class="hljs-keyword inline">const</span> [user, setUser] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-literal inline">null</span>);
  <span class="hljs-keyword inline">const</span> [language, setLanguage] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-string inline">&#x27;zh&#x27;</span>);

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">UserContext.Provider</span> <span class="hljs-attr inline">value</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">user</span>, <span class="hljs-attr inline">setUser</span> }}&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">LanguageContext.Provider</span> <span class="hljs-attr inline">value</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">language</span>, <span class="hljs-attr inline">setLanguage</span> }}&gt;</span>
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">ThemeContext.Provider</span> <span class="hljs-attr inline">value</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">theme:</span> &#x27;<span class="hljs-attr inline">light</span>&#x27; }}&gt;</span>
          {children}
        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">ThemeContext.Provider</span>&gt;</span>
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">LanguageContext.Provider</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">UserContext.Provider</span>&gt;</span></span>
  );
}

<span class="hljs-comment inline">// 使用多个 Context</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">UserProfile</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> { user } = <span class="hljs-title function_ inline">useContext</span>(<span class="hljs-title class_ inline">UserContext</span>);
  <span class="hljs-keyword inline">const</span> { language } = <span class="hljs-title function_ inline">useContext</span>(<span class="hljs-title class_ inline">LanguageContext</span>);
  <span class="hljs-keyword inline">const</span> { theme } = <span class="hljs-title function_ inline">useTheme</span>(); <span class="hljs-comment inline">// ThemeContext已有自定义Hook</span>

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>用户: {user?.name}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>语言: {language}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>主题: {theme}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="为其他-context-创建自定义-hook" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#为其他-context-创建自定义-hook" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 为其他 Context 创建自定义 Hook">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">为其他 Context 创建自定义 Hook</strong>
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="%2F%2F%20%E4%B8%BA%E7%94%A8%E6%88%B7%20Context%20%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%20Hook%0Afunction%20useUser()%20%7B%0Aconst%20context%20%3D%20useContext(UserContext)%3B%0Aif%20(!context)%20%7B%0Athrow%20new%20Error('useUser%20%E5%BF%85%E9%A1%BB%E5%9C%A8%20UserProvider%20%E5%86%85%E9%83%A8%E4%BD%BF%E7%94%A8')%3B%0A%7D%0Areturn%20context%3B%0A%7D%0A%2F%2F%20%E4%B8%BA%E8%AF%AD%E8%A8%80%20Context%20%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%20Hook%0Afunction%20useLanguage()%20%7B%0Aconst%20context%20%3D%20useContext(LanguageContext)%3B%0Aif%20(!context)%20%7B%0Athrow%20new%20Error('useLanguage%20%E5%BF%85%E9%A1%BB%E5%9C%A8%20LanguageProvider%20%E5%86%85%E9%83%A8%E4%BD%BF%E7%94%A8')%3B%0A%7D%0Areturn%20context%3B%0A%7D%0A%2F%2F%20%E4%BD%BF%E7%94%A8%E5%A4%9A%E4%B8%AA%E8%87%AA%E5%AE%9A%E4%B9%89%20Hook%0Afunction%20MyComponent()%20%7B%0Aconst%20%7B%20theme%2C%20toggleTheme%20%7D%20%3D%20useTheme()%3B%0Aconst%20%7B%20user%2C%20setUser%20%7D%20%3D%20useUser()%3B%0Aconst%20%7B%20language%2C%20setLanguage%20%7D%20%3D%20useLanguage()%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E5%BD%93%E5%89%8D%E4%B8%BB%E9%A2%98%3A%20%7Btheme%7Dp%3E%0Ap%3E%E5%BD%93%E5%89%8D%E7%94%A8%E6%88%B7%3A%20%7Buser%3F.name%20%7C%7C%20'%E6%9C%AA%E7%99%BB%E5%BD%95'%7Dp%3E%0Ap%3E%E5%BD%93%E5%89%8D%E8%AF%AD%E8%A8%80%3A%20%7Blanguage%7Dp%3E%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-comment inline">// 为用户 Context 创建自定义 Hook</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">useUser</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> context = <span class="hljs-title function_ inline">useContext</span>(<span class="hljs-title class_ inline">UserContext</span>);
  
  <span class="hljs-keyword inline">if</span> (!context) {
    <span class="hljs-keyword inline">throw</span> <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">Error</span>(<span class="hljs-string inline">&#x27;useUser 必须在 UserProvider 内部使用&#x27;</span>);
  }
  
  <span class="hljs-keyword inline">return</span> context;
}

<span class="hljs-comment inline">// 为语言 Context 创建自定义 Hook</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">useLanguage</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> context = <span class="hljs-title function_ inline">useContext</span>(<span class="hljs-title class_ inline">LanguageContext</span>);
  
  <span class="hljs-keyword inline">if</span> (!context) {
    <span class="hljs-keyword inline">throw</span> <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">Error</span>(<span class="hljs-string inline">&#x27;useLanguage 必须在 LanguageProvider 内部使用&#x27;</span>);
  }
  
  <span class="hljs-keyword inline">return</span> context;
}

<span class="hljs-comment inline">// 使用多个自定义 Hook</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">MyComponent</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> { theme, toggleTheme } = <span class="hljs-title function_ inline">useTheme</span>();
  <span class="hljs-keyword inline">const</span> { user, setUser } = <span class="hljs-title function_ inline">useUser</span>();
  <span class="hljs-keyword inline">const</span> { language, setLanguage } = <span class="hljs-title function_ inline">useLanguage</span>();

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>当前主题: {theme}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>当前用户: {user?.name || &#x27;未登录&#x27;}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>当前语言: {language}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="复杂状态管理示例" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#复杂状态管理示例" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 复杂状态管理示例">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">复杂状态管理示例</strong>
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="%2F%2F%20%E8%B4%AD%E7%89%A9%E8%BD%A6%20Context%0Aconst%20CartContext%20%3D%20createContext()%3B%0Afunction%20CartProvider(%7B%20children%20%7D)%20%7B%0Aconst%20%5Bitems%2C%20setItems%5D%20%3D%20useState(%5B%5D)%3B%0Aconst%20addItem%20%3D%20(product)%20%3D%3E%20%7B%0AsetItems(prev%20%3D%3E%20%7B%0Aconst%20existingItem%20%3D%20prev.find(item%20%3D%3E%20item.id%20%3D%3D%3D%20product.id)%3B%0Aif%20(existingItem)%20%7B%0Areturn%20prev.map(item%20%3D%3E%0Aitem.id%20%3D%3D%3D%20product.id%0A%3F%20%7B%20...item%2C%20quantity%3A%20item.quantity%20%2B%201%20%7D%0A%3A%20item%0A)%3B%0A%7D%0Areturn%20%5B...prev%2C%20%7B%20...product%2C%20quantity%3A%201%20%7D%5D%3B%0A%7D)%3B%0A%7D%3B%0Aconst%20removeItem%20%3D%20(productId)%20%3D%3E%20%7B%0AsetItems(prev%20%3D%3E%20prev.filter(item%20%3D%3E%20item.id%20!%3D%3D%20productId))%3B%0A%7D%3B%0Aconst%20updateQuantity%20%3D%20(productId%2C%20quantity)%20%3D%3E%20%7B%0Aif%20(quantity%200)%20%7B%0AremoveItem(productId)%3B%0Areturn%3B%0A%7D%0AsetItems(prev%20%3D%3E%0Aprev.map(item%20%3D%3E%0Aitem.id%20%3D%3D%3D%20productId%0A%3F%20%7B%20...item%2C%20quantity%20%7D%0A%3A%20item%0A)%0A)%3B%0A%7D%3B%0Aconst%20getTotalPrice%20%3D%20()%20%3D%3E%20%7B%0Areturn%20items.reduce((total%2C%20item)%20%3D%3E%20total%20%2B%20item.price%20*%20item.quantity%2C%200)%3B%0A%7D%3B%0Aconst%20getTotalItems%20%3D%20()%20%3D%3E%20%7B%0Areturn%20items.reduce((total%2C%20item)%20%3D%3E%20total%20%2B%20item.quantity%2C%200)%3B%0A%7D%3B%0Aconst%20clearCart%20%3D%20()%20%3D%3E%20%7B%0AsetItems(%5B%5D)%3B%0A%7D%3B%0Aconst%20value%20%3D%20%7B%0Aitems%2C%0AaddItem%2C%0AremoveItem%2C%0AupdateQuantity%2C%0AgetTotalPrice%2C%0AgetTotalItems%2C%0AclearCart%0A%7D%3B%0Areturn%20(%0ACartContext.Provider%20value%3D%7Bvalue%7D%3E%0A%7Bchildren%7D%0ACartContext.Provider%3E%0A)%3B%0A%7D%0A%2F%2F%20%E8%B4%AD%E7%89%A9%E8%BD%A6%20Hook%0Afunction%20useCart()%20%7B%0Aconst%20context%20%3D%20useContext(CartContext)%3B%0Aif%20(!context)%20%7B%0Athrow%20new%20Error('useCart%20%E5%BF%85%E9%A1%BB%E5%9C%A8%20CartProvider%20%E5%86%85%E9%83%A8%E4%BD%BF%E7%94%A8')%3B%0A%7D%0Areturn%20context%3B%0A%7D%0A%2F%2F%20%E5%95%86%E5%93%81%E7%BB%84%E4%BB%B6%0Afunction%20ProductCard(%7B%20product%20%7D)%20%7B%0Aconst%20%7B%20addItem%20%7D%20%3D%20useCart()%3B%0Areturn%20(%0Adiv%20className%3D%22product-card%22%3E%0Ah3%3E%7Bproduct.name%7Dh3%3E%0Ap%3E%E4%BB%B7%E6%A0%BC%3A%20%C2%A5%7Bproduct.price%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20addItem(product)%7D%3E%0A%E5%8A%A0%E5%85%A5%E8%B4%AD%E7%89%A9%E8%BD%A6%0Abutton%3E%0Adiv%3E%0A)%3B%0A%7D%0A%2F%2F%20%E8%B4%AD%E7%89%A9%E8%BD%A6%E7%BB%84%E4%BB%B6%0Afunction%20Cart()%20%7B%0Aconst%20%7B%20items%2C%20updateQuantity%2C%20removeItem%2C%20getTotalPrice%2C%20clearCart%20%7D%20%3D%20useCart()%3B%0Areturn%20(%0Adiv%20className%3D%22cart%22%3E%0Ah2%3E%E8%B4%AD%E7%89%A9%E8%BD%A6h2%3E%0A%7Bitems.length%20%3D%3D%3D%200%20%3F%20(%0Ap%3E%E8%B4%AD%E7%89%A9%E8%BD%A6%E4%B8%BA%E7%A9%BAp%3E%0A)%20%3A%20(%0A%7Bitems.map(item%20%3D%3E%20(%0Adiv%20key%3D%7Bitem.id%7D%20className%3D%22cart-item%22%3E%0Aspan%3E%7Bitem.name%7Dspan%3E%0Aspan%3E%C2%A5%7Bitem.price%7Dspan%3E%0Ainput%0Atype%3D%22number%22%0Avalue%3D%7Bitem.quantity%7D%0AonChange%3D%7B(e)%20%3D%3E%20updateQuantity(item.id%2C%20parseInt(e.target.value))%7D%0Amin%3D%221%22%0A%2F%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20removeItem(item.id)%7D%3E%E5%88%A0%E9%99%A4button%3E%0Adiv%3E%0A))%7D%0Adiv%20className%3D%22cart-total%22%3E%0Ap%3E%E6%80%BB%E8%AE%A1%3A%20%C2%A5%7BgetTotalPrice()%7Dp%3E%0Abutton%20onClick%3D%7BclearCart%7D%3E%E6%B8%85%E7%A9%BA%E8%B4%AD%E7%89%A9%E8%BD%A6button%3E%0Adiv%3E%0A)%7D%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-comment inline">// 购物车 Context</span>
<span class="hljs-keyword inline">const</span> <span class="hljs-title class_ inline">CartContext</span> = <span class="hljs-title function_ inline">createContext</span>();

<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">CartProvider</span>(<span class="hljs-params inline">{ children }</span>) {
  <span class="hljs-keyword inline">const</span> [items, setItems] = <span class="hljs-title function_ inline">useState</span>([]);

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">addItem</span> = (<span class="hljs-params inline">product</span>) =&gt; {
    <span class="hljs-title function_ inline">setItems</span>(<span class="hljs-function inline"><span class="hljs-params inline">prev</span> =&gt;</span> {
      <span class="hljs-keyword inline">const</span> existingItem = prev.<span class="hljs-title function_ inline">find</span>(<span class="hljs-function inline"><span class="hljs-params inline">item</span> =&gt;</span> item.<span class="hljs-property inline">id</span> === product.<span class="hljs-property inline">id</span>);
      <span class="hljs-keyword inline">if</span> (existingItem) {
        <span class="hljs-keyword inline">return</span> prev.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline"><span class="hljs-params inline">item</span> =&gt;</span>
          item.<span class="hljs-property inline">id</span> === product.<span class="hljs-property inline">id</span>
            ? { ...item, <span class="hljs-attr inline">quantity</span>: item.<span class="hljs-property inline">quantity</span> + <span class="hljs-number inline">1</span> }
            : item
        );
      }
      <span class="hljs-keyword inline">return</span> [...prev, { ...product, <span class="hljs-attr inline">quantity</span>: <span class="hljs-number inline">1</span> }];
    });
  };

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">removeItem</span> = (<span class="hljs-params inline">productId</span>) =&gt; {
    <span class="hljs-title function_ inline">setItems</span>(<span class="hljs-function inline"><span class="hljs-params inline">prev</span> =&gt;</span> prev.<span class="hljs-title function_ inline">filter</span>(<span class="hljs-function inline"><span class="hljs-params inline">item</span> =&gt;</span> item.<span class="hljs-property inline">id</span> !== productId));
  };

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">updateQuantity</span> = (<span class="hljs-params inline">productId, quantity</span>) =&gt; {
    <span class="hljs-keyword inline">if</span> (quantity &lt;= <span class="hljs-number inline">0</span>) {
      <span class="hljs-title function_ inline">removeItem</span>(productId);
      <span class="hljs-keyword inline">return</span>;
    }
    
    <span class="hljs-title function_ inline">setItems</span>(<span class="hljs-function inline"><span class="hljs-params inline">prev</span> =&gt;</span>
      prev.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline"><span class="hljs-params inline">item</span> =&gt;</span>
        item.<span class="hljs-property inline">id</span> === productId
          ? { ...item, quantity }
          : item
      )
    );
  };

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">getTotalPrice</span> = (<span class="hljs-params inline"></span>) =&gt; {
    <span class="hljs-keyword inline">return</span> items.<span class="hljs-title function_ inline">reduce</span>(<span class="hljs-function inline">(<span class="hljs-params inline">total, item</span>) =&gt;</span> total + item.<span class="hljs-property inline">price</span> * item.<span class="hljs-property inline">quantity</span>, <span class="hljs-number inline">0</span>);
  };

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">getTotalItems</span> = (<span class="hljs-params inline"></span>) =&gt; {
    <span class="hljs-keyword inline">return</span> items.<span class="hljs-title function_ inline">reduce</span>(<span class="hljs-function inline">(<span class="hljs-params inline">total, item</span>) =&gt;</span> total + item.<span class="hljs-property inline">quantity</span>, <span class="hljs-number inline">0</span>);
  };

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">clearCart</span> = (<span class="hljs-params inline"></span>) =&gt; {
    <span class="hljs-title function_ inline">setItems</span>([]);
  };

  <span class="hljs-keyword inline">const</span> value = {
    items,
    addItem,
    removeItem,
    updateQuantity,
    getTotalPrice,
    getTotalItems,
    clearCart
  };

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">CartContext.Provider</span> <span class="hljs-attr inline">value</span>=<span class="hljs-string inline">{value}</span>&gt;</span>
      {children}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">CartContext.Provider</span>&gt;</span></span>
  );
}

<span class="hljs-comment inline">// 购物车 Hook</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">useCart</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> context = <span class="hljs-title function_ inline">useContext</span>(<span class="hljs-title class_ inline">CartContext</span>);
  <span class="hljs-keyword inline">if</span> (!context) {
    <span class="hljs-keyword inline">throw</span> <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">Error</span>(<span class="hljs-string inline">&#x27;useCart 必须在 CartProvider 内部使用&#x27;</span>);
  }
  <span class="hljs-keyword inline">return</span> context;
}

<span class="hljs-comment inline">// 商品组件</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">ProductCard</span>(<span class="hljs-params inline">{ product }</span>) {
  <span class="hljs-keyword inline">const</span> { addItem } = <span class="hljs-title function_ inline">useCart</span>();

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span> <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;product-card&quot;</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">h3</span>&gt;</span>{product.name}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">h3</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>价格: ¥{product.price}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> addItem(product)}&gt;
        加入购物车
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}

<span class="hljs-comment inline">// 购物车组件</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">Cart</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> { items, updateQuantity, removeItem, getTotalPrice, clearCart } = <span class="hljs-title function_ inline">useCart</span>();

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span> <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;cart&quot;</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">h2</span>&gt;</span>购物车<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">h2</span>&gt;</span>
      {items.length === 0 ? (
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>购物车为空<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      ) : (
        <span class="hljs-tag inline">&lt;&gt;</span>
          {items.map(item =&gt; (
            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span> <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{item.id}</span> <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;cart-item&quot;</span>&gt;</span>
              <span class="hljs-tag inline">&lt;<span class="hljs-name inline">span</span>&gt;</span>{item.name}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">span</span>&gt;</span>
              <span class="hljs-tag inline">&lt;<span class="hljs-name inline">span</span>&gt;</span>¥{item.price}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">span</span>&gt;</span>
              <span class="hljs-tag inline">&lt;<span class="hljs-name inline">input</span>
                <span class="hljs-attr inline">type</span>=<span class="hljs-string inline">&quot;number&quot;</span>
                <span class="hljs-attr inline">value</span>=<span class="hljs-string inline">{item.quantity}</span>
                <span class="hljs-attr inline">onChange</span>=<span class="hljs-string inline">{(e)</span> =&gt;</span> updateQuantity(item.id, parseInt(e.target.value))}
                min=&quot;1&quot;
              /&gt;
              <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> removeItem(item.id)}&gt;删除<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
            <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
          ))}
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span> <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;cart-total&quot;</span>&gt;</span>
            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>总计: ¥{getTotalPrice()}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{clearCart}</span>&gt;</span>清空购物车<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
          <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
        <span class="hljs-tag inline">&lt;/&gt;</span></span>
      )}
    &lt;/div&gt;
  );
}
</code></pre>
            </div>
        
<h3 id="与-usereducer-结合使用" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#与-usereducer-结合使用" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 与 useReducer 结合使用">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">与 useReducer 结合使用</strong>
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="import%20React%2C%20%7B%20createContext%2C%20useContext%2C%20useReducer%20%7D%20from%20'react'%3B%0A%2F%2F%20%E5%AE%9A%E4%B9%89%20actions%0Aconst%20ACTIONS%20%3D%20%7B%0ASET_LOADING%3A%20'SET_LOADING'%2C%0ASET_USER%3A%20'SET_USER'%2C%0ASET_ERROR%3A%20'SET_ERROR'%2C%0ALOGOUT%3A%20'LOGOUT'%0A%7D%3B%0A%2F%2F%20%E5%AE%9A%E4%B9%89%20reducer%0Afunction%20authReducer(state%2C%20action)%20%7B%0Aswitch%20(action.type)%20%7B%0Acase%20ACTIONS.SET_LOADING%3A%0Areturn%20%7B%20...state%2C%20loading%3A%20action.payload%20%7D%3B%0Acase%20ACTIONS.SET_USER%3A%0Areturn%20%7B%20...state%2C%20user%3A%20action.payload%2C%20loading%3A%20false%2C%20error%3A%20null%20%7D%3B%0Acase%20ACTIONS.SET_ERROR%3A%0Areturn%20%7B%20...state%2C%20error%3A%20action.payload%2C%20loading%3A%20false%20%7D%3B%0Acase%20ACTIONS.LOGOUT%3A%0Areturn%20%7B%20user%3A%20null%2C%20loading%3A%20false%2C%20error%3A%20null%20%7D%3B%0Adefault%3A%0Areturn%20state%3B%0A%7D%0A%7D%0A%2F%2F%20%E5%88%9D%E5%A7%8B%E7%8A%B6%E6%80%81%0Aconst%20initialState%20%3D%20%7B%0Auser%3A%20null%2C%0Aloading%3A%20false%2C%0Aerror%3A%20null%0A%7D%3B%0A%2F%2F%20%E5%88%9B%E5%BB%BA%20Context%0Aconst%20AuthContext%20%3D%20createContext()%3B%0A%2F%2F%20AuthProvider%20%E7%BB%84%E4%BB%B6%0Afunction%20AuthProvider(%7B%20children%20%7D)%20%7B%0Aconst%20%5Bstate%2C%20dispatch%5D%20%3D%20useReducer(authReducer%2C%20initialState)%3B%0Aconst%20login%20%3D%20async%20(email%2C%20password)%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20ACTIONS.SET_LOADING%2C%20payload%3A%20true%20%7D)%3B%0Atry%20%7B%0A%2F%2F%20%E6%A8%A1%E6%8B%9F%20API%20%E8%B0%83%E7%94%A8%0Aconst%20response%20%3D%20await%20fetch('%2Fapi%2Flogin'%2C%20%7B%0Amethod%3A%20'POST'%2C%0Aheaders%3A%20%7B%20'Content-Type'%3A%20'application%2Fjson'%20%7D%2C%0Abody%3A%20JSON.stringify(%7B%20email%2C%20password%20%7D)%0A%7D)%3B%0Aif%20(!response.ok)%20%7B%0Athrow%20new%20Error('%E7%99%BB%E5%BD%95%E5%A4%B1%E8%B4%A5')%3B%0A%7D%0Aconst%20user%20%3D%20await%20response.json()%3B%0Adispatch(%7B%20type%3A%20ACTIONS.SET_USER%2C%20payload%3A%20user%20%7D)%3B%0A%7D%20catch%20(error)%20%7B%0Adispatch(%7B%20type%3A%20ACTIONS.SET_ERROR%2C%20payload%3A%20error.message%20%7D)%3B%0A%7D%0A%7D%3B%0Aconst%20logout%20%3D%20()%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20ACTIONS.LOGOUT%20%7D)%3B%0A%7D%3B%0Aconst%20value%20%3D%20%7B%0A...state%2C%0Alogin%2C%0Alogout%0A%7D%3B%0Areturn%20(%0AAuthContext.Provider%20value%3D%7Bvalue%7D%3E%0A%7Bchildren%7D%0AAuthContext.Provider%3E%0A)%3B%0A%7D%0A%2F%2F%20%E8%87%AA%E5%AE%9A%E4%B9%89%20Hook%0Afunction%20useAuth()%20%7B%0Aconst%20context%20%3D%20useContext(AuthContext)%3B%0Aif%20(!context)%20%7B%0Athrow%20new%20Error('useAuth%20%E5%BF%85%E9%A1%BB%E5%9C%A8%20AuthProvider%20%E5%86%85%E9%83%A8%E4%BD%BF%E7%94%A8')%3B%0A%7D%0Areturn%20context%3B%0A%7D%0A%2F%2F%20%E7%99%BB%E5%BD%95%E7%BB%84%E4%BB%B6%0Afunction%20LoginForm()%20%7B%0Aconst%20%7B%20login%2C%20loading%2C%20error%20%7D%20%3D%20useAuth()%3B%0Aconst%20%5Bemail%2C%20setEmail%5D%20%3D%20useState('')%3B%0Aconst%20%5Bpassword%2C%20setPassword%5D%20%3D%20useState('')%3B%0Aconst%20handleSubmit%20%3D%20(e)%20%3D%3E%20%7B%0Ae.preventDefault()%3B%0Alogin(email%2C%20password)%3B%0A%7D%3B%0Areturn%20(%0Aform%20onSubmit%3D%7BhandleSubmit%7D%3E%0Adiv%3E%0Ainput%0Atype%3D%22email%22%0Aplaceholder%3D%22%E9%82%AE%E7%AE%B1%22%0Avalue%3D%7Bemail%7D%0AonChange%3D%7B(e)%20%3D%3E%20setEmail(e.target.value)%7D%0A%2F%3E%0Adiv%3E%0Adiv%3E%0Ainput%0Atype%3D%22password%22%0Aplaceholder%3D%22%E5%AF%86%E7%A0%81%22%0Avalue%3D%7Bpassword%7D%0AonChange%3D%7B(e)%20%3D%3E%20setPassword(e.target.value)%7D%0A%2F%3E%0Adiv%3E%0A%7Berror%20%26%26%20p%20style%3D%7B%7B%20color%3A%20'red'%20%7D%7D%3E%7Berror%7Dp%3E%7D%0Abutton%20type%3D%22submit%22%20disabled%3D%7Bloading%7D%3E%0A%7Bloading%20%3F%20'%E7%99%BB%E5%BD%95%E4%B8%AD...'%20%3A%20'%E7%99%BB%E5%BD%95'%7D%0Abutton%3E%0Aform%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">import</span> <span class="hljs-title class_ inline">React</span>, { createContext, useContext, useReducer } <span class="hljs-keyword inline">from</span> <span class="hljs-string inline">&#x27;react&#x27;</span>;

<span class="hljs-comment inline">// 定义 actions</span>
<span class="hljs-keyword inline">const</span> <span class="hljs-variable constant_ inline">ACTIONS</span> = {
  <span class="hljs-attr inline">SET_LOADING</span>: <span class="hljs-string inline">&#x27;SET_LOADING&#x27;</span>,
  <span class="hljs-attr inline">SET_USER</span>: <span class="hljs-string inline">&#x27;SET_USER&#x27;</span>,
  <span class="hljs-attr inline">SET_ERROR</span>: <span class="hljs-string inline">&#x27;SET_ERROR&#x27;</span>,
  <span class="hljs-attr inline">LOGOUT</span>: <span class="hljs-string inline">&#x27;LOGOUT&#x27;</span>
};

<span class="hljs-comment inline">// 定义 reducer</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">authReducer</span>(<span class="hljs-params inline">state, action</span>) {
  <span class="hljs-keyword inline">switch</span> (action.<span class="hljs-property inline">type</span>) {
    <span class="hljs-keyword inline">case</span> <span class="hljs-variable constant_ inline">ACTIONS</span>.<span class="hljs-property inline">SET_LOADING</span>:
      <span class="hljs-keyword inline">return</span> { ...state, <span class="hljs-attr inline">loading</span>: action.<span class="hljs-property inline">payload</span> };
    <span class="hljs-keyword inline">case</span> <span class="hljs-variable constant_ inline">ACTIONS</span>.<span class="hljs-property inline">SET_USER</span>:
      <span class="hljs-keyword inline">return</span> { ...state, <span class="hljs-attr inline">user</span>: action.<span class="hljs-property inline">payload</span>, <span class="hljs-attr inline">loading</span>: <span class="hljs-literal inline">false</span>, <span class="hljs-attr inline">error</span>: <span class="hljs-literal inline">null</span> };
    <span class="hljs-keyword inline">case</span> <span class="hljs-variable constant_ inline">ACTIONS</span>.<span class="hljs-property inline">SET_ERROR</span>:
      <span class="hljs-keyword inline">return</span> { ...state, <span class="hljs-attr inline">error</span>: action.<span class="hljs-property inline">payload</span>, <span class="hljs-attr inline">loading</span>: <span class="hljs-literal inline">false</span> };
    <span class="hljs-keyword inline">case</span> <span class="hljs-variable constant_ inline">ACTIONS</span>.<span class="hljs-property inline">LOGOUT</span>:
      <span class="hljs-keyword inline">return</span> { <span class="hljs-attr inline">user</span>: <span class="hljs-literal inline">null</span>, <span class="hljs-attr inline">loading</span>: <span class="hljs-literal inline">false</span>, <span class="hljs-attr inline">error</span>: <span class="hljs-literal inline">null</span> };
    <span class="hljs-attr inline">default</span>:
      <span class="hljs-keyword inline">return</span> state;
  }
}

<span class="hljs-comment inline">// 初始状态</span>
<span class="hljs-keyword inline">const</span> initialState = {
  <span class="hljs-attr inline">user</span>: <span class="hljs-literal inline">null</span>,
  <span class="hljs-attr inline">loading</span>: <span class="hljs-literal inline">false</span>,
  <span class="hljs-attr inline">error</span>: <span class="hljs-literal inline">null</span>
};

<span class="hljs-comment inline">// 创建 Context</span>
<span class="hljs-keyword inline">const</span> <span class="hljs-title class_ inline">AuthContext</span> = <span class="hljs-title function_ inline">createContext</span>();

<span class="hljs-comment inline">// AuthProvider 组件</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">AuthProvider</span>(<span class="hljs-params inline">{ children }</span>) {
  <span class="hljs-keyword inline">const</span> [state, dispatch] = <span class="hljs-title function_ inline">useReducer</span>(authReducer, initialState);

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">login</span> = <span class="hljs-keyword inline">async</span> (<span class="hljs-params inline">email, password</span>) =&gt; {
    <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-variable constant_ inline">ACTIONS</span>.<span class="hljs-property inline">SET_LOADING</span>, <span class="hljs-attr inline">payload</span>: <span class="hljs-literal inline">true</span> });
    
    <span class="hljs-keyword inline">try</span> {
      <span class="hljs-comment inline">// 模拟 API 调用</span>
      <span class="hljs-keyword inline">const</span> response = <span class="hljs-keyword inline">await</span> <span class="hljs-title function_ inline">fetch</span>(<span class="hljs-string inline">&#x27;/api/login&#x27;</span>, {
        <span class="hljs-attr inline">method</span>: <span class="hljs-string inline">&#x27;POST&#x27;</span>,
        <span class="hljs-attr inline">headers</span>: { <span class="hljs-string inline">&#x27;Content-Type&#x27;</span>: <span class="hljs-string inline">&#x27;application/json&#x27;</span> },
        <span class="hljs-attr inline">body</span>: <span class="hljs-title class_ inline">JSON</span>.<span class="hljs-title function_ inline">stringify</span>({ email, password })
      });
      
      <span class="hljs-keyword inline">if</span> (!response.<span class="hljs-property inline">ok</span>) {
        <span class="hljs-keyword inline">throw</span> <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">Error</span>(<span class="hljs-string inline">&#x27;登录失败&#x27;</span>);
      }
      
      <span class="hljs-keyword inline">const</span> user = <span class="hljs-keyword inline">await</span> response.<span class="hljs-title function_ inline">json</span>();
      <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-variable constant_ inline">ACTIONS</span>.<span class="hljs-property inline">SET_USER</span>, <span class="hljs-attr inline">payload</span>: user });
    } <span class="hljs-keyword inline">catch</span> (error) {
      <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-variable constant_ inline">ACTIONS</span>.<span class="hljs-property inline">SET_ERROR</span>, <span class="hljs-attr inline">payload</span>: error.<span class="hljs-property inline">message</span> });
    }
  };

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">logout</span> = (<span class="hljs-params inline"></span>) =&gt; {
    <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-variable constant_ inline">ACTIONS</span>.<span class="hljs-property inline">LOGOUT</span> });
  };

  <span class="hljs-keyword inline">const</span> value = {
    ...state,
    login,
    logout
  };

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">AuthContext.Provider</span> <span class="hljs-attr inline">value</span>=<span class="hljs-string inline">{value}</span>&gt;</span>
      {children}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">AuthContext.Provider</span>&gt;</span></span>
  );
}

<span class="hljs-comment inline">// 自定义 Hook</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">useAuth</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> context = <span class="hljs-title function_ inline">useContext</span>(<span class="hljs-title class_ inline">AuthContext</span>);
  <span class="hljs-keyword inline">if</span> (!context) {
    <span class="hljs-keyword inline">throw</span> <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">Error</span>(<span class="hljs-string inline">&#x27;useAuth 必须在 AuthProvider 内部使用&#x27;</span>);
  }
  <span class="hljs-keyword inline">return</span> context;
}

<span class="hljs-comment inline">// 登录组件</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">LoginForm</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> { login, loading, error } = <span class="hljs-title function_ inline">useAuth</span>();
  <span class="hljs-keyword inline">const</span> [email, setEmail] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-string inline">&#x27;&#x27;</span>);
  <span class="hljs-keyword inline">const</span> [password, setPassword] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-string inline">&#x27;&#x27;</span>);

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">handleSubmit</span> = (<span class="hljs-params inline">e</span>) =&gt; {
    e.<span class="hljs-title function_ inline">preventDefault</span>();
    <span class="hljs-title function_ inline">login</span>(email, password);
  };

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">form</span> <span class="hljs-attr inline">onSubmit</span>=<span class="hljs-string inline">{handleSubmit}</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">input</span>
          <span class="hljs-attr inline">type</span>=<span class="hljs-string inline">&quot;email&quot;</span>
          <span class="hljs-attr inline">placeholder</span>=<span class="hljs-string inline">&quot;邮箱&quot;</span>
          <span class="hljs-attr inline">value</span>=<span class="hljs-string inline">{email}</span>
          <span class="hljs-attr inline">onChange</span>=<span class="hljs-string inline">{(e)</span> =&gt;</span> setEmail(e.target.value)}
        /&gt;
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">input</span>
          <span class="hljs-attr inline">type</span>=<span class="hljs-string inline">&quot;password&quot;</span>
          <span class="hljs-attr inline">placeholder</span>=<span class="hljs-string inline">&quot;密码&quot;</span>
          <span class="hljs-attr inline">value</span>=<span class="hljs-string inline">{password}</span>
          <span class="hljs-attr inline">onChange</span>=<span class="hljs-string inline">{(e)</span> =&gt;</span> setPassword(e.target.value)}
        /&gt;
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
      {error &amp;&amp; <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span> <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">color:</span> &#x27;<span class="hljs-attr inline">red</span>&#x27; }}&gt;</span>{error}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>}
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">type</span>=<span class="hljs-string inline">&quot;submit&quot;</span> <span class="hljs-attr inline">disabled</span>=<span class="hljs-string inline">{loading}</span>&gt;</span>
        {loading ? &#x27;登录中...&#x27; : &#x27;登录&#x27;}
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">form</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="性能优化" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#性能优化" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 性能优化">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">性能优化</strong>
        </h3>
<h4 id="避免不必要的重新渲染" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#避免不必要的重新渲染" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 避免不必要的重新渲染">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">避免不必要的重新渲染</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="%2F%2F%20%E9%97%AE%E9%A2%98%EF%BC%9Avalue%20%E5%AF%B9%E8%B1%A1%E6%AF%8F%E6%AC%A1%E9%83%BD%E4%BC%9A%E9%87%8D%E6%96%B0%E5%88%9B%E5%BB%BA%0Afunction%20BadProvider(%7B%20children%20%7D)%20%7B%0Aconst%20%5Buser%2C%20setUser%5D%20%3D%20useState(null)%3B%0Areturn%20(%0AUserContext.Provider%20value%3D%7B%7B%20user%2C%20setUser%20%7D%7D%3E%0A%7Bchildren%7D%0AUserContext.Provider%3E%0A)%3B%0A%7D%0A%2F%2F%20%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%EF%BC%9A%E4%BD%BF%E7%94%A8%20useMemo%20%E7%BC%93%E5%AD%98%20value%0Afunction%20GoodProvider(%7B%20children%20%7D)%20%7B%0Aconst%20%5Buser%2C%20setUser%5D%20%3D%20useState(null)%3B%0Aconst%20value%20%3D%20useMemo(()%20%3D%3E%20(%7B%0Auser%2C%0AsetUser%0A%7D)%2C%20%5Buser%5D)%3B%0Areturn%20(%0AUserContext.Provider%20value%3D%7Bvalue%7D%3E%0A%7Bchildren%7D%0AUserContext.Provider%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-comment inline">// 问题：value 对象每次都会重新创建</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">BadProvider</span>(<span class="hljs-params inline">{ children }</span>) {
  <span class="hljs-keyword inline">const</span> [user, setUser] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-literal inline">null</span>);
  
  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">UserContext.Provider</span> <span class="hljs-attr inline">value</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">user</span>, <span class="hljs-attr inline">setUser</span> }}&gt;</span>
      {children}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">UserContext.Provider</span>&gt;</span></span>
  );
}

<span class="hljs-comment inline">// 解决方案：使用 useMemo 缓存 value</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">GoodProvider</span>(<span class="hljs-params inline">{ children }</span>) {
  <span class="hljs-keyword inline">const</span> [user, setUser] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-literal inline">null</span>);
  
  <span class="hljs-keyword inline">const</span> value = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> ({
    user,
    setUser
  }), [user]);
  
  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">UserContext.Provider</span> <span class="hljs-attr inline">value</span>=<span class="hljs-string inline">{value}</span>&gt;</span>
      {children}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">UserContext.Provider</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h4 id="拆分-context" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#拆分-context" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 拆分 Context">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">拆分 Context</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="%2F%2F%20%E6%8B%86%E5%88%86%E9%A2%91%E7%B9%81%E5%8F%98%E5%8C%96%E5%92%8C%E4%B8%8D%E5%B8%B8%E5%8F%98%E5%8C%96%E7%9A%84%E6%95%B0%E6%8D%AE%0Aconst%20UserDataContext%20%3D%20createContext()%3B%20%2F%2F%20%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%EF%BC%88%E4%B8%8D%E5%B8%B8%E5%8F%98%EF%BC%89%0Aconst%20UserActionsContext%20%3D%20createContext()%3B%20%2F%2F%20%E7%94%A8%E6%88%B7%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%8D%E5%8F%98%EF%BC%89%0Afunction%20UserProvider(%7B%20children%20%7D)%20%7B%0Aconst%20%5Buser%2C%20setUser%5D%20%3D%20useState(null)%3B%0A%2F%2F%20%E6%93%8D%E4%BD%9C%E5%87%BD%E6%95%B0%E4%B8%8D%E4%BC%9A%E5%8F%98%E5%8C%96%0Aconst%20actions%20%3D%20useMemo(()%20%3D%3E%20(%7B%0Alogin%3A%20(userData)%20%3D%3E%20setUser(userData)%2C%0Alogout%3A%20()%20%3D%3E%20setUser(null)%2C%0AupdateProfile%3A%20(updates)%20%3D%3E%20setUser(prev%20%3D%3E%20(%7B%20...prev%2C%20...updates%20%7D))%0A%7D)%2C%20%5B%5D)%3B%0Areturn%20(%0AUserActionsContext.Provider%20value%3D%7Bactions%7D%3E%0AUserDataContext.Provider%20value%3D%7Buser%7D%3E%0A%7Bchildren%7D%0AUserDataContext.Provider%3E%0AUserActionsContext.Provider%3E%0A)%3B%0A%7D%0A%2F%2F%20%E5%88%86%E5%88%AB%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E5%92%8C%E6%93%8D%E4%BD%9C%0Afunction%20useUserData()%20%7B%0Areturn%20useContext(UserDataContext)%3B%0A%7D%0Afunction%20useUserActions()%20%7B%0Areturn%20useContext(UserActionsContext)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-comment inline">// 拆分频繁变化和不常变化的数据</span>
<span class="hljs-keyword inline">const</span> <span class="hljs-title class_ inline">UserDataContext</span> = <span class="hljs-title function_ inline">createContext</span>(); <span class="hljs-comment inline">// 用户信息（不常变）</span>
<span class="hljs-keyword inline">const</span> <span class="hljs-title class_ inline">UserActionsContext</span> = <span class="hljs-title function_ inline">createContext</span>(); <span class="hljs-comment inline">// 用户操作（不变）</span>

<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">UserProvider</span>(<span class="hljs-params inline">{ children }</span>) {
  <span class="hljs-keyword inline">const</span> [user, setUser] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-literal inline">null</span>);
  
  <span class="hljs-comment inline">// 操作函数不会变化</span>
  <span class="hljs-keyword inline">const</span> actions = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> ({
    <span class="hljs-attr inline">login</span>: <span class="hljs-function inline">(<span class="hljs-params inline">userData</span>) =&gt;</span> <span class="hljs-title function_ inline">setUser</span>(userData),
    <span class="hljs-attr inline">logout</span>: <span class="hljs-function inline">() =&gt;</span> <span class="hljs-title function_ inline">setUser</span>(<span class="hljs-literal inline">null</span>),
    <span class="hljs-attr inline">updateProfile</span>: <span class="hljs-function inline">(<span class="hljs-params inline">updates</span>) =&gt;</span> <span class="hljs-title function_ inline">setUser</span>(<span class="hljs-function inline"><span class="hljs-params inline">prev</span> =&gt;</span> ({ ...prev, ...updates }))
  }), []);

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">UserActionsContext.Provider</span> <span class="hljs-attr inline">value</span>=<span class="hljs-string inline">{actions}</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">UserDataContext.Provider</span> <span class="hljs-attr inline">value</span>=<span class="hljs-string inline">{user}</span>&gt;</span>
        {children}
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">UserDataContext.Provider</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">UserActionsContext.Provider</span>&gt;</span></span>
  );
}

<span class="hljs-comment inline">// 分别获取数据和操作</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">useUserData</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">return</span> <span class="hljs-title function_ inline">useContext</span>(<span class="hljs-title class_ inline">UserDataContext</span>);
}

<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">useUserActions</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">return</span> <span class="hljs-title function_ inline">useContext</span>(<span class="hljs-title class_ inline">UserActionsContext</span>);
}
</code></pre>
            </div>
        
<h3 id="类组件中的使用" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#类组件中的使用" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 类组件中的使用">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">类组件中的使用</strong>
        </h3>
<h4 id="consumer-组件" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#consumer-组件" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Consumer 组件">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">Consumer 组件</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="%2F%2F%20%E6%B3%A8%E6%84%8F%EF%BC%9AConsumer%20%E4%BB%8D%E9%9C%80%E8%A6%81%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8%20Context%0A%2F%2F%20%E5%9B%A0%E4%B8%BA%E7%B1%BB%E7%BB%84%E4%BB%B6%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8%20Hook%EF%BC%8C%E9%9C%80%E8%A6%81%E5%AF%BC%E5%87%BA%20Context%0Aexport%20const%20ThemeContext%20%3D%20createContext()%3B%20%2F%2F%20%E9%9C%80%E8%A6%81%E5%AF%BC%E5%87%BA%E4%BE%9B%20Consumer%20%E4%BD%BF%E7%94%A8%0Afunction%20MyClassComponent()%20%7B%0Areturn%20(%0AThemeContext.Consumer%3E%0A%7B(%7B%20theme%2C%20toggleTheme%20%7D)%20%3D%3E%20(%0Adiv%20style%3D%7B%7B%20background%3A%20theme%20%3D%3D%3D%20'light'%20%3F%20'%23fff'%20%3A%20'%23333'%20%7D%7D%3E%0Abutton%20onClick%3D%7BtoggleTheme%7D%3E%E5%88%87%E6%8D%A2%E4%B8%BB%E9%A2%98button%3E%0Adiv%3E%0A)%7D%0AThemeContext.Consumer%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-comment inline">// 注意：Consumer 仍需要直接使用 Context</span>
<span class="hljs-comment inline">// 因为类组件无法使用 Hook，需要导出 Context</span>
<span class="hljs-keyword inline">export</span> <span class="hljs-keyword inline">const</span> <span class="hljs-title class_ inline">ThemeContext</span> = <span class="hljs-title function_ inline">createContext</span>(); <span class="hljs-comment inline">// 需要导出供 Consumer 使用</span>

<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">MyClassComponent</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">ThemeContext.Consumer</span>&gt;</span>
      {({ theme, toggleTheme }) =&gt; (
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span> <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">background:</span> <span class="hljs-attr inline">theme</span> === <span class="hljs-string inline">&#x27;light&#x27;</span> ? &#x27;#<span class="hljs-attr inline">fff</span>&#x27; <span class="hljs-attr inline">:</span> &#x27;#<span class="hljs-attr inline">333</span>&#x27; }}&gt;</span>
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{toggleTheme}</span>&gt;</span>切换主题<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
      )}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">ThemeContext.Consumer</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h4 id="contexttype" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#contexttype" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to contextType">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">contextType</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="class%20MyClassComponent%20extends%20React.Component%20%7B%0Astatic%20contextType%20%3D%20ThemeContext%3B%20%2F%2F%20%E9%9C%80%E8%A6%81%E7%9B%B4%E6%8E%A5%E5%BC%95%E7%94%A8%20Context%0Arender()%20%7B%0Aconst%20%7B%20theme%2C%20toggleTheme%20%7D%20%3D%20this.context%3B%0Areturn%20(%0Adiv%20style%3D%7B%7B%20background%3A%20theme%20%3D%3D%3D%20'light'%20%3F%20'%23fff'%20%3A%20'%23333'%20%7D%7D%3E%0Abutton%20onClick%3D%7BtoggleTheme%7D%3E%E5%88%87%E6%8D%A2%E4%B8%BB%E9%A2%98button%3E%0Adiv%3E%0A)%3B%0A%7D%0A%7D%0A%2F%2F%20%E6%8E%A8%E8%8D%90%EF%BC%9A%E5%B0%86%E7%B1%BB%E7%BB%84%E4%BB%B6%E6%94%B9%E4%B8%BA%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6%EF%BC%8C%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89%20Hook%0Afunction%20MyFunctionComponent()%20%7B%0Aconst%20%7B%20theme%2C%20toggleTheme%20%7D%20%3D%20useTheme()%3B%0Areturn%20(%0Adiv%20style%3D%7B%7B%20background%3A%20theme%20%3D%3D%3D%20'light'%20%3F%20'%23fff'%20%3A%20'%23333'%20%7D%7D%3E%0Abutton%20onClick%3D%7BtoggleTheme%7D%3E%E5%88%87%E6%8D%A2%E4%B8%BB%E9%A2%98button%3E%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">class</span> <span class="hljs-title class_ inline">MyClassComponent</span> <span class="hljs-keyword inline">extends</span> <span class="hljs-title class_ inherited__ inline">React.Component</span> {
  <span class="hljs-keyword inline">static</span> contextType = <span class="hljs-title class_ inline">ThemeContext</span>; <span class="hljs-comment inline">// 需要直接引用 Context</span>

  <span class="hljs-title function_ inline">render</span>(<span class="hljs-params inline"></span>) {
    <span class="hljs-keyword inline">const</span> { theme, toggleTheme } = <span class="hljs-variable language_ inline">this</span>.<span class="hljs-property inline">context</span>;
    
    <span class="hljs-keyword inline">return</span> (
      <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span> <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">background:</span> <span class="hljs-attr inline">theme</span> === <span class="hljs-string inline">&#x27;light&#x27;</span> ? &#x27;#<span class="hljs-attr inline">fff</span>&#x27; <span class="hljs-attr inline">:</span> &#x27;#<span class="hljs-attr inline">333</span>&#x27; }}&gt;</span>
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{toggleTheme}</span>&gt;</span>切换主题<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
    );
  }
}

<span class="hljs-comment inline">// 推荐：将类组件改为函数组件，使用自定义 Hook</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">MyFunctionComponent</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> { theme, toggleTheme } = <span class="hljs-title function_ inline">useTheme</span>();
  
  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span> <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">background:</span> <span class="hljs-attr inline">theme</span> === <span class="hljs-string inline">&#x27;light&#x27;</span> ? &#x27;#<span class="hljs-attr inline">fff</span>&#x27; <span class="hljs-attr inline">:</span> &#x27;#<span class="hljs-attr inline">333</span>&#x27; }}&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{toggleTheme}</span>&gt;</span>切换主题<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="完整的自定义-hook-最佳实践示例" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#完整的自定义-hook-最佳实践示例" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 完整的自定义 Hook 最佳实践示例">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">完整的自定义 Hook 最佳实践示例</strong>
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="%2F%2F%20contexts%2FThemeContext.js%0Aimport%20React%2C%20%7B%20createContext%2C%20useContext%2C%20useState%2C%20useMemo%20%7D%20from%20'react'%3B%0A%2F%2F%20Context%20%E4%BF%9D%E6%8C%81%E7%A7%81%E6%9C%89%0Aconst%20ThemeContext%20%3D%20createContext()%3B%0A%2F%2F%20Provider%20%E7%BB%84%E4%BB%B6%0Aexport%20function%20ThemeProvider(%7B%20children%20%7D)%20%7B%0Aconst%20%5Btheme%2C%20setTheme%5D%20%3D%20useState('light')%3B%0Aconst%20toggleTheme%20%3D%20()%20%3D%3E%20%7B%0AsetTheme(prev%20%3D%3E%20prev%20%3D%3D%3D%20'light'%20%3F%20'dark'%20%3A%20'light')%3B%0A%7D%3B%0A%2F%2F%20%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%EF%BC%9A%E7%BC%93%E5%AD%98%20Context%20value%0Aconst%20value%20%3D%20useMemo(()%20%3D%3E%20(%7B%0Atheme%2C%0AtoggleTheme%0A%7D)%2C%20%5Btheme%5D)%3B%0Areturn%20(%0AThemeContext.Provider%20value%3D%7Bvalue%7D%3E%0A%7Bchildren%7D%0AThemeContext.Provider%3E%0A)%3B%0A%7D%0A%2F%2F%20%E8%87%AA%E5%AE%9A%E4%B9%89%20Hook%EF%BC%88%E5%8C%85%E5%90%AB%E9%94%99%E8%AF%AF%E6%A3%80%E6%9F%A5%EF%BC%89%0Aexport%20function%20useTheme()%20%7B%0Aconst%20context%20%3D%20useContext(ThemeContext)%3B%0Aif%20(!context)%20%7B%0Athrow%20new%20Error('useTheme%20%E5%BF%85%E9%A1%BB%E5%9C%A8%20ThemeProvider%20%E5%86%85%E9%83%A8%E4%BD%BF%E7%94%A8')%3B%0A%7D%0Areturn%20context%3B%0A%7D%0A%2F%2F%20%E5%8F%AF%E9%80%89%EF%BC%9A%E4%B8%BA%20TypeScript%20%E6%8F%90%E4%BE%9B%E7%B1%BB%E5%9E%8B%0Aexport%20type%20Theme%20%3D%20'light'%20%7C%20'dark'%3B%0Aexport%20interface%20ThemeContextType%20%7B%0Atheme%3A%20Theme%3B%0AtoggleTheme%3A%20()%20%3D%3E%20void%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-comment inline">// contexts/ThemeContext.js</span>
<span class="hljs-keyword inline">import</span> <span class="hljs-title class_ inline">React</span>, { createContext, useContext, useState, useMemo } <span class="hljs-keyword inline">from</span> <span class="hljs-string inline">&#x27;react&#x27;</span>;

<span class="hljs-comment inline">// Context 保持私有</span>
<span class="hljs-keyword inline">const</span> <span class="hljs-title class_ inline">ThemeContext</span> = <span class="hljs-title function_ inline">createContext</span>();

<span class="hljs-comment inline">// Provider 组件</span>
<span class="hljs-keyword inline">export</span> <span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">ThemeProvider</span>(<span class="hljs-params inline">{ children }</span>) {
  <span class="hljs-keyword inline">const</span> [theme, setTheme] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-string inline">&#x27;light&#x27;</span>);
  
  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">toggleTheme</span> = (<span class="hljs-params inline"></span>) =&gt; {
    <span class="hljs-title function_ inline">setTheme</span>(<span class="hljs-function inline"><span class="hljs-params inline">prev</span> =&gt;</span> prev === <span class="hljs-string inline">&#x27;light&#x27;</span> ? <span class="hljs-string inline">&#x27;dark&#x27;</span> : <span class="hljs-string inline">&#x27;light&#x27;</span>);
  };

  <span class="hljs-comment inline">// 性能优化：缓存 Context value</span>
  <span class="hljs-keyword inline">const</span> value = <span class="hljs-title function_ inline">useMemo</span>(<span class="hljs-function inline">() =&gt;</span> ({
    theme,
    toggleTheme
  }), [theme]);

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">ThemeContext.Provider</span> <span class="hljs-attr inline">value</span>=<span class="hljs-string inline">{value}</span>&gt;</span>
      {children}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">ThemeContext.Provider</span>&gt;</span></span>
  );
}

<span class="hljs-comment inline">// 自定义 Hook（包含错误检查）</span>
<span class="hljs-keyword inline">export</span> <span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">useTheme</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> context = <span class="hljs-title function_ inline">useContext</span>(<span class="hljs-title class_ inline">ThemeContext</span>);
  
  <span class="hljs-keyword inline">if</span> (!context) {
    <span class="hljs-keyword inline">throw</span> <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">Error</span>(<span class="hljs-string inline">&#x27;useTheme 必须在 ThemeProvider 内部使用&#x27;</span>);
  }
  
  <span class="hljs-keyword inline">return</span> context;
}

<span class="hljs-comment inline">// 可选：为 TypeScript 提供类型</span>
<span class="hljs-keyword inline">export</span> type <span class="hljs-title class_ inline">Theme</span> = <span class="hljs-string inline">&#x27;light&#x27;</span> | <span class="hljs-string inline">&#x27;dark&#x27;</span>;
<span class="hljs-keyword inline">export</span> interface <span class="hljs-title class_ inline">ThemeContextType</span> {
  <span class="hljs-attr inline">theme</span>: <span class="hljs-title class_ inline">Theme</span>;
  <span class="hljs-attr inline">toggleTheme</span>: <span class="hljs-function inline">() =&gt;</span> <span class="hljs-keyword inline">void</span>;
}
</code></pre>
            </div>
        

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="%2F%2F%20components%2FApp.js%0Aimport%20React%20from%20'react'%3B%0Aimport%20%7B%20ThemeProvider%20%7D%20from%20'..%2Fcontexts%2FThemeContext'%3B%0Aimport%20Header%20from%20'.%2FHeader'%3B%0Aimport%20Content%20from%20'.%2FContent'%3B%0Afunction%20App()%20%7B%0Areturn%20(%0AThemeProvider%3E%0AHeader%20%2F%3E%0AContent%20%2F%3E%0AThemeProvider%3E%0A)%3B%0A%7D%0Aexport%20default%20App%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-comment inline">// components/App.js</span>
<span class="hljs-keyword inline">import</span> <span class="hljs-title class_ inline">React</span> <span class="hljs-keyword inline">from</span> <span class="hljs-string inline">&#x27;react&#x27;</span>;
<span class="hljs-keyword inline">import</span> { <span class="hljs-title class_ inline">ThemeProvider</span> } <span class="hljs-keyword inline">from</span> <span class="hljs-string inline">&#x27;../contexts/ThemeContext&#x27;</span>;
<span class="hljs-keyword inline">import</span> <span class="hljs-title class_ inline">Header</span> <span class="hljs-keyword inline">from</span> <span class="hljs-string inline">&#x27;./Header&#x27;</span>;
<span class="hljs-keyword inline">import</span> <span class="hljs-title class_ inline">Content</span> <span class="hljs-keyword inline">from</span> <span class="hljs-string inline">&#x27;./Content&#x27;</span>;

<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">App</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">ThemeProvider</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">Header</span> /&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">Content</span> /&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">ThemeProvider</span>&gt;</span></span>
  );
}

<span class="hljs-keyword inline">export</span> <span class="hljs-keyword inline">default</span> <span class="hljs-title class_ inline">App</span>;
</code></pre>
            </div>
        

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="%2F%2F%20components%2FHeader.js%0Aimport%20React%20from%20'react'%3B%0Aimport%20%7B%20useTheme%20%7D%20from%20'..%2Fcontexts%2FThemeContext'%3B%0Afunction%20Header()%20%7B%0Aconst%20%7B%20theme%2C%20toggleTheme%20%7D%20%3D%20useTheme()%3B%0Areturn%20(%0Aheader%20style%3D%7B%7B%0Abackground%3A%20theme%20%3D%3D%3D%20'light'%20%3F%20'%23fff'%20%3A%20'%23333'%2C%0Acolor%3A%20theme%20%3D%3D%3D%20'light'%20%3F%20'%23333'%20%3A%20'%23fff'%0A%7D%7D%3E%0Ah1%3E%E6%88%91%E7%9A%84%E5%BA%94%E7%94%A8h1%3E%0Abutton%20onClick%3D%7BtoggleTheme%7D%3E%0A%E5%88%87%E6%8D%A2%E4%B8%BB%E9%A2%98%0Abutton%3E%0Aheader%3E%0A)%3B%0A%7D%0Aexport%20default%20Header%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-comment inline">// components/Header.js</span>
<span class="hljs-keyword inline">import</span> <span class="hljs-title class_ inline">React</span> <span class="hljs-keyword inline">from</span> <span class="hljs-string inline">&#x27;react&#x27;</span>;
<span class="hljs-keyword inline">import</span> { useTheme } <span class="hljs-keyword inline">from</span> <span class="hljs-string inline">&#x27;../contexts/ThemeContext&#x27;</span>;

<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">Header</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> { theme, toggleTheme } = <span class="hljs-title function_ inline">useTheme</span>();

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">header</span> <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{</span>
      <span class="hljs-attr inline">background:</span> <span class="hljs-attr inline">theme</span> === <span class="hljs-string inline">&#x27;light&#x27;</span> ? &#x27;#<span class="hljs-attr inline">fff</span>&#x27; <span class="hljs-attr inline">:</span> &#x27;#<span class="hljs-attr inline">333</span>&#x27;,
      <span class="hljs-attr inline">color:</span> <span class="hljs-attr inline">theme</span> === <span class="hljs-string inline">&#x27;light&#x27;</span> ? &#x27;#<span class="hljs-attr inline">333</span>&#x27; <span class="hljs-attr inline">:</span> &#x27;#<span class="hljs-attr inline">fff</span>&#x27;
    }}&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">h1</span>&gt;</span>我的应用<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">h1</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{toggleTheme}</span>&gt;</span>
        切换主题
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">header</span>&gt;</span></span>
  );
}

<span class="hljs-keyword inline">export</span> <span class="hljs-keyword inline">default</span> <span class="hljs-title class_ inline">Header</span>;
</code></pre>
            </div>
        
<h3 id="最佳实践" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#最佳实践" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 最佳实践">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">最佳实践</strong>
        </h3>
<ol class="list-decimal list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">使用自定义 Hook 而非直接使用 Context</strong></p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">提供更好的封装性和错误检查</li>
<li class="text-foreground leading-relaxed">让 Context 保持私有，不暴露实现细节</li>
</ul></li>
<li class="text-foreground leading-relaxed"><p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">合理使用 Context</strong></p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">只在真正需要跨多层组件传递数据时使用</li>
<li class="text-foreground leading-relaxed">避免将所有状态都放入 Context</li>
</ul></li>
<li class="text-foreground leading-relaxed"><p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">创建专用的 Provider 组件</strong></p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">封装 Context 的创建和状态管理逻辑</li>
<li class="text-foreground leading-relaxed">提供清晰的 API</li>
</ul></li>
<li class="text-foreground leading-relaxed"><p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">性能优化</strong></p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">使用 useMemo 缓存 Context value</li>
<li class="text-foreground leading-relaxed">拆分频繁变化和不常变化的数据</li>
</ul></li>
<li class="text-foreground leading-relaxed"><p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">错误处理</strong></p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">在自定义 Hook 中检查 Context 是否存在</li>
<li class="text-foreground leading-relaxed">提供有意义的错误信息</li>
</ul></li>
<li class="text-foreground leading-relaxed"><p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">文件组织</strong></p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">将每个 Context 放在单独的文件中</li>
<li class="text-foreground leading-relaxed">导出 Provider 和自定义 Hook，不导出 Context 本身</li>
</ul></li>
</ol>
<h3 id="注意事项" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#注意事项" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 注意事项">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">注意事项</strong>
        </h3>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">性能影响</strong>：Context 值改变会导致所有消费组件重新渲染</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">不要过度使用</strong>：简单的 props 传递可能比 Context 更合适</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">默认值限制</strong>：defaultValue 只在没有 Provider 时生效</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">嵌套 Provider</strong>：同一 Context 的多个 Provider 会形成嵌套关系</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">测试复杂性</strong>：Context 可能增加组件测试的复杂度</li>
</ul>
<p class="text-base leading-7 mb-4 text-foreground"><code>React.createContext</code> 是管理跨组件状态的强大工具，但应该在合适的场景下使用，避免过度设计导致应用复杂性增加。</p>
</div></article><footer class="mt-16 pt-8 border-t border-foreground/20"><div class="flex items-center justify-between"><a class="inline-flex items-center px-4 py-2 bg-primary text-foreground rounded-lg hover:bg-primary/90 transition-colors" href="/documents/">documents.backToDocuments</a><div class="text-sm text-foreground/60"><span>documents.byAuthor<!-- --> <!-- -->MilkWind</span></div></div></footer></div></div><!--$--><!--/$--><!--$--><!--/$--><!--/$--><!--/$--><script src="/_next/static/chunks/webpack-d118f969809e6d65.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[38735,[\"1899\",\"static/chunks/1899-6f0bb42883f79753.js\",\"7177\",\"static/chunks/app/layout-5c95b441a38f3a56.js\"],\"default\"]\n3:I[19945,[\"1899\",\"static/chunks/1899-6f0bb42883f79753.js\",\"7177\",\"static/chunks/app/layout-5c95b441a38f3a56.js\"],\"default\"]\n4:I[65337,[\"1899\",\"static/chunks/1899-6f0bb42883f79753.js\",\"7177\",\"static/chunks/app/layout-5c95b441a38f3a56.js\"],\"default\"]\n5:I[96190,[\"1899\",\"static/chunks/1899-6f0bb42883f79753.js\",\"7177\",\"static/chunks/app/layout-5c95b441a38f3a56.js\"],\"ClientProviders\"]\n6:I[87555,[],\"\"]\n7:I[51901,[\"8039\",\"static/chunks/app/error-10ebab2e11865aaf.js\"],\"default\"]\n8:I[31295,[],\"\"]\n9:I[6874,[\"6874\",\"static/chunks/6874-fbe9a08eb79b991c.js\",\"4345\",\"static/chunks/app/not-found-38b9d1a0bc95ac08.js\"],\"\"]\na:I[94970,[],\"ClientSegmentRoot\"]\nb:I[44065,[\"206\",\"static/chunks/206-4f4cbf4d7156f437.js\",\"3092\",\"static/chunks/app/documents/layout-5f4e66d848ce7829.js\"],\"default\"]\ne:I[59665,[],\"MetadataBoundary\"]\n10:I[59665,[],\"OutletBoundary\"]\n13:I[74911,[],\"AsyncMetadataOutlet\"]\n15:I[39460,[\"2415\",\"static/chunks/2415-689c103fb3d2c28d.js\",\"8610\",\"static/chunks/8610-7bd3f91f3cf2a4d6.js\",\"5650\",\"static/chunks/app/documents/loading-552c4cd17346a076.js\"],\"default\"]\n16:I[88610,[\"2415\",\"static/chunks/2415-689c103fb3d2c28d.js\",\"8610\",\"static/chunks/8610-7bd3f91f3cf2a4d6.js\",\"4209\",\"static/chunks/app/loading-0c530d99d5132c05.js\"],\"default\"]\n17:I[59665,[],\"ViewportBoundary\"]\n19:I[26614,[],\"\"]\n:HL[\"/_next/static/css/de70bee13400563f.css\",\"style\"]\n:HL[\"/_next/static/css/38943437573ce53c.css\",\"style\"]\n:HL[\"/_next/static/css/5eacd01f773eed7f.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"xMcHYm_FvwjrVB7JmFp9i\",\"p\":\"\",\"c\":[\"\",\"documents\",\"zh\",\"dark\",\"basic-knowledge\",\"react-create-context\",\"\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"documents\",{\"children\":[[\"slug\",\"zh/dark/basic-knowledge/react-create-context\",\"c\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/de70bee13400563f.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/38943437573ce53c.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"__variable_188709 __variable_9a8899 font-sans antialiased min-h-screen bg-background text-foreground\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"$L2\",null,{}],[\"$\",\"$L3\",null,{}],[\"$\",\"$L4\",null,{}],[\"$\",\"$L5\",null,{\"children\":[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$7\",\"errorStyles\":[],\"errorScripts\":[],\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"div\",null,{\"className\":\"z-10 relative min-h-screen flex items-center justify-center bg-background p-8\",\"children\":[\"$\",\"div\",null,{\"className\":\"text-center max-w-md\",\"children\":[[\"$\",\"div\",null,{\"className\":\"text-8xl font-bold text-primary mb-4\",\"children\":\"404\"}],[\"$\",\"h2\",null,{\"className\":\"text-2xl font-bold text-foreground mb-4\",\"children\":\"Page Not Found\"}],[\"$\",\"p\",null,{\"className\":\"text-foreground/70 mb-8\",\"children\":\"The page you're looking for doesn't exist or has been moved to a different location.\"}],[\"$\",\"div\",null,{\"className\":\"flex flex-col sm:flex-row gap-4 justify-center\",\"children\":[[\"$\",\"$L9\",null,{\"href\":\"/\",\"className\":\"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/80 transition-colors\",\"children\":\"Go Home\"}],[\"$\",\"$L9\",null,{\"href\":\"/works\",\"className\":\"px-6 py-2 border border-primary text-primary rounded-lg hover:bg-primary/10 transition-colors\",\"children\":\"View Works\"}]]}],[\"$\",\"div\",null,{\"className\":\"absolute inset-0 overflow-hidden pointer-events-none -z-10\",\"children\":[[\"$\",\"div\",null,{\"className\":\"absolute top-1/4 left-1/4 w-2 h-2 bg-primary/20 rounded-full animate-float\"}],[\"$\",\"div\",null,{\"className\":\"absolute top-3/4 right-1/4 w-3 h-3 bg-accent/20 rounded-full animate-float\",\"style\":{\"animationDelay\":\"1s\"}}],[\"$\",\"div\",null,{\"className\":\"absolute bottom-1/4 left-1/3 w-1 h-1 bg-secondary/20 rounded-full animate-float\",\"style\":{\"animationDelay\":\"2s\"}}]]}]]}]}],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}]}]]}],{\"children\":[\"documents\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$La\",null,{\"Component\":\"$b\",\"slots\":{\"children\":[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]},\"params\":{},\"promise\":\"$@c\"}]]}],{\"children\":[[\"slug\",\"zh/dark/basic-knowledge/react-create-context\",\"c\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$Ld\",[\"$\",\"$Le\",null,{\"children\":\"$Lf\"}],[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/5eacd01f773eed7f.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$L10\",null,{\"children\":[\"$L11\",\"$L12\",[\"$\",\"$L13\",null,{\"promise\":\"$@14\"}]]}]]}],{},null,false]},null,false]},[[\"$\",\"$L15\",\"l\",{}],[],[]],false]},[[\"$\",\"$L16\",\"l\",{}],[],[]],false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"ZglINECiL28NjMOD7Qqt0\",{\"children\":[[\"$\",\"$L17\",null,{\"children\":\"$L18\"}],null]}],null]}],false]],\"m\":\"$undefined\",\"G\":[\"$19\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"1a:\"$Sreact.suspense\"\n1b:I[74911,[],\"AsyncMetadata\"]\nc:{}\nf:[\"$\",\"$1a\",null,{\"fallback\":null,\"children\":[\"$\",\"$L1b\",null,{\"promise\":\"$@1c\"}]}]\n"])</script><script>self.__next_f.push([1,"1d:I[57340,[\"5584\",\"static/chunks/b498d07c-095637f0f10883c6.js\",\"2415\",\"static/chunks/2415-689c103fb3d2c28d.js\",\"6874\",\"static/chunks/6874-fbe9a08eb79b991c.js\",\"9554\",\"static/chunks/9554-b714f9de28e85d30.js\",\"1873\",\"static/chunks/app/documents/%5B...slug%5D/page-9ee3d086bd3810e0.js\"],\"DocumentPageClient\"]\n1e:T20538,"])</script><script>self.__next_f.push([1,"\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003ccode\u003eReact.createContext\u003c/code\u003e 是 React 提供的 Context API 的核心函数，用于创建一个 Context 对象，解决组件间跨层级数据传递的问题，避免 \u0026quot;props drilling\u0026quot;（属性钻取）。\u003c/p\u003e\n\u003ch3 id=\"基本作用\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#基本作用\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 基本作用\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e基本作用\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003eContext 提供了一种在组件树中共享数据的方式，无需通过每层组件手动传递 props：\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e解决 props drilling 问题\u003c/strong\u003e：避免在多层嵌套组件中逐层传递 props\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e全局状态管理\u003c/strong\u003e：在组件树中共享主题、用户信息、语言设置等全局数据\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e跨组件通信\u003c/strong\u003e：让任意层级的组件都能访问共享数据\u003c/li\u003e\n\u003c/ul\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"import%20React%2C%20%7B%20createContext%20%7D%20from%20'react'%3B%0A%2F%2F%20%E5%88%9B%E5%BB%BA%20Context%0Aconst%20ThemeContext%20%3D%20createContext()%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eReact\u003c/span\u003e, { createContext } \u003cspan class=\"hljs-keyword inline\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;react\u0026#x27;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 创建 Context\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eThemeContext\u003c/span\u003e = \u003cspan class=\"hljs-title function_ inline\"\u003ecreateContext\u003c/span\u003e();\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"基本语法\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#基本语法\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 基本语法\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e基本语法\u003c/strong\u003e\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"const%20MyContext%20%3D%20createContext(defaultValue)%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eMyContext\u003c/span\u003e = \u003cspan class=\"hljs-title function_ inline\"\u003ecreateContext\u003c/span\u003e(defaultValue);\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003edefaultValue\u003c/strong\u003e：当组件树中没有匹配的 Provider 时使用的默认值\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"完整使用流程\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#完整使用流程\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 完整使用流程\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e完整使用流程\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003ch4 id=\"1-创建-context-和自定义-hook\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#1-创建-context-和自定义-hook\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 1. 创建 Context 和自定义 Hook\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e1. 创建 Context 和自定义 Hook\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"import%20React%2C%20%7B%20createContext%2C%20useContext%2C%20useState%2C%20useMemo%20%7D%20from%20'react'%3B%0A%2F%2F%20%E5%88%9B%E5%BB%BA%E4%B8%BB%E9%A2%98%20Context%EF%BC%88%E4%BF%9D%E6%8C%81%E7%A7%81%E6%9C%89%EF%BC%8C%E4%B8%8D%E5%AF%BC%E5%87%BA%EF%BC%89%0Aconst%20ThemeContext%20%3D%20createContext()%3B%0A%2F%2F%20%E8%87%AA%E5%AE%9A%E4%B9%89%20Hook%0Afunction%20useTheme()%20%7B%0Aconst%20context%20%3D%20useContext(ThemeContext)%3B%0Aif%20(!context)%20%7B%0Athrow%20new%20Error('useTheme%20%E5%BF%85%E9%A1%BB%E5%9C%A8%20ThemeProvider%20%E5%86%85%E9%83%A8%E4%BD%BF%E7%94%A8')%3B%0A%7D%0Areturn%20context%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eReact\u003c/span\u003e, { createContext, useContext, useState, useMemo } \u003cspan class=\"hljs-keyword inline\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;react\u0026#x27;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 创建主题 Context（保持私有，不导出）\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eThemeContext\u003c/span\u003e = \u003cspan class=\"hljs-title function_ inline\"\u003ecreateContext\u003c/span\u003e();\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 自定义 Hook\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003euseTheme\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e context = \u003cspan class=\"hljs-title function_ inline\"\u003euseContext\u003c/span\u003e(\u003cspan class=\"hljs-title class_ inline\"\u003eThemeContext\u003c/span\u003e);\n  \n  \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (!context) {\n    \u003cspan class=\"hljs-keyword inline\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eError\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;useTheme 必须在 ThemeProvider 内部使用\u0026#x27;\u003c/span\u003e);\n  }\n  \n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e context;\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch4 id=\"2-创建-provider-组件\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#2-创建-provider-组件\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 2. 创建 Provider 组件\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e2. 创建 Provider 组件\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20ThemeProvider(%7B%20children%20%7D)%20%7B%0Aconst%20%5Btheme%2C%20setTheme%5D%20%3D%20useState('light')%3B%0Aconst%20toggleTheme%20%3D%20()%20%3D%3E%20%7B%0AsetTheme(prev%20%3D%3E%20prev%20%3D%3D%3D%20'light'%20%3F%20'dark'%20%3A%20'light')%3B%0A%7D%3B%0A%2F%2F%20%E4%BD%BF%E7%94%A8%20useMemo%20%E4%BC%98%E5%8C%96%E6%80%A7%E8%83%BD%0Aconst%20value%20%3D%20useMemo(()%20%3D%3E%20(%7B%0Atheme%2C%0AtoggleTheme%0A%7D)%2C%20%5Btheme%5D)%3B%0Areturn%20(%0AThemeContext.Provider%20value%3D%7Bvalue%7D%3E%0A%7Bchildren%7D%0AThemeContext.Provider%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eThemeProvider\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ children }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [theme, setTheme] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;light\u0026#x27;\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003etoggleTheme\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-title function_ inline\"\u003esetTheme\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eprev\u003c/span\u003e =\u0026gt;\u003c/span\u003e prev === \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;light\u0026#x27;\u003c/span\u003e ? \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;dark\u0026#x27;\u003c/span\u003e : \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;light\u0026#x27;\u003c/span\u003e);\n  };\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 使用 useMemo 优化性能\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e value = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e ({\n    theme,\n    toggleTheme\n  }), [theme]);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eThemeContext.Provider\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{value}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {children}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eThemeContext.Provider\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch4 id=\"3-使用自定义-hook-获取数据\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#3-使用自定义-hook-获取数据\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 3. 使用自定义 Hook 获取数据\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e3. 使用自定义 Hook 获取数据\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20Header()%20%7B%0Aconst%20%7B%20theme%2C%20toggleTheme%20%7D%20%3D%20useTheme()%3B%0Areturn%20(%0Aheader%20style%3D%7B%7B%0Abackground%3A%20theme%20%3D%3D%3D%20'light'%20%3F%20'%23fff'%20%3A%20'%23333'%2C%0Acolor%3A%20theme%20%3D%3D%3D%20'light'%20%3F%20'%23333'%20%3A%20'%23fff'%0A%7D%7D%3E%0Ah1%3E%E6%88%91%E7%9A%84%E5%BA%94%E7%94%A8h1%3E%0Abutton%20onClick%3D%7BtoggleTheme%7D%3E%0A%E5%88%87%E6%8D%A2%E5%88%B0%20%7Btheme%20%3D%3D%3D%20'light'%20%3F%20'%E6%9A%97%E8%89%B2'%20%3A%20'%E4%BA%AE%E8%89%B2'%7D%20%E4%B8%BB%E9%A2%98%0Abutton%3E%0Aheader%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eHeader\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e { theme, toggleTheme } = \u003cspan class=\"hljs-title function_ inline\"\u003euseTheme\u003c/span\u003e();\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eheader\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003estyle\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \n      \u003cspan class=\"hljs-attr inline\"\u003ebackground:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003etheme\u003c/span\u003e === \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;light\u0026#x27;\u003c/span\u003e ? \u0026#x27;#\u003cspan class=\"hljs-attr inline\"\u003efff\u003c/span\u003e\u0026#x27; \u003cspan class=\"hljs-attr inline\"\u003e:\u003c/span\u003e \u0026#x27;#\u003cspan class=\"hljs-attr inline\"\u003e333\u003c/span\u003e\u0026#x27;,\n      \u003cspan class=\"hljs-attr inline\"\u003ecolor:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003etheme\u003c/span\u003e === \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;light\u0026#x27;\u003c/span\u003e ? \u0026#x27;#\u003cspan class=\"hljs-attr inline\"\u003e333\u003c/span\u003e\u0026#x27; \u003cspan class=\"hljs-attr inline\"\u003e:\u003c/span\u003e \u0026#x27;#\u003cspan class=\"hljs-attr inline\"\u003efff\u003c/span\u003e\u0026#x27;\n    }}\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eh1\u003c/span\u003e\u0026gt;\u003c/span\u003e我的应用\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eh1\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{toggleTheme}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        切换到 {theme === \u0026#x27;light\u0026#x27; ? \u0026#x27;暗色\u0026#x27; : \u0026#x27;亮色\u0026#x27;} 主题\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eheader\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch4 id=\"4-完整应用示例\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#4-完整应用示例\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 4. 完整应用示例\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e4. 完整应用示例\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20App()%20%7B%0Areturn%20(%0AThemeProvider%3E%0Adiv%3E%0AHeader%20%2F%3E%0AContent%20%2F%3E%0Adiv%3E%0AThemeProvider%3E%0A)%3B%0A%7D%0Afunction%20Content()%20%7B%0Aconst%20%7B%20theme%20%7D%20%3D%20useTheme()%3B%0Areturn%20(%0Amain%20style%3D%7B%7B%0Abackground%3A%20theme%20%3D%3D%3D%20'light'%20%3F%20'%23f5f5f5'%20%3A%20'%23222'%2C%0Acolor%3A%20theme%20%3D%3D%3D%20'light'%20%3F%20'%23333'%20%3A%20'%23fff'%2C%0Apadding%3A%20'20px'%0A%7D%7D%3E%0Ap%3E%E8%BF%99%E6%98%AF%E4%B8%BB%E8%A6%81%E5%86%85%E5%AE%B9%E5%8C%BA%E5%9F%9Fp%3E%0ASidebar%20%2F%3E%0Amain%3E%0A)%3B%0A%7D%0Afunction%20Sidebar()%20%7B%0Aconst%20%7B%20theme%20%7D%20%3D%20useTheme()%3B%0Areturn%20(%0Aaside%20style%3D%7B%7B%0Abackground%3A%20theme%20%3D%3D%3D%20'light'%20%3F%20'%23e0e0e0'%20%3A%20'%23444'%2C%0Apadding%3A%20'10px'%0A%7D%7D%3E%0Ap%3E%E4%BE%A7%E8%BE%B9%E6%A0%8F%E5%86%85%E5%AE%B9p%3E%0Aaside%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eApp\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eThemeProvider\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eHeader\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eContent\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eThemeProvider\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eContent\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e { theme } = \u003cspan class=\"hljs-title function_ inline\"\u003euseTheme\u003c/span\u003e();\n  \n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003emain\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003estyle\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e\n      \u003cspan class=\"hljs-attr inline\"\u003ebackground:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003etheme\u003c/span\u003e === \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;light\u0026#x27;\u003c/span\u003e ? \u0026#x27;#\u003cspan class=\"hljs-attr inline\"\u003ef5f5f5\u003c/span\u003e\u0026#x27; \u003cspan class=\"hljs-attr inline\"\u003e:\u003c/span\u003e \u0026#x27;#\u003cspan class=\"hljs-attr inline\"\u003e222\u003c/span\u003e\u0026#x27;,\n      \u003cspan class=\"hljs-attr inline\"\u003ecolor:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003etheme\u003c/span\u003e === \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;light\u0026#x27;\u003c/span\u003e ? \u0026#x27;#\u003cspan class=\"hljs-attr inline\"\u003e333\u003c/span\u003e\u0026#x27; \u003cspan class=\"hljs-attr inline\"\u003e:\u003c/span\u003e \u0026#x27;#\u003cspan class=\"hljs-attr inline\"\u003efff\u003c/span\u003e\u0026#x27;,\n      \u003cspan class=\"hljs-attr inline\"\u003epadding:\u003c/span\u003e \u0026#x27;\u003cspan class=\"hljs-attr inline\"\u003e20px\u003c/span\u003e\u0026#x27;\n    }}\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e这是主要内容区域\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eSidebar\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003emain\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eSidebar\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e { theme } = \u003cspan class=\"hljs-title function_ inline\"\u003euseTheme\u003c/span\u003e();\n  \n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003easide\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003estyle\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e\n      \u003cspan class=\"hljs-attr inline\"\u003ebackground:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003etheme\u003c/span\u003e === \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;light\u0026#x27;\u003c/span\u003e ? \u0026#x27;#\u003cspan class=\"hljs-attr inline\"\u003ee0e0e0\u003c/span\u003e\u0026#x27; \u003cspan class=\"hljs-attr inline\"\u003e:\u003c/span\u003e \u0026#x27;#\u003cspan class=\"hljs-attr inline\"\u003e444\u003c/span\u003e\u0026#x27;,\n      \u003cspan class=\"hljs-attr inline\"\u003epadding:\u003c/span\u003e \u0026#x27;\u003cspan class=\"hljs-attr inline\"\u003e10px\u003c/span\u003e\u0026#x27;\n    }}\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e侧边栏内容\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003easide\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"多个-context-的使用\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#多个-context-的使用\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 多个 Context 的使用\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e多个 Context 的使用\u003c/strong\u003e\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"%2F%2F%20%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%20Context%0Aconst%20UserContext%20%3D%20createContext()%3B%0A%2F%2F%20%E8%AF%AD%E8%A8%80%20Context%0Aconst%20LanguageContext%20%3D%20createContext()%3B%0A%2F%2F%20%E7%BB%84%E5%90%88%E5%A4%9A%E4%B8%AA%20Provider%0Afunction%20AppProviders(%7B%20children%20%7D)%20%7B%0Aconst%20%5Buser%2C%20setUser%5D%20%3D%20useState(null)%3B%0Aconst%20%5Blanguage%2C%20setLanguage%5D%20%3D%20useState('zh')%3B%0Areturn%20(%0AUserContext.Provider%20value%3D%7B%7B%20user%2C%20setUser%20%7D%7D%3E%0ALanguageContext.Provider%20value%3D%7B%7B%20language%2C%20setLanguage%20%7D%7D%3E%0AThemeContext.Provider%20value%3D%7B%7B%20theme%3A%20'light'%20%7D%7D%3E%0A%7Bchildren%7D%0AThemeContext.Provider%3E%0ALanguageContext.Provider%3E%0AUserContext.Provider%3E%0A)%3B%0A%7D%0A%2F%2F%20%E4%BD%BF%E7%94%A8%E5%A4%9A%E4%B8%AA%20Context%0Afunction%20UserProfile()%20%7B%0Aconst%20%7B%20user%20%7D%20%3D%20useContext(UserContext)%3B%0Aconst%20%7B%20language%20%7D%20%3D%20useContext(LanguageContext)%3B%0Aconst%20%7B%20theme%20%7D%20%3D%20useTheme()%3B%20%2F%2F%20ThemeContext%E5%B7%B2%E6%9C%89%E8%87%AA%E5%AE%9A%E4%B9%89Hook%0Areturn%20(%0Adiv%3E%0Ap%3E%E7%94%A8%E6%88%B7%3A%20%7Buser%3F.name%7Dp%3E%0Ap%3E%E8%AF%AD%E8%A8%80%3A%20%7Blanguage%7Dp%3E%0Ap%3E%E4%B8%BB%E9%A2%98%3A%20%7Btheme%7Dp%3E%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// 用户信息 Context\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eUserContext\u003c/span\u003e = \u003cspan class=\"hljs-title function_ inline\"\u003ecreateContext\u003c/span\u003e();\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 语言 Context  \u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eLanguageContext\u003c/span\u003e = \u003cspan class=\"hljs-title function_ inline\"\u003ecreateContext\u003c/span\u003e();\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 组合多个 Provider\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eAppProviders\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ children }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [user, setUser] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-literal inline\"\u003enull\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [language, setLanguage] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;zh\u0026#x27;\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eUserContext.Provider\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003euser\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003esetUser\u003c/span\u003e }}\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eLanguageContext.Provider\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003elanguage\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003esetLanguage\u003c/span\u003e }}\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eThemeContext.Provider\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003etheme:\u003c/span\u003e \u0026#x27;\u003cspan class=\"hljs-attr inline\"\u003elight\u003c/span\u003e\u0026#x27; }}\u0026gt;\u003c/span\u003e\n          {children}\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eThemeContext.Provider\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eLanguageContext.Provider\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eUserContext.Provider\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 使用多个 Context\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eUserProfile\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e { user } = \u003cspan class=\"hljs-title function_ inline\"\u003euseContext\u003c/span\u003e(\u003cspan class=\"hljs-title class_ inline\"\u003eUserContext\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e { language } = \u003cspan class=\"hljs-title function_ inline\"\u003euseContext\u003c/span\u003e(\u003cspan class=\"hljs-title class_ inline\"\u003eLanguageContext\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e { theme } = \u003cspan class=\"hljs-title function_ inline\"\u003euseTheme\u003c/span\u003e(); \u003cspan class=\"hljs-comment inline\"\u003e// ThemeContext已有自定义Hook\u003c/span\u003e\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e用户: {user?.name}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e语言: {language}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e主题: {theme}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"为其他-context-创建自定义-hook\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#为其他-context-创建自定义-hook\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 为其他 Context 创建自定义 Hook\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e为其他 Context 创建自定义 Hook\u003c/strong\u003e\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"%2F%2F%20%E4%B8%BA%E7%94%A8%E6%88%B7%20Context%20%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%20Hook%0Afunction%20useUser()%20%7B%0Aconst%20context%20%3D%20useContext(UserContext)%3B%0Aif%20(!context)%20%7B%0Athrow%20new%20Error('useUser%20%E5%BF%85%E9%A1%BB%E5%9C%A8%20UserProvider%20%E5%86%85%E9%83%A8%E4%BD%BF%E7%94%A8')%3B%0A%7D%0Areturn%20context%3B%0A%7D%0A%2F%2F%20%E4%B8%BA%E8%AF%AD%E8%A8%80%20Context%20%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%20Hook%0Afunction%20useLanguage()%20%7B%0Aconst%20context%20%3D%20useContext(LanguageContext)%3B%0Aif%20(!context)%20%7B%0Athrow%20new%20Error('useLanguage%20%E5%BF%85%E9%A1%BB%E5%9C%A8%20LanguageProvider%20%E5%86%85%E9%83%A8%E4%BD%BF%E7%94%A8')%3B%0A%7D%0Areturn%20context%3B%0A%7D%0A%2F%2F%20%E4%BD%BF%E7%94%A8%E5%A4%9A%E4%B8%AA%E8%87%AA%E5%AE%9A%E4%B9%89%20Hook%0Afunction%20MyComponent()%20%7B%0Aconst%20%7B%20theme%2C%20toggleTheme%20%7D%20%3D%20useTheme()%3B%0Aconst%20%7B%20user%2C%20setUser%20%7D%20%3D%20useUser()%3B%0Aconst%20%7B%20language%2C%20setLanguage%20%7D%20%3D%20useLanguage()%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E5%BD%93%E5%89%8D%E4%B8%BB%E9%A2%98%3A%20%7Btheme%7Dp%3E%0Ap%3E%E5%BD%93%E5%89%8D%E7%94%A8%E6%88%B7%3A%20%7Buser%3F.name%20%7C%7C%20'%E6%9C%AA%E7%99%BB%E5%BD%95'%7Dp%3E%0Ap%3E%E5%BD%93%E5%89%8D%E8%AF%AD%E8%A8%80%3A%20%7Blanguage%7Dp%3E%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// 为用户 Context 创建自定义 Hook\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003euseUser\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e context = \u003cspan class=\"hljs-title function_ inline\"\u003euseContext\u003c/span\u003e(\u003cspan class=\"hljs-title class_ inline\"\u003eUserContext\u003c/span\u003e);\n  \n  \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (!context) {\n    \u003cspan class=\"hljs-keyword inline\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eError\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;useUser 必须在 UserProvider 内部使用\u0026#x27;\u003c/span\u003e);\n  }\n  \n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e context;\n}\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 为语言 Context 创建自定义 Hook\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003euseLanguage\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e context = \u003cspan class=\"hljs-title function_ inline\"\u003euseContext\u003c/span\u003e(\u003cspan class=\"hljs-title class_ inline\"\u003eLanguageContext\u003c/span\u003e);\n  \n  \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (!context) {\n    \u003cspan class=\"hljs-keyword inline\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eError\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;useLanguage 必须在 LanguageProvider 内部使用\u0026#x27;\u003c/span\u003e);\n  }\n  \n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e context;\n}\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 使用多个自定义 Hook\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eMyComponent\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e { theme, toggleTheme } = \u003cspan class=\"hljs-title function_ inline\"\u003euseTheme\u003c/span\u003e();\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e { user, setUser } = \u003cspan class=\"hljs-title function_ inline\"\u003euseUser\u003c/span\u003e();\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e { language, setLanguage } = \u003cspan class=\"hljs-title function_ inline\"\u003euseLanguage\u003c/span\u003e();\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e当前主题: {theme}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e当前用户: {user?.name || \u0026#x27;未登录\u0026#x27;}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e当前语言: {language}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"复杂状态管理示例\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#复杂状态管理示例\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 复杂状态管理示例\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e复杂状态管理示例\u003c/strong\u003e\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"%2F%2F%20%E8%B4%AD%E7%89%A9%E8%BD%A6%20Context%0Aconst%20CartContext%20%3D%20createContext()%3B%0Afunction%20CartProvider(%7B%20children%20%7D)%20%7B%0Aconst%20%5Bitems%2C%20setItems%5D%20%3D%20useState(%5B%5D)%3B%0Aconst%20addItem%20%3D%20(product)%20%3D%3E%20%7B%0AsetItems(prev%20%3D%3E%20%7B%0Aconst%20existingItem%20%3D%20prev.find(item%20%3D%3E%20item.id%20%3D%3D%3D%20product.id)%3B%0Aif%20(existingItem)%20%7B%0Areturn%20prev.map(item%20%3D%3E%0Aitem.id%20%3D%3D%3D%20product.id%0A%3F%20%7B%20...item%2C%20quantity%3A%20item.quantity%20%2B%201%20%7D%0A%3A%20item%0A)%3B%0A%7D%0Areturn%20%5B...prev%2C%20%7B%20...product%2C%20quantity%3A%201%20%7D%5D%3B%0A%7D)%3B%0A%7D%3B%0Aconst%20removeItem%20%3D%20(productId)%20%3D%3E%20%7B%0AsetItems(prev%20%3D%3E%20prev.filter(item%20%3D%3E%20item.id%20!%3D%3D%20productId))%3B%0A%7D%3B%0Aconst%20updateQuantity%20%3D%20(productId%2C%20quantity)%20%3D%3E%20%7B%0Aif%20(quantity%200)%20%7B%0AremoveItem(productId)%3B%0Areturn%3B%0A%7D%0AsetItems(prev%20%3D%3E%0Aprev.map(item%20%3D%3E%0Aitem.id%20%3D%3D%3D%20productId%0A%3F%20%7B%20...item%2C%20quantity%20%7D%0A%3A%20item%0A)%0A)%3B%0A%7D%3B%0Aconst%20getTotalPrice%20%3D%20()%20%3D%3E%20%7B%0Areturn%20items.reduce((total%2C%20item)%20%3D%3E%20total%20%2B%20item.price%20*%20item.quantity%2C%200)%3B%0A%7D%3B%0Aconst%20getTotalItems%20%3D%20()%20%3D%3E%20%7B%0Areturn%20items.reduce((total%2C%20item)%20%3D%3E%20total%20%2B%20item.quantity%2C%200)%3B%0A%7D%3B%0Aconst%20clearCart%20%3D%20()%20%3D%3E%20%7B%0AsetItems(%5B%5D)%3B%0A%7D%3B%0Aconst%20value%20%3D%20%7B%0Aitems%2C%0AaddItem%2C%0AremoveItem%2C%0AupdateQuantity%2C%0AgetTotalPrice%2C%0AgetTotalItems%2C%0AclearCart%0A%7D%3B%0Areturn%20(%0ACartContext.Provider%20value%3D%7Bvalue%7D%3E%0A%7Bchildren%7D%0ACartContext.Provider%3E%0A)%3B%0A%7D%0A%2F%2F%20%E8%B4%AD%E7%89%A9%E8%BD%A6%20Hook%0Afunction%20useCart()%20%7B%0Aconst%20context%20%3D%20useContext(CartContext)%3B%0Aif%20(!context)%20%7B%0Athrow%20new%20Error('useCart%20%E5%BF%85%E9%A1%BB%E5%9C%A8%20CartProvider%20%E5%86%85%E9%83%A8%E4%BD%BF%E7%94%A8')%3B%0A%7D%0Areturn%20context%3B%0A%7D%0A%2F%2F%20%E5%95%86%E5%93%81%E7%BB%84%E4%BB%B6%0Afunction%20ProductCard(%7B%20product%20%7D)%20%7B%0Aconst%20%7B%20addItem%20%7D%20%3D%20useCart()%3B%0Areturn%20(%0Adiv%20className%3D%22product-card%22%3E%0Ah3%3E%7Bproduct.name%7Dh3%3E%0Ap%3E%E4%BB%B7%E6%A0%BC%3A%20%C2%A5%7Bproduct.price%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20addItem(product)%7D%3E%0A%E5%8A%A0%E5%85%A5%E8%B4%AD%E7%89%A9%E8%BD%A6%0Abutton%3E%0Adiv%3E%0A)%3B%0A%7D%0A%2F%2F%20%E8%B4%AD%E7%89%A9%E8%BD%A6%E7%BB%84%E4%BB%B6%0Afunction%20Cart()%20%7B%0Aconst%20%7B%20items%2C%20updateQuantity%2C%20removeItem%2C%20getTotalPrice%2C%20clearCart%20%7D%20%3D%20useCart()%3B%0Areturn%20(%0Adiv%20className%3D%22cart%22%3E%0Ah2%3E%E8%B4%AD%E7%89%A9%E8%BD%A6h2%3E%0A%7Bitems.length%20%3D%3D%3D%200%20%3F%20(%0Ap%3E%E8%B4%AD%E7%89%A9%E8%BD%A6%E4%B8%BA%E7%A9%BAp%3E%0A)%20%3A%20(%0A%7Bitems.map(item%20%3D%3E%20(%0Adiv%20key%3D%7Bitem.id%7D%20className%3D%22cart-item%22%3E%0Aspan%3E%7Bitem.name%7Dspan%3E%0Aspan%3E%C2%A5%7Bitem.price%7Dspan%3E%0Ainput%0Atype%3D%22number%22%0Avalue%3D%7Bitem.quantity%7D%0AonChange%3D%7B(e)%20%3D%3E%20updateQuantity(item.id%2C%20parseInt(e.target.value))%7D%0Amin%3D%221%22%0A%2F%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20removeItem(item.id)%7D%3E%E5%88%A0%E9%99%A4button%3E%0Adiv%3E%0A))%7D%0Adiv%20className%3D%22cart-total%22%3E%0Ap%3E%E6%80%BB%E8%AE%A1%3A%20%C2%A5%7BgetTotalPrice()%7Dp%3E%0Abutton%20onClick%3D%7BclearCart%7D%3E%E6%B8%85%E7%A9%BA%E8%B4%AD%E7%89%A9%E8%BD%A6button%3E%0Adiv%3E%0A)%7D%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// 购物车 Context\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eCartContext\u003c/span\u003e = \u003cspan class=\"hljs-title function_ inline\"\u003ecreateContext\u003c/span\u003e();\n\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eCartProvider\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ children }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [items, setItems] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e([]);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eaddItem\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003eproduct\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-title function_ inline\"\u003esetItems\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eprev\u003c/span\u003e =\u0026gt;\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e existingItem = prev.\u003cspan class=\"hljs-title function_ inline\"\u003efind\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eitem\u003c/span\u003e =\u0026gt;\u003c/span\u003e item.\u003cspan class=\"hljs-property inline\"\u003eid\u003c/span\u003e === product.\u003cspan class=\"hljs-property inline\"\u003eid\u003c/span\u003e);\n      \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (existingItem) {\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e prev.\u003cspan class=\"hljs-title function_ inline\"\u003emap\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eitem\u003c/span\u003e =\u0026gt;\u003c/span\u003e\n          item.\u003cspan class=\"hljs-property inline\"\u003eid\u003c/span\u003e === product.\u003cspan class=\"hljs-property inline\"\u003eid\u003c/span\u003e\n            ? { ...item, \u003cspan class=\"hljs-attr inline\"\u003equantity\u003c/span\u003e: item.\u003cspan class=\"hljs-property inline\"\u003equantity\u003c/span\u003e + \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e }\n            : item\n        );\n      }\n      \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e [...prev, { ...product, \u003cspan class=\"hljs-attr inline\"\u003equantity\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e }];\n    });\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eremoveItem\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003eproductId\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-title function_ inline\"\u003esetItems\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eprev\u003c/span\u003e =\u0026gt;\u003c/span\u003e prev.\u003cspan class=\"hljs-title function_ inline\"\u003efilter\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eitem\u003c/span\u003e =\u0026gt;\u003c/span\u003e item.\u003cspan class=\"hljs-property inline\"\u003eid\u003c/span\u003e !== productId));\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eupdateQuantity\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003eproductId, quantity\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (quantity \u0026lt;= \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e) {\n      \u003cspan class=\"hljs-title function_ inline\"\u003eremoveItem\u003c/span\u003e(productId);\n      \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e;\n    }\n    \n    \u003cspan class=\"hljs-title function_ inline\"\u003esetItems\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eprev\u003c/span\u003e =\u0026gt;\u003c/span\u003e\n      prev.\u003cspan class=\"hljs-title function_ inline\"\u003emap\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eitem\u003c/span\u003e =\u0026gt;\u003c/span\u003e\n        item.\u003cspan class=\"hljs-property inline\"\u003eid\u003c/span\u003e === productId\n          ? { ...item, quantity }\n          : item\n      )\n    );\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003egetTotalPrice\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e items.\u003cspan class=\"hljs-title function_ inline\"\u003ereduce\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003etotal, item\u003c/span\u003e) =\u0026gt;\u003c/span\u003e total + item.\u003cspan class=\"hljs-property inline\"\u003eprice\u003c/span\u003e * item.\u003cspan class=\"hljs-property inline\"\u003equantity\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e);\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003egetTotalItems\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e items.\u003cspan class=\"hljs-title function_ inline\"\u003ereduce\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003etotal, item\u003c/span\u003e) =\u0026gt;\u003c/span\u003e total + item.\u003cspan class=\"hljs-property inline\"\u003equantity\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e);\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eclearCart\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-title function_ inline\"\u003esetItems\u003c/span\u003e([]);\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e value = {\n    items,\n    addItem,\n    removeItem,\n    updateQuantity,\n    getTotalPrice,\n    getTotalItems,\n    clearCart\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eCartContext.Provider\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{value}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {children}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eCartContext.Provider\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 购物车 Hook\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003euseCart\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e context = \u003cspan class=\"hljs-title function_ inline\"\u003euseContext\u003c/span\u003e(\u003cspan class=\"hljs-title class_ inline\"\u003eCartContext\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (!context) {\n    \u003cspan class=\"hljs-keyword inline\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eError\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;useCart 必须在 CartProvider 内部使用\u0026#x27;\u003c/span\u003e);\n  }\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e context;\n}\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 商品组件\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eProductCard\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ product }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e { addItem } = \u003cspan class=\"hljs-title function_ inline\"\u003euseCart\u003c/span\u003e();\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;product-card\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eh3\u003c/span\u003e\u0026gt;\u003c/span\u003e{product.name}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eh3\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e价格: ¥{product.price}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e addItem(product)}\u0026gt;\n        加入购物车\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 购物车组件\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eCart\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e { items, updateQuantity, removeItem, getTotalPrice, clearCart } = \u003cspan class=\"hljs-title function_ inline\"\u003euseCart\u003c/span\u003e();\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;cart\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eh2\u003c/span\u003e\u0026gt;\u003c/span\u003e购物车\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eh2\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {items.length === 0 ? (\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e购物车为空\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      ) : (\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u0026gt;\u003c/span\u003e\n          {items.map(item =\u0026gt; (\n            \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{item.id}\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;cart-item\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n              \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003espan\u003c/span\u003e\u0026gt;\u003c/span\u003e{item.name}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003espan\u003c/span\u003e\u0026gt;\u003c/span\u003e\n              \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003espan\u003c/span\u003e\u0026gt;\u003c/span\u003e¥{item.price}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003espan\u003c/span\u003e\u0026gt;\u003c/span\u003e\n              \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003einput\u003c/span\u003e\n                \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;number\u0026quot;\u003c/span\u003e\n                \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{item.quantity}\u003c/span\u003e\n                \u003cspan class=\"hljs-attr inline\"\u003eonChange\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{(e)\u003c/span\u003e =\u0026gt;\u003c/span\u003e updateQuantity(item.id, parseInt(e.target.value))}\n                min=\u0026quot;1\u0026quot;\n              /\u0026gt;\n              \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e removeItem(item.id)}\u0026gt;删除\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          ))}\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;cart-total\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e总计: ¥{getTotalPrice()}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{clearCart}\u003c/span\u003e\u0026gt;\u003c/span\u003e清空购物车\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u0026gt;\u003c/span\u003e\u003c/span\u003e\n      )}\n    \u0026lt;/div\u0026gt;\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"与-usereducer-结合使用\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#与-usereducer-结合使用\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 与 useReducer 结合使用\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e与 useReducer 结合使用\u003c/strong\u003e\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"import%20React%2C%20%7B%20createContext%2C%20useContext%2C%20useReducer%20%7D%20from%20'react'%3B%0A%2F%2F%20%E5%AE%9A%E4%B9%89%20actions%0Aconst%20ACTIONS%20%3D%20%7B%0ASET_LOADING%3A%20'SET_LOADING'%2C%0ASET_USER%3A%20'SET_USER'%2C%0ASET_ERROR%3A%20'SET_ERROR'%2C%0ALOGOUT%3A%20'LOGOUT'%0A%7D%3B%0A%2F%2F%20%E5%AE%9A%E4%B9%89%20reducer%0Afunction%20authReducer(state%2C%20action)%20%7B%0Aswitch%20(action.type)%20%7B%0Acase%20ACTIONS.SET_LOADING%3A%0Areturn%20%7B%20...state%2C%20loading%3A%20action.payload%20%7D%3B%0Acase%20ACTIONS.SET_USER%3A%0Areturn%20%7B%20...state%2C%20user%3A%20action.payload%2C%20loading%3A%20false%2C%20error%3A%20null%20%7D%3B%0Acase%20ACTIONS.SET_ERROR%3A%0Areturn%20%7B%20...state%2C%20error%3A%20action.payload%2C%20loading%3A%20false%20%7D%3B%0Acase%20ACTIONS.LOGOUT%3A%0Areturn%20%7B%20user%3A%20null%2C%20loading%3A%20false%2C%20error%3A%20null%20%7D%3B%0Adefault%3A%0Areturn%20state%3B%0A%7D%0A%7D%0A%2F%2F%20%E5%88%9D%E5%A7%8B%E7%8A%B6%E6%80%81%0Aconst%20initialState%20%3D%20%7B%0Auser%3A%20null%2C%0Aloading%3A%20false%2C%0Aerror%3A%20null%0A%7D%3B%0A%2F%2F%20%E5%88%9B%E5%BB%BA%20Context%0Aconst%20AuthContext%20%3D%20createContext()%3B%0A%2F%2F%20AuthProvider%20%E7%BB%84%E4%BB%B6%0Afunction%20AuthProvider(%7B%20children%20%7D)%20%7B%0Aconst%20%5Bstate%2C%20dispatch%5D%20%3D%20useReducer(authReducer%2C%20initialState)%3B%0Aconst%20login%20%3D%20async%20(email%2C%20password)%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20ACTIONS.SET_LOADING%2C%20payload%3A%20true%20%7D)%3B%0Atry%20%7B%0A%2F%2F%20%E6%A8%A1%E6%8B%9F%20API%20%E8%B0%83%E7%94%A8%0Aconst%20response%20%3D%20await%20fetch('%2Fapi%2Flogin'%2C%20%7B%0Amethod%3A%20'POST'%2C%0Aheaders%3A%20%7B%20'Content-Type'%3A%20'application%2Fjson'%20%7D%2C%0Abody%3A%20JSON.stringify(%7B%20email%2C%20password%20%7D)%0A%7D)%3B%0Aif%20(!response.ok)%20%7B%0Athrow%20new%20Error('%E7%99%BB%E5%BD%95%E5%A4%B1%E8%B4%A5')%3B%0A%7D%0Aconst%20user%20%3D%20await%20response.json()%3B%0Adispatch(%7B%20type%3A%20ACTIONS.SET_USER%2C%20payload%3A%20user%20%7D)%3B%0A%7D%20catch%20(error)%20%7B%0Adispatch(%7B%20type%3A%20ACTIONS.SET_ERROR%2C%20payload%3A%20error.message%20%7D)%3B%0A%7D%0A%7D%3B%0Aconst%20logout%20%3D%20()%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20ACTIONS.LOGOUT%20%7D)%3B%0A%7D%3B%0Aconst%20value%20%3D%20%7B%0A...state%2C%0Alogin%2C%0Alogout%0A%7D%3B%0Areturn%20(%0AAuthContext.Provider%20value%3D%7Bvalue%7D%3E%0A%7Bchildren%7D%0AAuthContext.Provider%3E%0A)%3B%0A%7D%0A%2F%2F%20%E8%87%AA%E5%AE%9A%E4%B9%89%20Hook%0Afunction%20useAuth()%20%7B%0Aconst%20context%20%3D%20useContext(AuthContext)%3B%0Aif%20(!context)%20%7B%0Athrow%20new%20Error('useAuth%20%E5%BF%85%E9%A1%BB%E5%9C%A8%20AuthProvider%20%E5%86%85%E9%83%A8%E4%BD%BF%E7%94%A8')%3B%0A%7D%0Areturn%20context%3B%0A%7D%0A%2F%2F%20%E7%99%BB%E5%BD%95%E7%BB%84%E4%BB%B6%0Afunction%20LoginForm()%20%7B%0Aconst%20%7B%20login%2C%20loading%2C%20error%20%7D%20%3D%20useAuth()%3B%0Aconst%20%5Bemail%2C%20setEmail%5D%20%3D%20useState('')%3B%0Aconst%20%5Bpassword%2C%20setPassword%5D%20%3D%20useState('')%3B%0Aconst%20handleSubmit%20%3D%20(e)%20%3D%3E%20%7B%0Ae.preventDefault()%3B%0Alogin(email%2C%20password)%3B%0A%7D%3B%0Areturn%20(%0Aform%20onSubmit%3D%7BhandleSubmit%7D%3E%0Adiv%3E%0Ainput%0Atype%3D%22email%22%0Aplaceholder%3D%22%E9%82%AE%E7%AE%B1%22%0Avalue%3D%7Bemail%7D%0AonChange%3D%7B(e)%20%3D%3E%20setEmail(e.target.value)%7D%0A%2F%3E%0Adiv%3E%0Adiv%3E%0Ainput%0Atype%3D%22password%22%0Aplaceholder%3D%22%E5%AF%86%E7%A0%81%22%0Avalue%3D%7Bpassword%7D%0AonChange%3D%7B(e)%20%3D%3E%20setPassword(e.target.value)%7D%0A%2F%3E%0Adiv%3E%0A%7Berror%20%26%26%20p%20style%3D%7B%7B%20color%3A%20'red'%20%7D%7D%3E%7Berror%7Dp%3E%7D%0Abutton%20type%3D%22submit%22%20disabled%3D%7Bloading%7D%3E%0A%7Bloading%20%3F%20'%E7%99%BB%E5%BD%95%E4%B8%AD...'%20%3A%20'%E7%99%BB%E5%BD%95'%7D%0Abutton%3E%0Aform%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eReact\u003c/span\u003e, { createContext, useContext, useReducer } \u003cspan class=\"hljs-keyword inline\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;react\u0026#x27;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 定义 actions\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-variable constant_ inline\"\u003eACTIONS\u003c/span\u003e = {\n  \u003cspan class=\"hljs-attr inline\"\u003eSET_LOADING\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;SET_LOADING\u0026#x27;\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr inline\"\u003eSET_USER\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;SET_USER\u0026#x27;\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr inline\"\u003eSET_ERROR\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;SET_ERROR\u0026#x27;\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr inline\"\u003eLOGOUT\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;LOGOUT\u0026#x27;\u003c/span\u003e\n};\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 定义 reducer\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eauthReducer\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003estate, action\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003eswitch\u003c/span\u003e (action.\u003cspan class=\"hljs-property inline\"\u003etype\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-variable constant_ inline\"\u003eACTIONS\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003eSET_LOADING\u003c/span\u003e:\n      \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e { ...state, \u003cspan class=\"hljs-attr inline\"\u003eloading\u003c/span\u003e: action.\u003cspan class=\"hljs-property inline\"\u003epayload\u003c/span\u003e };\n    \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-variable constant_ inline\"\u003eACTIONS\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003eSET_USER\u003c/span\u003e:\n      \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e { ...state, \u003cspan class=\"hljs-attr inline\"\u003euser\u003c/span\u003e: action.\u003cspan class=\"hljs-property inline\"\u003epayload\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003eloading\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003eerror\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003enull\u003c/span\u003e };\n    \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-variable constant_ inline\"\u003eACTIONS\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003eSET_ERROR\u003c/span\u003e:\n      \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e { ...state, \u003cspan class=\"hljs-attr inline\"\u003eerror\u003c/span\u003e: action.\u003cspan class=\"hljs-property inline\"\u003epayload\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003eloading\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e };\n    \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-variable constant_ inline\"\u003eACTIONS\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003eLOGOUT\u003c/span\u003e:\n      \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e { \u003cspan class=\"hljs-attr inline\"\u003euser\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003enull\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003eloading\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003eerror\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003enull\u003c/span\u003e };\n    \u003cspan class=\"hljs-attr inline\"\u003edefault\u003c/span\u003e:\n      \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e state;\n  }\n}\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 初始状态\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e initialState = {\n  \u003cspan class=\"hljs-attr inline\"\u003euser\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003enull\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr inline\"\u003eloading\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr inline\"\u003eerror\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003enull\u003c/span\u003e\n};\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 创建 Context\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eAuthContext\u003c/span\u003e = \u003cspan class=\"hljs-title function_ inline\"\u003ecreateContext\u003c/span\u003e();\n\n\u003cspan class=\"hljs-comment inline\"\u003e// AuthProvider 组件\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eAuthProvider\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ children }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [state, dispatch] = \u003cspan class=\"hljs-title function_ inline\"\u003euseReducer\u003c/span\u003e(authReducer, initialState);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003elogin\u003c/span\u003e = \u003cspan class=\"hljs-keyword inline\"\u003easync\u003c/span\u003e (\u003cspan class=\"hljs-params inline\"\u003eemail, password\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-variable constant_ inline\"\u003eACTIONS\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003eSET_LOADING\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003epayload\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003etrue\u003c/span\u003e });\n    \n    \u003cspan class=\"hljs-keyword inline\"\u003etry\u003c/span\u003e {\n      \u003cspan class=\"hljs-comment inline\"\u003e// 模拟 API 调用\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e response = \u003cspan class=\"hljs-keyword inline\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003efetch\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;/api/login\u0026#x27;\u003c/span\u003e, {\n        \u003cspan class=\"hljs-attr inline\"\u003emethod\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;POST\u0026#x27;\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr inline\"\u003eheaders\u003c/span\u003e: { \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Content-Type\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;application/json\u0026#x27;\u003c/span\u003e },\n        \u003cspan class=\"hljs-attr inline\"\u003ebody\u003c/span\u003e: \u003cspan class=\"hljs-title class_ inline\"\u003eJSON\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003estringify\u003c/span\u003e({ email, password })\n      });\n      \n      \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (!response.\u003cspan class=\"hljs-property inline\"\u003eok\u003c/span\u003e) {\n        \u003cspan class=\"hljs-keyword inline\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eError\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;登录失败\u0026#x27;\u003c/span\u003e);\n      }\n      \n      \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e user = \u003cspan class=\"hljs-keyword inline\"\u003eawait\u003c/span\u003e response.\u003cspan class=\"hljs-title function_ inline\"\u003ejson\u003c/span\u003e();\n      \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-variable constant_ inline\"\u003eACTIONS\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003eSET_USER\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003epayload\u003c/span\u003e: user });\n    } \u003cspan class=\"hljs-keyword inline\"\u003ecatch\u003c/span\u003e (error) {\n      \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-variable constant_ inline\"\u003eACTIONS\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003eSET_ERROR\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003epayload\u003c/span\u003e: error.\u003cspan class=\"hljs-property inline\"\u003emessage\u003c/span\u003e });\n    }\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003elogout\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-variable constant_ inline\"\u003eACTIONS\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003eLOGOUT\u003c/span\u003e });\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e value = {\n    ...state,\n    login,\n    logout\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eAuthContext.Provider\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{value}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {children}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eAuthContext.Provider\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 自定义 Hook\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003euseAuth\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e context = \u003cspan class=\"hljs-title function_ inline\"\u003euseContext\u003c/span\u003e(\u003cspan class=\"hljs-title class_ inline\"\u003eAuthContext\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (!context) {\n    \u003cspan class=\"hljs-keyword inline\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eError\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;useAuth 必须在 AuthProvider 内部使用\u0026#x27;\u003c/span\u003e);\n  }\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e context;\n}\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 登录组件\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eLoginForm\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e { login, loading, error } = \u003cspan class=\"hljs-title function_ inline\"\u003euseAuth\u003c/span\u003e();\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [email, setEmail] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026#x27;\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [password, setPassword] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026#x27;\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003ehandleSubmit\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003ee\u003c/span\u003e) =\u0026gt; {\n    e.\u003cspan class=\"hljs-title function_ inline\"\u003epreventDefault\u003c/span\u003e();\n    \u003cspan class=\"hljs-title function_ inline\"\u003elogin\u003c/span\u003e(email, password);\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eform\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonSubmit\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{handleSubmit}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003einput\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;email\u0026quot;\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003eplaceholder\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;邮箱\u0026quot;\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{email}\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003eonChange\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{(e)\u003c/span\u003e =\u0026gt;\u003c/span\u003e setEmail(e.target.value)}\n        /\u0026gt;\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003einput\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;password\u0026quot;\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003eplaceholder\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;密码\u0026quot;\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{password}\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003eonChange\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{(e)\u003c/span\u003e =\u0026gt;\u003c/span\u003e setPassword(e.target.value)}\n        /\u0026gt;\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {error \u0026amp;\u0026amp; \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003estyle\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ecolor:\u003c/span\u003e \u0026#x27;\u003cspan class=\"hljs-attr inline\"\u003ered\u003c/span\u003e\u0026#x27; }}\u0026gt;\u003c/span\u003e{error}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e}\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;submit\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003edisabled\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{loading}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        {loading ? \u0026#x27;登录中...\u0026#x27; : \u0026#x27;登录\u0026#x27;}\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eform\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"性能优化\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#性能优化\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 性能优化\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e性能优化\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003ch4 id=\"避免不必要的重新渲染\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#避免不必要的重新渲染\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 避免不必要的重新渲染\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e避免不必要的重新渲染\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"%2F%2F%20%E9%97%AE%E9%A2%98%EF%BC%9Avalue%20%E5%AF%B9%E8%B1%A1%E6%AF%8F%E6%AC%A1%E9%83%BD%E4%BC%9A%E9%87%8D%E6%96%B0%E5%88%9B%E5%BB%BA%0Afunction%20BadProvider(%7B%20children%20%7D)%20%7B%0Aconst%20%5Buser%2C%20setUser%5D%20%3D%20useState(null)%3B%0Areturn%20(%0AUserContext.Provider%20value%3D%7B%7B%20user%2C%20setUser%20%7D%7D%3E%0A%7Bchildren%7D%0AUserContext.Provider%3E%0A)%3B%0A%7D%0A%2F%2F%20%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%EF%BC%9A%E4%BD%BF%E7%94%A8%20useMemo%20%E7%BC%93%E5%AD%98%20value%0Afunction%20GoodProvider(%7B%20children%20%7D)%20%7B%0Aconst%20%5Buser%2C%20setUser%5D%20%3D%20useState(null)%3B%0Aconst%20value%20%3D%20useMemo(()%20%3D%3E%20(%7B%0Auser%2C%0AsetUser%0A%7D)%2C%20%5Buser%5D)%3B%0Areturn%20(%0AUserContext.Provider%20value%3D%7Bvalue%7D%3E%0A%7Bchildren%7D%0AUserContext.Provider%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// 问题：value 对象每次都会重新创建\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eBadProvider\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ children }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [user, setUser] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-literal inline\"\u003enull\u003c/span\u003e);\n  \n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eUserContext.Provider\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003euser\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003esetUser\u003c/span\u003e }}\u0026gt;\u003c/span\u003e\n      {children}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eUserContext.Provider\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 解决方案：使用 useMemo 缓存 value\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eGoodProvider\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ children }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [user, setUser] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-literal inline\"\u003enull\u003c/span\u003e);\n  \n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e value = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e ({\n    user,\n    setUser\n  }), [user]);\n  \n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eUserContext.Provider\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{value}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {children}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eUserContext.Provider\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch4 id=\"拆分-context\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#拆分-context\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 拆分 Context\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e拆分 Context\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"%2F%2F%20%E6%8B%86%E5%88%86%E9%A2%91%E7%B9%81%E5%8F%98%E5%8C%96%E5%92%8C%E4%B8%8D%E5%B8%B8%E5%8F%98%E5%8C%96%E7%9A%84%E6%95%B0%E6%8D%AE%0Aconst%20UserDataContext%20%3D%20createContext()%3B%20%2F%2F%20%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%EF%BC%88%E4%B8%8D%E5%B8%B8%E5%8F%98%EF%BC%89%0Aconst%20UserActionsContext%20%3D%20createContext()%3B%20%2F%2F%20%E7%94%A8%E6%88%B7%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%8D%E5%8F%98%EF%BC%89%0Afunction%20UserProvider(%7B%20children%20%7D)%20%7B%0Aconst%20%5Buser%2C%20setUser%5D%20%3D%20useState(null)%3B%0A%2F%2F%20%E6%93%8D%E4%BD%9C%E5%87%BD%E6%95%B0%E4%B8%8D%E4%BC%9A%E5%8F%98%E5%8C%96%0Aconst%20actions%20%3D%20useMemo(()%20%3D%3E%20(%7B%0Alogin%3A%20(userData)%20%3D%3E%20setUser(userData)%2C%0Alogout%3A%20()%20%3D%3E%20setUser(null)%2C%0AupdateProfile%3A%20(updates)%20%3D%3E%20setUser(prev%20%3D%3E%20(%7B%20...prev%2C%20...updates%20%7D))%0A%7D)%2C%20%5B%5D)%3B%0Areturn%20(%0AUserActionsContext.Provider%20value%3D%7Bactions%7D%3E%0AUserDataContext.Provider%20value%3D%7Buser%7D%3E%0A%7Bchildren%7D%0AUserDataContext.Provider%3E%0AUserActionsContext.Provider%3E%0A)%3B%0A%7D%0A%2F%2F%20%E5%88%86%E5%88%AB%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E5%92%8C%E6%93%8D%E4%BD%9C%0Afunction%20useUserData()%20%7B%0Areturn%20useContext(UserDataContext)%3B%0A%7D%0Afunction%20useUserActions()%20%7B%0Areturn%20useContext(UserActionsContext)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// 拆分频繁变化和不常变化的数据\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eUserDataContext\u003c/span\u003e = \u003cspan class=\"hljs-title function_ inline\"\u003ecreateContext\u003c/span\u003e(); \u003cspan class=\"hljs-comment inline\"\u003e// 用户信息（不常变）\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eUserActionsContext\u003c/span\u003e = \u003cspan class=\"hljs-title function_ inline\"\u003ecreateContext\u003c/span\u003e(); \u003cspan class=\"hljs-comment inline\"\u003e// 用户操作（不变）\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eUserProvider\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ children }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [user, setUser] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-literal inline\"\u003enull\u003c/span\u003e);\n  \n  \u003cspan class=\"hljs-comment inline\"\u003e// 操作函数不会变化\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e actions = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e ({\n    \u003cspan class=\"hljs-attr inline\"\u003elogin\u003c/span\u003e: \u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003euserData\u003c/span\u003e) =\u0026gt;\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003esetUser\u003c/span\u003e(userData),\n    \u003cspan class=\"hljs-attr inline\"\u003elogout\u003c/span\u003e: \u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003esetUser\u003c/span\u003e(\u003cspan class=\"hljs-literal inline\"\u003enull\u003c/span\u003e),\n    \u003cspan class=\"hljs-attr inline\"\u003eupdateProfile\u003c/span\u003e: \u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003eupdates\u003c/span\u003e) =\u0026gt;\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003esetUser\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eprev\u003c/span\u003e =\u0026gt;\u003c/span\u003e ({ ...prev, ...updates }))\n  }), []);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eUserActionsContext.Provider\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{actions}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eUserDataContext.Provider\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{user}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        {children}\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eUserDataContext.Provider\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eUserActionsContext.Provider\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 分别获取数据和操作\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003euseUserData\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003euseContext\u003c/span\u003e(\u003cspan class=\"hljs-title class_ inline\"\u003eUserDataContext\u003c/span\u003e);\n}\n\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003euseUserActions\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003euseContext\u003c/span\u003e(\u003cspan class=\"hljs-title class_ inline\"\u003eUserActionsContext\u003c/span\u003e);\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"类组件中的使用\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#类组件中的使用\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 类组件中的使用\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e类组件中的使用\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003ch4 id=\"consumer-组件\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#consumer-组件\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Consumer 组件\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003eConsumer 组件\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"%2F%2F%20%E6%B3%A8%E6%84%8F%EF%BC%9AConsumer%20%E4%BB%8D%E9%9C%80%E8%A6%81%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8%20Context%0A%2F%2F%20%E5%9B%A0%E4%B8%BA%E7%B1%BB%E7%BB%84%E4%BB%B6%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8%20Hook%EF%BC%8C%E9%9C%80%E8%A6%81%E5%AF%BC%E5%87%BA%20Context%0Aexport%20const%20ThemeContext%20%3D%20createContext()%3B%20%2F%2F%20%E9%9C%80%E8%A6%81%E5%AF%BC%E5%87%BA%E4%BE%9B%20Consumer%20%E4%BD%BF%E7%94%A8%0Afunction%20MyClassComponent()%20%7B%0Areturn%20(%0AThemeContext.Consumer%3E%0A%7B(%7B%20theme%2C%20toggleTheme%20%7D)%20%3D%3E%20(%0Adiv%20style%3D%7B%7B%20background%3A%20theme%20%3D%3D%3D%20'light'%20%3F%20'%23fff'%20%3A%20'%23333'%20%7D%7D%3E%0Abutton%20onClick%3D%7BtoggleTheme%7D%3E%E5%88%87%E6%8D%A2%E4%B8%BB%E9%A2%98button%3E%0Adiv%3E%0A)%7D%0AThemeContext.Consumer%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// 注意：Consumer 仍需要直接使用 Context\u003c/span\u003e\n\u003cspan class=\"hljs-comment inline\"\u003e// 因为类组件无法使用 Hook，需要导出 Context\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eThemeContext\u003c/span\u003e = \u003cspan class=\"hljs-title function_ inline\"\u003ecreateContext\u003c/span\u003e(); \u003cspan class=\"hljs-comment inline\"\u003e// 需要导出供 Consumer 使用\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eMyClassComponent\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eThemeContext.Consumer\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {({ theme, toggleTheme }) =\u0026gt; (\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003estyle\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ebackground:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003etheme\u003c/span\u003e === \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;light\u0026#x27;\u003c/span\u003e ? \u0026#x27;#\u003cspan class=\"hljs-attr inline\"\u003efff\u003c/span\u003e\u0026#x27; \u003cspan class=\"hljs-attr inline\"\u003e:\u003c/span\u003e \u0026#x27;#\u003cspan class=\"hljs-attr inline\"\u003e333\u003c/span\u003e\u0026#x27; }}\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{toggleTheme}\u003c/span\u003e\u0026gt;\u003c/span\u003e切换主题\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      )}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eThemeContext.Consumer\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch4 id=\"contexttype\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#contexttype\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to contextType\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003econtextType\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"class%20MyClassComponent%20extends%20React.Component%20%7B%0Astatic%20contextType%20%3D%20ThemeContext%3B%20%2F%2F%20%E9%9C%80%E8%A6%81%E7%9B%B4%E6%8E%A5%E5%BC%95%E7%94%A8%20Context%0Arender()%20%7B%0Aconst%20%7B%20theme%2C%20toggleTheme%20%7D%20%3D%20this.context%3B%0Areturn%20(%0Adiv%20style%3D%7B%7B%20background%3A%20theme%20%3D%3D%3D%20'light'%20%3F%20'%23fff'%20%3A%20'%23333'%20%7D%7D%3E%0Abutton%20onClick%3D%7BtoggleTheme%7D%3E%E5%88%87%E6%8D%A2%E4%B8%BB%E9%A2%98button%3E%0Adiv%3E%0A)%3B%0A%7D%0A%7D%0A%2F%2F%20%E6%8E%A8%E8%8D%90%EF%BC%9A%E5%B0%86%E7%B1%BB%E7%BB%84%E4%BB%B6%E6%94%B9%E4%B8%BA%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6%EF%BC%8C%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89%20Hook%0Afunction%20MyFunctionComponent()%20%7B%0Aconst%20%7B%20theme%2C%20toggleTheme%20%7D%20%3D%20useTheme()%3B%0Areturn%20(%0Adiv%20style%3D%7B%7B%20background%3A%20theme%20%3D%3D%3D%20'light'%20%3F%20'%23fff'%20%3A%20'%23333'%20%7D%7D%3E%0Abutton%20onClick%3D%7BtoggleTheme%7D%3E%E5%88%87%E6%8D%A2%E4%B8%BB%E9%A2%98button%3E%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eMyClassComponent\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title class_ inherited__ inline\"\u003eReact.Component\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword inline\"\u003estatic\u003c/span\u003e contextType = \u003cspan class=\"hljs-title class_ inline\"\u003eThemeContext\u003c/span\u003e; \u003cspan class=\"hljs-comment inline\"\u003e// 需要直接引用 Context\u003c/span\u003e\n\n  \u003cspan class=\"hljs-title function_ inline\"\u003erender\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e { theme, toggleTheme } = \u003cspan class=\"hljs-variable language_ inline\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003econtext\u003c/span\u003e;\n    \n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n      \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003estyle\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ebackground:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003etheme\u003c/span\u003e === \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;light\u0026#x27;\u003c/span\u003e ? \u0026#x27;#\u003cspan class=\"hljs-attr inline\"\u003efff\u003c/span\u003e\u0026#x27; \u003cspan class=\"hljs-attr inline\"\u003e:\u003c/span\u003e \u0026#x27;#\u003cspan class=\"hljs-attr inline\"\u003e333\u003c/span\u003e\u0026#x27; }}\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{toggleTheme}\u003c/span\u003e\u0026gt;\u003c/span\u003e切换主题\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n    );\n  }\n}\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 推荐：将类组件改为函数组件，使用自定义 Hook\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eMyFunctionComponent\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e { theme, toggleTheme } = \u003cspan class=\"hljs-title function_ inline\"\u003euseTheme\u003c/span\u003e();\n  \n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003estyle\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ebackground:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003etheme\u003c/span\u003e === \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;light\u0026#x27;\u003c/span\u003e ? \u0026#x27;#\u003cspan class=\"hljs-attr inline\"\u003efff\u003c/span\u003e\u0026#x27; \u003cspan class=\"hljs-attr inline\"\u003e:\u003c/span\u003e \u0026#x27;#\u003cspan class=\"hljs-attr inline\"\u003e333\u003c/span\u003e\u0026#x27; }}\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{toggleTheme}\u003c/span\u003e\u0026gt;\u003c/span\u003e切换主题\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"完整的自定义-hook-最佳实践示例\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#完整的自定义-hook-最佳实践示例\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 完整的自定义 Hook 最佳实践示例\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e完整的自定义 Hook 最佳实践示例\u003c/strong\u003e\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"%2F%2F%20contexts%2FThemeContext.js%0Aimport%20React%2C%20%7B%20createContext%2C%20useContext%2C%20useState%2C%20useMemo%20%7D%20from%20'react'%3B%0A%2F%2F%20Context%20%E4%BF%9D%E6%8C%81%E7%A7%81%E6%9C%89%0Aconst%20ThemeContext%20%3D%20createContext()%3B%0A%2F%2F%20Provider%20%E7%BB%84%E4%BB%B6%0Aexport%20function%20ThemeProvider(%7B%20children%20%7D)%20%7B%0Aconst%20%5Btheme%2C%20setTheme%5D%20%3D%20useState('light')%3B%0Aconst%20toggleTheme%20%3D%20()%20%3D%3E%20%7B%0AsetTheme(prev%20%3D%3E%20prev%20%3D%3D%3D%20'light'%20%3F%20'dark'%20%3A%20'light')%3B%0A%7D%3B%0A%2F%2F%20%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%EF%BC%9A%E7%BC%93%E5%AD%98%20Context%20value%0Aconst%20value%20%3D%20useMemo(()%20%3D%3E%20(%7B%0Atheme%2C%0AtoggleTheme%0A%7D)%2C%20%5Btheme%5D)%3B%0Areturn%20(%0AThemeContext.Provider%20value%3D%7Bvalue%7D%3E%0A%7Bchildren%7D%0AThemeContext.Provider%3E%0A)%3B%0A%7D%0A%2F%2F%20%E8%87%AA%E5%AE%9A%E4%B9%89%20Hook%EF%BC%88%E5%8C%85%E5%90%AB%E9%94%99%E8%AF%AF%E6%A3%80%E6%9F%A5%EF%BC%89%0Aexport%20function%20useTheme()%20%7B%0Aconst%20context%20%3D%20useContext(ThemeContext)%3B%0Aif%20(!context)%20%7B%0Athrow%20new%20Error('useTheme%20%E5%BF%85%E9%A1%BB%E5%9C%A8%20ThemeProvider%20%E5%86%85%E9%83%A8%E4%BD%BF%E7%94%A8')%3B%0A%7D%0Areturn%20context%3B%0A%7D%0A%2F%2F%20%E5%8F%AF%E9%80%89%EF%BC%9A%E4%B8%BA%20TypeScript%20%E6%8F%90%E4%BE%9B%E7%B1%BB%E5%9E%8B%0Aexport%20type%20Theme%20%3D%20'light'%20%7C%20'dark'%3B%0Aexport%20interface%20ThemeContextType%20%7B%0Atheme%3A%20Theme%3B%0AtoggleTheme%3A%20()%20%3D%3E%20void%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// contexts/ThemeContext.js\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eReact\u003c/span\u003e, { createContext, useContext, useState, useMemo } \u003cspan class=\"hljs-keyword inline\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;react\u0026#x27;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment inline\"\u003e// Context 保持私有\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eThemeContext\u003c/span\u003e = \u003cspan class=\"hljs-title function_ inline\"\u003ecreateContext\u003c/span\u003e();\n\n\u003cspan class=\"hljs-comment inline\"\u003e// Provider 组件\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eThemeProvider\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ children }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [theme, setTheme] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;light\u0026#x27;\u003c/span\u003e);\n  \n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003etoggleTheme\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-title function_ inline\"\u003esetTheme\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eprev\u003c/span\u003e =\u0026gt;\u003c/span\u003e prev === \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;light\u0026#x27;\u003c/span\u003e ? \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;dark\u0026#x27;\u003c/span\u003e : \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;light\u0026#x27;\u003c/span\u003e);\n  };\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 性能优化：缓存 Context value\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e value = \u003cspan class=\"hljs-title function_ inline\"\u003euseMemo\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e ({\n    theme,\n    toggleTheme\n  }), [theme]);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eThemeContext.Provider\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{value}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {children}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eThemeContext.Provider\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 自定义 Hook（包含错误检查）\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003euseTheme\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e context = \u003cspan class=\"hljs-title function_ inline\"\u003euseContext\u003c/span\u003e(\u003cspan class=\"hljs-title class_ inline\"\u003eThemeContext\u003c/span\u003e);\n  \n  \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (!context) {\n    \u003cspan class=\"hljs-keyword inline\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eError\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;useTheme 必须在 ThemeProvider 内部使用\u0026#x27;\u003c/span\u003e);\n  }\n  \n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e context;\n}\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 可选：为 TypeScript 提供类型\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003eexport\u003c/span\u003e type \u003cspan class=\"hljs-title class_ inline\"\u003eTheme\u003c/span\u003e = \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;light\u0026#x27;\u003c/span\u003e | \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;dark\u0026#x27;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword inline\"\u003eexport\u003c/span\u003e interface \u003cspan class=\"hljs-title class_ inline\"\u003eThemeContextType\u003c/span\u003e {\n  \u003cspan class=\"hljs-attr inline\"\u003etheme\u003c/span\u003e: \u003cspan class=\"hljs-title class_ inline\"\u003eTheme\u003c/span\u003e;\n  \u003cspan class=\"hljs-attr inline\"\u003etoggleTheme\u003c/span\u003e: \u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003evoid\u003c/span\u003e;\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"%2F%2F%20components%2FApp.js%0Aimport%20React%20from%20'react'%3B%0Aimport%20%7B%20ThemeProvider%20%7D%20from%20'..%2Fcontexts%2FThemeContext'%3B%0Aimport%20Header%20from%20'.%2FHeader'%3B%0Aimport%20Content%20from%20'.%2FContent'%3B%0Afunction%20App()%20%7B%0Areturn%20(%0AThemeProvider%3E%0AHeader%20%2F%3E%0AContent%20%2F%3E%0AThemeProvider%3E%0A)%3B%0A%7D%0Aexport%20default%20App%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// components/App.js\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eReact\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;react\u0026#x27;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword inline\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_ inline\"\u003eThemeProvider\u003c/span\u003e } \u003cspan class=\"hljs-keyword inline\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;../contexts/ThemeContext\u0026#x27;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword inline\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eHeader\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;./Header\u0026#x27;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword inline\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eContent\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;./Content\u0026#x27;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eApp\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eThemeProvider\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eHeader\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eContent\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eThemeProvider\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\n\u003cspan class=\"hljs-keyword inline\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eApp\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"%2F%2F%20components%2FHeader.js%0Aimport%20React%20from%20'react'%3B%0Aimport%20%7B%20useTheme%20%7D%20from%20'..%2Fcontexts%2FThemeContext'%3B%0Afunction%20Header()%20%7B%0Aconst%20%7B%20theme%2C%20toggleTheme%20%7D%20%3D%20useTheme()%3B%0Areturn%20(%0Aheader%20style%3D%7B%7B%0Abackground%3A%20theme%20%3D%3D%3D%20'light'%20%3F%20'%23fff'%20%3A%20'%23333'%2C%0Acolor%3A%20theme%20%3D%3D%3D%20'light'%20%3F%20'%23333'%20%3A%20'%23fff'%0A%7D%7D%3E%0Ah1%3E%E6%88%91%E7%9A%84%E5%BA%94%E7%94%A8h1%3E%0Abutton%20onClick%3D%7BtoggleTheme%7D%3E%0A%E5%88%87%E6%8D%A2%E4%B8%BB%E9%A2%98%0Abutton%3E%0Aheader%3E%0A)%3B%0A%7D%0Aexport%20default%20Header%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// components/Header.js\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eReact\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;react\u0026#x27;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword inline\"\u003eimport\u003c/span\u003e { useTheme } \u003cspan class=\"hljs-keyword inline\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;../contexts/ThemeContext\u0026#x27;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eHeader\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e { theme, toggleTheme } = \u003cspan class=\"hljs-title function_ inline\"\u003euseTheme\u003c/span\u003e();\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eheader\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003estyle\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e\n      \u003cspan class=\"hljs-attr inline\"\u003ebackground:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003etheme\u003c/span\u003e === \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;light\u0026#x27;\u003c/span\u003e ? \u0026#x27;#\u003cspan class=\"hljs-attr inline\"\u003efff\u003c/span\u003e\u0026#x27; \u003cspan class=\"hljs-attr inline\"\u003e:\u003c/span\u003e \u0026#x27;#\u003cspan class=\"hljs-attr inline\"\u003e333\u003c/span\u003e\u0026#x27;,\n      \u003cspan class=\"hljs-attr inline\"\u003ecolor:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003etheme\u003c/span\u003e === \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;light\u0026#x27;\u003c/span\u003e ? \u0026#x27;#\u003cspan class=\"hljs-attr inline\"\u003e333\u003c/span\u003e\u0026#x27; \u003cspan class=\"hljs-attr inline\"\u003e:\u003c/span\u003e \u0026#x27;#\u003cspan class=\"hljs-attr inline\"\u003efff\u003c/span\u003e\u0026#x27;\n    }}\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eh1\u003c/span\u003e\u0026gt;\u003c/span\u003e我的应用\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eh1\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{toggleTheme}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        切换主题\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eheader\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\n\u003cspan class=\"hljs-keyword inline\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eHeader\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"最佳实践\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#最佳实践\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 最佳实践\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e最佳实践\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003col class=\"list-decimal list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e使用自定义 Hook 而非直接使用 Context\u003c/strong\u003e\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e提供更好的封装性和错误检查\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e让 Context 保持私有，不暴露实现细节\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e合理使用 Context\u003c/strong\u003e\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e只在真正需要跨多层组件传递数据时使用\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e避免将所有状态都放入 Context\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e创建专用的 Provider 组件\u003c/strong\u003e\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e封装 Context 的创建和状态管理逻辑\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e提供清晰的 API\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e性能优化\u003c/strong\u003e\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e使用 useMemo 缓存 Context value\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e拆分频繁变化和不常变化的数据\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e错误处理\u003c/strong\u003e\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e在自定义 Hook 中检查 Context 是否存在\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e提供有意义的错误信息\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e文件组织\u003c/strong\u003e\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e将每个 Context 放在单独的文件中\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e导出 Provider 和自定义 Hook，不导出 Context 本身\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"注意事项\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#注意事项\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 注意事项\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e注意事项\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e性能影响\u003c/strong\u003e：Context 值改变会导致所有消费组件重新渲染\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e不要过度使用\u003c/strong\u003e：简单的 props 传递可能比 Context 更合适\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e默认值限制\u003c/strong\u003e：defaultValue 只在没有 Provider 时生效\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e嵌套 Provider\u003c/strong\u003e：同一 Context 的多个 Provider 会形成嵌套关系\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e测试复杂性\u003c/strong\u003e：Context 可能增加组件测试的复杂度\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003ccode\u003eReact.createContext\u003c/code\u003e 是管理跨组件状态的强大工具，但应该在合适的场景下使用，避免过度设计导致应用复杂性增加。\u003c/p\u003e\n"])</script><script>self.__next_f.push([1,"d:[\"$\",\"$L1d\",null,{\"htmlContent\":\"$1e\",\"frontMatter\":{\"title\":\"React.createContext\",\"description\":\"React基础知识篇-React.createContext\",\"date\":\"2025-06-22\",\"author\":\"MilkWind\",\"tags\":[\"React\",\"基础知识\",\"createContext\",\"Context API\"],\"references\":{}},\"readingTime\":\"13 min read\",\"category\":\"basic-knowledge\",\"tocItems\":[{\"id\":\"基本作用\",\"text\":\"基本作用\",\"level\":3},{\"id\":\"基本语法\",\"text\":\"基本语法\",\"level\":3},{\"id\":\"完整使用流程\",\"text\":\"完整使用流程\",\"level\":3},{\"id\":\"1-创建-context-和自定义-hook\",\"text\":\"1. 创建 Context 和自定义 Hook\",\"level\":4},{\"id\":\"2-创建-provider-组件\",\"text\":\"2. 创建 Provider 组件\",\"level\":4},{\"id\":\"3-使用自定义-hook-获取数据\",\"text\":\"3. 使用自定义 Hook 获取数据\",\"level\":4},{\"id\":\"4-完整应用示例\",\"text\":\"4. 完整应用示例\",\"level\":4},{\"id\":\"多个-context-的使用\",\"text\":\"多个 Context 的使用\",\"level\":3},{\"id\":\"为其他-context-创建自定义-hook\",\"text\":\"为其他 Context 创建自定义 Hook\",\"level\":3},{\"id\":\"复杂状态管理示例\",\"text\":\"复杂状态管理示例\",\"level\":3},{\"id\":\"与-usereducer-结合使用\",\"text\":\"与 useReducer 结合使用\",\"level\":3},{\"id\":\"性能优化\",\"text\":\"性能优化\",\"level\":3},{\"id\":\"避免不必要的重新渲染\",\"text\":\"避免不必要的重新渲染\",\"level\":4},{\"id\":\"拆分-context\",\"text\":\"拆分 Context\",\"level\":4},{\"id\":\"类组件中的使用\",\"text\":\"类组件中的使用\",\"level\":3},{\"id\":\"consumer-组件\",\"text\":\"Consumer 组件\",\"level\":4},{\"id\":\"contexttype\",\"text\":\"contextType\",\"level\":4},{\"id\":\"完整的自定义-hook-最佳实践示例\",\"text\":\"完整的自定义 Hook 最佳实践示例\",\"level\":3},{\"id\":\"最佳实践\",\"text\":\"最佳实践\",\"level\":3},{\"id\":\"注意事项\",\"text\":\"注意事项\",\"level\":3}],\"translations\":{\"common\":{\"welcome\":\"欢迎\",\"loading\":\"加载中...\",\"error\":\"出现了一些问题\",\"retry\":\"重试\",\"theme\":\"主题\",\"language\":\"语言\",\"light\":\"浅色\",\"dark\":\"深色\"},\"navigation\":{\"home\":\"首页\",\"personal\":\"个人\",\"works\":\"作品\",\"contributions\":\"贡献\",\"documents\":\"文档\",\"about\":\"关于\",\"contact\":\"联系\"},\"personal\":{\"technicalSkills\":\"技术技能\",\"email\":\"邮箱\",\"github\":\"代码仓库\",\"resume\":\"简历\",\"codeRepository\":\"代码仓库\",\"loadingPersonalInfo\":\"加载个人信息中...\",\"loadingResume\":\"加载简历中...\",\"closeResume\":\"关闭简历\",\"emailCopied\":\"邮箱已复制到剪贴板！\",\"galaxyDefaultDescription\":\"精通全栈开发技术，具备跨平台架构能力，擅长AI技术整合与高性能系统优化\",\"skillGalaxy\":\"技能星系\",\"stirGalaxy\":\"搅动星系\",\"stirring\":\"搅动中...\",\"fullStackEngineer\":\"MilkWind - 全栈工程师\",\"professionalProfile\":\"关于我\"},\"documents\":{\"technicalDocuments\":\"技术文档\",\"description\":\"基本原理、代码拆分以及一些碎碎念。\",\"articles\":\"文章\",\"categories\":\"分类\",\"allCategories\":\"所有分类\",\"noArticlesFound\":\"未找到文章\",\"noArticlesAvailable\":\"中文暂无文章。\",\"noArticlesInCategory\":\"该分类下未找到文章。\",\"readMore\":\"阅读更多\",\"loadingDocuments\":\"加载文档中...\",\"backToDocuments\":\"← 返回文档\",\"documentNotFound\":\"文档未找到\",\"documentNotFoundDescription\":\"请求的文档无法找到。\",\"technicalInsights\":\"技术拆解\",\"untitledDocument\":\"无标题文档\",\"byAuthor\":\"作者：\",\"search\":\"搜索文章...\",\"searchByTags\":\"按标签筛选\",\"searching\":\"搜索中...\",\"noSearchResults\":\"没有找到符合搜索条件的文章\",\"clearSearch\":\"清除搜索\",\"selectedTags\":\"已选标签\",\"allTags\":\"所有标签\",\"searchInTitle\":\"在标题、描述和内容中搜索\",\"enterImmersiveMode\":\"沉浸阅读\",\"exitImmersiveMode\":\"退出沉浸模式\",\"immersiveReading\":\"沉浸阅读模式\",\"exploreContent\":\"按分类探索内容\",\"browseBy\":\"浏览方式\",\"exploreAll\":\"所有内容汇总\",\"categoryDescription\":\"该分类下的文章\",\"totalArticles\":\"文章\",\"totalCategories\":\"分类\",\"foundArticles\":\"找到文章\",\"categoriesWithResults\":\"有结果的分类\"},\"works\":{\"workCases\":\"作品案例\",\"projects\":\"作品集\",\"loadingProjects\":\"加载项目中...\",\"grid\":\"网格\",\"stack\":\"堆叠\",\"of\":\"共\",\"workCasesPageTitle\":\"作品案例页面\",\"pageWorkingCorrectly\":\"此页面运行正常！路由配置正确。\",\"try3DVersion\":\"尝试3D版本\",\"dragToScroll\":\"拖拽滚动\",\"dragToChange\":\"拖拽切换\",\"swipeCards\":\"切换卡片\",\"keyboardNav\":\"键盘导航\"},\"contributions\":{\"contributionCases\":\"开源项目\",\"contributions\":\"贡献\",\"loadingContributions\":\"加载贡献中...\",\"grid\":\"网格\",\"stack\":\"堆叠\",\"of\":\"共\",\"contributionCasesPageTitle\":\"贡献案例页面\",\"pageWorkingCorrectly\":\"此页面运行正常！路由配置正确。\",\"try3DVersion\":\"尝试3D版本\",\"dragToScroll\":\"拖拽滚动\",\"dragToChange\":\"拖拽切换\",\"swipeCards\":\"切换卡片\",\"keyboardNav\":\"键盘导航\"},\"contribution\":{\"contributionPreview\":\"贡献预览\",\"accessible\":\"可访问\",\"code\":\"代码\",\"maintenance\":\"维护\",\"enhancement\":\"增强\",\"documentation\":\"文档\",\"community\":\"社区\",\"moreItems\":\"更多\",\"technicalDetails\":\"技术详情\",\"technologies\":\"技术栈：\",\"contributionDetail\":\"贡献详情\",\"description\":\"描述：\",\"seeDetails\":\"查看详情\",\"github\":\"代码仓库\",\"viewContribution\":\"查看贡献\",\"viewCode\":\"查看代码\"},\"project\":{\"projectPreview\":\"项目预览\",\"accessible\":\"可访问\",\"tool\":\"工具\",\"plugin\":\"插件\",\"toy\":\"小玩意\",\"moreItems\":\"更多\",\"technicalDetails\":\"技术详情\",\"technologies\":\"技术栈：\",\"description\":\"描述：\",\"seeDetails\":\"查看详情\",\"github\":\"GitHub\",\"gitee\":\"Gitee\",\"viewLiveDemo\":\"查看演示\",\"viewCode\":\"查看代码\",\"access\":\"访问\",\"videos\":\"视频\",\"watchVideo\":\"观看视频\",\"hasVideo\":\"有视频\"},\"codeblock\":{\"copy\":\"复制\",\"copySuccess\":\"代码已复制到剪贴板！\",\"copyError\":\"复制代码失败\",\"copyTooltip\":\"复制代码\"},\"toc\":{\"contents\":\"目录\",\"autoScroll\":\"自动滚动到章节\",\"collapse\":\"折叠\",\"expand\":\"展开\"},\"loading\":{\"loading\":\"加载中\",\"preparingExperience\":\"准备体验中\"}},\"lang\":\"zh\",\"theme\":\"dark\"}]\n"])</script><script>self.__next_f.push([1,"12:null\n"])</script><script>self.__next_f.push([1,"18:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n11:null\n"])</script><script>self.__next_f.push([1,"1c:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"React.createContext | Interactive Portfolio\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"React基础知识篇-React.createContext\"}],[\"$\",\"meta\",\"2\",{\"name\":\"author\",\"content\":\"Developer\"}],[\"$\",\"meta\",\"3\",{\"name\":\"keywords\",\"content\":\"portfolio,3D,interactive,web development,Three.js,Next.js\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:title\",\"content\":\"React.createContext | Interactive Portfolio\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:description\",\"content\":\"React基础知识篇-React.createContext\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"7\",{\"property\":\"article:published_time\",\"content\":\"2025-06-22\"}],[\"$\",\"meta\",\"8\",{\"property\":\"article:tag\",\"content\":\"React\"}],[\"$\",\"meta\",\"9\",{\"property\":\"article:tag\",\"content\":\"基础知识\"}],[\"$\",\"meta\",\"10\",{\"property\":\"article:tag\",\"content\":\"createContext\"}],[\"$\",\"meta\",\"11\",{\"property\":\"article:tag\",\"content\":\"Context API\"}],[\"$\",\"meta\",\"12\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"13\",{\"name\":\"twitter:title\",\"content\":\"React.createContext | Interactive Portfolio\"}],[\"$\",\"meta\",\"14\",{\"name\":\"twitter:description\",\"content\":\"React基础知识篇-React.createContext\"}],[\"$\",\"link\",\"15\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"32x32\"}]],\"error\":null,\"digest\":\"$undefined\"}\n14:{\"metadata\":\"$1c:metadata\",\"error\":null,\"digest\":\"$undefined\"}\n"])</script></body></html>