<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/MilkWind-Website/_next/static/css/f034c804622acb16.css" data-precedence="next"/><link rel="stylesheet" href="/MilkWind-Website/_next/static/css/276b387d8ca46690.css" data-precedence="next"/><link rel="stylesheet" href="/MilkWind-Website/_next/static/css/5eacd01f773eed7f.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/MilkWind-Website/_next/static/chunks/webpack-1674c92fb524bcda.js"/><script src="/MilkWind-Website/_next/static/chunks/4bd1b696-5119e10e90c1bd1b.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/1684-794bcba02d6f7373.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/main-app-c5f95d71e93250dc.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/46-268e24d727b280ef.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/app/layout-af4a6e723c0ff668.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/app/error-dda32be1d095a86c.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/6874-fbe9a08eb79b991c.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/app/not-found-9ff98b2ccf24cac7.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/206-4f4cbf4d7156f437.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/app/documents/layout-28408791defde09e.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/2415-689c103fb3d2c28d.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/8610-7bd3f91f3cf2a4d6.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/app/documents/loading-1fa3f98b6e5a8e78.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/app/loading-68f227fb49b3ac8c.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/b498d07c-095637f0f10883c6.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/9554-b714f9de28e85d30.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/app/documents/%5B...slug%5D/page-8f3efa7e6c6c5377.js" async=""></script><title>Framer Motion AnimatePresence | Interactive Portfolio</title><meta name="description" content="React基础知识篇-Framer Motion AnimatePresence"/><meta name="author" content="Developer"/><meta name="keywords" content="portfolio,3D,interactive,web development,Three.js,Next.js"/><meta property="og:title" content="Framer Motion AnimatePresence | Interactive Portfolio"/><meta property="og:description" content="React基础知识篇-Framer Motion AnimatePresence"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2025-06-22"/><meta property="article:tag" content="React"/><meta property="article:tag" content="基础知识"/><meta property="article:tag" content="Framer Motion"/><meta property="article:tag" content="动画"/><meta property="article:tag" content="AnimatePresence"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Framer Motion AnimatePresence | Interactive Portfolio"/><meta name="twitter:description" content="React基础知识篇-Framer Motion AnimatePresence"/><link rel="icon" href="/MilkWind-Website/favicon.ico" type="image/x-icon" sizes="32x32"/><script>document.querySelectorAll('body link[rel="icon"], body link[rel="apple-touch-icon"]').forEach(el => document.head.appendChild(el))</script><script src="/MilkWind-Website/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__variable_9b7fb1 __variable_ca2a15 __variable_591dcc font-sans antialiased min-h-screen bg-background text-foreground"><div class="fixed inset-0 w-full h-full overflow-hidden pointer-events-none z-0" style="background:linear-gradient(135deg, hsl(210, 80%, 60%), hsl(180, 40%, 50%))"></div><div class="fixed top-20 right-5 z-50"><div class="w-16 h-16 rounded-full backdrop-blur-md border animate-pulse bg-surface/60 border-surface/40"></div></div><!--$--><style>
:root {
  --bprogress-color: #0066cc;
  --bprogress-height: 4px;
  --bprogress-spinner-size: 18px;
  --bprogress-spinner-animation-duration: 400ms;
  --bprogress-spinner-border-size: 2px;
  --bprogress-box-shadow: 0 0 10px #0066cc, 0 0 5px #0066cc;
  --bprogress-z-index: 99999;
  --bprogress-spinner-top: 15px;
  --bprogress-spinner-bottom: auto;
  --bprogress-spinner-right: 15px;
  --bprogress-spinner-left: auto;
}

.bprogress {
  width: 0;
  height: 0;
  pointer-events: none;
  z-index: var(--bprogress-z-index);
}

.bprogress .bar {
  background: var(--bprogress-color);
  position: fixed;
  z-index: var(--bprogress-z-index);
  top: 0;
  left: 0;
  width: 100%;
  height: var(--bprogress-height);
}

/* Fancy blur effect */
.bprogress .peg {
  display: block;
  position: absolute;
  right: 0;
  width: 100px;
  height: 100%;
  box-shadow: var(--bprogress-box-shadow);
  opacity: 1.0;
  transform: rotate(3deg) translate(0px, -4px);
}

/* Remove these to get rid of the spinner */
.bprogress .spinner {
  display: block;
  position: fixed;
  z-index: var(--bprogress-z-index);
  top: var(--bprogress-spinner-top);
  bottom: var(--bprogress-spinner-bottom);
  right: var(--bprogress-spinner-right);
  left: var(--bprogress-spinner-left);
}

.bprogress .spinner-icon {
  width: var(--bprogress-spinner-size);
  height: var(--bprogress-spinner-size);
  box-sizing: border-box;
  border: solid var(--bprogress-spinner-border-size) transparent;
  border-top-color: var(--bprogress-color);
  border-left-color: var(--bprogress-color);
  border-radius: 50%;
  -webkit-animation: bprogress-spinner var(--bprogress-spinner-animation-duration) linear infinite;
  animation: bprogress-spinner var(--bprogress-spinner-animation-duration) linear infinite;
}

.bprogress-custom-parent {
  overflow: hidden;
  position: relative;
}

.bprogress-custom-parent .bprogress .spinner,
.bprogress-custom-parent .bprogress .bar {
  position: absolute;
}

.bprogress .indeterminate {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--bprogress-height);
  overflow: hidden;
}

.bprogress .indeterminate .inc,
.bprogress .indeterminate .dec {
  position: absolute;
  top: 0;
  height: 100%;
  background-color: var(--bprogress-color);
}

.bprogress .indeterminate .inc {
  animation: bprogress-indeterminate-increase 2s infinite;
}

.bprogress .indeterminate .dec {
  animation: bprogress-indeterminate-decrease 2s 0.5s infinite;
}

@-webkit-keyframes bprogress-spinner {
  0%   { -webkit-transform: rotate(0deg); transform: rotate(0deg); }
  100% { -webkit-transform: rotate(360deg); transform: rotate(360deg); }
}

@keyframes bprogress-spinner {
  0%   { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes bprogress-indeterminate-increase {
  from { left: -5%; width: 5%; }
  to { left: 130%; width: 100%; }
}

@keyframes bprogress-indeterminate-decrease {
  from { left: -80%; width: 80%; }
  to { left: 110%; width: 10%; }
}
</style><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--><!--$--><div class="relative z-30 min-h-screen bg-background "><div class="container mx-auto px-4 py-8 max-w-4xl"><div class="mb-8"><a class="inline-flex items-center text-primary hover:text-primary/80 transition-colors" href="/MilkWind-Website/documents/">documents.backToDocuments</a></div><header class="mb-12"><div class="flex items-center gap-4 mb-4 text-sm text-foreground/60"><span class="px-3 py-1 bg-primary/20 text-primary rounded-full capitalize">basic knowledge</span><span>11 min read</span></div><h1 class="font-bold mb-4 bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent text-4xl md:text-5xl">Framer Motion AnimatePresence</h1><p class="text-xl text-foreground/80 max-w-3xl">React基础知识篇-Framer Motion AnimatePresence</p><div class="flex flex-wrap gap-2 mt-6"><span class="px-3 py-1 text-sm bg-accent/20 text-accent rounded-full">React</span><span class="px-3 py-1 text-sm bg-accent/20 text-accent rounded-full">基础知识</span><span class="px-3 py-1 text-sm bg-accent/20 text-accent rounded-full">Framer Motion</span><span class="px-3 py-1 text-sm bg-accent/20 text-accent rounded-full">动画</span><span class="px-3 py-1 text-sm bg-accent/20 text-accent rounded-full">AnimatePresence</span></div></header><article class="prose prose-headings:mt-8 prose-headings:font-semibold prose-headings:text-foreground prose-h1:text-5xl prose-h2:text-4xl prose-h3:text-3xl prose-h4:text-2xl prose-h5:text-xl prose-h6:text-lg max-w-none "><div class="prose-pre:p-4 prose-pre:bg-surface w-full"><p class="text-base leading-7 mb-4 text-foreground"><code>AnimatePresence</code> 是 Framer Motion 提供的核心组件，用于处理组件的退出动画。它通过检测 React 组件树中直接子组件的移除，使组件在卸载前能够执行完整的退出动画。</p>
<h3 id="基本作用" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#基本作用" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 基本作用">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">基本作用</strong>
        </h3>
<p class="text-base leading-7 mb-4 text-foreground"><code>AnimatePresence</code> 主要用于以下场景：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">组件退出动画</strong>：在组件卸载前执行动画</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">条件渲染动画</strong>：处理基于状态的组件显示/隐藏</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">列表项动画</strong>：列表项添加/删除时的过渡效果</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">路由切换动画</strong>：页面或视图切换的动画效果</li>
</ul>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="import%20%7B%20AnimatePresence%2C%20motion%20%7D%20from%20%22framer-motion%22%3B%0Afunction%20App()%20%7B%0Aconst%20%5Bshow%2C%20setShow%5D%20%3D%20useState(true)%3B%0Areturn%20(%0AAnimatePresence%3E%0A%7Bshow%20%26%26%20(%0Amotion.div%0Akey%3D%22modal%22%0Ainitial%3D%7B%7B%20opacity%3A%200%20%7D%7D%0Aanimate%3D%7B%7B%20opacity%3A%201%20%7D%7D%0Aexit%3D%7B%7B%20opacity%3A%200%20%7D%7D%0A%3E%0A%E5%86%85%E5%AE%B9%0Amotion.div%3E%0A)%7D%0AAnimatePresence%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">import</span> { <span class="hljs-title class_ inline">AnimatePresence</span>, motion } <span class="hljs-keyword inline">from</span> <span class="hljs-string inline">&quot;framer-motion&quot;</span>;

<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">App</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> [show, setShow] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-literal inline">true</span>);

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">AnimatePresence</span>&gt;</span>
      {show &amp;&amp; (
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
          <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">&quot;modal&quot;</span>
          <span class="hljs-attr inline">initial</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">0</span> }}
          <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">1</span> }}
          <span class="hljs-attr inline">exit</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">0</span> }}
        &gt;</span>
          内容
        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.div</span>&gt;</span>
      )}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">AnimatePresence</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="基本用法" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#基本用法" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 基本用法">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">基本用法</strong>
        </h3>
<h4 id="条件渲染动画" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#条件渲染动画" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 条件渲染动画">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">条件渲染动画</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="import%20%7B%20AnimatePresence%2C%20motion%20%7D%20from%20%22framer-motion%22%3B%0Afunction%20Modal(%7B%20isOpen%2C%20onClose%20%7D)%20%7B%0Areturn%20(%0AAnimatePresence%3E%0A%7BisOpen%20%26%26%20(%0Amotion.div%0Akey%3D%22modal%22%0Ainitial%3D%7B%7B%20opacity%3A%200%2C%20scale%3A%200.8%20%7D%7D%0Aanimate%3D%7B%7B%20opacity%3A%201%2C%20scale%3A%201%20%7D%7D%0Aexit%3D%7B%7B%20opacity%3A%200%2C%20scale%3A%200.8%20%7D%7D%0AclassName%3D%22modal-overlay%22%0A%3E%0Amotion.div%0Ainitial%3D%7B%7B%20y%3A%20-50%20%7D%7D%0Aanimate%3D%7B%7B%20y%3A%200%20%7D%7D%0Aexit%3D%7B%7B%20y%3A%20-50%20%7D%7D%0AclassName%3D%22modal-content%22%0A%3E%0Ah2%3E%E6%A8%A1%E6%80%81%E6%A1%86%E6%A0%87%E9%A2%98h2%3E%0Ap%3E%E6%A8%A1%E6%80%81%E6%A1%86%E5%86%85%E5%AE%B9p%3E%0Abutton%20onClick%3D%7BonClose%7D%3E%E5%85%B3%E9%97%ADbutton%3E%0Amotion.div%3E%0Amotion.div%3E%0A)%7D%0AAnimatePresence%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">import</span> { <span class="hljs-title class_ inline">AnimatePresence</span>, motion } <span class="hljs-keyword inline">from</span> <span class="hljs-string inline">&quot;framer-motion&quot;</span>;

<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">Modal</span>(<span class="hljs-params inline">{ isOpen, onClose }</span>) {
  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">AnimatePresence</span>&gt;</span>
      {isOpen &amp;&amp; (
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
          <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">&quot;modal&quot;</span>
          <span class="hljs-attr inline">initial</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">scale:</span> <span class="hljs-attr inline">0.8</span> }}
          <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">1</span>, <span class="hljs-attr inline">scale:</span> <span class="hljs-attr inline">1</span> }}
          <span class="hljs-attr inline">exit</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">scale:</span> <span class="hljs-attr inline">0.8</span> }}
          <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;modal-overlay&quot;</span>
        &gt;</span>
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
            <span class="hljs-attr inline">initial</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">y:</span> <span class="hljs-attr inline">-50</span> }}
            <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">y:</span> <span class="hljs-attr inline">0</span> }}
            <span class="hljs-attr inline">exit</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">y:</span> <span class="hljs-attr inline">-50</span> }}
            <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;modal-content&quot;</span>
          &gt;</span>
            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">h2</span>&gt;</span>模态框标题<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">h2</span>&gt;</span>
            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>模态框内容<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{onClose}</span>&gt;</span>关闭<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
          <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.div</span>&gt;</span>
        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.div</span>&gt;</span>
      )}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">AnimatePresence</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h4 id="列表动画" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#列表动画" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 列表动画">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">列表动画</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20TodoList()%20%7B%0Aconst%20%5Btodos%2C%20setTodos%5D%20%3D%20useState(%5B%0A%7B%20id%3A%201%2C%20text%3A%20%22%E5%AD%A6%E4%B9%A0%20React%22%20%7D%2C%0A%7B%20id%3A%202%2C%20text%3A%20%22%E5%AD%A6%E4%B9%A0%20Framer%20Motion%22%20%7D%0A%5D)%3B%0Aconst%20removeTodo%20%3D%20(id)%20%3D%3E%20%7B%0AsetTodos(prev%20%3D%3E%20prev.filter(todo%20%3D%3E%20todo.id%20!%3D%3D%20id))%3B%0A%7D%3B%0Areturn%20(%0Aul%3E%0AAnimatePresence%3E%0A%7Btodos.map(todo%20%3D%3E%20(%0Amotion.li%0Akey%3D%7Btodo.id%7D%20%2F%2F%20%E5%85%B3%E9%94%AE%EF%BC%9A%E6%AF%8F%E4%B8%AA%E5%AD%90%E5%85%83%E7%B4%A0%E5%BF%85%E9%A1%BB%E6%9C%89%E5%94%AF%E4%B8%80%E7%9A%84%20key%0Ainitial%3D%7B%7B%20opacity%3A%200%2C%20x%3A%20-100%20%7D%7D%0Aanimate%3D%7B%7B%20opacity%3A%201%2C%20x%3A%200%20%7D%7D%0Aexit%3D%7B%7B%20opacity%3A%200%2C%20x%3A%20100%20%7D%7D%0Alayout%20%2F%2F%20%E8%87%AA%E5%8A%A8%E5%A4%84%E7%90%86%E5%B8%83%E5%B1%80%E5%8A%A8%E7%94%BB%0A%3E%0A%7Btodo.text%7D%0Abutton%20onClick%3D%7B()%20%3D%3E%20removeTodo(todo.id)%7D%3E%E5%88%A0%E9%99%A4button%3E%0Amotion.li%3E%0A))%7D%0AAnimatePresence%3E%0Aul%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">TodoList</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> [todos, setTodos] = <span class="hljs-title function_ inline">useState</span>([
    { <span class="hljs-attr inline">id</span>: <span class="hljs-number inline">1</span>, <span class="hljs-attr inline">text</span>: <span class="hljs-string inline">&quot;学习 React&quot;</span> },
    { <span class="hljs-attr inline">id</span>: <span class="hljs-number inline">2</span>, <span class="hljs-attr inline">text</span>: <span class="hljs-string inline">&quot;学习 Framer Motion&quot;</span> }
  ]);

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">removeTodo</span> = (<span class="hljs-params inline">id</span>) =&gt; {
    <span class="hljs-title function_ inline">setTodos</span>(<span class="hljs-function inline"><span class="hljs-params inline">prev</span> =&gt;</span> prev.<span class="hljs-title function_ inline">filter</span>(<span class="hljs-function inline"><span class="hljs-params inline">todo</span> =&gt;</span> todo.<span class="hljs-property inline">id</span> !== id));
  };

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">ul</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">AnimatePresence</span>&gt;</span>
        {todos.map(todo =&gt; (
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.li</span>
            <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{todo.id}</span> // <span class="hljs-attr inline">关键</span>：<span class="hljs-attr inline">每个子元素必须有唯一的</span> <span class="hljs-attr inline">key</span>
            <span class="hljs-attr inline">initial</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">x:</span> <span class="hljs-attr inline">-100</span> }}
            <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">1</span>, <span class="hljs-attr inline">x:</span> <span class="hljs-attr inline">0</span> }}
            <span class="hljs-attr inline">exit</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">x:</span> <span class="hljs-attr inline">100</span> }}
            <span class="hljs-attr inline">layout</span> // <span class="hljs-attr inline">自动处理布局动画</span>
          &gt;</span>
            {todo.text}
            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> removeTodo(todo.id)}&gt;删除<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
          <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.li</span>&gt;</span>
        ))}
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">AnimatePresence</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">ul</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="变体（variants）的使用" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#变体（variants）的使用" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 变体（Variants）的使用">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">变体（Variants）的使用</strong>
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="const%20modalVariants%20%3D%20%7B%0Ahidden%3A%20%7B%0Aopacity%3A%200%2C%0Ascale%3A%200.8%2C%0Atransition%3A%20%7B%0Awhen%3A%20%22afterChildren%22%20%2F%2F%20%E5%85%88%E6%89%A7%E8%A1%8C%E5%AD%90%E7%BB%84%E4%BB%B6%E5%8A%A8%E7%94%BB%0A%7D%0A%7D%2C%0Avisible%3A%20%7B%0Aopacity%3A%201%2C%0Ascale%3A%201%2C%0Atransition%3A%20%7B%0Awhen%3A%20%22beforeChildren%22%2C%20%2F%2F%20%E5%85%88%E6%89%A7%E8%A1%8C%E7%88%B6%E7%BB%84%E4%BB%B6%E5%8A%A8%E7%94%BB%0AstaggerChildren%3A%200.1%20%2F%2F%20%E5%AD%90%E7%BB%84%E4%BB%B6%E4%BE%9D%E6%AC%A1%E5%8A%A8%E7%94%BB%0A%7D%0A%7D%0A%7D%3B%0Aconst%20itemVariants%20%3D%20%7B%0Ahidden%3A%20%7B%20opacity%3A%200%2C%20y%3A%2020%20%7D%2C%0Avisible%3A%20%7B%20opacity%3A%201%2C%20y%3A%200%20%7D%0A%7D%3B%0Afunction%20AnimatedModal(%7B%20isOpen%20%7D)%20%7B%0Areturn%20(%0AAnimatePresence%3E%0A%7BisOpen%20%26%26%20(%0Amotion.div%0Avariants%3D%7BmodalVariants%7D%0Ainitial%3D%22hidden%22%0Aanimate%3D%22visible%22%0Aexit%3D%22hidden%22%0AclassName%3D%22modal%22%0A%3E%0Amotion.h2%20variants%3D%7BitemVariants%7D%3E%E6%A0%87%E9%A2%98motion.h2%3E%0Amotion.p%20variants%3D%7BitemVariants%7D%3E%E5%86%85%E5%AE%B9motion.p%3E%0Amotion.button%20variants%3D%7BitemVariants%7D%3E%E6%8C%89%E9%92%AEmotion.button%3E%0Amotion.div%3E%0A)%7D%0AAnimatePresence%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">const</span> modalVariants = {
  <span class="hljs-attr inline">hidden</span>: { 
    <span class="hljs-attr inline">opacity</span>: <span class="hljs-number inline">0</span>, 
    <span class="hljs-attr inline">scale</span>: <span class="hljs-number inline">0.8</span>,
    <span class="hljs-attr inline">transition</span>: { 
      <span class="hljs-attr inline">when</span>: <span class="hljs-string inline">&quot;afterChildren&quot;</span> <span class="hljs-comment inline">// 先执行子组件动画</span>
    }
  },
  <span class="hljs-attr inline">visible</span>: { 
    <span class="hljs-attr inline">opacity</span>: <span class="hljs-number inline">1</span>, 
    <span class="hljs-attr inline">scale</span>: <span class="hljs-number inline">1</span>,
    <span class="hljs-attr inline">transition</span>: { 
      <span class="hljs-attr inline">when</span>: <span class="hljs-string inline">&quot;beforeChildren&quot;</span>, <span class="hljs-comment inline">// 先执行父组件动画</span>
      <span class="hljs-attr inline">staggerChildren</span>: <span class="hljs-number inline">0.1</span> <span class="hljs-comment inline">// 子组件依次动画</span>
    }
  }
};

<span class="hljs-keyword inline">const</span> itemVariants = {
  <span class="hljs-attr inline">hidden</span>: { <span class="hljs-attr inline">opacity</span>: <span class="hljs-number inline">0</span>, <span class="hljs-attr inline">y</span>: <span class="hljs-number inline">20</span> },
  <span class="hljs-attr inline">visible</span>: { <span class="hljs-attr inline">opacity</span>: <span class="hljs-number inline">1</span>, <span class="hljs-attr inline">y</span>: <span class="hljs-number inline">0</span> }
};

<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">AnimatedModal</span>(<span class="hljs-params inline">{ isOpen }</span>) {
  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">AnimatePresence</span>&gt;</span>
      {isOpen &amp;&amp; (
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
          <span class="hljs-attr inline">variants</span>=<span class="hljs-string inline">{modalVariants}</span>
          <span class="hljs-attr inline">initial</span>=<span class="hljs-string inline">&quot;hidden&quot;</span>
          <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">&quot;visible&quot;</span>
          <span class="hljs-attr inline">exit</span>=<span class="hljs-string inline">&quot;hidden&quot;</span>
          <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;modal&quot;</span>
        &gt;</span>
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.h2</span> <span class="hljs-attr inline">variants</span>=<span class="hljs-string inline">{itemVariants}</span>&gt;</span>标题<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.h2</span>&gt;</span>
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.p</span> <span class="hljs-attr inline">variants</span>=<span class="hljs-string inline">{itemVariants}</span>&gt;</span>内容<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.p</span>&gt;</span>
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.button</span> <span class="hljs-attr inline">variants</span>=<span class="hljs-string inline">{itemVariants}</span>&gt;</span>按钮<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.button</span>&gt;</span>
        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.div</span>&gt;</span>
      )}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">AnimatePresence</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="key-属性的重要性" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#key-属性的重要性" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to key 属性的重要性">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">key 属性的重要性</strong>
        </h3>
<h4 id="通过改变-key-触发动画" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#通过改变-key-触发动画" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 通过改变 key 触发动画">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">通过改变 key 触发动画</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20Slideshow()%20%7B%0Aconst%20%5BcurrentIndex%2C%20setCurrentIndex%5D%20%3D%20useState(0)%3B%0Aconst%20images%20%3D%20%5B%0A%7B%20id%3A%201%2C%20src%3A%20%22image1.jpg%22%2C%20alt%3A%20%22%E5%9B%BE%E7%89%871%22%20%7D%2C%0A%7B%20id%3A%202%2C%20src%3A%20%22image2.jpg%22%2C%20alt%3A%20%22%E5%9B%BE%E7%89%872%22%20%7D%2C%0A%7B%20id%3A%203%2C%20src%3A%20%22image3.jpg%22%2C%20alt%3A%20%22%E5%9B%BE%E7%89%873%22%20%7D%0A%5D%3B%0Aconst%20currentImage%20%3D%20images%5BcurrentIndex%5D%3B%0Areturn%20(%0Adiv%20className%3D%22slideshow%22%3E%0AAnimatePresence%20mode%3D%22wait%22%3E%0Amotion.img%0Akey%3D%7BcurrentImage.id%7D%20%2F%2F%20%E6%94%B9%E5%8F%98%20key%20%E4%BC%9A%E8%A7%A6%E5%8F%91%E7%BB%84%E4%BB%B6%E9%87%8D%E6%96%B0%E6%8C%82%E8%BD%BD%0Asrc%3D%7BcurrentImage.src%7D%0Aalt%3D%7BcurrentImage.alt%7D%0Ainitial%3D%7B%7B%20x%3A%20300%2C%20opacity%3A%200%20%7D%7D%0Aanimate%3D%7B%7B%20x%3A%200%2C%20opacity%3A%201%20%7D%7D%0Aexit%3D%7B%7B%20x%3A%20-300%2C%20opacity%3A%200%20%7D%7D%0Atransition%3D%7B%7B%20duration%3A%200.5%20%7D%7D%0A%2F%3E%0AAnimatePresence%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20setCurrentIndex(prev%20%3D%3E%20(prev%20%2B%201)%20%25%20images.length)%7D%3E%0A%E4%B8%8B%E4%B8%80%E5%BC%A0%0Abutton%3E%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">Slideshow</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> [currentIndex, setCurrentIndex] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-number inline">0</span>);
  <span class="hljs-keyword inline">const</span> images = [
    { <span class="hljs-attr inline">id</span>: <span class="hljs-number inline">1</span>, <span class="hljs-attr inline">src</span>: <span class="hljs-string inline">&quot;image1.jpg&quot;</span>, <span class="hljs-attr inline">alt</span>: <span class="hljs-string inline">&quot;图片1&quot;</span> },
    { <span class="hljs-attr inline">id</span>: <span class="hljs-number inline">2</span>, <span class="hljs-attr inline">src</span>: <span class="hljs-string inline">&quot;image2.jpg&quot;</span>, <span class="hljs-attr inline">alt</span>: <span class="hljs-string inline">&quot;图片2&quot;</span> },
    { <span class="hljs-attr inline">id</span>: <span class="hljs-number inline">3</span>, <span class="hljs-attr inline">src</span>: <span class="hljs-string inline">&quot;image3.jpg&quot;</span>, <span class="hljs-attr inline">alt</span>: <span class="hljs-string inline">&quot;图片3&quot;</span> }
  ];

  <span class="hljs-keyword inline">const</span> currentImage = images[currentIndex];

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span> <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;slideshow&quot;</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">AnimatePresence</span> <span class="hljs-attr inline">mode</span>=<span class="hljs-string inline">&quot;wait&quot;</span>&gt;</span>
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.img</span>
          <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{currentImage.id}</span> // <span class="hljs-attr inline">改变</span> <span class="hljs-attr inline">key</span> <span class="hljs-attr inline">会触发组件重新挂载</span>
          <span class="hljs-attr inline">src</span>=<span class="hljs-string inline">{currentImage.src}</span>
          <span class="hljs-attr inline">alt</span>=<span class="hljs-string inline">{currentImage.alt}</span>
          <span class="hljs-attr inline">initial</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">x:</span> <span class="hljs-attr inline">300</span>, <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">0</span> }}
          <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">x:</span> <span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">1</span> }}
          <span class="hljs-attr inline">exit</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">x:</span> <span class="hljs-attr inline">-300</span>, <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">0</span> }}
          <span class="hljs-attr inline">transition</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">duration:</span> <span class="hljs-attr inline">0.5</span> }}
        /&gt;</span>
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">AnimatePresence</span>&gt;</span>
      
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> setCurrentIndex(prev =&gt; (prev + 1) % images.length)}&gt;
        下一张
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="mode-属性详解" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#mode-属性详解" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to mode 属性详解">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">mode 属性详解</strong>
        </h3>
<h4 id="sync-模式（默认）" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#sync-模式（默认）" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to sync 模式（默认）">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">sync 模式（默认）</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="%2F%2F%20%E7%BB%84%E4%BB%B6%E5%90%8C%E6%97%B6%E8%BF%9B%E5%85%A5%E5%92%8C%E9%80%80%E5%87%BA%0AAnimatePresence%20mode%3D%22sync%22%3E%0A%7Bshow%20%26%26%20Component%20key%3D%22item%22%20%2F%3E%7D%0AAnimatePresence%3E">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-comment inline">// 组件同时进入和退出</span>
&lt;<span class="hljs-title class_ inline">AnimatePresence</span> mode=<span class="hljs-string inline">&quot;sync&quot;</span>&gt;
  {show &amp;&amp; <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">Component</span> <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">&quot;item&quot;</span> /&gt;</span></span>}
&lt;/<span class="hljs-title class_ inline">AnimatePresence</span>&gt;
</code></pre>
            </div>
        
<h4 id="wait-模式" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#wait-模式" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to wait 模式">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">wait 模式</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="%2F%2F%20%E7%AD%89%E5%BE%85%E9%80%80%E5%87%BA%E5%8A%A8%E7%94%BB%E5%AE%8C%E6%88%90%E5%90%8E%E5%86%8D%E5%BC%80%E5%A7%8B%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%0AAnimatePresence%20mode%3D%22wait%22%3E%0AComponent%20key%3D%7BactiveTab%7D%20%2F%3E%0AAnimatePresence%3E">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-comment inline">// 等待退出动画完成后再开始进入动画</span>
&lt;<span class="hljs-title class_ inline">AnimatePresence</span> mode=<span class="hljs-string inline">&quot;wait&quot;</span>&gt;
  <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">Component</span> <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{activeTab}</span> /&gt;</span></span>
&lt;/<span class="hljs-title class_ inline">AnimatePresence</span>&gt;
</code></pre>
            </div>
        
<h4 id="poplayout-模式" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#poplayout-模式" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to popLayout 模式">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">popLayout 模式</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="%2F%2F%20%E9%80%80%E5%87%BA%E7%9A%84%E5%85%83%E7%B4%A0%E4%BB%8E%E5%B8%83%E5%B1%80%E4%B8%AD%22%E5%BC%B9%E5%87%BA%22%EF%BC%8C%E5%85%B6%E4%BB%96%E5%85%83%E7%B4%A0%E7%AB%8B%E5%8D%B3%E8%B0%83%E6%95%B4%E4%BD%8D%E7%BD%AE%0AAnimatePresence%20mode%3D%22popLayout%22%3E%0A%7Bitems.map(item%20%3D%3E%20(%0Amotion.div%20key%3D%7Bitem.id%7D%20layout%3E%0A%7Bitem.content%7D%0Amotion.div%3E%0A))%7D%0AAnimatePresence%3E">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-comment inline">// 退出的元素从布局中&quot;弹出&quot;，其他元素立即调整位置</span>
&lt;<span class="hljs-title class_ inline">AnimatePresence</span> mode=<span class="hljs-string inline">&quot;popLayout&quot;</span>&gt;
  {items.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline"><span class="hljs-params inline">item</span> =&gt;</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span> <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{item.id}</span> <span class="hljs-attr inline">layout</span>&gt;</span>
      {item.content}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.div</span>&gt;</span></span>
  ))}
&lt;/<span class="hljs-title class_ inline">AnimatePresence</span>&gt;
</code></pre>
            </div>
        
<h3 id="高级功能" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#高级功能" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 高级功能">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">高级功能</strong>
        </h3>
<h4 id="访问组件存在状态" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#访问组件存在状态" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 访问组件存在状态">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">访问组件存在状态</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="import%20%7B%20useIsPresent%20%7D%20from%20%22framer-motion%22%3B%0Afunction%20Component()%20%7B%0Aconst%20isPresent%20%3D%20useIsPresent()%3B%0Areturn%20(%0Amotion.div%0Astyle%3D%7B%7B%0AbackgroundColor%3A%20isPresent%20%3F%20%22green%22%20%3A%20%22red%22%0A%7D%7D%0A%3E%0A%7BisPresent%20%3F%20%22%E7%BB%84%E4%BB%B6%E5%AD%98%E5%9C%A8%22%20%3A%20%22%E7%BB%84%E4%BB%B6%E6%AD%A3%E5%9C%A8%E9%80%80%E5%87%BA%22%7D%0Amotion.div%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">import</span> { useIsPresent } <span class="hljs-keyword inline">from</span> <span class="hljs-string inline">&quot;framer-motion&quot;</span>;

<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">Component</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> isPresent = <span class="hljs-title function_ inline">useIsPresent</span>();

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
      <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{</span> 
        <span class="hljs-attr inline">backgroundColor:</span> <span class="hljs-attr inline">isPresent</span> ? &quot;<span class="hljs-attr inline">green</span>&quot; <span class="hljs-attr inline">:</span> &quot;<span class="hljs-attr inline">red</span>&quot; 
      }}
    &gt;</span>
      {isPresent ? &quot;组件存在&quot; : &quot;组件正在退出&quot;}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h4 id="传递自定义数据" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#传递自定义数据" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 传递自定义数据">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">传递自定义数据</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20Slideshow()%20%7B%0Aconst%20%5Bdirection%2C%20setDirection%5D%20%3D%20useState(1)%3B%20%2F%2F%201%3A%20%E5%89%8D%E8%BF%9B%2C%20-1%3A%20%E5%90%8E%E9%80%80%0Aconst%20slideVariants%20%3D%20%7B%0Aenter%3A%20(direction)%20%3D%3E%20(%7B%0Ax%3A%20direction%20%3E%200%20%3F%201000%20%3A%20-1000%2C%0Aopacity%3A%200%0A%7D)%2C%0Acenter%3A%20%7B%0AzIndex%3A%201%2C%0Ax%3A%200%2C%0Aopacity%3A%201%0A%7D%2C%0Aexit%3A%20(direction)%20%3D%3E%20(%7B%0AzIndex%3A%200%2C%0Ax%3A%20direction%200%20%3F%201000%20%3A%20-1000%2C%0Aopacity%3A%200%0A%7D)%0A%7D%3B%0Areturn%20(%0AAnimatePresence%20custom%3D%7Bdirection%7D%3E%0Amotion.div%0Akey%3D%7BcurrentSlide%7D%0Acustom%3D%7Bdirection%7D%0Avariants%3D%7BslideVariants%7D%0Ainitial%3D%22enter%22%0Aanimate%3D%22center%22%0Aexit%3D%22exit%22%0Atransition%3D%7B%7B%20duration%3A%200.5%20%7D%7D%0A%3E%0A%E5%B9%BB%E7%81%AF%E7%89%87%E5%86%85%E5%AE%B9%0Amotion.div%3E%0AAnimatePresence%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">Slideshow</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> [direction, setDirection] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-number inline">1</span>); <span class="hljs-comment inline">// 1: 前进, -1: 后退</span>

  <span class="hljs-keyword inline">const</span> slideVariants = {
    <span class="hljs-attr inline">enter</span>: <span class="hljs-function inline">(<span class="hljs-params inline">direction</span>) =&gt;</span> ({
      <span class="hljs-attr inline">x</span>: direction &gt; <span class="hljs-number inline">0</span> ? <span class="hljs-number inline">1000</span> : -<span class="hljs-number inline">1000</span>,
      <span class="hljs-attr inline">opacity</span>: <span class="hljs-number inline">0</span>
    }),
    <span class="hljs-attr inline">center</span>: {
      <span class="hljs-attr inline">zIndex</span>: <span class="hljs-number inline">1</span>,
      <span class="hljs-attr inline">x</span>: <span class="hljs-number inline">0</span>,
      <span class="hljs-attr inline">opacity</span>: <span class="hljs-number inline">1</span>
    },
    <span class="hljs-attr inline">exit</span>: <span class="hljs-function inline">(<span class="hljs-params inline">direction</span>) =&gt;</span> ({
      <span class="hljs-attr inline">zIndex</span>: <span class="hljs-number inline">0</span>,
      <span class="hljs-attr inline">x</span>: direction &lt; <span class="hljs-number inline">0</span> ? <span class="hljs-number inline">1000</span> : -<span class="hljs-number inline">1000</span>,
      <span class="hljs-attr inline">opacity</span>: <span class="hljs-number inline">0</span>
    })
  };

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">AnimatePresence</span> <span class="hljs-attr inline">custom</span>=<span class="hljs-string inline">{direction}</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
        <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{currentSlide}</span>
        <span class="hljs-attr inline">custom</span>=<span class="hljs-string inline">{direction}</span>
        <span class="hljs-attr inline">variants</span>=<span class="hljs-string inline">{slideVariants}</span>
        <span class="hljs-attr inline">initial</span>=<span class="hljs-string inline">&quot;enter&quot;</span>
        <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">&quot;center&quot;</span>
        <span class="hljs-attr inline">exit</span>=<span class="hljs-string inline">&quot;exit&quot;</span>
        <span class="hljs-attr inline">transition</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">duration:</span> <span class="hljs-attr inline">0.5</span> }}
      &gt;</span>
        幻灯片内容
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.div</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">AnimatePresence</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h4 id="手动控制移除时机" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#手动控制移除时机" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 手动控制移除时机">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">手动控制移除时机</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="import%20%7B%20usePresence%20%7D%20from%20%22framer-motion%22%3B%0Afunction%20Component()%20%7B%0Aconst%20%5BisPresent%2C%20safeToRemove%5D%20%3D%20usePresence()%3B%0AuseEffect(()%20%3D%3E%20%7B%0Aif%20(!isPresent)%20%7B%0A%2F%2F%20%E6%89%A7%E8%A1%8C%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B8%85%E7%90%86%E9%80%BB%E8%BE%91%0AsetTimeout(()%20%3D%3E%20%7B%0Aconsole.log(%22%E6%89%A7%E8%A1%8C%E6%B8%85%E7%90%86%E6%93%8D%E4%BD%9C%22)%3B%0AsafeToRemove()%3B%20%2F%2F%20%E5%91%8A%E8%AF%89%20AnimatePresence%20%E5%8F%AF%E4%BB%A5%E5%AE%89%E5%85%A8%E7%A7%BB%E9%99%A4%E7%BB%84%E4%BB%B6%0A%7D%2C%201000)%3B%0A%7D%0A%7D%2C%20%5BisPresent%2C%20safeToRemove%5D)%3B%0Areturn%20div%3E%E8%87%AA%E5%AE%9A%E4%B9%89%E9%80%80%E5%87%BA%E9%80%BB%E8%BE%91%E7%9A%84%E7%BB%84%E4%BB%B6div%3E%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">import</span> { usePresence } <span class="hljs-keyword inline">from</span> <span class="hljs-string inline">&quot;framer-motion&quot;</span>;

<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">Component</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> [isPresent, safeToRemove] = <span class="hljs-title function_ inline">usePresence</span>();

  <span class="hljs-title function_ inline">useEffect</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-keyword inline">if</span> (!isPresent) {
      <span class="hljs-comment inline">// 执行自定义清理逻辑</span>
      <span class="hljs-built_in inline">setTimeout</span>(<span class="hljs-function inline">() =&gt;</span> {
        <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&quot;执行清理操作&quot;</span>);
        <span class="hljs-title function_ inline">safeToRemove</span>(); <span class="hljs-comment inline">// 告诉 AnimatePresence 可以安全移除组件</span>
      }, <span class="hljs-number inline">1000</span>);
    }
  }, [isPresent, safeToRemove]);

  <span class="hljs-keyword inline">return</span> <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>自定义退出逻辑的组件<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>;
}
</code></pre>
            </div>
        
<h3 id="实际应用场景" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#实际应用场景" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 实际应用场景">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">实际应用场景</strong>
        </h3>
<h4 id="路由切换动画" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#路由切换动画" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 路由切换动画">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">路由切换动画</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="import%20%7B%20useLocation%20%7D%20from%20%22react-router-dom%22%3B%0Afunction%20AnimatedRoutes()%20%7B%0Aconst%20location%20%3D%20useLocation()%3B%0Areturn%20(%0AAnimatePresence%20mode%3D%22wait%22%3E%0Amotion.div%0Akey%3D%7Blocation.pathname%7D%0Ainitial%3D%7B%7B%20opacity%3A%200%2C%20x%3A%20100%20%7D%7D%0Aanimate%3D%7B%7B%20opacity%3A%201%2C%20x%3A%200%20%7D%7D%0Aexit%3D%7B%7B%20opacity%3A%200%2C%20x%3A%20-100%20%7D%7D%0Atransition%3D%7B%7B%20duration%3A%200.3%20%7D%7D%0A%3E%0ARoutes%20location%3D%7Blocation%7D%3E%0ARoute%20path%3D%22%2F%22%20component%3D%7BHome%7D%20%2F%3E%0ARoute%20path%3D%22%2Fabout%22%20component%3D%7BAbout%7D%20%2F%3E%0ARoute%20path%3D%22%2Fcontact%22%20component%3D%7BContact%7D%20%2F%3E%0ARoutes%3E%0Amotion.div%3E%0AAnimatePresence%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">import</span> { useLocation } <span class="hljs-keyword inline">from</span> <span class="hljs-string inline">&quot;react-router-dom&quot;</span>;

<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">AnimatedRoutes</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> location = <span class="hljs-title function_ inline">useLocation</span>();

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">AnimatePresence</span> <span class="hljs-attr inline">mode</span>=<span class="hljs-string inline">&quot;wait&quot;</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
        <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{location.pathname}</span>
        <span class="hljs-attr inline">initial</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">x:</span> <span class="hljs-attr inline">100</span> }}
        <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">1</span>, <span class="hljs-attr inline">x:</span> <span class="hljs-attr inline">0</span> }}
        <span class="hljs-attr inline">exit</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">x:</span> <span class="hljs-attr inline">-100</span> }}
        <span class="hljs-attr inline">transition</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">duration:</span> <span class="hljs-attr inline">0.3</span> }}
      &gt;</span>
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">Routes</span> <span class="hljs-attr inline">location</span>=<span class="hljs-string inline">{location}</span>&gt;</span>
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">Route</span> <span class="hljs-attr inline">path</span>=<span class="hljs-string inline">&quot;/&quot;</span> <span class="hljs-attr inline">component</span>=<span class="hljs-string inline">{Home}</span> /&gt;</span>
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">Route</span> <span class="hljs-attr inline">path</span>=<span class="hljs-string inline">&quot;/about&quot;</span> <span class="hljs-attr inline">component</span>=<span class="hljs-string inline">{About}</span> /&gt;</span>
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">Route</span> <span class="hljs-attr inline">path</span>=<span class="hljs-string inline">&quot;/contact&quot;</span> <span class="hljs-attr inline">component</span>=<span class="hljs-string inline">{Contact}</span> /&gt;</span>
        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">Routes</span>&gt;</span>
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.div</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">AnimatePresence</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h4 id="通知系统" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#通知系统" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 通知系统">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">通知系统</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20NotificationCenter()%20%7B%0Aconst%20%5Bnotifications%2C%20setNotifications%5D%20%3D%20useState(%5B%5D)%3B%0Aconst%20removeNotification%20%3D%20(id)%20%3D%3E%20%7B%0AsetNotifications(prev%20%3D%3E%20prev.filter(n%20%3D%3E%20n.id%20!%3D%3D%20id))%3B%0A%7D%3B%0Areturn%20(%0Adiv%20className%3D%22notification-center%22%3E%0AAnimatePresence%3E%0A%7Bnotifications.map(notification%20%3D%3E%20(%0Amotion.div%0Akey%3D%7Bnotification.id%7D%0Ainitial%3D%7B%7B%20opacity%3A%200%2C%20y%3A%20-50%2C%20scale%3A%200.3%20%7D%7D%0Aanimate%3D%7B%7B%20opacity%3A%201%2C%20y%3A%200%2C%20scale%3A%201%20%7D%7D%0Aexit%3D%7B%7B%0Aopacity%3A%200%2C%0Ascale%3A%200.5%2C%0Atransition%3A%20%7B%20duration%3A%200.2%20%7D%0A%7D%7D%0Alayout%0AclassName%3D%22notification%22%0A%3E%0Ap%3E%7Bnotification.message%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20removeNotification(notification.id)%7D%3E%0A%C3%97%0Abutton%3E%0Amotion.div%3E%0A))%7D%0AAnimatePresence%3E%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">NotificationCenter</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> [notifications, setNotifications] = <span class="hljs-title function_ inline">useState</span>([]);

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">removeNotification</span> = (<span class="hljs-params inline">id</span>) =&gt; {
    <span class="hljs-title function_ inline">setNotifications</span>(<span class="hljs-function inline"><span class="hljs-params inline">prev</span> =&gt;</span> prev.<span class="hljs-title function_ inline">filter</span>(<span class="hljs-function inline"><span class="hljs-params inline">n</span> =&gt;</span> n.<span class="hljs-property inline">id</span> !== id));
  };

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span> <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;notification-center&quot;</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">AnimatePresence</span>&gt;</span>
        {notifications.map(notification =&gt; (
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
            <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{notification.id}</span>
            <span class="hljs-attr inline">initial</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">y:</span> <span class="hljs-attr inline">-50</span>, <span class="hljs-attr inline">scale:</span> <span class="hljs-attr inline">0.3</span> }}
            <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">1</span>, <span class="hljs-attr inline">y:</span> <span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">scale:</span> <span class="hljs-attr inline">1</span> }}
            <span class="hljs-attr inline">exit</span>=<span class="hljs-string inline">{{</span> 
              <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">0</span>, 
              <span class="hljs-attr inline">scale:</span> <span class="hljs-attr inline">0.5</span>, 
              <span class="hljs-attr inline">transition:</span> { <span class="hljs-attr inline">duration:</span> <span class="hljs-attr inline">0.2</span> } 
            }}
            <span class="hljs-attr inline">layout</span>
            <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;notification&quot;</span>
          &gt;</span>
            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>{notification.message}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> removeNotification(notification.id)}&gt;
              ×
            <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
          <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.div</span>&gt;</span>
        ))}
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">AnimatePresence</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h4 id="搜索结果动画" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#搜索结果动画" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 搜索结果动画">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">搜索结果动画</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20SearchResults(%7B%20results%2C%20query%20%7D)%20%7B%0Areturn%20(%0Adiv%20className%3D%22search-results%22%3E%0AAnimatePresence%3E%0A%7Bresults.map((result%2C%20index)%20%3D%3E%20(%0Amotion.div%0Akey%3D%7Bresult.id%7D%0Ainitial%3D%7B%7B%20opacity%3A%200%2C%20y%3A%2020%20%7D%7D%0Aanimate%3D%7B%7B%20opacity%3A%201%2C%20y%3A%200%20%7D%7D%0Aexit%3D%7B%7B%20opacity%3A%200%2C%20y%3A%20-20%20%7D%7D%0Atransition%3D%7B%7B%20delay%3A%20index%20*%200.05%20%7D%7D%0Alayout%0AclassName%3D%22search-result-item%22%0A%3E%0Ah3%3E%7Bresult.title%7Dh3%3E%0Ap%3E%7Bresult.description%7Dp%3E%0Amotion.div%3E%0A))%7D%0AAnimatePresence%3E%0A%7Bresults.length%20%3D%3D%3D%200%20%26%26%20query%20%26%26%20(%0Amotion.div%0Ainitial%3D%7B%7B%20opacity%3A%200%20%7D%7D%0Aanimate%3D%7B%7B%20opacity%3A%201%20%7D%7D%0AclassName%3D%22no-results%22%0A%3E%0A%E6%B2%A1%E6%9C%89%E6%89%BE%E5%88%B0%E7%9B%B8%E5%85%B3%E7%BB%93%E6%9E%9C%0Amotion.div%3E%0A)%7D%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">SearchResults</span>(<span class="hljs-params inline">{ results, query }</span>) {
  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span> <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;search-results&quot;</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">AnimatePresence</span>&gt;</span>
        {results.map((result, index) =&gt; (
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
            <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{result.id}</span>
            <span class="hljs-attr inline">initial</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">y:</span> <span class="hljs-attr inline">20</span> }}
            <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">1</span>, <span class="hljs-attr inline">y:</span> <span class="hljs-attr inline">0</span> }}
            <span class="hljs-attr inline">exit</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">y:</span> <span class="hljs-attr inline">-20</span> }}
            <span class="hljs-attr inline">transition</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">delay:</span> <span class="hljs-attr inline">index</span> * <span class="hljs-attr inline">0.05</span> }}
            <span class="hljs-attr inline">layout</span>
            <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;search-result-item&quot;</span>
          &gt;</span>
            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">h3</span>&gt;</span>{result.title}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">h3</span>&gt;</span>
            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>{result.description}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
          <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.div</span>&gt;</span>
        ))}
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">AnimatePresence</span>&gt;</span>
      
      {results.length === 0 &amp;&amp; query &amp;&amp; (
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
          <span class="hljs-attr inline">initial</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">0</span> }}
          <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">1</span> }}
          <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;no-results&quot;</span>
        &gt;</span>
          没有找到相关结果
        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.div</span>&gt;</span>
      )}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="性能优化" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#性能优化" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 性能优化">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">性能优化</strong>
        </h3>
<h4 id="避免不必要的重新渲染" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#避免不必要的重新渲染" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 避免不必要的重新渲染">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">避免不必要的重新渲染</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="%2F%2F%20%E9%97%AE%E9%A2%98%EF%BC%9A%E6%AF%8F%E6%AC%A1%E6%B8%B2%E6%9F%93%E9%83%BD%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84%20variants%20%E5%AF%B9%E8%B1%A1%0Afunction%20BadComponent()%20%7B%0Areturn%20(%0AAnimatePresence%3E%0Amotion.div%0Avariants%3D%7B%7B%0Ainitial%3A%20%7B%20opacity%3A%200%20%7D%2C%0Aanimate%3A%20%7B%20opacity%3A%201%20%7D%2C%0Aexit%3A%20%7B%20opacity%3A%200%20%7D%0A%7D%7D%0A%2F%3E%0AAnimatePresence%3E%0A)%3B%0A%7D%0A%2F%2F%20%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%EF%BC%9A%E5%B0%86%20variants%20%E6%8F%90%E5%8F%96%E5%88%B0%E7%BB%84%E4%BB%B6%E5%A4%96%E9%83%A8%0Aconst%20variants%20%3D%20%7B%0Ainitial%3A%20%7B%20opacity%3A%200%20%7D%2C%0Aanimate%3A%20%7B%20opacity%3A%201%20%7D%2C%0Aexit%3A%20%7B%20opacity%3A%200%20%7D%0A%7D%3B%0Afunction%20GoodComponent()%20%7B%0Areturn%20(%0AAnimatePresence%3E%0Amotion.div%20variants%3D%7Bvariants%7D%20%2F%3E%0AAnimatePresence%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-comment inline">// 问题：每次渲染都创建新的 variants 对象</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">BadComponent</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">AnimatePresence</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
        <span class="hljs-attr inline">variants</span>=<span class="hljs-string inline">{{</span>
          <span class="hljs-attr inline">initial:</span> { <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">0</span> },
          <span class="hljs-attr inline">animate:</span> { <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">1</span> },
          <span class="hljs-attr inline">exit:</span> { <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">0</span> }
        }}
      /&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">AnimatePresence</span>&gt;</span></span>
  );
}

<span class="hljs-comment inline">// 解决方案：将 variants 提取到组件外部</span>
<span class="hljs-keyword inline">const</span> variants = {
  <span class="hljs-attr inline">initial</span>: { <span class="hljs-attr inline">opacity</span>: <span class="hljs-number inline">0</span> },
  <span class="hljs-attr inline">animate</span>: { <span class="hljs-attr inline">opacity</span>: <span class="hljs-number inline">1</span> },
  <span class="hljs-attr inline">exit</span>: { <span class="hljs-attr inline">opacity</span>: <span class="hljs-number inline">0</span> }
};

<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">GoodComponent</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">AnimatePresence</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span> <span class="hljs-attr inline">variants</span>=<span class="hljs-string inline">{variants}</span> /&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">AnimatePresence</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h4 id="使用-layout-属性优化列表动画" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#使用-layout-属性优化列表动画" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 使用 layout 属性优化列表动画">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">使用 layout 属性优化列表动画</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20OptimizedList(%7B%20items%20%7D)%20%7B%0Areturn%20(%0AAnimatePresence%3E%0A%7Bitems.map(item%20%3D%3E%20(%0Amotion.div%0Akey%3D%7Bitem.id%7D%0Alayout%20%2F%2F%20%E8%87%AA%E5%8A%A8%E5%A4%84%E7%90%86%E4%BD%8D%E7%BD%AE%E5%8F%98%E5%8C%96%E7%9A%84%E5%8A%A8%E7%94%BB%0Ainitial%3D%7B%7B%20opacity%3A%200%2C%20scale%3A%200.8%20%7D%7D%0Aanimate%3D%7B%7B%20opacity%3A%201%2C%20scale%3A%201%20%7D%7D%0Aexit%3D%7B%7B%20opacity%3A%200%2C%20scale%3A%200.8%20%7D%7D%0Atransition%3D%7B%7B%0Alayout%3A%20%7B%20duration%3A%200.3%20%7D%2C%20%2F%2F%20%E5%B8%83%E5%B1%80%E5%8A%A8%E7%94%BB%E9%85%8D%E7%BD%AE%0Aopacity%3A%20%7B%20duration%3A%200.2%20%7D%20%20%2F%2F%20%E9%80%8F%E6%98%8E%E5%BA%A6%E5%8A%A8%E7%94%BB%E9%85%8D%E7%BD%AE%0A%7D%7D%0A%3E%0A%7Bitem.content%7D%0Amotion.div%3E%0A))%7D%0AAnimatePresence%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">OptimizedList</span>(<span class="hljs-params inline">{ items }</span>) {
  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">AnimatePresence</span>&gt;</span>
      {items.map(item =&gt; (
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
          <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{item.id}</span>
          <span class="hljs-attr inline">layout</span> // <span class="hljs-attr inline">自动处理位置变化的动画</span>
          <span class="hljs-attr inline">initial</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">scale:</span> <span class="hljs-attr inline">0.8</span> }}
          <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">1</span>, <span class="hljs-attr inline">scale:</span> <span class="hljs-attr inline">1</span> }}
          <span class="hljs-attr inline">exit</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">opacity:</span> <span class="hljs-attr inline">0</span>, <span class="hljs-attr inline">scale:</span> <span class="hljs-attr inline">0.8</span> }}
          <span class="hljs-attr inline">transition</span>=<span class="hljs-string inline">{{</span> 
            <span class="hljs-attr inline">layout:</span> { <span class="hljs-attr inline">duration:</span> <span class="hljs-attr inline">0.3</span> }, // <span class="hljs-attr inline">布局动画配置</span>
            <span class="hljs-attr inline">opacity:</span> { <span class="hljs-attr inline">duration:</span> <span class="hljs-attr inline">0.2</span> }  // <span class="hljs-attr inline">透明度动画配置</span>
          }}
        &gt;</span>
          {item.content}
        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.div</span>&gt;</span>
      ))}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">AnimatePresence</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="最佳实践" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#最佳实践" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 最佳实践">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">最佳实践</strong>
        </h3>
<ol class="list-decimal list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">始终为直接子组件提供唯一的 key</strong></p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="%2F%2F%20%E2%9C%85%20%E6%AD%A3%E7%A1%AE%0AAnimatePresence%3E%0A%7Bitems.map(item%20%3D%3E%20(%0Amotion.div%20key%3D%7Bitem.id%7D%3E%0A%7Bitem.content%7D%0Amotion.div%3E%0A))%7D%0AAnimatePresence%3E%0A%2F%2F%20%E2%9D%8C%20%E9%94%99%E8%AF%AF%EF%BC%9A%E4%BD%BF%E7%94%A8%20index%20%E4%BD%9C%E4%B8%BA%20key%0AAnimatePresence%3E%0A%7Bitems.map((item%2C%20index)%20%3D%3E%20(%0Amotion.div%20key%3D%7Bindex%7D%3E%0A%7Bitem.content%7D%0Amotion.div%3E%0A))%7D%0AAnimatePresence%3E">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-comment inline">// ✅ 正确</span>
&lt;<span class="hljs-title class_ inline">AnimatePresence</span>&gt;
  {items.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline"><span class="hljs-params inline">item</span> =&gt;</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span> <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{item.id}</span>&gt;</span>
      {item.content}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.div</span>&gt;</span></span>
  ))}
&lt;/<span class="hljs-title class_ inline">AnimatePresence</span>&gt;

<span class="hljs-comment inline">// ❌ 错误：使用 index 作为 key</span>
<span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">AnimatePresence</span>&gt;</span>
  {items.map((item, index) =&gt; (
    <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span> <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{index}</span>&gt;</span>
      {item.content}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.div</span>&gt;</span>
  ))}
<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">AnimatePresence</span>&gt;</span></span>
</code></pre>
            </div>
        </li>
<li class="text-foreground leading-relaxed"><p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">确保 AnimatePresence 在条件渲染之外</strong></p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="%2F%2F%20%E2%9C%85%20%E6%AD%A3%E7%A1%AE%0AAnimatePresence%3E%0A%7BisVisible%20%26%26%20Component%20%2F%3E%7D%0AAnimatePresence%3E%0A%2F%2F%20%E2%9D%8C%20%E9%94%99%E8%AF%AF%EF%BC%9AAnimatePresence%20%E8%A2%AB%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93%0A%7BisVisible%20%26%26%20(%0AAnimatePresence%3E%0AComponent%20%2F%3E%0AAnimatePresence%3E%0A)%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-comment inline">// ✅ 正确</span>
&lt;<span class="hljs-title class_ inline">AnimatePresence</span>&gt;
  {isVisible &amp;&amp; <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">Component</span> /&gt;</span></span>}
&lt;/<span class="hljs-title class_ inline">AnimatePresence</span>&gt;

<span class="hljs-comment inline">// ❌ 错误：AnimatePresence 被条件渲染</span>
{isVisible &amp;&amp; (
  <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">AnimatePresence</span>&gt;</span>
    <span class="hljs-tag inline">&lt;<span class="hljs-name inline">Component</span> /&gt;</span>
  <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">AnimatePresence</span>&gt;</span></span>
)}
</code></pre>
            </div>
        </li>
<li class="text-foreground leading-relaxed"><p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">合理使用 mode 属性</strong></p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>sync</code>：适用于大多数场景</li>
<li class="text-foreground leading-relaxed"><code>wait</code>：适用于页面切换、单个元素替换</li>
<li class="text-foreground leading-relaxed"><code>popLayout</code>：适用于列表项删除时的布局调整</li>
</ul></li>
<li class="text-foreground leading-relaxed"><p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">性能考虑</strong></p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">将 variants 对象提取到组件外部</li>
<li class="text-foreground leading-relaxed">使用 <code>layout</code> 属性处理位置变化</li>
<li class="text-foreground leading-relaxed">避免在动画过程中进行复杂计算</li>
</ul></li>
</ol>
<h3 id="常见问题和解决方案" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#常见问题和解决方案" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 常见问题和解决方案">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">常见问题和解决方案</strong>
        </h3>
<h4 id="退出动画不工作" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#退出动画不工作" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 退出动画不工作">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">退出动画不工作</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="%2F%2F%20%E9%97%AE%E9%A2%98%EF%BC%9Akey%20%E4%B8%8D%E5%94%AF%E4%B8%80%E6%88%96%E6%B2%A1%E6%9C%89%20key%0AAnimatePresence%3E%0A%7Bshow%20%26%26%20motion.div%3E%E5%86%85%E5%AE%B9motion.div%3E%7D%20%7B%2F*%20%E7%BC%BA%E5%B0%91%20key%20*%2F%7D%0AAnimatePresence%3E%0A%2F%2F%20%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%EF%BC%9A%E6%B7%BB%E5%8A%A0%E5%94%AF%E4%B8%80%20key%0AAnimatePresence%3E%0A%7Bshow%20%26%26%20motion.div%20key%3D%22unique-id%22%3E%E5%86%85%E5%AE%B9motion.div%3E%7D%0AAnimatePresence%3E">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-comment inline">// 问题：key 不唯一或没有 key</span>
&lt;<span class="hljs-title class_ inline">AnimatePresence</span>&gt;
  {show &amp;&amp; <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>&gt;</span>内容<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.div</span>&gt;</span></span>} {<span class="hljs-comment inline">/* 缺少 key */</span>}
&lt;/<span class="hljs-title class_ inline">AnimatePresence</span>&gt;

<span class="hljs-comment inline">// 解决方案：添加唯一 key</span>
<span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">AnimatePresence</span>&gt;</span>
  {show &amp;&amp; <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span> <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">&quot;unique-id&quot;</span>&gt;</span>内容<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.div</span>&gt;</span>}
<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">AnimatePresence</span>&gt;</span></span>
</code></pre>
            </div>
        
<h4 id="布局动画与-poplayout-冲突" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#布局动画与-poplayout-冲突" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 布局动画与 popLayout 冲突">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">布局动画与 popLayout 冲突</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="%2F%2F%20%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%EF%BC%9A%E4%B8%BA%E7%88%B6%E5%AE%B9%E5%99%A8%E8%AE%BE%E7%BD%AE%E7%9B%B8%E5%AF%B9%E5%AE%9A%E4%BD%8D%0Aul%20style%3D%7B%7B%20position%3A%20%22relative%22%20%7D%7D%20layout%3E%0AAnimatePresence%20mode%3D%22popLayout%22%3E%0A%7Bitems.map(item%20%3D%3E%20(%0Amotion.li%20key%3D%7Bitem.id%7D%20layout%20%2F%3E%0A))%7D%0AAnimatePresence%3E%0Aul%3E">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-comment inline">// 解决方案：为父容器设置相对定位</span>
&lt;motion.<span class="hljs-property inline">ul</span> style={{ <span class="hljs-attr inline">position</span>: <span class="hljs-string inline">&quot;relative&quot;</span> }} layout&gt;
  <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">AnimatePresence</span> <span class="hljs-attr inline">mode</span>=<span class="hljs-string inline">&quot;popLayout&quot;</span>&gt;</span>
    {items.map(item =&gt; (
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.li</span> <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{item.id}</span> <span class="hljs-attr inline">layout</span> /&gt;</span>
    ))}
  <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">AnimatePresence</span>&gt;</span></span>
&lt;/motion.<span class="hljs-property inline">ul</span>&gt;
</code></pre>
            </div>
        
<h4 id="与-layoutgroup-结合使用" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#与-layoutgroup-结合使用" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 与 LayoutGroup 结合使用">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">与 LayoutGroup 结合使用</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="import%20%7B%20LayoutGroup%20%7D%20from%20%22framer-motion%22%3B%0ALayoutGroup%3E%0Amotion.ul%20layout%3E%0AAnimatePresence%3E%0A%7Bitems.map(item%20%3D%3E%20(%0Amotion.li%20key%3D%7Bitem.id%7D%20layout%20%2F%3E%0A))%7D%0AAnimatePresence%3E%0Amotion.ul%3E%0ALayoutGroup%3E">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">import</span> { <span class="hljs-title class_ inline">LayoutGroup</span> } <span class="hljs-keyword inline">from</span> <span class="hljs-string inline">&quot;framer-motion&quot;</span>;

<span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">LayoutGroup</span>&gt;</span>
  <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.ul</span> <span class="hljs-attr inline">layout</span>&gt;</span>
    <span class="hljs-tag inline">&lt;<span class="hljs-name inline">AnimatePresence</span>&gt;</span>
      {items.map(item =&gt; (
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.li</span> <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{item.id}</span> <span class="hljs-attr inline">layout</span> /&gt;</span>
      ))}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">AnimatePresence</span>&gt;</span>
  <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.ul</span>&gt;</span>
<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">LayoutGroup</span>&gt;</span></span>
</code></pre>
            </div>
        
<h3 id="完整示例" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#完整示例" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 完整示例">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">完整示例</strong>
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="import%20React%2C%20%7B%20useState%20%7D%20from%20'react'%3B%0Aimport%20%7B%20AnimatePresence%2C%20motion%20%7D%20from%20'framer-motion'%3B%0Aconst%20cardVariants%20%3D%20%7B%0Ainitial%3A%20%7B%0Aopacity%3A%200%2C%0Ascale%3A%200.8%2C%0Arotate%3A%20-10%0A%7D%2C%0Aanimate%3A%20%7B%0Aopacity%3A%201%2C%0Ascale%3A%201%2C%0Arotate%3A%200%2C%0Atransition%3A%20%7B%0Aduration%3A%200.3%2C%0Aease%3A%20%22easeOut%22%0A%7D%0A%7D%2C%0Aexit%3A%20%7B%0Aopacity%3A%200%2C%0Ascale%3A%200.8%2C%0Arotate%3A%2010%2C%0Atransition%3A%20%7B%0Aduration%3A%200.2%2C%0Aease%3A%20%22easeIn%22%0A%7D%0A%7D%0A%7D%3B%0Afunction%20CardManager()%20%7B%0Aconst%20%5Bcards%2C%20setCards%5D%20%3D%20useState(%5B%0A%7B%20id%3A%201%2C%20title%3A%20%22%E5%8D%A1%E7%89%87%201%22%2C%20content%3A%20%22%E8%BF%99%E6%98%AF%E7%AC%AC%E4%B8%80%E5%BC%A0%E5%8D%A1%E7%89%87%22%20%7D%2C%0A%7B%20id%3A%202%2C%20title%3A%20%22%E5%8D%A1%E7%89%87%202%22%2C%20content%3A%20%22%E8%BF%99%E6%98%AF%E7%AC%AC%E4%BA%8C%E5%BC%A0%E5%8D%A1%E7%89%87%22%20%7D%2C%0A%7B%20id%3A%203%2C%20title%3A%20%22%E5%8D%A1%E7%89%87%203%22%2C%20content%3A%20%22%E8%BF%99%E6%98%AF%E7%AC%AC%E4%B8%89%E5%BC%A0%E5%8D%A1%E7%89%87%22%20%7D%0A%5D)%3B%0Aconst%20addCard%20%3D%20()%20%3D%3E%20%7B%0Aconst%20newCard%20%3D%20%7B%0Aid%3A%20Date.now()%2C%0Atitle%3A%20%60%E5%8D%A1%E7%89%87%20%24%7Bcards.length%20%2B%201%7D%60%2C%0Acontent%3A%20%60%E8%BF%99%E6%98%AF%E7%AC%AC%20%24%7Bcards.length%20%2B%201%7D%20%E5%BC%A0%E5%8D%A1%E7%89%87%60%0A%7D%3B%0AsetCards(prev%20%3D%3E%20%5B...prev%2C%20newCard%5D)%3B%0A%7D%3B%0Aconst%20removeCard%20%3D%20(id)%20%3D%3E%20%7B%0AsetCards(prev%20%3D%3E%20prev.filter(card%20%3D%3E%20card.id%20!%3D%3D%20id))%3B%0A%7D%3B%0Areturn%20(%0Adiv%20className%3D%22card-manager%22%3E%0Abutton%20onClick%3D%7BaddCard%7D%20className%3D%22add-button%22%3E%0A%E6%B7%BB%E5%8A%A0%E5%8D%A1%E7%89%87%0Abutton%3E%0Adiv%20className%3D%22cards-container%22%3E%0AAnimatePresence%3E%0A%7Bcards.map(card%20%3D%3E%20(%0Amotion.div%0Akey%3D%7Bcard.id%7D%0Avariants%3D%7BcardVariants%7D%0Ainitial%3D%22initial%22%0Aanimate%3D%22animate%22%0Aexit%3D%22exit%22%0Alayout%0AclassName%3D%22card%22%0A%3E%0Ah3%3E%7Bcard.title%7Dh3%3E%0Ap%3E%7Bcard.content%7Dp%3E%0Abutton%0AonClick%3D%7B()%20%3D%3E%20removeCard(card.id)%7D%0AclassName%3D%22remove-button%22%0A%3E%0A%E5%88%A0%E9%99%A4%0Abutton%3E%0Amotion.div%3E%0A))%7D%0AAnimatePresence%3E%0Adiv%3E%0Adiv%3E%0A)%3B%0A%7D%0Aexport%20default%20CardManager%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">import</span> <span class="hljs-title class_ inline">React</span>, { useState } <span class="hljs-keyword inline">from</span> <span class="hljs-string inline">&#x27;react&#x27;</span>;
<span class="hljs-keyword inline">import</span> { <span class="hljs-title class_ inline">AnimatePresence</span>, motion } <span class="hljs-keyword inline">from</span> <span class="hljs-string inline">&#x27;framer-motion&#x27;</span>;

<span class="hljs-keyword inline">const</span> cardVariants = {
  <span class="hljs-attr inline">initial</span>: { 
    <span class="hljs-attr inline">opacity</span>: <span class="hljs-number inline">0</span>, 
    <span class="hljs-attr inline">scale</span>: <span class="hljs-number inline">0.8</span>, 
    <span class="hljs-attr inline">rotate</span>: -<span class="hljs-number inline">10</span> 
  },
  <span class="hljs-attr inline">animate</span>: { 
    <span class="hljs-attr inline">opacity</span>: <span class="hljs-number inline">1</span>, 
    <span class="hljs-attr inline">scale</span>: <span class="hljs-number inline">1</span>, 
    <span class="hljs-attr inline">rotate</span>: <span class="hljs-number inline">0</span>,
    <span class="hljs-attr inline">transition</span>: {
      <span class="hljs-attr inline">duration</span>: <span class="hljs-number inline">0.3</span>,
      <span class="hljs-attr inline">ease</span>: <span class="hljs-string inline">&quot;easeOut&quot;</span>
    }
  },
  <span class="hljs-attr inline">exit</span>: { 
    <span class="hljs-attr inline">opacity</span>: <span class="hljs-number inline">0</span>, 
    <span class="hljs-attr inline">scale</span>: <span class="hljs-number inline">0.8</span>, 
    <span class="hljs-attr inline">rotate</span>: <span class="hljs-number inline">10</span>,
    <span class="hljs-attr inline">transition</span>: {
      <span class="hljs-attr inline">duration</span>: <span class="hljs-number inline">0.2</span>,
      <span class="hljs-attr inline">ease</span>: <span class="hljs-string inline">&quot;easeIn&quot;</span>
    }
  }
};

<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">CardManager</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> [cards, setCards] = <span class="hljs-title function_ inline">useState</span>([
    { <span class="hljs-attr inline">id</span>: <span class="hljs-number inline">1</span>, <span class="hljs-attr inline">title</span>: <span class="hljs-string inline">&quot;卡片 1&quot;</span>, <span class="hljs-attr inline">content</span>: <span class="hljs-string inline">&quot;这是第一张卡片&quot;</span> },
    { <span class="hljs-attr inline">id</span>: <span class="hljs-number inline">2</span>, <span class="hljs-attr inline">title</span>: <span class="hljs-string inline">&quot;卡片 2&quot;</span>, <span class="hljs-attr inline">content</span>: <span class="hljs-string inline">&quot;这是第二张卡片&quot;</span> },
    { <span class="hljs-attr inline">id</span>: <span class="hljs-number inline">3</span>, <span class="hljs-attr inline">title</span>: <span class="hljs-string inline">&quot;卡片 3&quot;</span>, <span class="hljs-attr inline">content</span>: <span class="hljs-string inline">&quot;这是第三张卡片&quot;</span> }
  ]);

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">addCard</span> = (<span class="hljs-params inline"></span>) =&gt; {
    <span class="hljs-keyword inline">const</span> newCard = {
      <span class="hljs-attr inline">id</span>: <span class="hljs-title class_ inline">Date</span>.<span class="hljs-title function_ inline">now</span>(),
      <span class="hljs-attr inline">title</span>: <span class="hljs-string inline">`卡片 <span class="hljs-subst inline">${cards.length + <span class="hljs-number inline">1</span>}</span>`</span>,
      <span class="hljs-attr inline">content</span>: <span class="hljs-string inline">`这是第 <span class="hljs-subst inline">${cards.length + <span class="hljs-number inline">1</span>}</span> 张卡片`</span>
    };
    <span class="hljs-title function_ inline">setCards</span>(<span class="hljs-function inline"><span class="hljs-params inline">prev</span> =&gt;</span> [...prev, newCard]);
  };

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">removeCard</span> = (<span class="hljs-params inline">id</span>) =&gt; {
    <span class="hljs-title function_ inline">setCards</span>(<span class="hljs-function inline"><span class="hljs-params inline">prev</span> =&gt;</span> prev.<span class="hljs-title function_ inline">filter</span>(<span class="hljs-function inline"><span class="hljs-params inline">card</span> =&gt;</span> card.<span class="hljs-property inline">id</span> !== id));
  };

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span> <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;card-manager&quot;</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{addCard}</span> <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;add-button&quot;</span>&gt;</span>
        添加卡片
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
      
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span> <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;cards-container&quot;</span>&gt;</span>
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">AnimatePresence</span>&gt;</span>
          {cards.map(card =&gt; (
            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">motion.div</span>
              <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{card.id}</span>
              <span class="hljs-attr inline">variants</span>=<span class="hljs-string inline">{cardVariants}</span>
              <span class="hljs-attr inline">initial</span>=<span class="hljs-string inline">&quot;initial&quot;</span>
              <span class="hljs-attr inline">animate</span>=<span class="hljs-string inline">&quot;animate&quot;</span>
              <span class="hljs-attr inline">exit</span>=<span class="hljs-string inline">&quot;exit&quot;</span>
              <span class="hljs-attr inline">layout</span>
              <span class="hljs-attr inline">className</span>=<span class="hljs-string inline">&quot;card&quot;</span>
            &gt;</span>
              <span class="hljs-tag inline">&lt;<span class="hljs-name inline">h3</span>&gt;</span>{card.title}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">h3</span>&gt;</span>
              <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>{card.content}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
              <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> 
                <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> removeCard(card.id)}
                className=&quot;remove-button&quot;
              &gt;
                删除
              <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
            <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">motion.div</span>&gt;</span>
          ))}
        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">AnimatePresence</span>&gt;</span>
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword inline">export</span> <span class="hljs-keyword inline">default</span> <span class="hljs-title class_ inline">CardManager</span>;
</code></pre>
            </div>
        
<h3 id="注意事项" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#注意事项" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 注意事项">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">注意事项</strong>
        </h3>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">key 的重要性</strong>：直接子组件必须有唯一且稳定的 key</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">组件层级</strong>：AnimatePresence 只检测直接子组件的变化</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">性能影响</strong>：复杂的退出动画可能影响性能，特别是在移动设备上</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">浏览器兼容性</strong>：需要现代浏览器支持，老版本浏览器可能需要 polyfill</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">内存管理</strong>：确保动画完成后正确清理组件和事件监听器</li>
</ul>
<p class="text-base leading-7 mb-4 text-foreground"><code>AnimatePresence</code> 是创建流畅用户界面的强大工具，通过合理使用可以大大提升应用的交互体验和视觉效果。</p>
</div></article><footer class="mt-16 pt-8 border-t border-foreground/20"><div class="flex items-center justify-between"><a class="inline-flex items-center px-4 py-2 bg-primary text-foreground rounded-lg hover:bg-primary/90 transition-colors" href="/MilkWind-Website/documents/">documents.backToDocuments</a><div class="text-sm text-foreground/60"><span>documents.byAuthor<!-- --> <!-- -->MilkWind</span></div></div></footer></div></div><!--$--><!--/$--><!--$--><!--/$--><!--/$--><!--/$--><script src="/MilkWind-Website/_next/static/chunks/webpack-1674c92fb524bcda.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[38735,[\"46\",\"static/chunks/46-268e24d727b280ef.js\",\"7177\",\"static/chunks/app/layout-af4a6e723c0ff668.js\"],\"default\"]\n3:I[19945,[\"46\",\"static/chunks/46-268e24d727b280ef.js\",\"7177\",\"static/chunks/app/layout-af4a6e723c0ff668.js\"],\"default\"]\n4:I[65337,[\"46\",\"static/chunks/46-268e24d727b280ef.js\",\"7177\",\"static/chunks/app/layout-af4a6e723c0ff668.js\"],\"default\"]\n5:I[96190,[\"46\",\"static/chunks/46-268e24d727b280ef.js\",\"7177\",\"static/chunks/app/layout-af4a6e723c0ff668.js\"],\"ClientProviders\"]\n6:I[87555,[],\"\"]\n7:I[51901,[\"8039\",\"static/chunks/app/error-dda32be1d095a86c.js\"],\"default\"]\n8:I[31295,[],\"\"]\n9:I[6874,[\"6874\",\"static/chunks/6874-fbe9a08eb79b991c.js\",\"4345\",\"static/chunks/app/not-found-9ff98b2ccf24cac7.js\"],\"\"]\na:I[94970,[],\"ClientSegmentRoot\"]\nb:I[44065,[\"206\",\"static/chunks/206-4f4cbf4d7156f437.js\",\"3092\",\"static/chunks/app/documents/layout-28408791defde09e.js\"],\"default\"]\ne:I[59665,[],\"MetadataBoundary\"]\n10:I[59665,[],\"OutletBoundary\"]\n13:I[74911,[],\"AsyncMetadataOutlet\"]\n15:I[39460,[\"2415\",\"static/chunks/2415-689c103fb3d2c28d.js\",\"8610\",\"static/chunks/8610-7bd3f91f3cf2a4d6.js\",\"5650\",\"static/chunks/app/documents/loading-1fa3f98b6e5a8e78.js\"],\"default\"]\n16:I[88610,[\"2415\",\"static/chunks/2415-689c103fb3d2c28d.js\",\"8610\",\"static/chunks/8610-7bd3f91f3cf2a4d6.js\",\"4209\",\"static/chunks/app/loading-68f227fb49b3ac8c.js\"],\"default\"]\n17:I[59665,[],\"ViewportBoundary\"]\n19:I[26614,[],\"\"]\n:HL[\"/MilkWind-Website/_next/static/css/f034c804622acb16.css\",\"style\"]\n:HL[\"/MilkWind-Website/_next/static/css/276b387d8ca46690.css\",\"style\"]\n:HL[\"/MilkWind-Website/_next/static/css/5eacd01f773eed7f.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"ARIfyKTG2kypPJcFndv6Z\",\"p\":\"/MilkWind-Website\",\"c\":[\"\",\"documents\",\"zh\",\"dark\",\"basic-knowledge\",\"framer-motion-animate-presence\",\"\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"documents\",{\"children\":[[\"slug\",\"zh/dark/basic-knowledge/framer-motion-animate-presence\",\"c\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/MilkWind-Website/_next/static/css/f034c804622acb16.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/MilkWind-Website/_next/static/css/276b387d8ca46690.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"__variable_9b7fb1 __variable_ca2a15 __variable_591dcc font-sans antialiased min-h-screen bg-background text-foreground\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"$L2\",null,{}],[\"$\",\"$L3\",null,{}],[\"$\",\"$L4\",null,{}],[\"$\",\"$L5\",null,{\"children\":[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$7\",\"errorStyles\":[],\"errorScripts\":[],\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"div\",null,{\"className\":\"z-10 relative min-h-screen flex items-center justify-center bg-background p-8\",\"children\":[\"$\",\"div\",null,{\"className\":\"text-center max-w-md\",\"children\":[[\"$\",\"div\",null,{\"className\":\"text-8xl font-bold text-primary mb-4\",\"children\":\"404\"}],[\"$\",\"h2\",null,{\"className\":\"text-2xl font-bold text-foreground mb-4\",\"children\":\"Page Not Found\"}],[\"$\",\"p\",null,{\"className\":\"text-foreground/70 mb-8\",\"children\":\"The page you're looking for doesn't exist or has been moved to a different location.\"}],[\"$\",\"div\",null,{\"className\":\"flex flex-col sm:flex-row gap-4 justify-center\",\"children\":[[\"$\",\"$L9\",null,{\"href\":\"/\",\"className\":\"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/80 transition-colors\",\"children\":\"Go Home\"}],[\"$\",\"$L9\",null,{\"href\":\"/works\",\"className\":\"px-6 py-2 border border-primary text-primary rounded-lg hover:bg-primary/10 transition-colors\",\"children\":\"View Works\"}]]}],[\"$\",\"div\",null,{\"className\":\"absolute inset-0 overflow-hidden pointer-events-none -z-10\",\"children\":[[\"$\",\"div\",null,{\"className\":\"absolute top-1/4 left-1/4 w-2 h-2 bg-primary/20 rounded-full animate-float\"}],[\"$\",\"div\",null,{\"className\":\"absolute top-3/4 right-1/4 w-3 h-3 bg-accent/20 rounded-full animate-float\",\"style\":{\"animationDelay\":\"1s\"}}],[\"$\",\"div\",null,{\"className\":\"absolute bottom-1/4 left-1/3 w-1 h-1 bg-secondary/20 rounded-full animate-float\",\"style\":{\"animationDelay\":\"2s\"}}]]}]]}]}],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}]}]]}],{\"children\":[\"documents\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$La\",null,{\"Component\":\"$b\",\"slots\":{\"children\":[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]},\"params\":{},\"promise\":\"$@c\"}]]}],{\"children\":[[\"slug\",\"zh/dark/basic-knowledge/framer-motion-animate-presence\",\"c\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$Ld\",[\"$\",\"$Le\",null,{\"children\":\"$Lf\"}],[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/MilkWind-Website/_next/static/css/5eacd01f773eed7f.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$L10\",null,{\"children\":[\"$L11\",\"$L12\",[\"$\",\"$L13\",null,{\"promise\":\"$@14\"}]]}]]}],{},null,false]},null,false]},[[\"$\",\"$L15\",\"l\",{}],[],[]],false]},[[\"$\",\"$L16\",\"l\",{}],[],[]],false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"B1Ka2DYG-PAItcILSn8wH\",{\"children\":[[\"$\",\"$L17\",null,{\"children\":\"$L18\"}],null]}],null]}],false]],\"m\":\"$undefined\",\"G\":[\"$19\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"1a:\"$Sreact.suspense\"\n1b:I[74911,[],\"AsyncMetadata\"]\nc:{}\nf:[\"$\",\"$1a\",null,{\"fallback\":null,\"children\":[\"$\",\"$L1b\",null,{\"promise\":\"$@1c\"}]}]\n"])</script><script>self.__next_f.push([1,"1d:I[57340,[\"5584\",\"static/chunks/b498d07c-095637f0f10883c6.js\",\"2415\",\"static/chunks/2415-689c103fb3d2c28d.js\",\"6874\",\"static/chunks/6874-fbe9a08eb79b991c.js\",\"9554\",\"static/chunks/9554-b714f9de28e85d30.js\",\"1873\",\"static/chunks/app/documents/%5B...slug%5D/page-8f3efa7e6c6c5377.js\"],\"DocumentPageClient\"]\n1e:T228cb,"])</script><script>self.__next_f.push([1,"\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003ccode\u003eAnimatePresence\u003c/code\u003e 是 Framer Motion 提供的核心组件，用于处理组件的退出动画。它通过检测 React 组件树中直接子组件的移除，使组件在卸载前能够执行完整的退出动画。\u003c/p\u003e\n\u003ch3 id=\"基本作用\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#基本作用\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 基本作用\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e基本作用\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003ccode\u003eAnimatePresence\u003c/code\u003e 主要用于以下场景：\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e组件退出动画\u003c/strong\u003e：在组件卸载前执行动画\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e条件渲染动画\u003c/strong\u003e：处理基于状态的组件显示/隐藏\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e列表项动画\u003c/strong\u003e：列表项添加/删除时的过渡效果\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e路由切换动画\u003c/strong\u003e：页面或视图切换的动画效果\u003c/li\u003e\n\u003c/ul\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"import%20%7B%20AnimatePresence%2C%20motion%20%7D%20from%20%22framer-motion%22%3B%0Afunction%20App()%20%7B%0Aconst%20%5Bshow%2C%20setShow%5D%20%3D%20useState(true)%3B%0Areturn%20(%0AAnimatePresence%3E%0A%7Bshow%20%26%26%20(%0Amotion.div%0Akey%3D%22modal%22%0Ainitial%3D%7B%7B%20opacity%3A%200%20%7D%7D%0Aanimate%3D%7B%7B%20opacity%3A%201%20%7D%7D%0Aexit%3D%7B%7B%20opacity%3A%200%20%7D%7D%0A%3E%0A%E5%86%85%E5%AE%B9%0Amotion.div%3E%0A)%7D%0AAnimatePresence%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_ inline\"\u003eAnimatePresence\u003c/span\u003e, motion } \u003cspan class=\"hljs-keyword inline\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026quot;framer-motion\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eApp\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [show, setShow] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-literal inline\"\u003etrue\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {show \u0026amp;\u0026amp; (\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;modal\u0026quot;\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003einitial\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0\u003c/span\u003e }}\n          \u003cspan class=\"hljs-attr inline\"\u003eanimate\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e1\u003c/span\u003e }}\n          \u003cspan class=\"hljs-attr inline\"\u003eexit\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0\u003c/span\u003e }}\n        \u0026gt;\u003c/span\u003e\n          内容\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      )}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"基本用法\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#基本用法\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 基本用法\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e基本用法\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003ch4 id=\"条件渲染动画\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#条件渲染动画\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 条件渲染动画\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e条件渲染动画\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"import%20%7B%20AnimatePresence%2C%20motion%20%7D%20from%20%22framer-motion%22%3B%0Afunction%20Modal(%7B%20isOpen%2C%20onClose%20%7D)%20%7B%0Areturn%20(%0AAnimatePresence%3E%0A%7BisOpen%20%26%26%20(%0Amotion.div%0Akey%3D%22modal%22%0Ainitial%3D%7B%7B%20opacity%3A%200%2C%20scale%3A%200.8%20%7D%7D%0Aanimate%3D%7B%7B%20opacity%3A%201%2C%20scale%3A%201%20%7D%7D%0Aexit%3D%7B%7B%20opacity%3A%200%2C%20scale%3A%200.8%20%7D%7D%0AclassName%3D%22modal-overlay%22%0A%3E%0Amotion.div%0Ainitial%3D%7B%7B%20y%3A%20-50%20%7D%7D%0Aanimate%3D%7B%7B%20y%3A%200%20%7D%7D%0Aexit%3D%7B%7B%20y%3A%20-50%20%7D%7D%0AclassName%3D%22modal-content%22%0A%3E%0Ah2%3E%E6%A8%A1%E6%80%81%E6%A1%86%E6%A0%87%E9%A2%98h2%3E%0Ap%3E%E6%A8%A1%E6%80%81%E6%A1%86%E5%86%85%E5%AE%B9p%3E%0Abutton%20onClick%3D%7BonClose%7D%3E%E5%85%B3%E9%97%ADbutton%3E%0Amotion.div%3E%0Amotion.div%3E%0A)%7D%0AAnimatePresence%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_ inline\"\u003eAnimatePresence\u003c/span\u003e, motion } \u003cspan class=\"hljs-keyword inline\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026quot;framer-motion\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eModal\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ isOpen, onClose }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {isOpen \u0026amp;\u0026amp; (\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;modal\u0026quot;\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003einitial\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003escale:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0.8\u003c/span\u003e }}\n          \u003cspan class=\"hljs-attr inline\"\u003eanimate\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003escale:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e1\u003c/span\u003e }}\n          \u003cspan class=\"hljs-attr inline\"\u003eexit\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003escale:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0.8\u003c/span\u003e }}\n          \u003cspan class=\"hljs-attr inline\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;modal-overlay\u0026quot;\u003c/span\u003e\n        \u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\n            \u003cspan class=\"hljs-attr inline\"\u003einitial\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ey:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e-50\u003c/span\u003e }}\n            \u003cspan class=\"hljs-attr inline\"\u003eanimate\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ey:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0\u003c/span\u003e }}\n            \u003cspan class=\"hljs-attr inline\"\u003eexit\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ey:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e-50\u003c/span\u003e }}\n            \u003cspan class=\"hljs-attr inline\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;modal-content\u0026quot;\u003c/span\u003e\n          \u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eh2\u003c/span\u003e\u0026gt;\u003c/span\u003e模态框标题\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eh2\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e模态框内容\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{onClose}\u003c/span\u003e\u0026gt;\u003c/span\u003e关闭\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      )}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch4 id=\"列表动画\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#列表动画\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 列表动画\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e列表动画\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20TodoList()%20%7B%0Aconst%20%5Btodos%2C%20setTodos%5D%20%3D%20useState(%5B%0A%7B%20id%3A%201%2C%20text%3A%20%22%E5%AD%A6%E4%B9%A0%20React%22%20%7D%2C%0A%7B%20id%3A%202%2C%20text%3A%20%22%E5%AD%A6%E4%B9%A0%20Framer%20Motion%22%20%7D%0A%5D)%3B%0Aconst%20removeTodo%20%3D%20(id)%20%3D%3E%20%7B%0AsetTodos(prev%20%3D%3E%20prev.filter(todo%20%3D%3E%20todo.id%20!%3D%3D%20id))%3B%0A%7D%3B%0Areturn%20(%0Aul%3E%0AAnimatePresence%3E%0A%7Btodos.map(todo%20%3D%3E%20(%0Amotion.li%0Akey%3D%7Btodo.id%7D%20%2F%2F%20%E5%85%B3%E9%94%AE%EF%BC%9A%E6%AF%8F%E4%B8%AA%E5%AD%90%E5%85%83%E7%B4%A0%E5%BF%85%E9%A1%BB%E6%9C%89%E5%94%AF%E4%B8%80%E7%9A%84%20key%0Ainitial%3D%7B%7B%20opacity%3A%200%2C%20x%3A%20-100%20%7D%7D%0Aanimate%3D%7B%7B%20opacity%3A%201%2C%20x%3A%200%20%7D%7D%0Aexit%3D%7B%7B%20opacity%3A%200%2C%20x%3A%20100%20%7D%7D%0Alayout%20%2F%2F%20%E8%87%AA%E5%8A%A8%E5%A4%84%E7%90%86%E5%B8%83%E5%B1%80%E5%8A%A8%E7%94%BB%0A%3E%0A%7Btodo.text%7D%0Abutton%20onClick%3D%7B()%20%3D%3E%20removeTodo(todo.id)%7D%3E%E5%88%A0%E9%99%A4button%3E%0Amotion.li%3E%0A))%7D%0AAnimatePresence%3E%0Aul%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eTodoList\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [todos, setTodos] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e([\n    { \u003cspan class=\"hljs-attr inline\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003etext\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026quot;学习 React\u0026quot;\u003c/span\u003e },\n    { \u003cspan class=\"hljs-attr inline\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003etext\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026quot;学习 Framer Motion\u0026quot;\u003c/span\u003e }\n  ]);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eremoveTodo\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003eid\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-title function_ inline\"\u003esetTodos\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eprev\u003c/span\u003e =\u0026gt;\u003c/span\u003e prev.\u003cspan class=\"hljs-title function_ inline\"\u003efilter\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003etodo\u003c/span\u003e =\u0026gt;\u003c/span\u003e todo.\u003cspan class=\"hljs-property inline\"\u003eid\u003c/span\u003e !== id));\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eul\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        {todos.map(todo =\u0026gt; (\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003emotion.li\u003c/span\u003e\n            \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{todo.id}\u003c/span\u003e // \u003cspan class=\"hljs-attr inline\"\u003e关键\u003c/span\u003e：\u003cspan class=\"hljs-attr inline\"\u003e每个子元素必须有唯一的\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e\n            \u003cspan class=\"hljs-attr inline\"\u003einitial\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003ex:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e-100\u003c/span\u003e }}\n            \u003cspan class=\"hljs-attr inline\"\u003eanimate\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003ex:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0\u003c/span\u003e }}\n            \u003cspan class=\"hljs-attr inline\"\u003eexit\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003ex:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e100\u003c/span\u003e }}\n            \u003cspan class=\"hljs-attr inline\"\u003elayout\u003c/span\u003e // \u003cspan class=\"hljs-attr inline\"\u003e自动处理布局动画\u003c/span\u003e\n          \u0026gt;\u003c/span\u003e\n            {todo.text}\n            \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e removeTodo(todo.id)}\u0026gt;删除\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003emotion.li\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        ))}\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eul\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"变体（variants）的使用\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#变体（variants）的使用\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 变体（Variants）的使用\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e变体（Variants）的使用\u003c/strong\u003e\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"const%20modalVariants%20%3D%20%7B%0Ahidden%3A%20%7B%0Aopacity%3A%200%2C%0Ascale%3A%200.8%2C%0Atransition%3A%20%7B%0Awhen%3A%20%22afterChildren%22%20%2F%2F%20%E5%85%88%E6%89%A7%E8%A1%8C%E5%AD%90%E7%BB%84%E4%BB%B6%E5%8A%A8%E7%94%BB%0A%7D%0A%7D%2C%0Avisible%3A%20%7B%0Aopacity%3A%201%2C%0Ascale%3A%201%2C%0Atransition%3A%20%7B%0Awhen%3A%20%22beforeChildren%22%2C%20%2F%2F%20%E5%85%88%E6%89%A7%E8%A1%8C%E7%88%B6%E7%BB%84%E4%BB%B6%E5%8A%A8%E7%94%BB%0AstaggerChildren%3A%200.1%20%2F%2F%20%E5%AD%90%E7%BB%84%E4%BB%B6%E4%BE%9D%E6%AC%A1%E5%8A%A8%E7%94%BB%0A%7D%0A%7D%0A%7D%3B%0Aconst%20itemVariants%20%3D%20%7B%0Ahidden%3A%20%7B%20opacity%3A%200%2C%20y%3A%2020%20%7D%2C%0Avisible%3A%20%7B%20opacity%3A%201%2C%20y%3A%200%20%7D%0A%7D%3B%0Afunction%20AnimatedModal(%7B%20isOpen%20%7D)%20%7B%0Areturn%20(%0AAnimatePresence%3E%0A%7BisOpen%20%26%26%20(%0Amotion.div%0Avariants%3D%7BmodalVariants%7D%0Ainitial%3D%22hidden%22%0Aanimate%3D%22visible%22%0Aexit%3D%22hidden%22%0AclassName%3D%22modal%22%0A%3E%0Amotion.h2%20variants%3D%7BitemVariants%7D%3E%E6%A0%87%E9%A2%98motion.h2%3E%0Amotion.p%20variants%3D%7BitemVariants%7D%3E%E5%86%85%E5%AE%B9motion.p%3E%0Amotion.button%20variants%3D%7BitemVariants%7D%3E%E6%8C%89%E9%92%AEmotion.button%3E%0Amotion.div%3E%0A)%7D%0AAnimatePresence%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e modalVariants = {\n  \u003cspan class=\"hljs-attr inline\"\u003ehidden\u003c/span\u003e: { \n    \u003cspan class=\"hljs-attr inline\"\u003eopacity\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e, \n    \u003cspan class=\"hljs-attr inline\"\u003escale\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e0.8\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr inline\"\u003etransition\u003c/span\u003e: { \n      \u003cspan class=\"hljs-attr inline\"\u003ewhen\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026quot;afterChildren\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-comment inline\"\u003e// 先执行子组件动画\u003c/span\u003e\n    }\n  },\n  \u003cspan class=\"hljs-attr inline\"\u003evisible\u003c/span\u003e: { \n    \u003cspan class=\"hljs-attr inline\"\u003eopacity\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e, \n    \u003cspan class=\"hljs-attr inline\"\u003escale\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr inline\"\u003etransition\u003c/span\u003e: { \n      \u003cspan class=\"hljs-attr inline\"\u003ewhen\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026quot;beforeChildren\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-comment inline\"\u003e// 先执行父组件动画\u003c/span\u003e\n      \u003cspan class=\"hljs-attr inline\"\u003estaggerChildren\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e0.1\u003c/span\u003e \u003cspan class=\"hljs-comment inline\"\u003e// 子组件依次动画\u003c/span\u003e\n    }\n  }\n};\n\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e itemVariants = {\n  \u003cspan class=\"hljs-attr inline\"\u003ehidden\u003c/span\u003e: { \u003cspan class=\"hljs-attr inline\"\u003eopacity\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003ey\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e20\u003c/span\u003e },\n  \u003cspan class=\"hljs-attr inline\"\u003evisible\u003c/span\u003e: { \u003cspan class=\"hljs-attr inline\"\u003eopacity\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003ey\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e }\n};\n\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eAnimatedModal\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ isOpen }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {isOpen \u0026amp;\u0026amp; (\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003evariants\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{modalVariants}\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003einitial\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;hidden\u0026quot;\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003eanimate\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;visible\u0026quot;\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003eexit\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;hidden\u0026quot;\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;modal\u0026quot;\u003c/span\u003e\n        \u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003emotion.h2\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003evariants\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{itemVariants}\u003c/span\u003e\u0026gt;\u003c/span\u003e标题\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003emotion.h2\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003emotion.p\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003evariants\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{itemVariants}\u003c/span\u003e\u0026gt;\u003c/span\u003e内容\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003emotion.p\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003emotion.button\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003evariants\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{itemVariants}\u003c/span\u003e\u0026gt;\u003c/span\u003e按钮\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003emotion.button\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      )}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"key-属性的重要性\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#key-属性的重要性\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to key 属性的重要性\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003ekey 属性的重要性\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003ch4 id=\"通过改变-key-触发动画\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#通过改变-key-触发动画\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 通过改变 key 触发动画\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e通过改变 key 触发动画\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20Slideshow()%20%7B%0Aconst%20%5BcurrentIndex%2C%20setCurrentIndex%5D%20%3D%20useState(0)%3B%0Aconst%20images%20%3D%20%5B%0A%7B%20id%3A%201%2C%20src%3A%20%22image1.jpg%22%2C%20alt%3A%20%22%E5%9B%BE%E7%89%871%22%20%7D%2C%0A%7B%20id%3A%202%2C%20src%3A%20%22image2.jpg%22%2C%20alt%3A%20%22%E5%9B%BE%E7%89%872%22%20%7D%2C%0A%7B%20id%3A%203%2C%20src%3A%20%22image3.jpg%22%2C%20alt%3A%20%22%E5%9B%BE%E7%89%873%22%20%7D%0A%5D%3B%0Aconst%20currentImage%20%3D%20images%5BcurrentIndex%5D%3B%0Areturn%20(%0Adiv%20className%3D%22slideshow%22%3E%0AAnimatePresence%20mode%3D%22wait%22%3E%0Amotion.img%0Akey%3D%7BcurrentImage.id%7D%20%2F%2F%20%E6%94%B9%E5%8F%98%20key%20%E4%BC%9A%E8%A7%A6%E5%8F%91%E7%BB%84%E4%BB%B6%E9%87%8D%E6%96%B0%E6%8C%82%E8%BD%BD%0Asrc%3D%7BcurrentImage.src%7D%0Aalt%3D%7BcurrentImage.alt%7D%0Ainitial%3D%7B%7B%20x%3A%20300%2C%20opacity%3A%200%20%7D%7D%0Aanimate%3D%7B%7B%20x%3A%200%2C%20opacity%3A%201%20%7D%7D%0Aexit%3D%7B%7B%20x%3A%20-300%2C%20opacity%3A%200%20%7D%7D%0Atransition%3D%7B%7B%20duration%3A%200.5%20%7D%7D%0A%2F%3E%0AAnimatePresence%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20setCurrentIndex(prev%20%3D%3E%20(prev%20%2B%201)%20%25%20images.length)%7D%3E%0A%E4%B8%8B%E4%B8%80%E5%BC%A0%0Abutton%3E%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eSlideshow\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [currentIndex, setCurrentIndex] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e images = [\n    { \u003cspan class=\"hljs-attr inline\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003esrc\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026quot;image1.jpg\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003ealt\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026quot;图片1\u0026quot;\u003c/span\u003e },\n    { \u003cspan class=\"hljs-attr inline\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003esrc\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026quot;image2.jpg\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003ealt\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026quot;图片2\u0026quot;\u003c/span\u003e },\n    { \u003cspan class=\"hljs-attr inline\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003esrc\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026quot;image3.jpg\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003ealt\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026quot;图片3\u0026quot;\u003c/span\u003e }\n  ];\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e currentImage = images[currentIndex];\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;slideshow\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003emode\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;wait\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003emotion.img\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{currentImage.id}\u003c/span\u003e // \u003cspan class=\"hljs-attr inline\"\u003e改变\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e会触发组件重新挂载\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003esrc\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{currentImage.src}\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003ealt\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{currentImage.alt}\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003einitial\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ex:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e300\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0\u003c/span\u003e }}\n          \u003cspan class=\"hljs-attr inline\"\u003eanimate\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ex:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e1\u003c/span\u003e }}\n          \u003cspan class=\"hljs-attr inline\"\u003eexit\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ex:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e-300\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0\u003c/span\u003e }}\n          \u003cspan class=\"hljs-attr inline\"\u003etransition\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eduration:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0.5\u003c/span\u003e }}\n        /\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e setCurrentIndex(prev =\u0026gt; (prev + 1) % images.length)}\u0026gt;\n        下一张\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"mode-属性详解\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#mode-属性详解\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to mode 属性详解\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003emode 属性详解\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003ch4 id=\"sync-模式（默认）\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#sync-模式（默认）\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to sync 模式（默认）\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003esync 模式（默认）\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"%2F%2F%20%E7%BB%84%E4%BB%B6%E5%90%8C%E6%97%B6%E8%BF%9B%E5%85%A5%E5%92%8C%E9%80%80%E5%87%BA%0AAnimatePresence%20mode%3D%22sync%22%3E%0A%7Bshow%20%26%26%20Component%20key%3D%22item%22%20%2F%3E%7D%0AAnimatePresence%3E\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// 组件同时进入和退出\u003c/span\u003e\n\u0026lt;\u003cspan class=\"hljs-title class_ inline\"\u003eAnimatePresence\u003c/span\u003e mode=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;sync\u0026quot;\u003c/span\u003e\u0026gt;\n  {show \u0026amp;\u0026amp; \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eComponent\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;item\u0026quot;\u003c/span\u003e /\u0026gt;\u003c/span\u003e\u003c/span\u003e}\n\u0026lt;/\u003cspan class=\"hljs-title class_ inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch4 id=\"wait-模式\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#wait-模式\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to wait 模式\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003ewait 模式\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"%2F%2F%20%E7%AD%89%E5%BE%85%E9%80%80%E5%87%BA%E5%8A%A8%E7%94%BB%E5%AE%8C%E6%88%90%E5%90%8E%E5%86%8D%E5%BC%80%E5%A7%8B%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%0AAnimatePresence%20mode%3D%22wait%22%3E%0AComponent%20key%3D%7BactiveTab%7D%20%2F%3E%0AAnimatePresence%3E\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// 等待退出动画完成后再开始进入动画\u003c/span\u003e\n\u0026lt;\u003cspan class=\"hljs-title class_ inline\"\u003eAnimatePresence\u003c/span\u003e mode=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;wait\u0026quot;\u003c/span\u003e\u0026gt;\n  \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eComponent\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{activeTab}\u003c/span\u003e /\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u0026lt;/\u003cspan class=\"hljs-title class_ inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch4 id=\"poplayout-模式\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#poplayout-模式\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to popLayout 模式\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003epopLayout 模式\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"%2F%2F%20%E9%80%80%E5%87%BA%E7%9A%84%E5%85%83%E7%B4%A0%E4%BB%8E%E5%B8%83%E5%B1%80%E4%B8%AD%22%E5%BC%B9%E5%87%BA%22%EF%BC%8C%E5%85%B6%E4%BB%96%E5%85%83%E7%B4%A0%E7%AB%8B%E5%8D%B3%E8%B0%83%E6%95%B4%E4%BD%8D%E7%BD%AE%0AAnimatePresence%20mode%3D%22popLayout%22%3E%0A%7Bitems.map(item%20%3D%3E%20(%0Amotion.div%20key%3D%7Bitem.id%7D%20layout%3E%0A%7Bitem.content%7D%0Amotion.div%3E%0A))%7D%0AAnimatePresence%3E\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// 退出的元素从布局中\u0026quot;弹出\u0026quot;，其他元素立即调整位置\u003c/span\u003e\n\u0026lt;\u003cspan class=\"hljs-title class_ inline\"\u003eAnimatePresence\u003c/span\u003e mode=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;popLayout\u0026quot;\u003c/span\u003e\u0026gt;\n  {items.\u003cspan class=\"hljs-title function_ inline\"\u003emap\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eitem\u003c/span\u003e =\u0026gt;\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{item.id}\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003elayout\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {item.content}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  ))}\n\u0026lt;/\u003cspan class=\"hljs-title class_ inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"高级功能\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#高级功能\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 高级功能\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e高级功能\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003ch4 id=\"访问组件存在状态\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#访问组件存在状态\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 访问组件存在状态\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e访问组件存在状态\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"import%20%7B%20useIsPresent%20%7D%20from%20%22framer-motion%22%3B%0Afunction%20Component()%20%7B%0Aconst%20isPresent%20%3D%20useIsPresent()%3B%0Areturn%20(%0Amotion.div%0Astyle%3D%7B%7B%0AbackgroundColor%3A%20isPresent%20%3F%20%22green%22%20%3A%20%22red%22%0A%7D%7D%0A%3E%0A%7BisPresent%20%3F%20%22%E7%BB%84%E4%BB%B6%E5%AD%98%E5%9C%A8%22%20%3A%20%22%E7%BB%84%E4%BB%B6%E6%AD%A3%E5%9C%A8%E9%80%80%E5%87%BA%22%7D%0Amotion.div%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003eimport\u003c/span\u003e { useIsPresent } \u003cspan class=\"hljs-keyword inline\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026quot;framer-motion\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eComponent\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e isPresent = \u003cspan class=\"hljs-title function_ inline\"\u003euseIsPresent\u003c/span\u003e();\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\n      \u003cspan class=\"hljs-attr inline\"\u003estyle\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \n        \u003cspan class=\"hljs-attr inline\"\u003ebackgroundColor:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eisPresent\u003c/span\u003e ? \u0026quot;\u003cspan class=\"hljs-attr inline\"\u003egreen\u003c/span\u003e\u0026quot; \u003cspan class=\"hljs-attr inline\"\u003e:\u003c/span\u003e \u0026quot;\u003cspan class=\"hljs-attr inline\"\u003ered\u003c/span\u003e\u0026quot; \n      }}\n    \u0026gt;\u003c/span\u003e\n      {isPresent ? \u0026quot;组件存在\u0026quot; : \u0026quot;组件正在退出\u0026quot;}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch4 id=\"传递自定义数据\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#传递自定义数据\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 传递自定义数据\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e传递自定义数据\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20Slideshow()%20%7B%0Aconst%20%5Bdirection%2C%20setDirection%5D%20%3D%20useState(1)%3B%20%2F%2F%201%3A%20%E5%89%8D%E8%BF%9B%2C%20-1%3A%20%E5%90%8E%E9%80%80%0Aconst%20slideVariants%20%3D%20%7B%0Aenter%3A%20(direction)%20%3D%3E%20(%7B%0Ax%3A%20direction%20%3E%200%20%3F%201000%20%3A%20-1000%2C%0Aopacity%3A%200%0A%7D)%2C%0Acenter%3A%20%7B%0AzIndex%3A%201%2C%0Ax%3A%200%2C%0Aopacity%3A%201%0A%7D%2C%0Aexit%3A%20(direction)%20%3D%3E%20(%7B%0AzIndex%3A%200%2C%0Ax%3A%20direction%200%20%3F%201000%20%3A%20-1000%2C%0Aopacity%3A%200%0A%7D)%0A%7D%3B%0Areturn%20(%0AAnimatePresence%20custom%3D%7Bdirection%7D%3E%0Amotion.div%0Akey%3D%7BcurrentSlide%7D%0Acustom%3D%7Bdirection%7D%0Avariants%3D%7BslideVariants%7D%0Ainitial%3D%22enter%22%0Aanimate%3D%22center%22%0Aexit%3D%22exit%22%0Atransition%3D%7B%7B%20duration%3A%200.5%20%7D%7D%0A%3E%0A%E5%B9%BB%E7%81%AF%E7%89%87%E5%86%85%E5%AE%B9%0Amotion.div%3E%0AAnimatePresence%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eSlideshow\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [direction, setDirection] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e); \u003cspan class=\"hljs-comment inline\"\u003e// 1: 前进, -1: 后退\u003c/span\u003e\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e slideVariants = {\n    \u003cspan class=\"hljs-attr inline\"\u003eenter\u003c/span\u003e: \u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003edirection\u003c/span\u003e) =\u0026gt;\u003c/span\u003e ({\n      \u003cspan class=\"hljs-attr inline\"\u003ex\u003c/span\u003e: direction \u0026gt; \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e ? \u003cspan class=\"hljs-number inline\"\u003e1000\u003c/span\u003e : -\u003cspan class=\"hljs-number inline\"\u003e1000\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr inline\"\u003eopacity\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e\n    }),\n    \u003cspan class=\"hljs-attr inline\"\u003ecenter\u003c/span\u003e: {\n      \u003cspan class=\"hljs-attr inline\"\u003ezIndex\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr inline\"\u003ex\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr inline\"\u003eopacity\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e\n    },\n    \u003cspan class=\"hljs-attr inline\"\u003eexit\u003c/span\u003e: \u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003edirection\u003c/span\u003e) =\u0026gt;\u003c/span\u003e ({\n      \u003cspan class=\"hljs-attr inline\"\u003ezIndex\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr inline\"\u003ex\u003c/span\u003e: direction \u0026lt; \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e ? \u003cspan class=\"hljs-number inline\"\u003e1000\u003c/span\u003e : -\u003cspan class=\"hljs-number inline\"\u003e1000\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr inline\"\u003eopacity\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e\n    })\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ecustom\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{direction}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{currentSlide}\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003ecustom\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{direction}\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003evariants\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{slideVariants}\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003einitial\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;enter\u0026quot;\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003eanimate\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;center\u0026quot;\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003eexit\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;exit\u0026quot;\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003etransition\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eduration:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0.5\u003c/span\u003e }}\n      \u0026gt;\u003c/span\u003e\n        幻灯片内容\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch4 id=\"手动控制移除时机\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#手动控制移除时机\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 手动控制移除时机\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e手动控制移除时机\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"import%20%7B%20usePresence%20%7D%20from%20%22framer-motion%22%3B%0Afunction%20Component()%20%7B%0Aconst%20%5BisPresent%2C%20safeToRemove%5D%20%3D%20usePresence()%3B%0AuseEffect(()%20%3D%3E%20%7B%0Aif%20(!isPresent)%20%7B%0A%2F%2F%20%E6%89%A7%E8%A1%8C%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B8%85%E7%90%86%E9%80%BB%E8%BE%91%0AsetTimeout(()%20%3D%3E%20%7B%0Aconsole.log(%22%E6%89%A7%E8%A1%8C%E6%B8%85%E7%90%86%E6%93%8D%E4%BD%9C%22)%3B%0AsafeToRemove()%3B%20%2F%2F%20%E5%91%8A%E8%AF%89%20AnimatePresence%20%E5%8F%AF%E4%BB%A5%E5%AE%89%E5%85%A8%E7%A7%BB%E9%99%A4%E7%BB%84%E4%BB%B6%0A%7D%2C%201000)%3B%0A%7D%0A%7D%2C%20%5BisPresent%2C%20safeToRemove%5D)%3B%0Areturn%20div%3E%E8%87%AA%E5%AE%9A%E4%B9%89%E9%80%80%E5%87%BA%E9%80%BB%E8%BE%91%E7%9A%84%E7%BB%84%E4%BB%B6div%3E%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003eimport\u003c/span\u003e { usePresence } \u003cspan class=\"hljs-keyword inline\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026quot;framer-motion\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eComponent\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [isPresent, safeToRemove] = \u003cspan class=\"hljs-title function_ inline\"\u003eusePresence\u003c/span\u003e();\n\n  \u003cspan class=\"hljs-title function_ inline\"\u003euseEffect\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (!isPresent) {\n      \u003cspan class=\"hljs-comment inline\"\u003e// 执行自定义清理逻辑\u003c/span\u003e\n      \u003cspan class=\"hljs-built_in inline\"\u003esetTimeout\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n        \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;执行清理操作\u0026quot;\u003c/span\u003e);\n        \u003cspan class=\"hljs-title function_ inline\"\u003esafeToRemove\u003c/span\u003e(); \u003cspan class=\"hljs-comment inline\"\u003e// 告诉 AnimatePresence 可以安全移除组件\u003c/span\u003e\n      }, \u003cspan class=\"hljs-number inline\"\u003e1000\u003c/span\u003e);\n    }\n  }, [isPresent, safeToRemove]);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e自定义退出逻辑的组件\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e;\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"实际应用场景\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#实际应用场景\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 实际应用场景\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e实际应用场景\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003ch4 id=\"路由切换动画\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#路由切换动画\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 路由切换动画\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e路由切换动画\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"import%20%7B%20useLocation%20%7D%20from%20%22react-router-dom%22%3B%0Afunction%20AnimatedRoutes()%20%7B%0Aconst%20location%20%3D%20useLocation()%3B%0Areturn%20(%0AAnimatePresence%20mode%3D%22wait%22%3E%0Amotion.div%0Akey%3D%7Blocation.pathname%7D%0Ainitial%3D%7B%7B%20opacity%3A%200%2C%20x%3A%20100%20%7D%7D%0Aanimate%3D%7B%7B%20opacity%3A%201%2C%20x%3A%200%20%7D%7D%0Aexit%3D%7B%7B%20opacity%3A%200%2C%20x%3A%20-100%20%7D%7D%0Atransition%3D%7B%7B%20duration%3A%200.3%20%7D%7D%0A%3E%0ARoutes%20location%3D%7Blocation%7D%3E%0ARoute%20path%3D%22%2F%22%20component%3D%7BHome%7D%20%2F%3E%0ARoute%20path%3D%22%2Fabout%22%20component%3D%7BAbout%7D%20%2F%3E%0ARoute%20path%3D%22%2Fcontact%22%20component%3D%7BContact%7D%20%2F%3E%0ARoutes%3E%0Amotion.div%3E%0AAnimatePresence%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003eimport\u003c/span\u003e { useLocation } \u003cspan class=\"hljs-keyword inline\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026quot;react-router-dom\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eAnimatedRoutes\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e location = \u003cspan class=\"hljs-title function_ inline\"\u003euseLocation\u003c/span\u003e();\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003emode\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;wait\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{location.pathname}\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003einitial\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003ex:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e100\u003c/span\u003e }}\n        \u003cspan class=\"hljs-attr inline\"\u003eanimate\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003ex:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0\u003c/span\u003e }}\n        \u003cspan class=\"hljs-attr inline\"\u003eexit\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003ex:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e-100\u003c/span\u003e }}\n        \u003cspan class=\"hljs-attr inline\"\u003etransition\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eduration:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0.3\u003c/span\u003e }}\n      \u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eRoutes\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003elocation\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{location}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eRoute\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003epath\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;/\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ecomponent\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{Home}\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eRoute\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003epath\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;/about\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ecomponent\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{About}\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eRoute\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003epath\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;/contact\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ecomponent\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{Contact}\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eRoutes\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch4 id=\"通知系统\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#通知系统\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 通知系统\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e通知系统\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20NotificationCenter()%20%7B%0Aconst%20%5Bnotifications%2C%20setNotifications%5D%20%3D%20useState(%5B%5D)%3B%0Aconst%20removeNotification%20%3D%20(id)%20%3D%3E%20%7B%0AsetNotifications(prev%20%3D%3E%20prev.filter(n%20%3D%3E%20n.id%20!%3D%3D%20id))%3B%0A%7D%3B%0Areturn%20(%0Adiv%20className%3D%22notification-center%22%3E%0AAnimatePresence%3E%0A%7Bnotifications.map(notification%20%3D%3E%20(%0Amotion.div%0Akey%3D%7Bnotification.id%7D%0Ainitial%3D%7B%7B%20opacity%3A%200%2C%20y%3A%20-50%2C%20scale%3A%200.3%20%7D%7D%0Aanimate%3D%7B%7B%20opacity%3A%201%2C%20y%3A%200%2C%20scale%3A%201%20%7D%7D%0Aexit%3D%7B%7B%0Aopacity%3A%200%2C%0Ascale%3A%200.5%2C%0Atransition%3A%20%7B%20duration%3A%200.2%20%7D%0A%7D%7D%0Alayout%0AclassName%3D%22notification%22%0A%3E%0Ap%3E%7Bnotification.message%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20removeNotification(notification.id)%7D%3E%0A%C3%97%0Abutton%3E%0Amotion.div%3E%0A))%7D%0AAnimatePresence%3E%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eNotificationCenter\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [notifications, setNotifications] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e([]);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eremoveNotification\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003eid\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-title function_ inline\"\u003esetNotifications\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eprev\u003c/span\u003e =\u0026gt;\u003c/span\u003e prev.\u003cspan class=\"hljs-title function_ inline\"\u003efilter\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003en\u003c/span\u003e =\u0026gt;\u003c/span\u003e n.\u003cspan class=\"hljs-property inline\"\u003eid\u003c/span\u003e !== id));\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;notification-center\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        {notifications.map(notification =\u0026gt; (\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\n            \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{notification.id}\u003c/span\u003e\n            \u003cspan class=\"hljs-attr inline\"\u003einitial\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003ey:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e-50\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003escale:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0.3\u003c/span\u003e }}\n            \u003cspan class=\"hljs-attr inline\"\u003eanimate\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003ey:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003escale:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e1\u003c/span\u003e }}\n            \u003cspan class=\"hljs-attr inline\"\u003eexit\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \n              \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0\u003c/span\u003e, \n              \u003cspan class=\"hljs-attr inline\"\u003escale:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0.5\u003c/span\u003e, \n              \u003cspan class=\"hljs-attr inline\"\u003etransition:\u003c/span\u003e { \u003cspan class=\"hljs-attr inline\"\u003eduration:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0.2\u003c/span\u003e } \n            }}\n            \u003cspan class=\"hljs-attr inline\"\u003elayout\u003c/span\u003e\n            \u003cspan class=\"hljs-attr inline\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;notification\u0026quot;\u003c/span\u003e\n          \u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e{notification.message}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e removeNotification(notification.id)}\u0026gt;\n              ×\n            \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        ))}\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch4 id=\"搜索结果动画\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#搜索结果动画\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 搜索结果动画\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e搜索结果动画\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20SearchResults(%7B%20results%2C%20query%20%7D)%20%7B%0Areturn%20(%0Adiv%20className%3D%22search-results%22%3E%0AAnimatePresence%3E%0A%7Bresults.map((result%2C%20index)%20%3D%3E%20(%0Amotion.div%0Akey%3D%7Bresult.id%7D%0Ainitial%3D%7B%7B%20opacity%3A%200%2C%20y%3A%2020%20%7D%7D%0Aanimate%3D%7B%7B%20opacity%3A%201%2C%20y%3A%200%20%7D%7D%0Aexit%3D%7B%7B%20opacity%3A%200%2C%20y%3A%20-20%20%7D%7D%0Atransition%3D%7B%7B%20delay%3A%20index%20*%200.05%20%7D%7D%0Alayout%0AclassName%3D%22search-result-item%22%0A%3E%0Ah3%3E%7Bresult.title%7Dh3%3E%0Ap%3E%7Bresult.description%7Dp%3E%0Amotion.div%3E%0A))%7D%0AAnimatePresence%3E%0A%7Bresults.length%20%3D%3D%3D%200%20%26%26%20query%20%26%26%20(%0Amotion.div%0Ainitial%3D%7B%7B%20opacity%3A%200%20%7D%7D%0Aanimate%3D%7B%7B%20opacity%3A%201%20%7D%7D%0AclassName%3D%22no-results%22%0A%3E%0A%E6%B2%A1%E6%9C%89%E6%89%BE%E5%88%B0%E7%9B%B8%E5%85%B3%E7%BB%93%E6%9E%9C%0Amotion.div%3E%0A)%7D%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eSearchResults\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ results, query }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;search-results\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        {results.map((result, index) =\u0026gt; (\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\n            \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{result.id}\u003c/span\u003e\n            \u003cspan class=\"hljs-attr inline\"\u003einitial\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003ey:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e20\u003c/span\u003e }}\n            \u003cspan class=\"hljs-attr inline\"\u003eanimate\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003ey:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0\u003c/span\u003e }}\n            \u003cspan class=\"hljs-attr inline\"\u003eexit\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003ey:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e-20\u003c/span\u003e }}\n            \u003cspan class=\"hljs-attr inline\"\u003etransition\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003edelay:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eindex\u003c/span\u003e * \u003cspan class=\"hljs-attr inline\"\u003e0.05\u003c/span\u003e }}\n            \u003cspan class=\"hljs-attr inline\"\u003elayout\u003c/span\u003e\n            \u003cspan class=\"hljs-attr inline\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;search-result-item\u0026quot;\u003c/span\u003e\n          \u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eh3\u003c/span\u003e\u0026gt;\u003c/span\u003e{result.title}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eh3\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e{result.description}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        ))}\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \n      {results.length === 0 \u0026amp;\u0026amp; query \u0026amp;\u0026amp; (\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003einitial\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0\u003c/span\u003e }}\n          \u003cspan class=\"hljs-attr inline\"\u003eanimate\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e1\u003c/span\u003e }}\n          \u003cspan class=\"hljs-attr inline\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;no-results\u0026quot;\u003c/span\u003e\n        \u0026gt;\u003c/span\u003e\n          没有找到相关结果\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      )}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"性能优化\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#性能优化\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 性能优化\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e性能优化\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003ch4 id=\"避免不必要的重新渲染\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#避免不必要的重新渲染\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 避免不必要的重新渲染\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e避免不必要的重新渲染\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"%2F%2F%20%E9%97%AE%E9%A2%98%EF%BC%9A%E6%AF%8F%E6%AC%A1%E6%B8%B2%E6%9F%93%E9%83%BD%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84%20variants%20%E5%AF%B9%E8%B1%A1%0Afunction%20BadComponent()%20%7B%0Areturn%20(%0AAnimatePresence%3E%0Amotion.div%0Avariants%3D%7B%7B%0Ainitial%3A%20%7B%20opacity%3A%200%20%7D%2C%0Aanimate%3A%20%7B%20opacity%3A%201%20%7D%2C%0Aexit%3A%20%7B%20opacity%3A%200%20%7D%0A%7D%7D%0A%2F%3E%0AAnimatePresence%3E%0A)%3B%0A%7D%0A%2F%2F%20%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%EF%BC%9A%E5%B0%86%20variants%20%E6%8F%90%E5%8F%96%E5%88%B0%E7%BB%84%E4%BB%B6%E5%A4%96%E9%83%A8%0Aconst%20variants%20%3D%20%7B%0Ainitial%3A%20%7B%20opacity%3A%200%20%7D%2C%0Aanimate%3A%20%7B%20opacity%3A%201%20%7D%2C%0Aexit%3A%20%7B%20opacity%3A%200%20%7D%0A%7D%3B%0Afunction%20GoodComponent()%20%7B%0Areturn%20(%0AAnimatePresence%3E%0Amotion.div%20variants%3D%7Bvariants%7D%20%2F%3E%0AAnimatePresence%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// 问题：每次渲染都创建新的 variants 对象\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eBadComponent\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003evariants\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003einitial:\u003c/span\u003e { \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0\u003c/span\u003e },\n          \u003cspan class=\"hljs-attr inline\"\u003eanimate:\u003c/span\u003e { \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e1\u003c/span\u003e },\n          \u003cspan class=\"hljs-attr inline\"\u003eexit:\u003c/span\u003e { \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0\u003c/span\u003e }\n        }}\n      /\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 解决方案：将 variants 提取到组件外部\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e variants = {\n  \u003cspan class=\"hljs-attr inline\"\u003einitial\u003c/span\u003e: { \u003cspan class=\"hljs-attr inline\"\u003eopacity\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e },\n  \u003cspan class=\"hljs-attr inline\"\u003eanimate\u003c/span\u003e: { \u003cspan class=\"hljs-attr inline\"\u003eopacity\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e },\n  \u003cspan class=\"hljs-attr inline\"\u003eexit\u003c/span\u003e: { \u003cspan class=\"hljs-attr inline\"\u003eopacity\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e }\n};\n\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eGoodComponent\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003evariants\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{variants}\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch4 id=\"使用-layout-属性优化列表动画\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#使用-layout-属性优化列表动画\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 使用 layout 属性优化列表动画\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e使用 layout 属性优化列表动画\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20OptimizedList(%7B%20items%20%7D)%20%7B%0Areturn%20(%0AAnimatePresence%3E%0A%7Bitems.map(item%20%3D%3E%20(%0Amotion.div%0Akey%3D%7Bitem.id%7D%0Alayout%20%2F%2F%20%E8%87%AA%E5%8A%A8%E5%A4%84%E7%90%86%E4%BD%8D%E7%BD%AE%E5%8F%98%E5%8C%96%E7%9A%84%E5%8A%A8%E7%94%BB%0Ainitial%3D%7B%7B%20opacity%3A%200%2C%20scale%3A%200.8%20%7D%7D%0Aanimate%3D%7B%7B%20opacity%3A%201%2C%20scale%3A%201%20%7D%7D%0Aexit%3D%7B%7B%20opacity%3A%200%2C%20scale%3A%200.8%20%7D%7D%0Atransition%3D%7B%7B%0Alayout%3A%20%7B%20duration%3A%200.3%20%7D%2C%20%2F%2F%20%E5%B8%83%E5%B1%80%E5%8A%A8%E7%94%BB%E9%85%8D%E7%BD%AE%0Aopacity%3A%20%7B%20duration%3A%200.2%20%7D%20%20%2F%2F%20%E9%80%8F%E6%98%8E%E5%BA%A6%E5%8A%A8%E7%94%BB%E9%85%8D%E7%BD%AE%0A%7D%7D%0A%3E%0A%7Bitem.content%7D%0Amotion.div%3E%0A))%7D%0AAnimatePresence%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eOptimizedList\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ items }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {items.map(item =\u0026gt; (\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{item.id}\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003elayout\u003c/span\u003e // \u003cspan class=\"hljs-attr inline\"\u003e自动处理位置变化的动画\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003einitial\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003escale:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0.8\u003c/span\u003e }}\n          \u003cspan class=\"hljs-attr inline\"\u003eanimate\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003escale:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e1\u003c/span\u003e }}\n          \u003cspan class=\"hljs-attr inline\"\u003eexit\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003escale:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0.8\u003c/span\u003e }}\n          \u003cspan class=\"hljs-attr inline\"\u003etransition\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \n            \u003cspan class=\"hljs-attr inline\"\u003elayout:\u003c/span\u003e { \u003cspan class=\"hljs-attr inline\"\u003eduration:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0.3\u003c/span\u003e }, // \u003cspan class=\"hljs-attr inline\"\u003e布局动画配置\u003c/span\u003e\n            \u003cspan class=\"hljs-attr inline\"\u003eopacity:\u003c/span\u003e { \u003cspan class=\"hljs-attr inline\"\u003eduration:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e0.2\u003c/span\u003e }  // \u003cspan class=\"hljs-attr inline\"\u003e透明度动画配置\u003c/span\u003e\n          }}\n        \u0026gt;\u003c/span\u003e\n          {item.content}\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      ))}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"最佳实践\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#最佳实践\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 最佳实践\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e最佳实践\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003col class=\"list-decimal list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e始终为直接子组件提供唯一的 key\u003c/strong\u003e\u003c/p\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"%2F%2F%20%E2%9C%85%20%E6%AD%A3%E7%A1%AE%0AAnimatePresence%3E%0A%7Bitems.map(item%20%3D%3E%20(%0Amotion.div%20key%3D%7Bitem.id%7D%3E%0A%7Bitem.content%7D%0Amotion.div%3E%0A))%7D%0AAnimatePresence%3E%0A%2F%2F%20%E2%9D%8C%20%E9%94%99%E8%AF%AF%EF%BC%9A%E4%BD%BF%E7%94%A8%20index%20%E4%BD%9C%E4%B8%BA%20key%0AAnimatePresence%3E%0A%7Bitems.map((item%2C%20index)%20%3D%3E%20(%0Amotion.div%20key%3D%7Bindex%7D%3E%0A%7Bitem.content%7D%0Amotion.div%3E%0A))%7D%0AAnimatePresence%3E\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// ✅ 正确\u003c/span\u003e\n\u0026lt;\u003cspan class=\"hljs-title class_ inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\n  {items.\u003cspan class=\"hljs-title function_ inline\"\u003emap\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eitem\u003c/span\u003e =\u0026gt;\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{item.id}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {item.content}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  ))}\n\u0026lt;/\u003cspan class=\"hljs-title class_ inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\n\n\u003cspan class=\"hljs-comment inline\"\u003e// ❌ 错误：使用 index 作为 key\u003c/span\u003e\n\u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  {items.map((item, index) =\u0026gt; (\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{index}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {item.content}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  ))}\n\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e确保 AnimatePresence 在条件渲染之外\u003c/strong\u003e\u003c/p\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"%2F%2F%20%E2%9C%85%20%E6%AD%A3%E7%A1%AE%0AAnimatePresence%3E%0A%7BisVisible%20%26%26%20Component%20%2F%3E%7D%0AAnimatePresence%3E%0A%2F%2F%20%E2%9D%8C%20%E9%94%99%E8%AF%AF%EF%BC%9AAnimatePresence%20%E8%A2%AB%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93%0A%7BisVisible%20%26%26%20(%0AAnimatePresence%3E%0AComponent%20%2F%3E%0AAnimatePresence%3E%0A)%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// ✅ 正确\u003c/span\u003e\n\u0026lt;\u003cspan class=\"hljs-title class_ inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\n  {isVisible \u0026amp;\u0026amp; \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eComponent\u003c/span\u003e /\u0026gt;\u003c/span\u003e\u003c/span\u003e}\n\u0026lt;/\u003cspan class=\"hljs-title class_ inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\n\n\u003cspan class=\"hljs-comment inline\"\u003e// ❌ 错误：AnimatePresence 被条件渲染\u003c/span\u003e\n{isVisible \u0026amp;\u0026amp; (\n  \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eComponent\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n)}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e合理使用 mode 属性\u003c/strong\u003e\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003esync\u003c/code\u003e：适用于大多数场景\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003ewait\u003c/code\u003e：适用于页面切换、单个元素替换\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003epopLayout\u003c/code\u003e：适用于列表项删除时的布局调整\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e性能考虑\u003c/strong\u003e\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e将 variants 对象提取到组件外部\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e使用 \u003ccode\u003elayout\u003c/code\u003e 属性处理位置变化\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e避免在动画过程中进行复杂计算\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"常见问题和解决方案\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#常见问题和解决方案\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 常见问题和解决方案\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e常见问题和解决方案\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003ch4 id=\"退出动画不工作\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#退出动画不工作\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 退出动画不工作\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e退出动画不工作\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"%2F%2F%20%E9%97%AE%E9%A2%98%EF%BC%9Akey%20%E4%B8%8D%E5%94%AF%E4%B8%80%E6%88%96%E6%B2%A1%E6%9C%89%20key%0AAnimatePresence%3E%0A%7Bshow%20%26%26%20motion.div%3E%E5%86%85%E5%AE%B9motion.div%3E%7D%20%7B%2F*%20%E7%BC%BA%E5%B0%91%20key%20*%2F%7D%0AAnimatePresence%3E%0A%2F%2F%20%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%EF%BC%9A%E6%B7%BB%E5%8A%A0%E5%94%AF%E4%B8%80%20key%0AAnimatePresence%3E%0A%7Bshow%20%26%26%20motion.div%20key%3D%22unique-id%22%3E%E5%86%85%E5%AE%B9motion.div%3E%7D%0AAnimatePresence%3E\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// 问题：key 不唯一或没有 key\u003c/span\u003e\n\u0026lt;\u003cspan class=\"hljs-title class_ inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\n  {show \u0026amp;\u0026amp; \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\u0026gt;\u003c/span\u003e内容\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e} {\u003cspan class=\"hljs-comment inline\"\u003e/* 缺少 key */\u003c/span\u003e}\n\u0026lt;/\u003cspan class=\"hljs-title class_ inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 解决方案：添加唯一 key\u003c/span\u003e\n\u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  {show \u0026amp;\u0026amp; \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;unique-id\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e内容\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\u0026gt;\u003c/span\u003e}\n\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch4 id=\"布局动画与-poplayout-冲突\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#布局动画与-poplayout-冲突\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 布局动画与 popLayout 冲突\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e布局动画与 popLayout 冲突\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"%2F%2F%20%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%EF%BC%9A%E4%B8%BA%E7%88%B6%E5%AE%B9%E5%99%A8%E8%AE%BE%E7%BD%AE%E7%9B%B8%E5%AF%B9%E5%AE%9A%E4%BD%8D%0Aul%20style%3D%7B%7B%20position%3A%20%22relative%22%20%7D%7D%20layout%3E%0AAnimatePresence%20mode%3D%22popLayout%22%3E%0A%7Bitems.map(item%20%3D%3E%20(%0Amotion.li%20key%3D%7Bitem.id%7D%20layout%20%2F%3E%0A))%7D%0AAnimatePresence%3E%0Aul%3E\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// 解决方案：为父容器设置相对定位\u003c/span\u003e\n\u0026lt;motion.\u003cspan class=\"hljs-property inline\"\u003eul\u003c/span\u003e style={{ \u003cspan class=\"hljs-attr inline\"\u003eposition\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026quot;relative\u0026quot;\u003c/span\u003e }} layout\u0026gt;\n  \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003emode\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;popLayout\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    {items.map(item =\u0026gt; (\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003emotion.li\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{item.id}\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003elayout\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n    ))}\n  \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u0026lt;/motion.\u003cspan class=\"hljs-property inline\"\u003eul\u003c/span\u003e\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch4 id=\"与-layoutgroup-结合使用\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#与-layoutgroup-结合使用\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 与 LayoutGroup 结合使用\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e与 LayoutGroup 结合使用\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"import%20%7B%20LayoutGroup%20%7D%20from%20%22framer-motion%22%3B%0ALayoutGroup%3E%0Amotion.ul%20layout%3E%0AAnimatePresence%3E%0A%7Bitems.map(item%20%3D%3E%20(%0Amotion.li%20key%3D%7Bitem.id%7D%20layout%20%2F%3E%0A))%7D%0AAnimatePresence%3E%0Amotion.ul%3E%0ALayoutGroup%3E\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_ inline\"\u003eLayoutGroup\u003c/span\u003e } \u003cspan class=\"hljs-keyword inline\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026quot;framer-motion\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eLayoutGroup\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003emotion.ul\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003elayout\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {items.map(item =\u0026gt; (\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003emotion.li\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{item.id}\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003elayout\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n      ))}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003emotion.ul\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eLayoutGroup\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"完整示例\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#完整示例\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 完整示例\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e完整示例\u003c/strong\u003e\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"import%20React%2C%20%7B%20useState%20%7D%20from%20'react'%3B%0Aimport%20%7B%20AnimatePresence%2C%20motion%20%7D%20from%20'framer-motion'%3B%0Aconst%20cardVariants%20%3D%20%7B%0Ainitial%3A%20%7B%0Aopacity%3A%200%2C%0Ascale%3A%200.8%2C%0Arotate%3A%20-10%0A%7D%2C%0Aanimate%3A%20%7B%0Aopacity%3A%201%2C%0Ascale%3A%201%2C%0Arotate%3A%200%2C%0Atransition%3A%20%7B%0Aduration%3A%200.3%2C%0Aease%3A%20%22easeOut%22%0A%7D%0A%7D%2C%0Aexit%3A%20%7B%0Aopacity%3A%200%2C%0Ascale%3A%200.8%2C%0Arotate%3A%2010%2C%0Atransition%3A%20%7B%0Aduration%3A%200.2%2C%0Aease%3A%20%22easeIn%22%0A%7D%0A%7D%0A%7D%3B%0Afunction%20CardManager()%20%7B%0Aconst%20%5Bcards%2C%20setCards%5D%20%3D%20useState(%5B%0A%7B%20id%3A%201%2C%20title%3A%20%22%E5%8D%A1%E7%89%87%201%22%2C%20content%3A%20%22%E8%BF%99%E6%98%AF%E7%AC%AC%E4%B8%80%E5%BC%A0%E5%8D%A1%E7%89%87%22%20%7D%2C%0A%7B%20id%3A%202%2C%20title%3A%20%22%E5%8D%A1%E7%89%87%202%22%2C%20content%3A%20%22%E8%BF%99%E6%98%AF%E7%AC%AC%E4%BA%8C%E5%BC%A0%E5%8D%A1%E7%89%87%22%20%7D%2C%0A%7B%20id%3A%203%2C%20title%3A%20%22%E5%8D%A1%E7%89%87%203%22%2C%20content%3A%20%22%E8%BF%99%E6%98%AF%E7%AC%AC%E4%B8%89%E5%BC%A0%E5%8D%A1%E7%89%87%22%20%7D%0A%5D)%3B%0Aconst%20addCard%20%3D%20()%20%3D%3E%20%7B%0Aconst%20newCard%20%3D%20%7B%0Aid%3A%20Date.now()%2C%0Atitle%3A%20%60%E5%8D%A1%E7%89%87%20%24%7Bcards.length%20%2B%201%7D%60%2C%0Acontent%3A%20%60%E8%BF%99%E6%98%AF%E7%AC%AC%20%24%7Bcards.length%20%2B%201%7D%20%E5%BC%A0%E5%8D%A1%E7%89%87%60%0A%7D%3B%0AsetCards(prev%20%3D%3E%20%5B...prev%2C%20newCard%5D)%3B%0A%7D%3B%0Aconst%20removeCard%20%3D%20(id)%20%3D%3E%20%7B%0AsetCards(prev%20%3D%3E%20prev.filter(card%20%3D%3E%20card.id%20!%3D%3D%20id))%3B%0A%7D%3B%0Areturn%20(%0Adiv%20className%3D%22card-manager%22%3E%0Abutton%20onClick%3D%7BaddCard%7D%20className%3D%22add-button%22%3E%0A%E6%B7%BB%E5%8A%A0%E5%8D%A1%E7%89%87%0Abutton%3E%0Adiv%20className%3D%22cards-container%22%3E%0AAnimatePresence%3E%0A%7Bcards.map(card%20%3D%3E%20(%0Amotion.div%0Akey%3D%7Bcard.id%7D%0Avariants%3D%7BcardVariants%7D%0Ainitial%3D%22initial%22%0Aanimate%3D%22animate%22%0Aexit%3D%22exit%22%0Alayout%0AclassName%3D%22card%22%0A%3E%0Ah3%3E%7Bcard.title%7Dh3%3E%0Ap%3E%7Bcard.content%7Dp%3E%0Abutton%0AonClick%3D%7B()%20%3D%3E%20removeCard(card.id)%7D%0AclassName%3D%22remove-button%22%0A%3E%0A%E5%88%A0%E9%99%A4%0Abutton%3E%0Amotion.div%3E%0A))%7D%0AAnimatePresence%3E%0Adiv%3E%0Adiv%3E%0A)%3B%0A%7D%0Aexport%20default%20CardManager%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eReact\u003c/span\u003e, { useState } \u003cspan class=\"hljs-keyword inline\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;react\u0026#x27;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword inline\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_ inline\"\u003eAnimatePresence\u003c/span\u003e, motion } \u003cspan class=\"hljs-keyword inline\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;framer-motion\u0026#x27;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e cardVariants = {\n  \u003cspan class=\"hljs-attr inline\"\u003einitial\u003c/span\u003e: { \n    \u003cspan class=\"hljs-attr inline\"\u003eopacity\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e, \n    \u003cspan class=\"hljs-attr inline\"\u003escale\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e0.8\u003c/span\u003e, \n    \u003cspan class=\"hljs-attr inline\"\u003erotate\u003c/span\u003e: -\u003cspan class=\"hljs-number inline\"\u003e10\u003c/span\u003e \n  },\n  \u003cspan class=\"hljs-attr inline\"\u003eanimate\u003c/span\u003e: { \n    \u003cspan class=\"hljs-attr inline\"\u003eopacity\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e, \n    \u003cspan class=\"hljs-attr inline\"\u003escale\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e, \n    \u003cspan class=\"hljs-attr inline\"\u003erotate\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr inline\"\u003etransition\u003c/span\u003e: {\n      \u003cspan class=\"hljs-attr inline\"\u003eduration\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e0.3\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr inline\"\u003eease\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026quot;easeOut\u0026quot;\u003c/span\u003e\n    }\n  },\n  \u003cspan class=\"hljs-attr inline\"\u003eexit\u003c/span\u003e: { \n    \u003cspan class=\"hljs-attr inline\"\u003eopacity\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e, \n    \u003cspan class=\"hljs-attr inline\"\u003escale\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e0.8\u003c/span\u003e, \n    \u003cspan class=\"hljs-attr inline\"\u003erotate\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e10\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr inline\"\u003etransition\u003c/span\u003e: {\n      \u003cspan class=\"hljs-attr inline\"\u003eduration\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e0.2\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr inline\"\u003eease\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026quot;easeIn\u0026quot;\u003c/span\u003e\n    }\n  }\n};\n\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eCardManager\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [cards, setCards] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e([\n    { \u003cspan class=\"hljs-attr inline\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003etitle\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026quot;卡片 1\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003econtent\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026quot;这是第一张卡片\u0026quot;\u003c/span\u003e },\n    { \u003cspan class=\"hljs-attr inline\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003etitle\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026quot;卡片 2\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003econtent\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026quot;这是第二张卡片\u0026quot;\u003c/span\u003e },\n    { \u003cspan class=\"hljs-attr inline\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003etitle\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026quot;卡片 3\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003econtent\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026quot;这是第三张卡片\u0026quot;\u003c/span\u003e }\n  ]);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eaddCard\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e newCard = {\n      \u003cspan class=\"hljs-attr inline\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-title class_ inline\"\u003eDate\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003enow\u003c/span\u003e(),\n      \u003cspan class=\"hljs-attr inline\"\u003etitle\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e`卡片 \u003cspan class=\"hljs-subst inline\"\u003e${cards.length + \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e}\u003c/span\u003e`\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr inline\"\u003econtent\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e`这是第 \u003cspan class=\"hljs-subst inline\"\u003e${cards.length + \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e}\u003c/span\u003e 张卡片`\u003c/span\u003e\n    };\n    \u003cspan class=\"hljs-title function_ inline\"\u003esetCards\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eprev\u003c/span\u003e =\u0026gt;\u003c/span\u003e [...prev, newCard]);\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eremoveCard\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003eid\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-title function_ inline\"\u003esetCards\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eprev\u003c/span\u003e =\u0026gt;\u003c/span\u003e prev.\u003cspan class=\"hljs-title function_ inline\"\u003efilter\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003ecard\u003c/span\u003e =\u0026gt;\u003c/span\u003e card.\u003cspan class=\"hljs-property inline\"\u003eid\u003c/span\u003e !== id));\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;card-manager\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{addCard}\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;add-button\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        添加卡片\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;cards-container\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          {cards.map(card =\u0026gt; (\n            \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\n              \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{card.id}\u003c/span\u003e\n              \u003cspan class=\"hljs-attr inline\"\u003evariants\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{cardVariants}\u003c/span\u003e\n              \u003cspan class=\"hljs-attr inline\"\u003einitial\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;initial\u0026quot;\u003c/span\u003e\n              \u003cspan class=\"hljs-attr inline\"\u003eanimate\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;animate\u0026quot;\u003c/span\u003e\n              \u003cspan class=\"hljs-attr inline\"\u003eexit\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;exit\u0026quot;\u003c/span\u003e\n              \u003cspan class=\"hljs-attr inline\"\u003elayout\u003c/span\u003e\n              \u003cspan class=\"hljs-attr inline\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;card\u0026quot;\u003c/span\u003e\n            \u0026gt;\u003c/span\u003e\n              \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eh3\u003c/span\u003e\u0026gt;\u003c/span\u003e{card.title}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eh3\u003c/span\u003e\u0026gt;\u003c/span\u003e\n              \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e{card.content}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n              \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \n                \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e removeCard(card.id)}\n                className=\u0026quot;remove-button\u0026quot;\n              \u0026gt;\n                删除\n              \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003emotion.div\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          ))}\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eAnimatePresence\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\n\u003cspan class=\"hljs-keyword inline\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eCardManager\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"注意事项\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#注意事项\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 注意事项\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e注意事项\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003ekey 的重要性\u003c/strong\u003e：直接子组件必须有唯一且稳定的 key\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e组件层级\u003c/strong\u003e：AnimatePresence 只检测直接子组件的变化\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e性能影响\u003c/strong\u003e：复杂的退出动画可能影响性能，特别是在移动设备上\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e浏览器兼容性\u003c/strong\u003e：需要现代浏览器支持，老版本浏览器可能需要 polyfill\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e内存管理\u003c/strong\u003e：确保动画完成后正确清理组件和事件监听器\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003ccode\u003eAnimatePresence\u003c/code\u003e 是创建流畅用户界面的强大工具，通过合理使用可以大大提升应用的交互体验和视觉效果。\u003c/p\u003e\n"])</script><script>self.__next_f.push([1,"d:[\"$\",\"$L1d\",null,{\"htmlContent\":\"$1e\",\"frontMatter\":{\"title\":\"Framer Motion AnimatePresence\",\"description\":\"React基础知识篇-Framer Motion AnimatePresence\",\"date\":\"2025-06-22\",\"author\":\"MilkWind\",\"tags\":[\"React\",\"基础知识\",\"Framer Motion\",\"动画\",\"AnimatePresence\"],\"references\":{}},\"readingTime\":\"11 min read\",\"category\":\"basic-knowledge\",\"tocItems\":[{\"id\":\"基本作用\",\"text\":\"基本作用\",\"level\":3},{\"id\":\"基本用法\",\"text\":\"基本用法\",\"level\":3},{\"id\":\"条件渲染动画\",\"text\":\"条件渲染动画\",\"level\":4},{\"id\":\"列表动画\",\"text\":\"列表动画\",\"level\":4},{\"id\":\"变体（variants）的使用\",\"text\":\"变体（Variants）的使用\",\"level\":3},{\"id\":\"key-属性的重要性\",\"text\":\"key 属性的重要性\",\"level\":3},{\"id\":\"通过改变-key-触发动画\",\"text\":\"通过改变 key 触发动画\",\"level\":4},{\"id\":\"mode-属性详解\",\"text\":\"mode 属性详解\",\"level\":3},{\"id\":\"sync-模式（默认）\",\"text\":\"sync 模式（默认）\",\"level\":4},{\"id\":\"wait-模式\",\"text\":\"wait 模式\",\"level\":4},{\"id\":\"poplayout-模式\",\"text\":\"popLayout 模式\",\"level\":4},{\"id\":\"高级功能\",\"text\":\"高级功能\",\"level\":3},{\"id\":\"访问组件存在状态\",\"text\":\"访问组件存在状态\",\"level\":4},{\"id\":\"传递自定义数据\",\"text\":\"传递自定义数据\",\"level\":4},{\"id\":\"手动控制移除时机\",\"text\":\"手动控制移除时机\",\"level\":4},{\"id\":\"实际应用场景\",\"text\":\"实际应用场景\",\"level\":3},{\"id\":\"路由切换动画\",\"text\":\"路由切换动画\",\"level\":4},{\"id\":\"通知系统\",\"text\":\"通知系统\",\"level\":4},{\"id\":\"搜索结果动画\",\"text\":\"搜索结果动画\",\"level\":4},{\"id\":\"性能优化\",\"text\":\"性能优化\",\"level\":3},{\"id\":\"避免不必要的重新渲染\",\"text\":\"避免不必要的重新渲染\",\"level\":4},{\"id\":\"使用-layout-属性优化列表动画\",\"text\":\"使用 layout 属性优化列表动画\",\"level\":4},{\"id\":\"最佳实践\",\"text\":\"最佳实践\",\"level\":3},{\"id\":\"常见问题和解决方案\",\"text\":\"常见问题和解决方案\",\"level\":3},{\"id\":\"退出动画不工作\",\"text\":\"退出动画不工作\",\"level\":4},{\"id\":\"布局动画与-poplayout-冲突\",\"text\":\"布局动画与 popLayout 冲突\",\"level\":4},{\"id\":\"与-layoutgroup-结合使用\",\"text\":\"与 LayoutGroup 结合使用\",\"level\":4},{\"id\":\"完整示例\",\"text\":\"完整示例\",\"level\":3},{\"id\":\"注意事项\",\"text\":\"注意事项\",\"level\":3}],\"translations\":{\"common\":{\"welcome\":\"欢迎\",\"loading\":\"加载中...\",\"error\":\"出现了一些问题\",\"retry\":\"重试\",\"theme\":\"主题\",\"language\":\"语言\",\"light\":\"浅色\",\"dark\":\"深色\"},\"navigation\":{\"home\":\"首页\",\"personal\":\"个人\",\"works\":\"作品\",\"contributions\":\"贡献\",\"documents\":\"文档\",\"about\":\"关于\",\"contact\":\"联系\"},\"personal\":{\"technicalSkills\":\"技术技能\",\"email\":\"邮箱\",\"github\":\"代码仓库\",\"resume\":\"简历\",\"codeRepository\":\"代码仓库\",\"loadingPersonalInfo\":\"加载个人信息中...\",\"loadingResume\":\"加载简历中...\",\"closeResume\":\"关闭简历\",\"emailCopied\":\"邮箱已复制到剪贴板！\",\"galaxyDefaultDescription\":\"精通全栈开发技术，具备跨平台架构能力，擅长AI技术整合与高性能系统优化\",\"skillGalaxy\":\"技能星系\",\"stirGalaxy\":\"搅动星系\",\"stirring\":\"搅动中...\",\"fullStackEngineer\":\"MilkWind - 全栈工程师\",\"professionalProfile\":\"关于我\"},\"documents\":{\"technicalDocuments\":\"技术文档\",\"description\":\"基本原理、代码拆分以及一些碎碎念。\",\"articles\":\"文章\",\"categories\":\"分类\",\"allCategories\":\"所有分类\",\"noArticlesFound\":\"未找到文章\",\"noArticlesAvailable\":\"中文暂无文章。\",\"noArticlesInCategory\":\"该分类下未找到文章。\",\"readMore\":\"阅读更多\",\"loadingDocuments\":\"加载文档中...\",\"backToDocuments\":\"← 返回文档\",\"documentNotFound\":\"文档未找到\",\"documentNotFoundDescription\":\"请求的文档无法找到。\",\"technicalInsights\":\"技术拆解\",\"untitledDocument\":\"无标题文档\",\"byAuthor\":\"作者：\",\"search\":\"搜索文章...\",\"searchByTags\":\"按标签筛选\",\"searching\":\"搜索中...\",\"noSearchResults\":\"没有找到符合搜索条件的文章\",\"clearSearch\":\"清除搜索\",\"selectedTags\":\"已选标签\",\"allTags\":\"所有标签\",\"searchInTitle\":\"在标题、描述和内容中搜索\",\"enterImmersiveMode\":\"沉浸阅读\",\"exitImmersiveMode\":\"退出沉浸模式\",\"immersiveReading\":\"沉浸阅读模式\",\"exploreContent\":\"按分类探索内容\",\"browseBy\":\"浏览方式\",\"exploreAll\":\"所有内容汇总\",\"categoryDescription\":\"该分类下的文章\",\"totalArticles\":\"文章\",\"totalCategories\":\"分类\",\"foundArticles\":\"找到文章\",\"categoriesWithResults\":\"有结果的分类\"},\"works\":{\"workCases\":\"作品案例\",\"projects\":\"作品集\",\"loadingProjects\":\"加载项目中...\",\"grid\":\"网格\",\"stack\":\"堆叠\",\"of\":\"共\",\"workCasesPageTitle\":\"作品案例页面\",\"pageWorkingCorrectly\":\"此页面运行正常！路由配置正确。\",\"try3DVersion\":\"尝试3D版本\",\"dragToScroll\":\"拖拽滚动\",\"dragToChange\":\"拖拽切换\",\"swipeCards\":\"切换卡片\",\"keyboardNav\":\"键盘导航\"},\"contributions\":{\"contributionCases\":\"开源项目\",\"contributions\":\"贡献\",\"loadingContributions\":\"加载贡献中...\",\"grid\":\"网格\",\"stack\":\"堆叠\",\"of\":\"共\",\"contributionCasesPageTitle\":\"贡献案例页面\",\"pageWorkingCorrectly\":\"此页面运行正常！路由配置正确。\",\"try3DVersion\":\"尝试3D版本\",\"dragToScroll\":\"拖拽滚动\",\"dragToChange\":\"拖拽切换\",\"swipeCards\":\"切换卡片\",\"keyboardNav\":\"键盘导航\"},\"contribution\":{\"contributionPreview\":\"贡献预览\",\"accessible\":\"可访问\",\"code\":\"代码\",\"maintenance\":\"维护\",\"enhancement\":\"增强\",\"documentation\":\"文档\",\"community\":\"社区\",\"moreItems\":\"更多\",\"technicalDetails\":\"技术详情\",\"technologies\":\"技术栈：\",\"contributionDetail\":\"贡献详情\",\"description\":\"描述：\",\"seeDetails\":\"查看详情\",\"github\":\"代码仓库\",\"viewContribution\":\"查看贡献\",\"viewCode\":\"查看代码\"},\"project\":{\"projectPreview\":\"项目预览\",\"accessible\":\"可访问\",\"tool\":\"工具\",\"plugin\":\"插件\",\"toy\":\"小玩意\",\"moreItems\":\"更多\",\"technicalDetails\":\"技术详情\",\"technologies\":\"技术栈：\",\"description\":\"描述：\",\"seeDetails\":\"查看详情\",\"github\":\"GitHub\",\"gitee\":\"Gitee\",\"viewLiveDemo\":\"查看演示\",\"viewCode\":\"查看代码\",\"access\":\"访问\",\"videos\":\"视频\",\"watchVideo\":\"观看视频\",\"hasVideo\":\"有视频\"},\"codeblock\":{\"copy\":\"复制\",\"copySuccess\":\"代码已复制到剪贴板！\",\"copyError\":\"复制代码失败\",\"copyTooltip\":\"复制代码\"},\"toc\":{\"contents\":\"目录\",\"autoScroll\":\"自动滚动到章节\",\"collapse\":\"折叠\",\"expand\":\"展开\"},\"loading\":{\"loading\":\"加载中\",\"preparingExperience\":\"准备体验中\"}},\"lang\":\"zh\",\"theme\":\"dark\"}]\n"])</script><script>self.__next_f.push([1,"12:null\n"])</script><script>self.__next_f.push([1,"18:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n11:null\n"])</script><script>self.__next_f.push([1,"1c:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"Framer Motion AnimatePresence | Interactive Portfolio\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"React基础知识篇-Framer Motion AnimatePresence\"}],[\"$\",\"meta\",\"2\",{\"name\":\"author\",\"content\":\"Developer\"}],[\"$\",\"meta\",\"3\",{\"name\":\"keywords\",\"content\":\"portfolio,3D,interactive,web development,Three.js,Next.js\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:title\",\"content\":\"Framer Motion AnimatePresence | Interactive Portfolio\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:description\",\"content\":\"React基础知识篇-Framer Motion AnimatePresence\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"7\",{\"property\":\"article:published_time\",\"content\":\"2025-06-22\"}],[\"$\",\"meta\",\"8\",{\"property\":\"article:tag\",\"content\":\"React\"}],[\"$\",\"meta\",\"9\",{\"property\":\"article:tag\",\"content\":\"基础知识\"}],[\"$\",\"meta\",\"10\",{\"property\":\"article:tag\",\"content\":\"Framer Motion\"}],[\"$\",\"meta\",\"11\",{\"property\":\"article:tag\",\"content\":\"动画\"}],[\"$\",\"meta\",\"12\",{\"property\":\"article:tag\",\"content\":\"AnimatePresence\"}],[\"$\",\"meta\",\"13\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"14\",{\"name\":\"twitter:title\",\"content\":\"Framer Motion AnimatePresence | Interactive Portfolio\"}],[\"$\",\"meta\",\"15\",{\"name\":\"twitter:description\",\"content\":\"React基础知识篇-Framer Motion AnimatePresence\"}],[\"$\",\"link\",\"16\",{\"rel\":\"icon\",\"href\":\"/MilkWind-Website/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"32x32\"}]],\"error\":null,\"digest\":\"$undefined\"}\n14:{\"metadata\":\"$1c:metadata\",\"error\":null,\"digest\":\"$undefined\"}\n"])</script></body></html>