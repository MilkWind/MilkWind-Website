1:"$Sreact.fragment"
2:I[38735,["46","static/chunks/46-72724587da45cdb8.js","7177","static/chunks/app/layout-af4a6e723c0ff668.js"],"default"]
3:I[19945,["46","static/chunks/46-72724587da45cdb8.js","7177","static/chunks/app/layout-af4a6e723c0ff668.js"],"default"]
4:I[65337,["46","static/chunks/46-72724587da45cdb8.js","7177","static/chunks/app/layout-af4a6e723c0ff668.js"],"default"]
5:I[96190,["46","static/chunks/46-72724587da45cdb8.js","7177","static/chunks/app/layout-af4a6e723c0ff668.js"],"ClientProviders"]
6:I[87555,[],""]
7:I[51901,["8039","static/chunks/app/error-dda32be1d095a86c.js"],"default"]
8:I[31295,[],""]
9:I[6874,["6874","static/chunks/6874-fbe9a08eb79b991c.js","4345","static/chunks/app/not-found-9ff98b2ccf24cac7.js"],""]
a:I[94970,[],"ClientSegmentRoot"]
b:I[44065,["206","static/chunks/206-4f4cbf4d7156f437.js","3092","static/chunks/app/documents/layout-28408791defde09e.js"],"default"]
e:I[59665,[],"MetadataBoundary"]
10:I[59665,[],"OutletBoundary"]
13:I[74911,[],"AsyncMetadataOutlet"]
15:I[39460,["2415","static/chunks/2415-689c103fb3d2c28d.js","8610","static/chunks/8610-7bd3f91f3cf2a4d6.js","5650","static/chunks/app/documents/loading-1fa3f98b6e5a8e78.js"],"default"]
16:I[88610,["2415","static/chunks/2415-689c103fb3d2c28d.js","8610","static/chunks/8610-7bd3f91f3cf2a4d6.js","4209","static/chunks/app/loading-68f227fb49b3ac8c.js"],"default"]
17:I[59665,[],"ViewportBoundary"]
19:I[26614,[],""]
:HL["/_next/static/css/704956702722271c.css","style"]
:HL["/_next/static/css/b226d7ef8e491b72.css","style"]
:HL["/_next/static/css/5eacd01f773eed7f.css","style"]
0:{"P":null,"b":"bvFtULB1Kap7EFVJ0gqa4","p":"","c":["","documents","zh","dark","basic-knowledge","browser-mutation-observer",""],"i":false,"f":[[["",{"children":["documents",{"children":[["slug","zh/dark/basic-knowledge/browser-mutation-observer","c"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/704956702722271c.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/b226d7ef8e491b72.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en","suppressHydrationWarning":true,"children":["$","body",null,{"className":"__variable_d4c88d __variable_7b4e2b __variable_c3272d font-sans antialiased min-h-screen bg-background text-foreground","suppressHydrationWarning":true,"children":[["$","$L2",null,{}],["$","$L3",null,{}],["$","$L4",null,{}],["$","$L5",null,{"children":["$","$L6",null,{"parallelRouterKey":"children","error":"$7","errorStyles":[],"errorScripts":[],"template":["$","$L8",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","div",null,{"className":"z-10 relative min-h-screen flex items-center justify-center bg-background p-8","children":["$","div",null,{"className":"text-center max-w-md","children":[["$","div",null,{"className":"text-8xl font-bold text-primary mb-4","children":"404"}],["$","h2",null,{"className":"text-2xl font-bold text-foreground mb-4","children":"Page Not Found"}],["$","p",null,{"className":"text-foreground/70 mb-8","children":"The page you're looking for doesn't exist or has been moved to a different location."}],["$","div",null,{"className":"flex flex-col sm:flex-row gap-4 justify-center","children":[["$","$L9",null,{"href":"/","className":"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/80 transition-colors","children":"Go Home"}],["$","$L9",null,{"href":"/works","className":"px-6 py-2 border border-primary text-primary rounded-lg hover:bg-primary/10 transition-colors","children":"View Works"}]]}],["$","div",null,{"className":"absolute inset-0 overflow-hidden pointer-events-none -z-10","children":[["$","div",null,{"className":"absolute top-1/4 left-1/4 w-2 h-2 bg-primary/20 rounded-full animate-float"}],["$","div",null,{"className":"absolute top-3/4 right-1/4 w-3 h-3 bg-accent/20 rounded-full animate-float","style":{"animationDelay":"1s"}}],["$","div",null,{"className":"absolute bottom-1/4 left-1/3 w-1 h-1 bg-secondary/20 rounded-full animate-float","style":{"animationDelay":"2s"}}]]}]]}]}],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]]}]}]]}],{"children":["documents",["$","$1","c",{"children":[null,["$","$La",null,{"Component":"$b","slots":{"children":["$","$L6",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L8",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]},"params":{},"promise":"$@c"}]]}],{"children":[["slug","zh/dark/basic-knowledge/browser-mutation-observer","c"],["$","$1","c",{"children":[null,["$","$L6",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L8",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$Ld",["$","$Le",null,{"children":"$Lf"}],[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/5eacd01f773eed7f.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","$L10",null,{"children":["$L11","$L12",["$","$L13",null,{"promise":"$@14"}]]}]]}],{},null,false]},null,false]},[["$","$L15","l",{}],[],[]],false]},[["$","$L16","l",{}],[],[]],false],["$","$1","h",{"children":[null,["$","$1","tv2_6JHVZ5ue_pMjsG6Bg",{"children":[["$","$L17",null,{"children":"$L18"}],null]}],null]}],false]],"m":"$undefined","G":["$19","$undefined"],"s":false,"S":true}
1a:"$Sreact.suspense"
1b:I[74911,[],"AsyncMetadata"]
c:{}
f:["$","$1a",null,{"fallback":null,"children":["$","$L1b",null,{"promise":"$@1c"}]}]
1d:I[57340,["5584","static/chunks/b498d07c-095637f0f10883c6.js","2415","static/chunks/2415-689c103fb3d2c28d.js","6874","static/chunks/6874-fbe9a08eb79b991c.js","9554","static/chunks/9554-b714f9de28e85d30.js","1873","static/chunks/app/documents/%5B...slug%5D/page-8f3efa7e6c6c5377.js"],"DocumentPageClient"]
1e:Tc8fb,<p class="text-base leading-7 mb-4 text-foreground"><code>MutationObserver</code> 是浏览器提供的原生 API，用于监听 DOM 树的变化。它可以异步观察指定元素及其子元素的变化，是现代 Web 开发中处理 DOM 变化的推荐方式。</p>
<h3 id="基本作用" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#基本作用" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 基本作用">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">基本作用</strong>
        </h3>
<p class="text-base leading-7 mb-4 text-foreground"><code>MutationObserver</code> 用于监听以下类型的 DOM 变化：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">子节点的添加或删除</li>
<li class="text-foreground leading-relaxed">元素属性的变化</li>
<li class="text-foreground leading-relaxed">文本内容的变化</li>
<li class="text-foreground leading-relaxed">元素子树的变化</li>
</ul>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="const%20observer%20%3D%20new%20MutationObserver((mutations)%20%3D%3E%20%7B%0Amutations.forEach((mutation)%20%3D%3E%20%7B%0Aconsole.log('DOM%20%E5%8F%91%E7%94%9F%E5%8F%98%E5%8C%96%3A'%2C%20mutation)%3B%0A%7D)%3B%0A%7D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-keyword inline">const</span> observer = <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">MutationObserver</span>(<span class="hljs-function inline">(<span class="hljs-params inline">mutations</span>) =&gt;</span> {
  mutations.<span class="hljs-title function_ inline">forEach</span>(<span class="hljs-function inline">(<span class="hljs-params inline">mutation</span>) =&gt;</span> {
    <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;DOM 发生变化:&#x27;</span>, mutation);
  });
});
</code></pre>
            </div>
        
<h3 id="基本用法" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#基本用法" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 基本用法">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">基本用法</strong>
        </h3>
<p class="text-base leading-7 mb-4 text-foreground">创建 MutationObserver 需要三个步骤：</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%201.%20%E5%88%9B%E5%BB%BA%E8%A7%82%E5%AF%9F%E5%99%A8%E5%AE%9E%E4%BE%8B%0Aconst%20observer%20%3D%20new%20MutationObserver((mutations%2C%20observer)%20%3D%3E%20%7B%0A%2F%2F%20%E5%A4%84%E7%90%86%E5%8F%98%E5%8C%96%0Amutations.forEach((mutation)%20%3D%3E%20%7B%0Aconsole.log('%E5%8F%98%E5%8C%96%E7%B1%BB%E5%9E%8B%3A'%2C%20mutation.type)%3B%0Aconsole.log('%E7%9B%AE%E6%A0%87%E5%85%83%E7%B4%A0%3A'%2C%20mutation.target)%3B%0A%7D)%3B%0A%7D)%3B%0A%2F%2F%202.%20%E9%85%8D%E7%BD%AE%E8%A7%82%E5%AF%9F%E9%80%89%E9%A1%B9%0Aconst%20config%20%3D%20%7B%0AchildList%3A%20true%2C%20%20%20%20%20%20%20%20%2F%2F%20%E8%A7%82%E5%AF%9F%E5%AD%90%E8%8A%82%E7%82%B9%E5%8F%98%E5%8C%96%0Aattributes%3A%20true%2C%20%20%20%20%20%20%20%2F%2F%20%E8%A7%82%E5%AF%9F%E5%B1%9E%E6%80%A7%E5%8F%98%E5%8C%96%0AattributeOldValue%3A%20true%2C%2F%2F%20%E8%AE%B0%E5%BD%95%E5%B1%9E%E6%80%A7%E6%97%A7%E5%80%BC%0AcharacterData%3A%20true%2C%20%20%20%20%2F%2F%20%E8%A7%82%E5%AF%9F%E6%96%87%E6%9C%AC%E5%86%85%E5%AE%B9%E5%8F%98%E5%8C%96%0Asubtree%3A%20true%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E8%A7%82%E5%AF%9F%E6%95%B4%E4%B8%AA%E5%AD%90%E6%A0%91%0A%7D%3B%0A%2F%2F%203.%20%E5%BC%80%E5%A7%8B%E8%A7%82%E5%AF%9F%0Aconst%20targetNode%20%3D%20document.getElementById('myDiv')%3B%0Aobserver.observe(targetNode%2C%20config)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-comment inline">// 1. 创建观察器实例</span>
<span class="hljs-keyword inline">const</span> observer = <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">MutationObserver</span>(<span class="hljs-function inline">(<span class="hljs-params inline">mutations, observer</span>) =&gt;</span> {
  <span class="hljs-comment inline">// 处理变化</span>
  mutations.<span class="hljs-title function_ inline">forEach</span>(<span class="hljs-function inline">(<span class="hljs-params inline">mutation</span>) =&gt;</span> {
    <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;变化类型:&#x27;</span>, mutation.<span class="hljs-property inline">type</span>);
    <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;目标元素:&#x27;</span>, mutation.<span class="hljs-property inline">target</span>);
  });
});

<span class="hljs-comment inline">// 2. 配置观察选项</span>
<span class="hljs-keyword inline">const</span> config = {
  <span class="hljs-attr inline">childList</span>: <span class="hljs-literal inline">true</span>,        <span class="hljs-comment inline">// 观察子节点变化</span>
  <span class="hljs-attr inline">attributes</span>: <span class="hljs-literal inline">true</span>,       <span class="hljs-comment inline">// 观察属性变化</span>
  <span class="hljs-attr inline">attributeOldValue</span>: <span class="hljs-literal inline">true</span>,<span class="hljs-comment inline">// 记录属性旧值</span>
  <span class="hljs-attr inline">characterData</span>: <span class="hljs-literal inline">true</span>,    <span class="hljs-comment inline">// 观察文本内容变化</span>
  <span class="hljs-attr inline">subtree</span>: <span class="hljs-literal inline">true</span>          <span class="hljs-comment inline">// 观察整个子树</span>
};

<span class="hljs-comment inline">// 3. 开始观察</span>
<span class="hljs-keyword inline">const</span> targetNode = <span class="hljs-variable language_ inline">document</span>.<span class="hljs-title function_ inline">getElementById</span>(<span class="hljs-string inline">&#x27;myDiv&#x27;</span>);
observer.<span class="hljs-title function_ inline">observe</span>(targetNode, config);
</code></pre>
            </div>
        
<h3 id="配置选项详解" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#配置选项详解" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 配置选项详解">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">配置选项详解</strong>
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="const%20config%20%3D%20%7B%0AchildList%3A%20true%2C%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E7%9B%91%E5%90%AC%E5%AD%90%E8%8A%82%E7%82%B9%E7%9A%84%E6%B7%BB%E5%8A%A0%2F%E5%88%A0%E9%99%A4%0Aattributes%3A%20true%2C%20%20%20%20%20%20%20%20%20%2F%2F%20%E7%9B%91%E5%90%AC%E5%B1%9E%E6%80%A7%E5%8F%98%E5%8C%96%0AattributeOldValue%3A%20true%2C%20%20%2F%2F%20%E8%AE%B0%E5%BD%95%E5%B1%9E%E6%80%A7%E5%8F%98%E5%8C%96%E5%89%8D%E7%9A%84%E5%80%BC%0AattributeFilter%3A%20%5B'class'%2C%20'style'%5D%2C%20%2F%2F%20%E5%8F%AA%E7%9B%91%E5%90%AC%E6%8C%87%E5%AE%9A%E5%B1%9E%E6%80%A7%0AcharacterData%3A%20true%2C%20%20%20%20%20%20%2F%2F%20%E7%9B%91%E5%90%AC%E6%96%87%E6%9C%AC%E8%8A%82%E7%82%B9%E5%86%85%E5%AE%B9%E5%8F%98%E5%8C%96%0AcharacterDataOldValue%3A%20true%2C%20%2F%2F%20%E8%AE%B0%E5%BD%95%E6%96%87%E6%9C%AC%E5%8F%98%E5%8C%96%E5%89%8D%E7%9A%84%E5%80%BC%0Asubtree%3A%20true%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E7%9B%91%E5%90%AC%E6%95%B4%E4%B8%AA%E5%AD%90%E6%A0%91%E7%9A%84%E5%8F%98%E5%8C%96%0A%7D%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-keyword inline">const</span> config = {
  <span class="hljs-attr inline">childList</span>: <span class="hljs-literal inline">true</span>,          <span class="hljs-comment inline">// 监听子节点的添加/删除</span>
  <span class="hljs-attr inline">attributes</span>: <span class="hljs-literal inline">true</span>,         <span class="hljs-comment inline">// 监听属性变化</span>
  <span class="hljs-attr inline">attributeOldValue</span>: <span class="hljs-literal inline">true</span>,  <span class="hljs-comment inline">// 记录属性变化前的值</span>
  <span class="hljs-attr inline">attributeFilter</span>: [<span class="hljs-string inline">&#x27;class&#x27;</span>, <span class="hljs-string inline">&#x27;style&#x27;</span>], <span class="hljs-comment inline">// 只监听指定属性</span>
  <span class="hljs-attr inline">characterData</span>: <span class="hljs-literal inline">true</span>,      <span class="hljs-comment inline">// 监听文本节点内容变化</span>
  <span class="hljs-attr inline">characterDataOldValue</span>: <span class="hljs-literal inline">true</span>, <span class="hljs-comment inline">// 记录文本变化前的值</span>
  <span class="hljs-attr inline">subtree</span>: <span class="hljs-literal inline">true</span>            <span class="hljs-comment inline">// 监听整个子树的变化</span>
};
</code></pre>
            </div>
        
<h3 id="实用示例" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#实用示例" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 实用示例">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">实用示例</strong>
        </h3>
<h4 id="监听元素类名变化" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#监听元素类名变化" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 监听元素类名变化">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">监听元素类名变化</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="const%20observer%20%3D%20new%20MutationObserver((mutations)%20%3D%3E%20%7B%0Amutations.forEach((mutation)%20%3D%3E%20%7B%0Aif%20(mutation.type%20%3D%3D%3D%20'attributes'%20%26%26%20mutation.attributeName%20%3D%3D%3D%20'class')%20%7B%0Aconsole.log('%E7%B1%BB%E5%90%8D%E4%BB%8E'%2C%20mutation.oldValue%2C%20'%E5%8F%98%E4%B8%BA'%2C%20mutation.target.className)%3B%0A%7D%0A%7D)%3B%0A%7D)%3B%0Aobserver.observe(document.body%2C%20%7B%0Aattributes%3A%20true%2C%0AattributeOldValue%3A%20true%2C%0AattributeFilter%3A%20%5B'class'%5D%0A%7D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-keyword inline">const</span> observer = <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">MutationObserver</span>(<span class="hljs-function inline">(<span class="hljs-params inline">mutations</span>) =&gt;</span> {
  mutations.<span class="hljs-title function_ inline">forEach</span>(<span class="hljs-function inline">(<span class="hljs-params inline">mutation</span>) =&gt;</span> {
    <span class="hljs-keyword inline">if</span> (mutation.<span class="hljs-property inline">type</span> === <span class="hljs-string inline">&#x27;attributes&#x27;</span> &amp;&amp; mutation.<span class="hljs-property inline">attributeName</span> === <span class="hljs-string inline">&#x27;class&#x27;</span>) {
      <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;类名从&#x27;</span>, mutation.<span class="hljs-property inline">oldValue</span>, <span class="hljs-string inline">&#x27;变为&#x27;</span>, mutation.<span class="hljs-property inline">target</span>.<span class="hljs-property inline">className</span>);
    }
  });
});

observer.<span class="hljs-title function_ inline">observe</span>(<span class="hljs-variable language_ inline">document</span>.<span class="hljs-property inline">body</span>, {
  <span class="hljs-attr inline">attributes</span>: <span class="hljs-literal inline">true</span>,
  <span class="hljs-attr inline">attributeOldValue</span>: <span class="hljs-literal inline">true</span>,
  <span class="hljs-attr inline">attributeFilter</span>: [<span class="hljs-string inline">&#x27;class&#x27;</span>]
});
</code></pre>
            </div>
        
<h4 id="监听子元素添加" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#监听子元素添加" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 监听子元素添加">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">监听子元素添加</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="const%20listObserver%20%3D%20new%20MutationObserver((mutations)%20%3D%3E%20%7B%0Amutations.forEach((mutation)%20%3D%3E%20%7B%0Aif%20(mutation.type%20%3D%3D%3D%20'childList')%20%7B%0Amutation.addedNodes.forEach((node)%20%3D%3E%20%7B%0Aif%20(node.nodeType%20%3D%3D%3D%20Node.ELEMENT_NODE)%20%7B%0Aconsole.log('%E6%B7%BB%E5%8A%A0%E4%BA%86%E6%96%B0%E5%85%83%E7%B4%A0%3A'%2C%20node)%3B%0A%7D%0A%7D)%3B%0A%7D%0A%7D)%3B%0A%7D)%3B%0Aconst%20todoList%20%3D%20document.getElementById('todoList')%3B%0AlistObserver.observe(todoList%2C%20%7B%20childList%3A%20true%20%7D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-keyword inline">const</span> listObserver = <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">MutationObserver</span>(<span class="hljs-function inline">(<span class="hljs-params inline">mutations</span>) =&gt;</span> {
  mutations.<span class="hljs-title function_ inline">forEach</span>(<span class="hljs-function inline">(<span class="hljs-params inline">mutation</span>) =&gt;</span> {
    <span class="hljs-keyword inline">if</span> (mutation.<span class="hljs-property inline">type</span> === <span class="hljs-string inline">&#x27;childList&#x27;</span>) {
      mutation.<span class="hljs-property inline">addedNodes</span>.<span class="hljs-title function_ inline">forEach</span>(<span class="hljs-function inline">(<span class="hljs-params inline">node</span>) =&gt;</span> {
        <span class="hljs-keyword inline">if</span> (node.<span class="hljs-property inline">nodeType</span> === <span class="hljs-title class_ inline">Node</span>.<span class="hljs-property inline">ELEMENT_NODE</span>) {
          <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;添加了新元素:&#x27;</span>, node);
        }
      });
    }
  });
});

<span class="hljs-keyword inline">const</span> todoList = <span class="hljs-variable language_ inline">document</span>.<span class="hljs-title function_ inline">getElementById</span>(<span class="hljs-string inline">&#x27;todoList&#x27;</span>);
listObserver.<span class="hljs-title function_ inline">observe</span>(todoList, { <span class="hljs-attr inline">childList</span>: <span class="hljs-literal inline">true</span> });
</code></pre>
            </div>
        
<h3 id="与传统事件监听的对比" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#与传统事件监听的对比" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 与传统事件监听的对比">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">与传统事件监听的对比</strong>
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20%E4%BC%A0%E7%BB%9F%E6%96%B9%E5%BC%8F%EF%BC%9A%E4%BD%BF%E7%94%A8%20DOMNodeInserted%EF%BC%88%E5%B7%B2%E5%BA%9F%E5%BC%83%EF%BC%89%0Aelement.addEventListener('DOMNodeInserted'%2C%20handler%2C%20false)%3B%0A%2F%2F%20%E7%8E%B0%E4%BB%A3%E6%96%B9%E5%BC%8F%EF%BC%9A%E4%BD%BF%E7%94%A8%20MutationObserver%0Aconst%20observer%20%3D%20new%20MutationObserver(handler)%3B%0Aobserver.observe(element%2C%20%7B%20childList%3A%20true%2C%20subtree%3A%20true%20%7D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-comment inline">// 传统方式：使用 DOMNodeInserted（已废弃）</span>
element.<span class="hljs-title function_ inline">addEventListener</span>(<span class="hljs-string inline">&#x27;DOMNodeInserted&#x27;</span>, handler, <span class="hljs-literal inline">false</span>);

<span class="hljs-comment inline">// 现代方式：使用 MutationObserver</span>
<span class="hljs-keyword inline">const</span> observer = <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">MutationObserver</span>(handler);
observer.<span class="hljs-title function_ inline">observe</span>(element, { <span class="hljs-attr inline">childList</span>: <span class="hljs-literal inline">true</span>, <span class="hljs-attr inline">subtree</span>: <span class="hljs-literal inline">true</span> });
</code></pre>
            </div>
        
<h3 id="性能优势" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#性能优势" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 性能优势">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">性能优势</strong>
        </h3>
<ol class="list-decimal list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">异步执行</strong>：不会阻塞主线程</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">批量处理</strong>：将多个变化合并为一次回调</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">精确控制</strong>：可以选择性监听特定类型的变化</li>
</ol>
<h3 id="实际应用场景" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#实际应用场景" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 实际应用场景">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">实际应用场景</strong>
        </h3>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">无限滚动列表</strong>：监听容器高度变化</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">动态内容加载</strong>：监听新内容的插入</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">主题切换</strong>：监听 class 或 data 属性变化</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">表单验证</strong>：监听输入框内容变化</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">组件库开发</strong>：监听 DOM 结构变化</li>
</ul>
<h3 id="react-中的使用" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#react-中的使用" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to React 中的使用">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">React 中的使用</strong>
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="import%20React%2C%20%7B%20useEffect%2C%20useRef%20%7D%20from%20'react'%3B%0Afunction%20MyComponent()%20%7B%0Aconst%20containerRef%20%3D%20useRef(null)%3B%0AuseEffect(()%20%3D%3E%20%7B%0Aconst%20observer%20%3D%20new%20MutationObserver((mutations)%20%3D%3E%20%7B%0Amutations.forEach((mutation)%20%3D%3E%20%7B%0Aif%20(mutation.type%20%3D%3D%3D%20'childList')%20%7B%0Aconsole.log('%E5%AD%90%E5%85%83%E7%B4%A0%E5%8F%91%E7%94%9F%E5%8F%98%E5%8C%96')%3B%0A%7D%0A%7D)%3B%0A%7D)%3B%0Aif%20(containerRef.current)%20%7B%0Aobserver.observe(containerRef.current%2C%20%7B%0AchildList%3A%20true%2C%0Asubtree%3A%20true%0A%7D)%3B%0A%7D%0A%2F%2F%20%E6%B8%85%E7%90%86%E5%87%BD%E6%95%B0%0Areturn%20()%20%3D%3E%20%7B%0Aobserver.disconnect()%3B%0A%7D%3B%0A%7D%2C%20%5B%5D)%3B%0Areturn%20div%20ref%3D%7BcontainerRef%7D%3E%E7%9B%91%E5%90%AC%E7%9A%84%E5%AE%B9%E5%99%A8div%3E%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">import</span> <span class="hljs-title class_ inline">React</span>, { useEffect, useRef } <span class="hljs-keyword inline">from</span> <span class="hljs-string inline">&#x27;react&#x27;</span>;

<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">MyComponent</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> containerRef = <span class="hljs-title function_ inline">useRef</span>(<span class="hljs-literal inline">null</span>);

  <span class="hljs-title function_ inline">useEffect</span>(<span class="hljs-function inline">() =&gt;</span> {
    <span class="hljs-keyword inline">const</span> observer = <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">MutationObserver</span>(<span class="hljs-function inline">(<span class="hljs-params inline">mutations</span>) =&gt;</span> {
      mutations.<span class="hljs-title function_ inline">forEach</span>(<span class="hljs-function inline">(<span class="hljs-params inline">mutation</span>) =&gt;</span> {
        <span class="hljs-keyword inline">if</span> (mutation.<span class="hljs-property inline">type</span> === <span class="hljs-string inline">&#x27;childList&#x27;</span>) {
          <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;子元素发生变化&#x27;</span>);
        }
      });
    });

    <span class="hljs-keyword inline">if</span> (containerRef.<span class="hljs-property inline">current</span>) {
      observer.<span class="hljs-title function_ inline">observe</span>(containerRef.<span class="hljs-property inline">current</span>, {
        <span class="hljs-attr inline">childList</span>: <span class="hljs-literal inline">true</span>,
        <span class="hljs-attr inline">subtree</span>: <span class="hljs-literal inline">true</span>
      });
    }

    <span class="hljs-comment inline">// 清理函数</span>
    <span class="hljs-keyword inline">return</span> <span class="hljs-function inline">() =&gt;</span> {
      observer.<span class="hljs-title function_ inline">disconnect</span>();
    };
  }, []);

  <span class="hljs-keyword inline">return</span> <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span> <span class="hljs-attr inline">ref</span>=<span class="hljs-string inline">{containerRef}</span>&gt;</span>监听的容器<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>;
}
</code></pre>
            </div>
        
<h3 id="注意事项" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#注意事项" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 注意事项">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">注意事项</strong>
        </h3>
<ol class="list-decimal list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">及时断开连接</strong>：使用 <code>observer.disconnect()</code> 避免内存泄漏</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">避免无限循环</strong>：回调函数中修改 DOM 可能触发新的变化</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">性能考虑</strong>：避免监听过大的 DOM 树</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">浏览器兼容性</strong>：现代浏览器都支持，IE11+ 可用</li>
</ol>
<h3 id="完整示例" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#完整示例" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 完整示例">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">完整示例</strong>
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="class%20DOMWatcher%20%7B%0Aconstructor(target%2C%20options%20%3D%20%7B%7D)%20%7B%0Athis.target%20%3D%20target%3B%0Athis.options%20%3D%20%7B%0AchildList%3A%20true%2C%0Aattributes%3A%20true%2C%0Asubtree%3A%20true%2C%0A...options%0A%7D%3B%0Athis.observer%20%3D%20new%20MutationObserver(this.handleMutations.bind(this))%3B%0A%7D%0AhandleMutations(mutations)%20%7B%0Amutations.forEach((mutation)%20%3D%3E%20%7B%0Aswitch%20(mutation.type)%20%7B%0Acase%20'childList'%3A%0Athis.handleChildListChange(mutation)%3B%0Abreak%3B%0Acase%20'attributes'%3A%0Athis.handleAttributeChange(mutation)%3B%0Abreak%3B%0Acase%20'characterData'%3A%0Athis.handleTextChange(mutation)%3B%0Abreak%3B%0A%7D%0A%7D)%3B%0A%7D%0AhandleChildListChange(mutation)%20%7B%0Aconsole.log('%E5%AD%90%E5%85%83%E7%B4%A0%E5%8F%98%E5%8C%96%3A'%2C%20mutation.addedNodes%2C%20mutation.removedNodes)%3B%0A%7D%0AhandleAttributeChange(mutation)%20%7B%0Aconsole.log('%E5%B1%9E%E6%80%A7%E5%8F%98%E5%8C%96%3A'%2C%20mutation.attributeName%2C%20mutation.oldValue)%3B%0A%7D%0AhandleTextChange(mutation)%20%7B%0Aconsole.log('%E6%96%87%E6%9C%AC%E5%8F%98%E5%8C%96%3A'%2C%20mutation.oldValue%2C%20mutation.target.textContent)%3B%0A%7D%0Astart()%20%7B%0Athis.observer.observe(this.target%2C%20this.options)%3B%0A%7D%0Astop()%20%7B%0Athis.observer.disconnect()%3B%0A%7D%0A%7D%0A%2F%2F%20%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B%0Aconst%20watcher%20%3D%20new%20DOMWatcher(document.body)%3B%0Awatcher.start()%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-keyword inline">class</span> <span class="hljs-title class_ inline">DOMWatcher</span> {
  <span class="hljs-title function_ inline">constructor</span>(<span class="hljs-params inline">target, options = {}</span>) {
    <span class="hljs-variable language_ inline">this</span>.<span class="hljs-property inline">target</span> = target;
    <span class="hljs-variable language_ inline">this</span>.<span class="hljs-property inline">options</span> = {
      <span class="hljs-attr inline">childList</span>: <span class="hljs-literal inline">true</span>,
      <span class="hljs-attr inline">attributes</span>: <span class="hljs-literal inline">true</span>,
      <span class="hljs-attr inline">subtree</span>: <span class="hljs-literal inline">true</span>,
      ...options
    };
    <span class="hljs-variable language_ inline">this</span>.<span class="hljs-property inline">observer</span> = <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">MutationObserver</span>(<span class="hljs-variable language_ inline">this</span>.<span class="hljs-property inline">handleMutations</span>.<span class="hljs-title function_ inline">bind</span>(<span class="hljs-variable language_ inline">this</span>));
  }

  <span class="hljs-title function_ inline">handleMutations</span>(<span class="hljs-params inline">mutations</span>) {
    mutations.<span class="hljs-title function_ inline">forEach</span>(<span class="hljs-function inline">(<span class="hljs-params inline">mutation</span>) =&gt;</span> {
      <span class="hljs-keyword inline">switch</span> (mutation.<span class="hljs-property inline">type</span>) {
        <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;childList&#x27;</span>:
          <span class="hljs-variable language_ inline">this</span>.<span class="hljs-title function_ inline">handleChildListChange</span>(mutation);
          <span class="hljs-keyword inline">break</span>;
        <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;attributes&#x27;</span>:
          <span class="hljs-variable language_ inline">this</span>.<span class="hljs-title function_ inline">handleAttributeChange</span>(mutation);
          <span class="hljs-keyword inline">break</span>;
        <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;characterData&#x27;</span>:
          <span class="hljs-variable language_ inline">this</span>.<span class="hljs-title function_ inline">handleTextChange</span>(mutation);
          <span class="hljs-keyword inline">break</span>;
      }
    });
  }

  <span class="hljs-title function_ inline">handleChildListChange</span>(<span class="hljs-params inline">mutation</span>) {
    <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;子元素变化:&#x27;</span>, mutation.<span class="hljs-property inline">addedNodes</span>, mutation.<span class="hljs-property inline">removedNodes</span>);
  }

  <span class="hljs-title function_ inline">handleAttributeChange</span>(<span class="hljs-params inline">mutation</span>) {
    <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;属性变化:&#x27;</span>, mutation.<span class="hljs-property inline">attributeName</span>, mutation.<span class="hljs-property inline">oldValue</span>);
  }

  <span class="hljs-title function_ inline">handleTextChange</span>(<span class="hljs-params inline">mutation</span>) {
    <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;文本变化:&#x27;</span>, mutation.<span class="hljs-property inline">oldValue</span>, mutation.<span class="hljs-property inline">target</span>.<span class="hljs-property inline">textContent</span>);
  }

  <span class="hljs-title function_ inline">start</span>(<span class="hljs-params inline"></span>) {
    <span class="hljs-variable language_ inline">this</span>.<span class="hljs-property inline">observer</span>.<span class="hljs-title function_ inline">observe</span>(<span class="hljs-variable language_ inline">this</span>.<span class="hljs-property inline">target</span>, <span class="hljs-variable language_ inline">this</span>.<span class="hljs-property inline">options</span>);
  }

  <span class="hljs-title function_ inline">stop</span>(<span class="hljs-params inline"></span>) {
    <span class="hljs-variable language_ inline">this</span>.<span class="hljs-property inline">observer</span>.<span class="hljs-title function_ inline">disconnect</span>();
  }
}

<span class="hljs-comment inline">// 使用示例</span>
<span class="hljs-keyword inline">const</span> watcher = <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">DOMWatcher</span>(<span class="hljs-variable language_ inline">document</span>.<span class="hljs-property inline">body</span>);
watcher.<span class="hljs-title function_ inline">start</span>();
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground">MutationObserver 是现代 Web 开发中监听 DOM 变化的标准方案，提供了强大的功能和优秀的性能表现。</p>
d:["$","$L1d",null,{"htmlContent":"$1e","frontMatter":{"title":"MutationObserver","description":"浏览器基础知识篇-MutationObserver","date":"2025-06-22","author":"MilkWind","tags":["浏览器","基础知识","MutationObserver","DOM"],"references":{}},"readingTime":"5 min read","category":"basic-knowledge","tocItems":[{"id":"基本作用","text":"基本作用","level":3},{"id":"基本用法","text":"基本用法","level":3},{"id":"配置选项详解","text":"配置选项详解","level":3},{"id":"实用示例","text":"实用示例","level":3},{"id":"监听元素类名变化","text":"监听元素类名变化","level":4},{"id":"监听子元素添加","text":"监听子元素添加","level":4},{"id":"与传统事件监听的对比","text":"与传统事件监听的对比","level":3},{"id":"性能优势","text":"性能优势","level":3},{"id":"实际应用场景","text":"实际应用场景","level":3},{"id":"react-中的使用","text":"React 中的使用","level":3},{"id":"注意事项","text":"注意事项","level":3},{"id":"完整示例","text":"完整示例","level":3}],"translations":{"common":{"welcome":"欢迎","loading":"加载中...","error":"出现了一些问题","retry":"重试","theme":"主题","language":"语言","light":"浅色","dark":"深色"},"navigation":{"home":"首页","personal":"个人","works":"作品","contributions":"贡献","documents":"文档","about":"关于","contact":"联系"},"personal":{"technicalSkills":"技术技能","email":"邮箱","github":"代码仓库","resume":"简历","codeRepository":"代码仓库","loadingPersonalInfo":"加载个人信息中...","loadingResume":"加载简历中...","closeResume":"关闭简历","emailCopied":"邮箱已复制到剪贴板！","galaxyDefaultDescription":"精通全栈开发技术，具备跨平台架构能力，擅长AI技术整合与高性能系统优化","skillGalaxy":"技能星系","stirGalaxy":"搅动星系","stirring":"搅动中...","fullStackEngineer":"MilkWind - 全栈工程师","professionalProfile":"关于我"},"documents":{"technicalDocuments":"技术文档","description":"基本原理、代码拆分以及一些碎碎念。","articles":"文章","categories":"分类","allCategories":"所有分类","noArticlesFound":"未找到文章","noArticlesAvailable":"中文暂无文章。","noArticlesInCategory":"该分类下未找到文章。","readMore":"阅读更多","loadingDocuments":"加载文档中...","backToDocuments":"← 返回文档","documentNotFound":"文档未找到","documentNotFoundDescription":"请求的文档无法找到。","technicalInsights":"技术拆解","untitledDocument":"无标题文档","byAuthor":"作者：","search":"搜索文章...","searchByTags":"按标签筛选","searching":"搜索中...","noSearchResults":"没有找到符合搜索条件的文章","clearSearch":"清除搜索","selectedTags":"已选标签","allTags":"所有标签","searchInTitle":"在标题、描述和内容中搜索","enterImmersiveMode":"沉浸阅读","exitImmersiveMode":"退出沉浸模式","immersiveReading":"沉浸阅读模式","exploreContent":"按分类探索内容","browseBy":"浏览方式","exploreAll":"所有内容汇总","categoryDescription":"该分类下的文章","totalArticles":"文章","totalCategories":"分类","foundArticles":"找到文章","categoriesWithResults":"有结果的分类"},"works":{"workCases":"作品案例","projects":"作品集","loadingProjects":"加载项目中...","grid":"网格","stack":"堆叠","of":"共","workCasesPageTitle":"作品案例页面","pageWorkingCorrectly":"此页面运行正常！路由配置正确。","try3DVersion":"尝试3D版本","dragToScroll":"拖拽滚动","dragToChange":"拖拽切换","swipeCards":"切换卡片","keyboardNav":"键盘导航"},"contributions":{"contributionCases":"开源项目","contributions":"贡献","loadingContributions":"加载贡献中...","grid":"网格","stack":"堆叠","of":"共","contributionCasesPageTitle":"贡献案例页面","pageWorkingCorrectly":"此页面运行正常！路由配置正确。","try3DVersion":"尝试3D版本","dragToScroll":"拖拽滚动","dragToChange":"拖拽切换","swipeCards":"切换卡片","keyboardNav":"键盘导航"},"contribution":{"contributionPreview":"贡献预览","accessible":"可访问","code":"代码","maintenance":"维护","enhancement":"增强","documentation":"文档","community":"社区","moreItems":"更多","technicalDetails":"技术详情","technologies":"技术栈：","contributionDetail":"贡献详情","description":"描述：","seeDetails":"查看详情","github":"代码仓库","viewContribution":"查看贡献","viewCode":"查看代码"},"project":{"projectPreview":"项目预览","accessible":"可访问","tool":"工具","plugin":"插件","toy":"小玩意","moreItems":"更多","technicalDetails":"技术详情","technologies":"技术栈：","description":"描述：","seeDetails":"查看详情","github":"GitHub","gitee":"Gitee","viewLiveDemo":"查看演示","viewCode":"查看代码","access":"访问","videos":"视频","watchVideo":"观看视频","hasVideo":"有视频"},"codeblock":{"copy":"复制","copySuccess":"代码已复制到剪贴板！","copyError":"复制代码失败","copyTooltip":"复制代码"},"toc":{"contents":"目录","autoScroll":"自动滚动到章节","collapse":"折叠","expand":"展开"},"loading":{"loading":"加载中","preparingExperience":"准备体验中"}},"lang":"zh","theme":"dark"}]
12:null
18:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
11:null
1c:{"metadata":[["$","title","0",{"children":"MutationObserver | Interactive Portfolio"}],["$","meta","1",{"name":"description","content":"浏览器基础知识篇-MutationObserver"}],["$","meta","2",{"name":"author","content":"Developer"}],["$","meta","3",{"name":"keywords","content":"portfolio,3D,interactive,web development,Three.js,Next.js"}],["$","meta","4",{"property":"og:title","content":"MutationObserver | Interactive Portfolio"}],["$","meta","5",{"property":"og:description","content":"浏览器基础知识篇-MutationObserver"}],["$","meta","6",{"property":"og:type","content":"article"}],["$","meta","7",{"property":"article:published_time","content":"2025-06-22"}],["$","meta","8",{"property":"article:tag","content":"浏览器"}],["$","meta","9",{"property":"article:tag","content":"基础知识"}],["$","meta","10",{"property":"article:tag","content":"MutationObserver"}],["$","meta","11",{"property":"article:tag","content":"DOM"}],["$","meta","12",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","13",{"name":"twitter:title","content":"MutationObserver | Interactive Portfolio"}],["$","meta","14",{"name":"twitter:description","content":"浏览器基础知识篇-MutationObserver"}],["$","link","15",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"32x32"}]],"error":null,"digest":"$undefined"}
14:{"metadata":"$1c:metadata","error":null,"digest":"$undefined"}
