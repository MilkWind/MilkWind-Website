<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/MilkWind-Website/_next/static/css/f034c804622acb16.css" data-precedence="next"/><link rel="stylesheet" href="/MilkWind-Website/_next/static/css/276b387d8ca46690.css" data-precedence="next"/><link rel="stylesheet" href="/MilkWind-Website/_next/static/css/5eacd01f773eed7f.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/MilkWind-Website/_next/static/chunks/webpack-1674c92fb524bcda.js"/><script src="/MilkWind-Website/_next/static/chunks/4bd1b696-5119e10e90c1bd1b.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/1684-794bcba02d6f7373.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/main-app-c5f95d71e93250dc.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/46-268e24d727b280ef.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/app/layout-af4a6e723c0ff668.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/app/error-dda32be1d095a86c.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/6874-fbe9a08eb79b991c.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/app/not-found-9ff98b2ccf24cac7.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/206-4f4cbf4d7156f437.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/app/documents/layout-28408791defde09e.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/2415-689c103fb3d2c28d.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/8610-7bd3f91f3cf2a4d6.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/app/documents/loading-1fa3f98b6e5a8e78.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/app/loading-68f227fb49b3ac8c.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/b498d07c-095637f0f10883c6.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/9554-b714f9de28e85d30.js" async=""></script><script src="/MilkWind-Website/_next/static/chunks/app/documents/%5B...slug%5D/page-8f3efa7e6c6c5377.js" async=""></script><title>useReducer | Interactive Portfolio</title><meta name="description" content="React基础知识篇-useReducer"/><meta name="author" content="Developer"/><meta name="keywords" content="portfolio,3D,interactive,web development,Three.js,Next.js"/><meta property="og:title" content="useReducer | Interactive Portfolio"/><meta property="og:description" content="React基础知识篇-useReducer"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2025-06-22"/><meta property="article:tag" content="React"/><meta property="article:tag" content="基础知识"/><meta property="article:tag" content="useReducer"/><meta property="article:tag" content="React Hook"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="useReducer | Interactive Portfolio"/><meta name="twitter:description" content="React基础知识篇-useReducer"/><link rel="icon" href="/MilkWind-Website/favicon.ico" type="image/x-icon" sizes="32x32"/><script>document.querySelectorAll('body link[rel="icon"], body link[rel="apple-touch-icon"]').forEach(el => document.head.appendChild(el))</script><script src="/MilkWind-Website/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__variable_9b7fb1 __variable_ca2a15 __variable_591dcc font-sans antialiased min-h-screen bg-background text-foreground"><div class="fixed inset-0 w-full h-full overflow-hidden pointer-events-none z-0" style="background:linear-gradient(135deg, hsl(210, 80%, 60%), hsl(180, 40%, 50%))"></div><div class="fixed top-20 right-5 z-50"><div class="w-16 h-16 rounded-full backdrop-blur-md border animate-pulse bg-surface/60 border-surface/40"></div></div><!--$--><style>
:root {
  --bprogress-color: #0066cc;
  --bprogress-height: 4px;
  --bprogress-spinner-size: 18px;
  --bprogress-spinner-animation-duration: 400ms;
  --bprogress-spinner-border-size: 2px;
  --bprogress-box-shadow: 0 0 10px #0066cc, 0 0 5px #0066cc;
  --bprogress-z-index: 99999;
  --bprogress-spinner-top: 15px;
  --bprogress-spinner-bottom: auto;
  --bprogress-spinner-right: 15px;
  --bprogress-spinner-left: auto;
}

.bprogress {
  width: 0;
  height: 0;
  pointer-events: none;
  z-index: var(--bprogress-z-index);
}

.bprogress .bar {
  background: var(--bprogress-color);
  position: fixed;
  z-index: var(--bprogress-z-index);
  top: 0;
  left: 0;
  width: 100%;
  height: var(--bprogress-height);
}

/* Fancy blur effect */
.bprogress .peg {
  display: block;
  position: absolute;
  right: 0;
  width: 100px;
  height: 100%;
  box-shadow: var(--bprogress-box-shadow);
  opacity: 1.0;
  transform: rotate(3deg) translate(0px, -4px);
}

/* Remove these to get rid of the spinner */
.bprogress .spinner {
  display: block;
  position: fixed;
  z-index: var(--bprogress-z-index);
  top: var(--bprogress-spinner-top);
  bottom: var(--bprogress-spinner-bottom);
  right: var(--bprogress-spinner-right);
  left: var(--bprogress-spinner-left);
}

.bprogress .spinner-icon {
  width: var(--bprogress-spinner-size);
  height: var(--bprogress-spinner-size);
  box-sizing: border-box;
  border: solid var(--bprogress-spinner-border-size) transparent;
  border-top-color: var(--bprogress-color);
  border-left-color: var(--bprogress-color);
  border-radius: 50%;
  -webkit-animation: bprogress-spinner var(--bprogress-spinner-animation-duration) linear infinite;
  animation: bprogress-spinner var(--bprogress-spinner-animation-duration) linear infinite;
}

.bprogress-custom-parent {
  overflow: hidden;
  position: relative;
}

.bprogress-custom-parent .bprogress .spinner,
.bprogress-custom-parent .bprogress .bar {
  position: absolute;
}

.bprogress .indeterminate {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--bprogress-height);
  overflow: hidden;
}

.bprogress .indeterminate .inc,
.bprogress .indeterminate .dec {
  position: absolute;
  top: 0;
  height: 100%;
  background-color: var(--bprogress-color);
}

.bprogress .indeterminate .inc {
  animation: bprogress-indeterminate-increase 2s infinite;
}

.bprogress .indeterminate .dec {
  animation: bprogress-indeterminate-decrease 2s 0.5s infinite;
}

@-webkit-keyframes bprogress-spinner {
  0%   { -webkit-transform: rotate(0deg); transform: rotate(0deg); }
  100% { -webkit-transform: rotate(360deg); transform: rotate(360deg); }
}

@keyframes bprogress-spinner {
  0%   { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes bprogress-indeterminate-increase {
  from { left: -5%; width: 5%; }
  to { left: 130%; width: 100%; }
}

@keyframes bprogress-indeterminate-decrease {
  from { left: -80%; width: 80%; }
  to { left: 110%; width: 10%; }
}
</style><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--><!--$--><div class="relative z-30 min-h-screen bg-background "><div class="container mx-auto px-4 py-8 max-w-4xl"><div class="mb-8"><a class="inline-flex items-center text-primary hover:text-primary/80 transition-colors" href="/MilkWind-Website/documents/">documents.backToDocuments</a></div><header class="mb-12"><div class="flex items-center gap-4 mb-4 text-sm text-foreground/60"><span class="px-3 py-1 bg-primary/20 text-primary rounded-full capitalize">basic knowledge</span><span>16 min read</span></div><h1 class="font-bold mb-4 bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent text-4xl md:text-5xl">useReducer</h1><p class="text-xl text-foreground/80 max-w-3xl">React基础知识篇-useReducer</p><div class="flex flex-wrap gap-2 mt-6"><span class="px-3 py-1 text-sm bg-accent/20 text-accent rounded-full">React</span><span class="px-3 py-1 text-sm bg-accent/20 text-accent rounded-full">基础知识</span><span class="px-3 py-1 text-sm bg-accent/20 text-accent rounded-full">useReducer</span><span class="px-3 py-1 text-sm bg-accent/20 text-accent rounded-full">React Hook</span></div></header><article class="prose prose-headings:mt-8 prose-headings:font-semibold prose-headings:text-foreground prose-h1:text-5xl prose-h2:text-4xl prose-h3:text-3xl prose-h4:text-2xl prose-h5:text-xl prose-h6:text-lg max-w-none "><div class="prose-pre:p-4 prose-pre:bg-surface w-full"><p class="text-base leading-7 mb-4 text-foreground"><code>useReducer</code> 是 React 提供的状态管理 Hook，适用于管理复杂的状态逻辑。它类似于 Redux 的工作方式，通过 reducer 函数来处理状态更新，特别适合处理多个相关状态值或复杂的状态转换逻辑。</p>
<h3 id="基本作用" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#基本作用" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 基本作用">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">基本作用</strong>
        </h3>
<p class="text-base leading-7 mb-4 text-foreground"><code>useReducer</code> 的主要作用是：</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">管理复杂的组件状态逻辑</li>
<li class="text-foreground leading-relaxed">处理多个相关的状态值</li>
<li class="text-foreground leading-relaxed">提供可预测的状态更新方式</li>
<li class="text-foreground leading-relaxed">替代多个 useState 的复杂场景</li>
<li class="text-foreground leading-relaxed">与 useContext 结合实现全局状态管理</li>
</ul>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="import%20React%2C%20%7B%20useReducer%20%7D%20from%20'react'%3B%0A%2F%2F%20%E5%AE%9A%E4%B9%89%20reducer%20%E5%87%BD%E6%95%B0%0Afunction%20counterReducer(state%2C%20action)%20%7B%0Aswitch%20(action.type)%20%7B%0Acase%20'increment'%3A%0Areturn%20%7B%20count%3A%20state.count%20%2B%201%20%7D%3B%0Acase%20'decrement'%3A%0Areturn%20%7B%20count%3A%20state.count%20-%201%20%7D%3B%0Acase%20'reset'%3A%0Areturn%20%7B%20count%3A%200%20%7D%3B%0Adefault%3A%0Athrow%20new%20Error(%60%E6%9C%AA%E7%9F%A5%E7%9A%84%20action%20%E7%B1%BB%E5%9E%8B%3A%20%24%7Baction.type%7D%60)%3B%0A%7D%0A%7D%0Afunction%20Counter()%20%7B%0Aconst%20%5Bstate%2C%20dispatch%5D%20%3D%20useReducer(counterReducer%2C%20%7B%20count%3A%200%20%7D)%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E8%AE%A1%E6%95%B0%3A%20%7Bstate.count%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20dispatch(%7B%20type%3A%20'increment'%20%7D)%7D%3E%2B1button%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20dispatch(%7B%20type%3A%20'decrement'%20%7D)%7D%3E-1button%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20dispatch(%7B%20type%3A%20'reset'%20%7D)%7D%3E%E9%87%8D%E7%BD%AEbutton%3E%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">import</span> <span class="hljs-title class_ inline">React</span>, { useReducer } <span class="hljs-keyword inline">from</span> <span class="hljs-string inline">&#x27;react&#x27;</span>;

<span class="hljs-comment inline">// 定义 reducer 函数</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">counterReducer</span>(<span class="hljs-params inline">state, action</span>) {
  <span class="hljs-keyword inline">switch</span> (action.<span class="hljs-property inline">type</span>) {
    <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;increment&#x27;</span>:
      <span class="hljs-keyword inline">return</span> { <span class="hljs-attr inline">count</span>: state.<span class="hljs-property inline">count</span> + <span class="hljs-number inline">1</span> };
    <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;decrement&#x27;</span>:
      <span class="hljs-keyword inline">return</span> { <span class="hljs-attr inline">count</span>: state.<span class="hljs-property inline">count</span> - <span class="hljs-number inline">1</span> };
    <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;reset&#x27;</span>:
      <span class="hljs-keyword inline">return</span> { <span class="hljs-attr inline">count</span>: <span class="hljs-number inline">0</span> };
    <span class="hljs-attr inline">default</span>:
      <span class="hljs-keyword inline">throw</span> <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">Error</span>(<span class="hljs-string inline">`未知的 action 类型: <span class="hljs-subst inline">${action.type}</span>`</span>);
  }
}

<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">Counter</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> [state, dispatch] = <span class="hljs-title function_ inline">useReducer</span>(counterReducer, { <span class="hljs-attr inline">count</span>: <span class="hljs-number inline">0</span> });

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>计数: {state.count}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> dispatch({ type: &#x27;increment&#x27; })}&gt;+1<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> dispatch({ type: &#x27;decrement&#x27; })}&gt;-1<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> dispatch({ type: &#x27;reset&#x27; })}&gt;重置<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="基本语法" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#基本语法" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 基本语法">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">基本语法</strong>
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="const%20%5Bstate%2C%20dispatch%5D%20%3D%20useReducer(reducer%2C%20initialState%2C%20init)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">const</span> [state, dispatch] = <span class="hljs-title function_ inline">useReducer</span>(reducer, initialState, init);
</code></pre>
            </div>
        
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">reducer</strong>：reducer 函数 <code>(state, action) =&gt; newState</code></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">initialState</strong>：初始状态值</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">init</strong>：可选的初始化函数，用于延迟初始化</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">返回值</strong>：<code>[state, dispatch]</code> 数组</li>
</ul>
<h3 id="与-usestate-的对比" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#与-usestate-的对比" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 与 useState 的对比">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">与 useState 的对比</strong>
        </h3>
<h4 id="使用-usestate（简单状态）" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#使用-usestate（简单状态）" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 使用 useState（简单状态）">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">使用 useState（简单状态）</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20SimpleCounter()%20%7B%0Aconst%20%5Bcount%2C%20setCount%5D%20%3D%20useState(0)%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E8%AE%A1%E6%95%B0%3A%20%7Bcount%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20setCount(count%20%2B%201)%7D%3E%E5%A2%9E%E5%8A%A0button%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20setCount(count%20-%201)%7D%3E%E5%87%8F%E5%B0%91button%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20setCount(0)%7D%3E%E9%87%8D%E7%BD%AEbutton%3E%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">SimpleCounter</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> [count, setCount] = <span class="hljs-title function_ inline">useState</span>(<span class="hljs-number inline">0</span>);

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>计数: {count}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> setCount(count + 1)}&gt;增加<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> setCount(count - 1)}&gt;减少<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> setCount(0)}&gt;重置<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h4 id="使用-usereducer（复杂状态）" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#使用-usereducer（复杂状态）" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 使用 useReducer（复杂状态）">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">使用 useReducer（复杂状态）</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20ComplexCounter()%20%7B%0Aconst%20initialState%20%3D%20%7B%0Acount%3A%200%2C%0Astep%3A%201%2C%0Ahistory%3A%20%5B%5D%0A%7D%3B%0Afunction%20reducer(state%2C%20action)%20%7B%0Aswitch%20(action.type)%20%7B%0Acase%20'increment'%3A%0Areturn%20%7B%0A...state%2C%0Acount%3A%20state.count%20%2B%20state.step%2C%0Ahistory%3A%20%5B...state.history%2C%20%7B%20action%3A%20'increment'%2C%20value%3A%20state.step%20%7D%5D%0A%7D%3B%0Acase%20'decrement'%3A%0Areturn%20%7B%0A...state%2C%0Acount%3A%20state.count%20-%20state.step%2C%0Ahistory%3A%20%5B...state.history%2C%20%7B%20action%3A%20'decrement'%2C%20value%3A%20state.step%20%7D%5D%0A%7D%3B%0Acase%20'setStep'%3A%0Areturn%20%7B%0A...state%2C%0Astep%3A%20action.payload%0A%7D%3B%0Acase%20'reset'%3A%0Areturn%20%7B%0A...initialState%0A%7D%3B%0Adefault%3A%0Areturn%20state%3B%0A%7D%0A%7D%0Aconst%20%5Bstate%2C%20dispatch%5D%20%3D%20useReducer(reducer%2C%20initialState)%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E8%AE%A1%E6%95%B0%3A%20%7Bstate.count%7Dp%3E%0Ap%3E%E6%AD%A5%E9%95%BF%3A%20%7Bstate.step%7Dp%3E%0Ainput%0Atype%3D%22number%22%0Avalue%3D%7Bstate.step%7D%0AonChange%3D%7B(e)%20%3D%3E%20dispatch(%7B%0Atype%3A%20'setStep'%2C%0Apayload%3A%20parseInt(e.target.value)%20%7C%7C%201%0A%7D)%7D%0A%2F%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20dispatch(%7B%20type%3A%20'increment'%20%7D)%7D%3E%0A%E5%A2%9E%E5%8A%A0%20%7Bstate.step%7D%0Abutton%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20dispatch(%7B%20type%3A%20'decrement'%20%7D)%7D%3E%0A%E5%87%8F%E5%B0%91%20%7Bstate.step%7D%0Abutton%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20dispatch(%7B%20type%3A%20'reset'%20%7D)%7D%3E%E9%87%8D%E7%BD%AEbutton%3E%0Ah3%3E%E6%93%8D%E4%BD%9C%E5%8E%86%E5%8F%B2%3Ah3%3E%0Aul%3E%0A%7Bstate.history.map((item%2C%20index)%20%3D%3E%20(%0Ali%20key%3D%7Bindex%7D%3E%0A%7Bitem.action%7D%20%7Bitem.value%7D%0Ali%3E%0A))%7D%0Aul%3E%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">ComplexCounter</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> initialState = {
    <span class="hljs-attr inline">count</span>: <span class="hljs-number inline">0</span>,
    <span class="hljs-attr inline">step</span>: <span class="hljs-number inline">1</span>,
    <span class="hljs-attr inline">history</span>: []
  };

  <span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">reducer</span>(<span class="hljs-params inline">state, action</span>) {
    <span class="hljs-keyword inline">switch</span> (action.<span class="hljs-property inline">type</span>) {
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;increment&#x27;</span>:
        <span class="hljs-keyword inline">return</span> {
          ...state,
          <span class="hljs-attr inline">count</span>: state.<span class="hljs-property inline">count</span> + state.<span class="hljs-property inline">step</span>,
          <span class="hljs-attr inline">history</span>: [...state.<span class="hljs-property inline">history</span>, { <span class="hljs-attr inline">action</span>: <span class="hljs-string inline">&#x27;increment&#x27;</span>, <span class="hljs-attr inline">value</span>: state.<span class="hljs-property inline">step</span> }]
        };
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;decrement&#x27;</span>:
        <span class="hljs-keyword inline">return</span> {
          ...state,
          <span class="hljs-attr inline">count</span>: state.<span class="hljs-property inline">count</span> - state.<span class="hljs-property inline">step</span>,
          <span class="hljs-attr inline">history</span>: [...state.<span class="hljs-property inline">history</span>, { <span class="hljs-attr inline">action</span>: <span class="hljs-string inline">&#x27;decrement&#x27;</span>, <span class="hljs-attr inline">value</span>: state.<span class="hljs-property inline">step</span> }]
        };
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;setStep&#x27;</span>:
        <span class="hljs-keyword inline">return</span> {
          ...state,
          <span class="hljs-attr inline">step</span>: action.<span class="hljs-property inline">payload</span>
        };
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;reset&#x27;</span>:
        <span class="hljs-keyword inline">return</span> {
          ...initialState
        };
      <span class="hljs-attr inline">default</span>:
        <span class="hljs-keyword inline">return</span> state;
    }
  }

  <span class="hljs-keyword inline">const</span> [state, dispatch] = <span class="hljs-title function_ inline">useReducer</span>(reducer, initialState);

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>计数: {state.count}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>步长: {state.step}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">input</span>
        <span class="hljs-attr inline">type</span>=<span class="hljs-string inline">&quot;number&quot;</span>
        <span class="hljs-attr inline">value</span>=<span class="hljs-string inline">{state.step}</span>
        <span class="hljs-attr inline">onChange</span>=<span class="hljs-string inline">{(e)</span> =&gt;</span> dispatch({ 
          type: &#x27;setStep&#x27;, 
          payload: parseInt(e.target.value) || 1 
        })}
      /&gt;
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> dispatch({ type: &#x27;increment&#x27; })}&gt;
        增加 {state.step}
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> dispatch({ type: &#x27;decrement&#x27; })}&gt;
        减少 {state.step}
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> dispatch({ type: &#x27;reset&#x27; })}&gt;重置<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
      
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">h3</span>&gt;</span>操作历史:<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">h3</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">ul</span>&gt;</span>
        {state.history.map((item, index) =&gt; (
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">li</span> <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{index}</span>&gt;</span>
            {item.action} {item.value}
          <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">li</span>&gt;</span>
        ))}
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">ul</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="表单状态管理" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#表单状态管理" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 表单状态管理">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">表单状态管理</strong>
        </h3>
<h4 id="复杂表单处理" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#复杂表单处理" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 复杂表单处理">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">复杂表单处理</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20FormWithReducer()%20%7B%0Aconst%20initialState%20%3D%20%7B%0Avalues%3A%20%7B%0Aname%3A%20''%2C%0Aemail%3A%20''%2C%0Aage%3A%20''%2C%0Apreferences%3A%20%5B%5D%0A%7D%2C%0Aerrors%3A%20%7B%7D%2C%0AisSubmitting%3A%20false%2C%0AisValid%3A%20false%0A%7D%3B%0Afunction%20formReducer(state%2C%20action)%20%7B%0Aswitch%20(action.type)%20%7B%0Acase%20'SET_FIELD'%3A%0Areturn%20%7B%0A...state%2C%0Avalues%3A%20%7B%0A...state.values%2C%0A%5Baction.field%5D%3A%20action.value%0A%7D%0A%7D%3B%0Acase%20'SET_ERROR'%3A%0Areturn%20%7B%0A...state%2C%0Aerrors%3A%20%7B%0A...state.errors%2C%0A%5Baction.field%5D%3A%20action.error%0A%7D%0A%7D%3B%0Acase%20'CLEAR_ERROR'%3A%0Aconst%20newErrors%20%3D%20%7B%20...state.errors%20%7D%3B%0Adelete%20newErrors%5Baction.field%5D%3B%0Areturn%20%7B%0A...state%2C%0Aerrors%3A%20newErrors%0A%7D%3B%0Acase%20'ADD_PREFERENCE'%3A%0Areturn%20%7B%0A...state%2C%0Avalues%3A%20%7B%0A...state.values%2C%0Apreferences%3A%20%5B...state.values.preferences%2C%20action.preference%5D%0A%7D%0A%7D%3B%0Acase%20'REMOVE_PREFERENCE'%3A%0Areturn%20%7B%0A...state%2C%0Avalues%3A%20%7B%0A...state.values%2C%0Apreferences%3A%20state.values.preferences.filter(p%20%3D%3E%20p%20!%3D%3D%20action.preference)%0A%7D%0A%7D%3B%0Acase%20'SET_SUBMITTING'%3A%0Areturn%20%7B%0A...state%2C%0AisSubmitting%3A%20action.isSubmitting%0A%7D%3B%0Acase%20'RESET_FORM'%3A%0Areturn%20initialState%3B%0Adefault%3A%0Areturn%20state%3B%0A%7D%0A%7D%0Aconst%20%5Bstate%2C%20dispatch%5D%20%3D%20useReducer(formReducer%2C%20initialState)%3B%0Aconst%20handleFieldChange%20%3D%20(field%2C%20value)%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'SET_FIELD'%2C%20field%2C%20value%20%7D)%3B%0A%2F%2F%20%E5%AE%9E%E6%97%B6%E9%AA%8C%E8%AF%81%0Aif%20(field%20%3D%3D%3D%20'email'%20%26%26%20value%20%26%26%20!value.includes('%40'))%20%7B%0Adispatch(%7B%20type%3A%20'SET_ERROR'%2C%20field%2C%20error%3A%20'%E8%AF%B7%E8%BE%93%E5%85%A5%E6%9C%89%E6%95%88%E7%9A%84%E9%82%AE%E7%AE%B1%E5%9C%B0%E5%9D%80'%20%7D)%3B%0A%7D%20else%20%7B%0Adispatch(%7B%20type%3A%20'CLEAR_ERROR'%2C%20field%20%7D)%3B%0A%7D%0A%7D%3B%0Aconst%20handleSubmit%20%3D%20async%20(e)%20%3D%3E%20%7B%0Ae.preventDefault()%3B%0Adispatch(%7B%20type%3A%20'SET_SUBMITTING'%2C%20isSubmitting%3A%20true%20%7D)%3B%0Atry%20%7B%0A%2F%2F%20%E6%A8%A1%E6%8B%9FAPI%E8%B0%83%E7%94%A8%0Aawait%20new%20Promise(resolve%20%3D%3E%20setTimeout(resolve%2C%202000))%3B%0Aconsole.log('%E8%A1%A8%E5%8D%95%E6%8F%90%E4%BA%A4%E6%88%90%E5%8A%9F%3A'%2C%20state.values)%3B%0Adispatch(%7B%20type%3A%20'RESET_FORM'%20%7D)%3B%0A%7D%20catch%20(error)%20%7B%0Aconsole.error('%E6%8F%90%E4%BA%A4%E5%A4%B1%E8%B4%A5%3A'%2C%20error)%3B%0A%7D%20finally%20%7B%0Adispatch(%7B%20type%3A%20'SET_SUBMITTING'%2C%20isSubmitting%3A%20false%20%7D)%3B%0A%7D%0A%7D%3B%0Areturn%20(%0Aform%20onSubmit%3D%7BhandleSubmit%7D%3E%0Adiv%3E%0Alabel%3E%E5%A7%93%E5%90%8D%3Alabel%3E%0Ainput%0Avalue%3D%7Bstate.values.name%7D%0AonChange%3D%7B(e)%20%3D%3E%20handleFieldChange('name'%2C%20e.target.value)%7D%0A%2F%3E%0A%7Bstate.errors.name%20%26%26%20span%20style%3D%7B%7Bcolor%3A%20'red'%7D%7D%3E%7Bstate.errors.name%7Dspan%3E%7D%0Adiv%3E%0Adiv%3E%0Alabel%3E%E9%82%AE%E7%AE%B1%3Alabel%3E%0Ainput%0Avalue%3D%7Bstate.values.email%7D%0AonChange%3D%7B(e)%20%3D%3E%20handleFieldChange('email'%2C%20e.target.value)%7D%0A%2F%3E%0A%7Bstate.errors.email%20%26%26%20span%20style%3D%7B%7Bcolor%3A%20'red'%7D%7D%3E%7Bstate.errors.email%7Dspan%3E%7D%0Adiv%3E%0Adiv%3E%0Alabel%3E%E5%B9%B4%E9%BE%84%3Alabel%3E%0Ainput%0Atype%3D%22number%22%0Avalue%3D%7Bstate.values.age%7D%0AonChange%3D%7B(e)%20%3D%3E%20handleFieldChange('age'%2C%20e.target.value)%7D%0A%2F%3E%0Adiv%3E%0Adiv%3E%0Alabel%3E%E5%81%8F%E5%A5%BD%3Alabel%3E%0A%7B%5B'%E6%8A%80%E6%9C%AF'%2C%20'%E8%AE%BE%E8%AE%A1'%2C%20'%E7%AE%A1%E7%90%86'%5D.map(pref%20%3D%3E%20(%0Alabel%20key%3D%7Bpref%7D%3E%0Ainput%0Atype%3D%22checkbox%22%0Achecked%3D%7Bstate.values.preferences.includes(pref)%7D%0AonChange%3D%7B(e)%20%3D%3E%20%7B%0Aif%20(e.target.checked)%20%7B%0Adispatch(%7B%20type%3A%20'ADD_PREFERENCE'%2C%20preference%3A%20pref%20%7D)%3B%0A%7D%20else%20%7B%0Adispatch(%7B%20type%3A%20'REMOVE_PREFERENCE'%2C%20preference%3A%20pref%20%7D)%3B%0A%7D%0A%7D%7D%0A%2F%3E%0A%7Bpref%7D%0Alabel%3E%0A))%7D%0Adiv%3E%0Abutton%20type%3D%22submit%22%20disabled%3D%7Bstate.isSubmitting%7D%3E%0A%7Bstate.isSubmitting%20%3F%20'%E6%8F%90%E4%BA%A4%E4%B8%AD...'%20%3A%20'%E6%8F%90%E4%BA%A4'%7D%0Abutton%3E%0Aform%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">FormWithReducer</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> initialState = {
    <span class="hljs-attr inline">values</span>: {
      <span class="hljs-attr inline">name</span>: <span class="hljs-string inline">&#x27;&#x27;</span>,
      <span class="hljs-attr inline">email</span>: <span class="hljs-string inline">&#x27;&#x27;</span>,
      <span class="hljs-attr inline">age</span>: <span class="hljs-string inline">&#x27;&#x27;</span>,
      <span class="hljs-attr inline">preferences</span>: []
    },
    <span class="hljs-attr inline">errors</span>: {},
    <span class="hljs-attr inline">isSubmitting</span>: <span class="hljs-literal inline">false</span>,
    <span class="hljs-attr inline">isValid</span>: <span class="hljs-literal inline">false</span>
  };

  <span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">formReducer</span>(<span class="hljs-params inline">state, action</span>) {
    <span class="hljs-keyword inline">switch</span> (action.<span class="hljs-property inline">type</span>) {
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;SET_FIELD&#x27;</span>:
        <span class="hljs-keyword inline">return</span> {
          ...state,
          <span class="hljs-attr inline">values</span>: {
            ...state.<span class="hljs-property inline">values</span>,
            [action.<span class="hljs-property inline">field</span>]: action.<span class="hljs-property inline">value</span>
          }
        };
      
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;SET_ERROR&#x27;</span>:
        <span class="hljs-keyword inline">return</span> {
          ...state,
          <span class="hljs-attr inline">errors</span>: {
            ...state.<span class="hljs-property inline">errors</span>,
            [action.<span class="hljs-property inline">field</span>]: action.<span class="hljs-property inline">error</span>
          }
        };
      
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;CLEAR_ERROR&#x27;</span>:
        <span class="hljs-keyword inline">const</span> newErrors = { ...state.<span class="hljs-property inline">errors</span> };
        <span class="hljs-keyword inline">delete</span> newErrors[action.<span class="hljs-property inline">field</span>];
        <span class="hljs-keyword inline">return</span> {
          ...state,
          <span class="hljs-attr inline">errors</span>: newErrors
        };
      
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;ADD_PREFERENCE&#x27;</span>:
        <span class="hljs-keyword inline">return</span> {
          ...state,
          <span class="hljs-attr inline">values</span>: {
            ...state.<span class="hljs-property inline">values</span>,
            <span class="hljs-attr inline">preferences</span>: [...state.<span class="hljs-property inline">values</span>.<span class="hljs-property inline">preferences</span>, action.<span class="hljs-property inline">preference</span>]
          }
        };
      
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;REMOVE_PREFERENCE&#x27;</span>:
        <span class="hljs-keyword inline">return</span> {
          ...state,
          <span class="hljs-attr inline">values</span>: {
            ...state.<span class="hljs-property inline">values</span>,
            <span class="hljs-attr inline">preferences</span>: state.<span class="hljs-property inline">values</span>.<span class="hljs-property inline">preferences</span>.<span class="hljs-title function_ inline">filter</span>(<span class="hljs-function inline"><span class="hljs-params inline">p</span> =&gt;</span> p !== action.<span class="hljs-property inline">preference</span>)
          }
        };
      
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;SET_SUBMITTING&#x27;</span>:
        <span class="hljs-keyword inline">return</span> {
          ...state,
          <span class="hljs-attr inline">isSubmitting</span>: action.<span class="hljs-property inline">isSubmitting</span>
        };
      
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;RESET_FORM&#x27;</span>:
        <span class="hljs-keyword inline">return</span> initialState;
      
      <span class="hljs-attr inline">default</span>:
        <span class="hljs-keyword inline">return</span> state;
    }
  }

  <span class="hljs-keyword inline">const</span> [state, dispatch] = <span class="hljs-title function_ inline">useReducer</span>(formReducer, initialState);

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">handleFieldChange</span> = (<span class="hljs-params inline">field, value</span>) =&gt; {
    <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;SET_FIELD&#x27;</span>, field, value });
    
    <span class="hljs-comment inline">// 实时验证</span>
    <span class="hljs-keyword inline">if</span> (field === <span class="hljs-string inline">&#x27;email&#x27;</span> &amp;&amp; value &amp;&amp; !value.<span class="hljs-title function_ inline">includes</span>(<span class="hljs-string inline">&#x27;@&#x27;</span>)) {
      <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;SET_ERROR&#x27;</span>, field, <span class="hljs-attr inline">error</span>: <span class="hljs-string inline">&#x27;请输入有效的邮箱地址&#x27;</span> });
    } <span class="hljs-keyword inline">else</span> {
      <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;CLEAR_ERROR&#x27;</span>, field });
    }
  };

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">handleSubmit</span> = <span class="hljs-keyword inline">async</span> (<span class="hljs-params inline">e</span>) =&gt; {
    e.<span class="hljs-title function_ inline">preventDefault</span>();
    <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;SET_SUBMITTING&#x27;</span>, <span class="hljs-attr inline">isSubmitting</span>: <span class="hljs-literal inline">true</span> });
    
    <span class="hljs-keyword inline">try</span> {
      <span class="hljs-comment inline">// 模拟API调用</span>
      <span class="hljs-keyword inline">await</span> <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">Promise</span>(<span class="hljs-function inline"><span class="hljs-params inline">resolve</span> =&gt;</span> <span class="hljs-built_in inline">setTimeout</span>(resolve, <span class="hljs-number inline">2000</span>));
      <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;表单提交成功:&#x27;</span>, state.<span class="hljs-property inline">values</span>);
      <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;RESET_FORM&#x27;</span> });
    } <span class="hljs-keyword inline">catch</span> (error) {
      <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">error</span>(<span class="hljs-string inline">&#x27;提交失败:&#x27;</span>, error);
    } <span class="hljs-keyword inline">finally</span> {
      <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;SET_SUBMITTING&#x27;</span>, <span class="hljs-attr inline">isSubmitting</span>: <span class="hljs-literal inline">false</span> });
    }
  };

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">form</span> <span class="hljs-attr inline">onSubmit</span>=<span class="hljs-string inline">{handleSubmit}</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">label</span>&gt;</span>姓名:<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">label</span>&gt;</span>
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">input</span>
          <span class="hljs-attr inline">value</span>=<span class="hljs-string inline">{state.values.name}</span>
          <span class="hljs-attr inline">onChange</span>=<span class="hljs-string inline">{(e)</span> =&gt;</span> handleFieldChange(&#x27;name&#x27;, e.target.value)}
        /&gt;
        {state.errors.name &amp;&amp; <span class="hljs-tag inline">&lt;<span class="hljs-name inline">span</span> <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{color:</span> &#x27;<span class="hljs-attr inline">red</span>&#x27;}}&gt;</span>{state.errors.name}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">span</span>&gt;</span>}
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>

      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">label</span>&gt;</span>邮箱:<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">label</span>&gt;</span>
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">input</span>
          <span class="hljs-attr inline">value</span>=<span class="hljs-string inline">{state.values.email}</span>
          <span class="hljs-attr inline">onChange</span>=<span class="hljs-string inline">{(e)</span> =&gt;</span> handleFieldChange(&#x27;email&#x27;, e.target.value)}
        /&gt;
        {state.errors.email &amp;&amp; <span class="hljs-tag inline">&lt;<span class="hljs-name inline">span</span> <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{color:</span> &#x27;<span class="hljs-attr inline">red</span>&#x27;}}&gt;</span>{state.errors.email}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">span</span>&gt;</span>}
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>

      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">label</span>&gt;</span>年龄:<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">label</span>&gt;</span>
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">input</span>
          <span class="hljs-attr inline">type</span>=<span class="hljs-string inline">&quot;number&quot;</span>
          <span class="hljs-attr inline">value</span>=<span class="hljs-string inline">{state.values.age}</span>
          <span class="hljs-attr inline">onChange</span>=<span class="hljs-string inline">{(e)</span> =&gt;</span> handleFieldChange(&#x27;age&#x27;, e.target.value)}
        /&gt;
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>

      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">label</span>&gt;</span>偏好:<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">label</span>&gt;</span>
        {[&#x27;技术&#x27;, &#x27;设计&#x27;, &#x27;管理&#x27;].map(pref =&gt; (
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">label</span> <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{pref}</span>&gt;</span>
            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">input</span>
              <span class="hljs-attr inline">type</span>=<span class="hljs-string inline">&quot;checkbox&quot;</span>
              <span class="hljs-attr inline">checked</span>=<span class="hljs-string inline">{state.values.preferences.includes(pref)}</span>
              <span class="hljs-attr inline">onChange</span>=<span class="hljs-string inline">{(e)</span> =&gt;</span> {
                if (e.target.checked) {
                  dispatch({ type: &#x27;ADD_PREFERENCE&#x27;, preference: pref });
                } else {
                  dispatch({ type: &#x27;REMOVE_PREFERENCE&#x27;, preference: pref });
                }
              }}
            /&gt;
            {pref}
          <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">label</span>&gt;</span>
        ))}
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>

      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">type</span>=<span class="hljs-string inline">&quot;submit&quot;</span> <span class="hljs-attr inline">disabled</span>=<span class="hljs-string inline">{state.isSubmitting}</span>&gt;</span>
        {state.isSubmitting ? &#x27;提交中...&#x27; : &#x27;提交&#x27;}
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">form</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="购物车状态管理" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#购物车状态管理" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 购物车状态管理">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">购物车状态管理</strong>
        </h3>
<h4 id="电商购物车示例" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#电商购物车示例" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 电商购物车示例">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">电商购物车示例</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20ShoppingCart()%20%7B%0Aconst%20initialState%20%3D%20%7B%0Aitems%3A%20%5B%5D%2C%0Atotal%3A%200%2C%0Adiscount%3A%200%2C%0AcouponCode%3A%20''%2C%0AisLoading%3A%20false%0A%7D%3B%0Afunction%20cartReducer(state%2C%20action)%20%7B%0Aswitch%20(action.type)%20%7B%0Acase%20'ADD_ITEM'%3A%0Aconst%20existingItem%20%3D%20state.items.find(item%20%3D%3E%20item.id%20%3D%3D%3D%20action.item.id)%3B%0Alet%20newItems%3B%0Aif%20(existingItem)%20%7B%0AnewItems%20%3D%20state.items.map(item%20%3D%3E%0Aitem.id%20%3D%3D%3D%20action.item.id%0A%3F%20%7B%20...item%2C%20quantity%3A%20item.quantity%20%2B%201%20%7D%0A%3A%20item%0A)%3B%0A%7D%20else%20%7B%0AnewItems%20%3D%20%5B...state.items%2C%20%7B%20...action.item%2C%20quantity%3A%201%20%7D%5D%3B%0A%7D%0Areturn%20%7B%0A...state%2C%0Aitems%3A%20newItems%2C%0Atotal%3A%20calculateTotal(newItems%2C%20state.discount)%0A%7D%3B%0Acase%20'REMOVE_ITEM'%3A%0Aconst%20filteredItems%20%3D%20state.items.filter(item%20%3D%3E%20item.id%20!%3D%3D%20action.itemId)%3B%0Areturn%20%7B%0A...state%2C%0Aitems%3A%20filteredItems%2C%0Atotal%3A%20calculateTotal(filteredItems%2C%20state.discount)%0A%7D%3B%0Acase%20'UPDATE_QUANTITY'%3A%0Aconst%20updatedItems%20%3D%20state.items.map(item%20%3D%3E%0Aitem.id%20%3D%3D%3D%20action.itemId%0A%3F%20%7B%20...item%2C%20quantity%3A%20Math.max(0%2C%20action.quantity)%20%7D%0A%3A%20item%0A).filter(item%20%3D%3E%20item.quantity%20%3E%200)%3B%0Areturn%20%7B%0A...state%2C%0Aitems%3A%20updatedItems%2C%0Atotal%3A%20calculateTotal(updatedItems%2C%20state.discount)%0A%7D%3B%0Acase%20'APPLY_COUPON'%3A%0Aconst%20discount%20%3D%20calculateDiscount(action.couponCode%2C%20state.items)%3B%0Areturn%20%7B%0A...state%2C%0AcouponCode%3A%20action.couponCode%2C%0Adiscount%2C%0Atotal%3A%20calculateTotal(state.items%2C%20discount)%0A%7D%3B%0Acase%20'CLEAR_CART'%3A%0Areturn%20initialState%3B%0Acase%20'SET_LOADING'%3A%0Areturn%20%7B%0A...state%2C%0AisLoading%3A%20action.isLoading%0A%7D%3B%0Adefault%3A%0Areturn%20state%3B%0A%7D%0A%7D%0A%2F%2F%20%E8%BE%85%E5%8A%A9%E5%87%BD%E6%95%B0%0Aconst%20calculateTotal%20%3D%20(items%2C%20discount%20%3D%200)%20%3D%3E%20%7B%0Aconst%20subtotal%20%3D%20items.reduce((sum%2C%20item)%20%3D%3E%20sum%20%2B%20item.price%20*%20item.quantity%2C%200)%3B%0Areturn%20subtotal%20-%20discount%3B%0A%7D%3B%0Aconst%20calculateDiscount%20%3D%20(couponCode%2C%20items)%20%3D%3E%20%7B%0Aconst%20subtotal%20%3D%20items.reduce((sum%2C%20item)%20%3D%3E%20sum%20%2B%20item.price%20*%20item.quantity%2C%200)%3B%0Aswitch%20(couponCode)%20%7B%0Acase%20'SAVE10'%3A%0Areturn%20subtotal%20*%200.1%3B%0Acase%20'SAVE20'%3A%0Areturn%20subtotal%20*%200.2%3B%0Adefault%3A%0Areturn%200%3B%0A%7D%0A%7D%3B%0Aconst%20%5Bstate%2C%20dispatch%5D%20%3D%20useReducer(cartReducer%2C%20initialState)%3B%0A%2F%2F%20%E5%95%86%E5%93%81%E6%95%B0%E6%8D%AE%0Aconst%20products%20%3D%20%5B%0A%7B%20id%3A%201%2C%20name%3A%20'iPhone%2015'%2C%20price%3A%205999%20%7D%2C%0A%7B%20id%3A%202%2C%20name%3A%20'MacBook%20Pro'%2C%20price%3A%2015999%20%7D%2C%0A%7B%20id%3A%203%2C%20name%3A%20'AirPods'%2C%20price%3A%201299%20%7D%0A%5D%3B%0Aconst%20addToCart%20%3D%20(product)%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'ADD_ITEM'%2C%20item%3A%20product%20%7D)%3B%0A%7D%3B%0Aconst%20removeFromCart%20%3D%20(itemId)%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'REMOVE_ITEM'%2C%20itemId%20%7D)%3B%0A%7D%3B%0Aconst%20updateQuantity%20%3D%20(itemId%2C%20quantity)%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'UPDATE_QUANTITY'%2C%20itemId%2C%20quantity%20%7D)%3B%0A%7D%3B%0Aconst%20applyCoupon%20%3D%20(couponCode)%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'APPLY_COUPON'%2C%20couponCode%20%7D)%3B%0A%7D%3B%0Areturn%20(%0Adiv%3E%0Ah2%3E%E4%BA%A7%E5%93%81%E5%88%97%E8%A1%A8h2%3E%0A%7Bproducts.map(product%20%3D%3E%20(%0Adiv%20key%3D%7Bproduct.id%7D%20style%3D%7B%7B%20border%3A%20'1px%20solid%20%23ccc'%2C%20margin%3A%20'10px'%2C%20padding%3A%20'10px'%20%7D%7D%3E%0Ah3%3E%7Bproduct.name%7Dh3%3E%0Ap%3E%E4%BB%B7%E6%A0%BC%3A%20%C2%A5%7Bproduct.price%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20addToCart(product)%7D%3E%E5%8A%A0%E5%85%A5%E8%B4%AD%E7%89%A9%E8%BD%A6button%3E%0Adiv%3E%0A))%7D%0Ah2%3E%E8%B4%AD%E7%89%A9%E8%BD%A6h2%3E%0A%7Bstate.items.length%20%3D%3D%3D%200%20%3F%20(%0Ap%3E%E8%B4%AD%E7%89%A9%E8%BD%A6%E4%B8%BA%E7%A9%BAp%3E%0A)%20%3A%20(%0A%7Bstate.items.map(item%20%3D%3E%20(%0Adiv%20key%3D%7Bitem.id%7D%20style%3D%7B%7B%20border%3A%20'1px%20solid%20%23eee'%2C%20margin%3A%20'5px'%2C%20padding%3A%20'10px'%20%7D%7D%3E%0Ah4%3E%7Bitem.name%7Dh4%3E%0Ap%3E%E5%8D%95%E4%BB%B7%3A%20%C2%A5%7Bitem.price%7Dp%3E%0Adiv%3E%0A%E6%95%B0%E9%87%8F%3A%0Abutton%20onClick%3D%7B()%20%3D%3E%20updateQuantity(item.id%2C%20item.quantity%20-%201)%7D%3E-button%3E%0Aspan%20style%3D%7B%7B%20margin%3A%20'0%2010px'%20%7D%7D%3E%7Bitem.quantity%7Dspan%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20updateQuantity(item.id%2C%20item.quantity%20%2B%201)%7D%3E%2Bbutton%3E%0Adiv%3E%0Ap%3E%E5%B0%8F%E8%AE%A1%3A%20%C2%A5%7Bitem.price%20*%20item.quantity%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20removeFromCart(item.id)%7D%3E%E7%A7%BB%E9%99%A4button%3E%0Adiv%3E%0A))%7D%0Adiv%3E%0Ainput%0Aplaceholder%3D%22%E8%BE%93%E5%85%A5%E4%BC%98%E6%83%A0%E5%88%B8%E4%BB%A3%E7%A0%81%22%0AonChange%3D%7B(e)%20%3D%3E%20applyCoupon(e.target.value)%7D%0A%2F%3E%0Ap%3E%E6%8A%98%E6%89%A3%3A%20%C2%A5%7Bstate.discount%7Dp%3E%0Ah3%3E%E6%80%BB%E8%AE%A1%3A%20%C2%A5%7Bstate.total%7Dh3%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20dispatch(%7B%20type%3A%20'CLEAR_CART'%20%7D)%7D%3E%E6%B8%85%E7%A9%BA%E8%B4%AD%E7%89%A9%E8%BD%A6button%3E%0Adiv%3E%0A)%7D%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">ShoppingCart</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> initialState = {
    <span class="hljs-attr inline">items</span>: [],
    <span class="hljs-attr inline">total</span>: <span class="hljs-number inline">0</span>,
    <span class="hljs-attr inline">discount</span>: <span class="hljs-number inline">0</span>,
    <span class="hljs-attr inline">couponCode</span>: <span class="hljs-string inline">&#x27;&#x27;</span>,
    <span class="hljs-attr inline">isLoading</span>: <span class="hljs-literal inline">false</span>
  };

  <span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">cartReducer</span>(<span class="hljs-params inline">state, action</span>) {
    <span class="hljs-keyword inline">switch</span> (action.<span class="hljs-property inline">type</span>) {
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;ADD_ITEM&#x27;</span>:
        <span class="hljs-keyword inline">const</span> existingItem = state.<span class="hljs-property inline">items</span>.<span class="hljs-title function_ inline">find</span>(<span class="hljs-function inline"><span class="hljs-params inline">item</span> =&gt;</span> item.<span class="hljs-property inline">id</span> === action.<span class="hljs-property inline">item</span>.<span class="hljs-property inline">id</span>);
        <span class="hljs-keyword inline">let</span> newItems;
        
        <span class="hljs-keyword inline">if</span> (existingItem) {
          newItems = state.<span class="hljs-property inline">items</span>.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline"><span class="hljs-params inline">item</span> =&gt;</span>
            item.<span class="hljs-property inline">id</span> === action.<span class="hljs-property inline">item</span>.<span class="hljs-property inline">id</span>
              ? { ...item, <span class="hljs-attr inline">quantity</span>: item.<span class="hljs-property inline">quantity</span> + <span class="hljs-number inline">1</span> }
              : item
          );
        } <span class="hljs-keyword inline">else</span> {
          newItems = [...state.<span class="hljs-property inline">items</span>, { ...action.<span class="hljs-property inline">item</span>, <span class="hljs-attr inline">quantity</span>: <span class="hljs-number inline">1</span> }];
        }

        <span class="hljs-keyword inline">return</span> {
          ...state,
          <span class="hljs-attr inline">items</span>: newItems,
          <span class="hljs-attr inline">total</span>: <span class="hljs-title function_ inline">calculateTotal</span>(newItems, state.<span class="hljs-property inline">discount</span>)
        };

      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;REMOVE_ITEM&#x27;</span>:
        <span class="hljs-keyword inline">const</span> filteredItems = state.<span class="hljs-property inline">items</span>.<span class="hljs-title function_ inline">filter</span>(<span class="hljs-function inline"><span class="hljs-params inline">item</span> =&gt;</span> item.<span class="hljs-property inline">id</span> !== action.<span class="hljs-property inline">itemId</span>);
        <span class="hljs-keyword inline">return</span> {
          ...state,
          <span class="hljs-attr inline">items</span>: filteredItems,
          <span class="hljs-attr inline">total</span>: <span class="hljs-title function_ inline">calculateTotal</span>(filteredItems, state.<span class="hljs-property inline">discount</span>)
        };

      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;UPDATE_QUANTITY&#x27;</span>:
        <span class="hljs-keyword inline">const</span> updatedItems = state.<span class="hljs-property inline">items</span>.<span class="hljs-title function_ inline">map</span>(<span class="hljs-function inline"><span class="hljs-params inline">item</span> =&gt;</span>
          item.<span class="hljs-property inline">id</span> === action.<span class="hljs-property inline">itemId</span>
            ? { ...item, <span class="hljs-attr inline">quantity</span>: <span class="hljs-title class_ inline">Math</span>.<span class="hljs-title function_ inline">max</span>(<span class="hljs-number inline">0</span>, action.<span class="hljs-property inline">quantity</span>) }
            : item
        ).<span class="hljs-title function_ inline">filter</span>(<span class="hljs-function inline"><span class="hljs-params inline">item</span> =&gt;</span> item.<span class="hljs-property inline">quantity</span> &gt; <span class="hljs-number inline">0</span>);

        <span class="hljs-keyword inline">return</span> {
          ...state,
          <span class="hljs-attr inline">items</span>: updatedItems,
          <span class="hljs-attr inline">total</span>: <span class="hljs-title function_ inline">calculateTotal</span>(updatedItems, state.<span class="hljs-property inline">discount</span>)
        };

      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;APPLY_COUPON&#x27;</span>:
        <span class="hljs-keyword inline">const</span> discount = <span class="hljs-title function_ inline">calculateDiscount</span>(action.<span class="hljs-property inline">couponCode</span>, state.<span class="hljs-property inline">items</span>);
        <span class="hljs-keyword inline">return</span> {
          ...state,
          <span class="hljs-attr inline">couponCode</span>: action.<span class="hljs-property inline">couponCode</span>,
          discount,
          <span class="hljs-attr inline">total</span>: <span class="hljs-title function_ inline">calculateTotal</span>(state.<span class="hljs-property inline">items</span>, discount)
        };

      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;CLEAR_CART&#x27;</span>:
        <span class="hljs-keyword inline">return</span> initialState;

      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;SET_LOADING&#x27;</span>:
        <span class="hljs-keyword inline">return</span> {
          ...state,
          <span class="hljs-attr inline">isLoading</span>: action.<span class="hljs-property inline">isLoading</span>
        };

      <span class="hljs-attr inline">default</span>:
        <span class="hljs-keyword inline">return</span> state;
    }
  }

  <span class="hljs-comment inline">// 辅助函数</span>
  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">calculateTotal</span> = (<span class="hljs-params inline">items, discount = <span class="hljs-number inline">0</span></span>) =&gt; {
    <span class="hljs-keyword inline">const</span> subtotal = items.<span class="hljs-title function_ inline">reduce</span>(<span class="hljs-function inline">(<span class="hljs-params inline">sum, item</span>) =&gt;</span> sum + item.<span class="hljs-property inline">price</span> * item.<span class="hljs-property inline">quantity</span>, <span class="hljs-number inline">0</span>);
    <span class="hljs-keyword inline">return</span> subtotal - discount;
  };

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">calculateDiscount</span> = (<span class="hljs-params inline">couponCode, items</span>) =&gt; {
    <span class="hljs-keyword inline">const</span> subtotal = items.<span class="hljs-title function_ inline">reduce</span>(<span class="hljs-function inline">(<span class="hljs-params inline">sum, item</span>) =&gt;</span> sum + item.<span class="hljs-property inline">price</span> * item.<span class="hljs-property inline">quantity</span>, <span class="hljs-number inline">0</span>);
    <span class="hljs-keyword inline">switch</span> (couponCode) {
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;SAVE10&#x27;</span>:
        <span class="hljs-keyword inline">return</span> subtotal * <span class="hljs-number inline">0.1</span>;
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;SAVE20&#x27;</span>:
        <span class="hljs-keyword inline">return</span> subtotal * <span class="hljs-number inline">0.2</span>;
      <span class="hljs-attr inline">default</span>:
        <span class="hljs-keyword inline">return</span> <span class="hljs-number inline">0</span>;
    }
  };

  <span class="hljs-keyword inline">const</span> [state, dispatch] = <span class="hljs-title function_ inline">useReducer</span>(cartReducer, initialState);

  <span class="hljs-comment inline">// 商品数据</span>
  <span class="hljs-keyword inline">const</span> products = [
    { <span class="hljs-attr inline">id</span>: <span class="hljs-number inline">1</span>, <span class="hljs-attr inline">name</span>: <span class="hljs-string inline">&#x27;iPhone 15&#x27;</span>, <span class="hljs-attr inline">price</span>: <span class="hljs-number inline">5999</span> },
    { <span class="hljs-attr inline">id</span>: <span class="hljs-number inline">2</span>, <span class="hljs-attr inline">name</span>: <span class="hljs-string inline">&#x27;MacBook Pro&#x27;</span>, <span class="hljs-attr inline">price</span>: <span class="hljs-number inline">15999</span> },
    { <span class="hljs-attr inline">id</span>: <span class="hljs-number inline">3</span>, <span class="hljs-attr inline">name</span>: <span class="hljs-string inline">&#x27;AirPods&#x27;</span>, <span class="hljs-attr inline">price</span>: <span class="hljs-number inline">1299</span> }
  ];

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">addToCart</span> = (<span class="hljs-params inline">product</span>) =&gt; {
    <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;ADD_ITEM&#x27;</span>, <span class="hljs-attr inline">item</span>: product });
  };

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">removeFromCart</span> = (<span class="hljs-params inline">itemId</span>) =&gt; {
    <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;REMOVE_ITEM&#x27;</span>, itemId });
  };

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">updateQuantity</span> = (<span class="hljs-params inline">itemId, quantity</span>) =&gt; {
    <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;UPDATE_QUANTITY&#x27;</span>, itemId, quantity });
  };

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">applyCoupon</span> = (<span class="hljs-params inline">couponCode</span>) =&gt; {
    <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;APPLY_COUPON&#x27;</span>, couponCode });
  };

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">h2</span>&gt;</span>产品列表<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">h2</span>&gt;</span>
      {products.map(product =&gt; (
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span> <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{product.id}</span> <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">border:</span> &#x27;<span class="hljs-attr inline">1px</span> <span class="hljs-attr inline">solid</span> #<span class="hljs-attr inline">ccc</span>&#x27;, <span class="hljs-attr inline">margin:</span> &#x27;<span class="hljs-attr inline">10px</span>&#x27;, <span class="hljs-attr inline">padding:</span> &#x27;<span class="hljs-attr inline">10px</span>&#x27; }}&gt;</span>
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">h3</span>&gt;</span>{product.name}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">h3</span>&gt;</span>
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>价格: ¥{product.price}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> addToCart(product)}&gt;加入购物车<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
      ))}

      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">h2</span>&gt;</span>购物车<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">h2</span>&gt;</span>
      {state.items.length === 0 ? (
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>购物车为空<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      ) : (
        <span class="hljs-tag inline">&lt;&gt;</span>
          {state.items.map(item =&gt; (
            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span> <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{item.id}</span> <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">border:</span> &#x27;<span class="hljs-attr inline">1px</span> <span class="hljs-attr inline">solid</span> #<span class="hljs-attr inline">eee</span>&#x27;, <span class="hljs-attr inline">margin:</span> &#x27;<span class="hljs-attr inline">5px</span>&#x27;, <span class="hljs-attr inline">padding:</span> &#x27;<span class="hljs-attr inline">10px</span>&#x27; }}&gt;</span>
              <span class="hljs-tag inline">&lt;<span class="hljs-name inline">h4</span>&gt;</span>{item.name}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">h4</span>&gt;</span>
              <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>单价: ¥{item.price}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
              <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
                数量: 
                <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> updateQuantity(item.id, item.quantity - 1)}&gt;-<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
                <span class="hljs-tag inline">&lt;<span class="hljs-name inline">span</span> <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">margin:</span> &#x27;<span class="hljs-attr inline">0</span> <span class="hljs-attr inline">10px</span>&#x27; }}&gt;</span>{item.quantity}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">span</span>&gt;</span>
                <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> updateQuantity(item.id, item.quantity + 1)}&gt;+<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
              <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
              <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>小计: ¥{item.price * item.quantity}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
              <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> removeFromCart(item.id)}&gt;移除<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
            <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
          ))}

          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">input</span>
              <span class="hljs-attr inline">placeholder</span>=<span class="hljs-string inline">&quot;输入优惠券代码&quot;</span>
              <span class="hljs-attr inline">onChange</span>=<span class="hljs-string inline">{(e)</span> =&gt;</span> applyCoupon(e.target.value)}
            /&gt;
            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>折扣: ¥{state.discount}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">h3</span>&gt;</span>总计: ¥{state.total}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">h3</span>&gt;</span>
            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> dispatch({ type: &#x27;CLEAR_CART&#x27; })}&gt;清空购物车<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
          <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
        <span class="hljs-tag inline">&lt;/&gt;</span></span>
      )}
    &lt;/div&gt;
  );
}
</code></pre>
            </div>
        
<h3 id="与-usecontext-结合使用" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#与-usecontext-结合使用" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 与 useContext 结合使用">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">与 useContext 结合使用</strong>
        </h3>
<h4 id="全局状态管理" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#全局状态管理" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 全局状态管理">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">全局状态管理</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="%2F%2F%20%E5%88%9B%E5%BB%BA%20Context%0Aconst%20AppContext%20%3D%20React.createContext()%3B%0A%2F%2F%20%E5%88%9D%E5%A7%8B%E7%8A%B6%E6%80%81%0Aconst%20initialState%20%3D%20%7B%0Auser%3A%20null%2C%0Atheme%3A%20'light'%2C%0Anotifications%3A%20%5B%5D%2C%0AisLoading%3A%20false%0A%7D%3B%0A%2F%2F%20Reducer%20%E5%87%BD%E6%95%B0%0Afunction%20appReducer(state%2C%20action)%20%7B%0Aswitch%20(action.type)%20%7B%0Acase%20'SET_USER'%3A%0Areturn%20%7B%0A...state%2C%0Auser%3A%20action.user%0A%7D%3B%0Acase%20'LOGOUT'%3A%0Areturn%20%7B%0A...state%2C%0Auser%3A%20null%0A%7D%3B%0Acase%20'TOGGLE_THEME'%3A%0Areturn%20%7B%0A...state%2C%0Atheme%3A%20state.theme%20%3D%3D%3D%20'light'%20%3F%20'dark'%20%3A%20'light'%0A%7D%3B%0Acase%20'ADD_NOTIFICATION'%3A%0Areturn%20%7B%0A...state%2C%0Anotifications%3A%20%5B...state.notifications%2C%20%7B%0Aid%3A%20Date.now()%2C%0Amessage%3A%20action.message%2C%0Atype%3A%20action.notificationType%20%7C%7C%20'info'%0A%7D%5D%0A%7D%3B%0Acase%20'REMOVE_NOTIFICATION'%3A%0Areturn%20%7B%0A...state%2C%0Anotifications%3A%20state.notifications.filter(n%20%3D%3E%20n.id%20!%3D%3D%20action.id)%0A%7D%3B%0Acase%20'SET_LOADING'%3A%0Areturn%20%7B%0A...state%2C%0AisLoading%3A%20action.isLoading%0A%7D%3B%0Adefault%3A%0Areturn%20state%3B%0A%7D%0A%7D%0A%2F%2F%20Provider%20%E7%BB%84%E4%BB%B6%0Afunction%20AppProvider(%7B%20children%20%7D)%20%7B%0Aconst%20%5Bstate%2C%20dispatch%5D%20%3D%20useReducer(appReducer%2C%20initialState)%3B%0Aconst%20actions%20%3D%20%7B%0Alogin%3A%20(user)%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'SET_USER'%2C%20user%20%7D)%3B%0Adispatch(%7B%20type%3A%20'ADD_NOTIFICATION'%2C%20message%3A%20'%E7%99%BB%E5%BD%95%E6%88%90%E5%8A%9F'%2C%20notificationType%3A%20'success'%20%7D)%3B%0A%7D%2C%0Alogout%3A%20()%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'LOGOUT'%20%7D)%3B%0Adispatch(%7B%20type%3A%20'ADD_NOTIFICATION'%2C%20message%3A%20'%E5%B7%B2%E9%80%80%E5%87%BA%E7%99%BB%E5%BD%95'%2C%20notificationType%3A%20'info'%20%7D)%3B%0A%7D%2C%0AtoggleTheme%3A%20()%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'TOGGLE_THEME'%20%7D)%3B%0A%7D%2C%0AaddNotification%3A%20(message%2C%20type)%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'ADD_NOTIFICATION'%2C%20message%2C%20notificationType%3A%20type%20%7D)%3B%0A%7D%2C%0AremoveNotification%3A%20(id)%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'REMOVE_NOTIFICATION'%2C%20id%20%7D)%3B%0A%7D%2C%0AsetLoading%3A%20(isLoading)%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'SET_LOADING'%2C%20isLoading%20%7D)%3B%0A%7D%0A%7D%3B%0Areturn%20(%0AAppContext.Provider%20value%3D%7B%7B%20state%2C%20actions%20%7D%7D%3E%0A%7Bchildren%7D%0AAppContext.Provider%3E%0A)%3B%0A%7D%0A%2F%2F%20%E8%87%AA%E5%AE%9A%E4%B9%89%20Hook%0Afunction%20useAppContext()%20%7B%0Aconst%20context%20%3D%20useContext(AppContext)%3B%0Aif%20(!context)%20%7B%0Athrow%20new%20Error('useAppContext%20%E5%BF%85%E9%A1%BB%E5%9C%A8%20AppProvider%20%E5%86%85%E9%83%A8%E4%BD%BF%E7%94%A8')%3B%0A%7D%0Areturn%20context%3B%0A%7D%0A%2F%2F%20%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B%E7%BB%84%E4%BB%B6%0Afunction%20Header()%20%7B%0Aconst%20%7B%20state%2C%20actions%20%7D%20%3D%20useAppContext()%3B%0Areturn%20(%0Aheader%20style%3D%7B%7B%0Abackground%3A%20state.theme%20%3D%3D%3D%20'light'%20%3F%20'%23fff'%20%3A%20'%23333'%2C%0Acolor%3A%20state.theme%20%3D%3D%3D%20'light'%20%3F%20'%23333'%20%3A%20'%23fff'%2C%0Apadding%3A%20'1rem'%0A%7D%7D%3E%0Ah1%3E%E6%88%91%E7%9A%84%E5%BA%94%E7%94%A8h1%3E%0Adiv%3E%0A%7Bstate.user%20%3F%20(%0Adiv%3E%0Aspan%3E%E6%AC%A2%E8%BF%8E%2C%20%7Bstate.user.name%7Dspan%3E%0Abutton%20onClick%3D%7Bactions.logout%7D%3E%E9%80%80%E5%87%BAbutton%3E%0Adiv%3E%0A)%20%3A%20(%0Abutton%20onClick%3D%7B()%20%3D%3E%20actions.login(%7B%20name%3A%20'%E7%94%A8%E6%88%B7'%2C%20id%3A%201%20%7D)%7D%3E%0A%E7%99%BB%E5%BD%95%0Abutton%3E%0A)%7D%0Abutton%20onClick%3D%7Bactions.toggleTheme%7D%3E%0A%E5%88%87%E6%8D%A2%E5%88%B0%20%7Bstate.theme%20%3D%3D%3D%20'light'%20%3F%20'%E6%9A%97%E8%89%B2'%20%3A%20'%E4%BA%AE%E8%89%B2'%7D%20%E4%B8%BB%E9%A2%98%0Abutton%3E%0Adiv%3E%0Aheader%3E%0A)%3B%0A%7D%0Afunction%20NotificationList()%20%7B%0Aconst%20%7B%20state%2C%20actions%20%7D%20%3D%20useAppContext()%3B%0Areturn%20(%0Adiv%3E%0A%7Bstate.notifications.map(notification%20%3D%3E%20(%0Adiv%0Akey%3D%7Bnotification.id%7D%0Astyle%3D%7B%7B%0Apadding%3A%20'10px'%2C%0Amargin%3A%20'5px'%2C%0Abackground%3A%20notification.type%20%3D%3D%3D%20'success'%20%3F%20'green'%20%3A%0Anotification.type%20%3D%3D%3D%20'error'%20%3F%20'red'%20%3A%20'blue'%2C%0Acolor%3A%20'white'%0A%7D%7D%0A%3E%0A%7Bnotification.message%7D%0Abutton%20onClick%3D%7B()%20%3D%3E%20actions.removeNotification(notification.id)%7D%3E%0A%C3%97%0Abutton%3E%0Adiv%3E%0A))%7D%0Adiv%3E%0A)%3B%0A%7D%0A%2F%2F%20%E4%B8%BB%E5%BA%94%E7%94%A8%0Afunction%20App()%20%7B%0Areturn%20(%0AAppProvider%3E%0AHeader%20%2F%3E%0ANotificationList%20%2F%3E%0AAppProvider%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-comment inline">// 创建 Context</span>
<span class="hljs-keyword inline">const</span> <span class="hljs-title class_ inline">AppContext</span> = <span class="hljs-title class_ inline">React</span>.<span class="hljs-title function_ inline">createContext</span>();

<span class="hljs-comment inline">// 初始状态</span>
<span class="hljs-keyword inline">const</span> initialState = {
  <span class="hljs-attr inline">user</span>: <span class="hljs-literal inline">null</span>,
  <span class="hljs-attr inline">theme</span>: <span class="hljs-string inline">&#x27;light&#x27;</span>,
  <span class="hljs-attr inline">notifications</span>: [],
  <span class="hljs-attr inline">isLoading</span>: <span class="hljs-literal inline">false</span>
};

<span class="hljs-comment inline">// Reducer 函数</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">appReducer</span>(<span class="hljs-params inline">state, action</span>) {
  <span class="hljs-keyword inline">switch</span> (action.<span class="hljs-property inline">type</span>) {
    <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;SET_USER&#x27;</span>:
      <span class="hljs-keyword inline">return</span> {
        ...state,
        <span class="hljs-attr inline">user</span>: action.<span class="hljs-property inline">user</span>
      };
    
    <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;LOGOUT&#x27;</span>:
      <span class="hljs-keyword inline">return</span> {
        ...state,
        <span class="hljs-attr inline">user</span>: <span class="hljs-literal inline">null</span>
      };
    
    <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;TOGGLE_THEME&#x27;</span>:
      <span class="hljs-keyword inline">return</span> {
        ...state,
        <span class="hljs-attr inline">theme</span>: state.<span class="hljs-property inline">theme</span> === <span class="hljs-string inline">&#x27;light&#x27;</span> ? <span class="hljs-string inline">&#x27;dark&#x27;</span> : <span class="hljs-string inline">&#x27;light&#x27;</span>
      };
    
    <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;ADD_NOTIFICATION&#x27;</span>:
      <span class="hljs-keyword inline">return</span> {
        ...state,
        <span class="hljs-attr inline">notifications</span>: [...state.<span class="hljs-property inline">notifications</span>, {
          <span class="hljs-attr inline">id</span>: <span class="hljs-title class_ inline">Date</span>.<span class="hljs-title function_ inline">now</span>(),
          <span class="hljs-attr inline">message</span>: action.<span class="hljs-property inline">message</span>,
          <span class="hljs-attr inline">type</span>: action.<span class="hljs-property inline">notificationType</span> || <span class="hljs-string inline">&#x27;info&#x27;</span>
        }]
      };
    
    <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;REMOVE_NOTIFICATION&#x27;</span>:
      <span class="hljs-keyword inline">return</span> {
        ...state,
        <span class="hljs-attr inline">notifications</span>: state.<span class="hljs-property inline">notifications</span>.<span class="hljs-title function_ inline">filter</span>(<span class="hljs-function inline"><span class="hljs-params inline">n</span> =&gt;</span> n.<span class="hljs-property inline">id</span> !== action.<span class="hljs-property inline">id</span>)
      };
    
    <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;SET_LOADING&#x27;</span>:
      <span class="hljs-keyword inline">return</span> {
        ...state,
        <span class="hljs-attr inline">isLoading</span>: action.<span class="hljs-property inline">isLoading</span>
      };
    
    <span class="hljs-attr inline">default</span>:
      <span class="hljs-keyword inline">return</span> state;
  }
}

<span class="hljs-comment inline">// Provider 组件</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">AppProvider</span>(<span class="hljs-params inline">{ children }</span>) {
  <span class="hljs-keyword inline">const</span> [state, dispatch] = <span class="hljs-title function_ inline">useReducer</span>(appReducer, initialState);

  <span class="hljs-keyword inline">const</span> actions = {
    <span class="hljs-attr inline">login</span>: <span class="hljs-function inline">(<span class="hljs-params inline">user</span>) =&gt;</span> {
      <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;SET_USER&#x27;</span>, user });
      <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;ADD_NOTIFICATION&#x27;</span>, <span class="hljs-attr inline">message</span>: <span class="hljs-string inline">&#x27;登录成功&#x27;</span>, <span class="hljs-attr inline">notificationType</span>: <span class="hljs-string inline">&#x27;success&#x27;</span> });
    },
    
    <span class="hljs-attr inline">logout</span>: <span class="hljs-function inline">() =&gt;</span> {
      <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;LOGOUT&#x27;</span> });
      <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;ADD_NOTIFICATION&#x27;</span>, <span class="hljs-attr inline">message</span>: <span class="hljs-string inline">&#x27;已退出登录&#x27;</span>, <span class="hljs-attr inline">notificationType</span>: <span class="hljs-string inline">&#x27;info&#x27;</span> });
    },
    
    <span class="hljs-attr inline">toggleTheme</span>: <span class="hljs-function inline">() =&gt;</span> {
      <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;TOGGLE_THEME&#x27;</span> });
    },
    
    <span class="hljs-attr inline">addNotification</span>: <span class="hljs-function inline">(<span class="hljs-params inline">message, type</span>) =&gt;</span> {
      <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;ADD_NOTIFICATION&#x27;</span>, message, <span class="hljs-attr inline">notificationType</span>: type });
    },
    
    <span class="hljs-attr inline">removeNotification</span>: <span class="hljs-function inline">(<span class="hljs-params inline">id</span>) =&gt;</span> {
      <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;REMOVE_NOTIFICATION&#x27;</span>, id });
    },
    
    <span class="hljs-attr inline">setLoading</span>: <span class="hljs-function inline">(<span class="hljs-params inline">isLoading</span>) =&gt;</span> {
      <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;SET_LOADING&#x27;</span>, isLoading });
    }
  };

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">AppContext.Provider</span> <span class="hljs-attr inline">value</span>=<span class="hljs-string inline">{{</span> <span class="hljs-attr inline">state</span>, <span class="hljs-attr inline">actions</span> }}&gt;</span>
      {children}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">AppContext.Provider</span>&gt;</span></span>
  );
}

<span class="hljs-comment inline">// 自定义 Hook</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">useAppContext</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> context = <span class="hljs-title function_ inline">useContext</span>(<span class="hljs-title class_ inline">AppContext</span>);
  <span class="hljs-keyword inline">if</span> (!context) {
    <span class="hljs-keyword inline">throw</span> <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">Error</span>(<span class="hljs-string inline">&#x27;useAppContext 必须在 AppProvider 内部使用&#x27;</span>);
  }
  <span class="hljs-keyword inline">return</span> context;
}

<span class="hljs-comment inline">// 使用示例组件</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">Header</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> { state, actions } = <span class="hljs-title function_ inline">useAppContext</span>();

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">header</span> <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{</span> 
      <span class="hljs-attr inline">background:</span> <span class="hljs-attr inline">state.theme</span> === <span class="hljs-string inline">&#x27;light&#x27;</span> ? &#x27;#<span class="hljs-attr inline">fff</span>&#x27; <span class="hljs-attr inline">:</span> &#x27;#<span class="hljs-attr inline">333</span>&#x27;,
      <span class="hljs-attr inline">color:</span> <span class="hljs-attr inline">state.theme</span> === <span class="hljs-string inline">&#x27;light&#x27;</span> ? &#x27;#<span class="hljs-attr inline">333</span>&#x27; <span class="hljs-attr inline">:</span> &#x27;#<span class="hljs-attr inline">fff</span>&#x27;,
      <span class="hljs-attr inline">padding:</span> &#x27;<span class="hljs-attr inline">1rem</span>&#x27;
    }}&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">h1</span>&gt;</span>我的应用<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">h1</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
        {state.user ? (
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">span</span>&gt;</span>欢迎, {state.user.name}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">span</span>&gt;</span>
            <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{actions.logout}</span>&gt;</span>退出<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
          <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
        ) : (
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> actions.login({ name: &#x27;用户&#x27;, id: 1 })}&gt;
            登录
          <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
        )}
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{actions.toggleTheme}</span>&gt;</span>
          切换到 {state.theme === &#x27;light&#x27; ? &#x27;暗色&#x27; : &#x27;亮色&#x27;} 主题
        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">header</span>&gt;</span></span>
  );
}

<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">NotificationList</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> { state, actions } = <span class="hljs-title function_ inline">useAppContext</span>();

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      {state.notifications.map(notification =&gt; (
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span> 
          <span class="hljs-attr inline">key</span>=<span class="hljs-string inline">{notification.id}</span>
          <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{</span>
            <span class="hljs-attr inline">padding:</span> &#x27;<span class="hljs-attr inline">10px</span>&#x27;,
            <span class="hljs-attr inline">margin:</span> &#x27;<span class="hljs-attr inline">5px</span>&#x27;,
            <span class="hljs-attr inline">background:</span> <span class="hljs-attr inline">notification.type</span> === <span class="hljs-string inline">&#x27;success&#x27;</span> ? &#x27;<span class="hljs-attr inline">green</span>&#x27; <span class="hljs-attr inline">:</span> 
                       <span class="hljs-attr inline">notification.type</span> === <span class="hljs-string inline">&#x27;error&#x27;</span> ? &#x27;<span class="hljs-attr inline">red</span>&#x27; <span class="hljs-attr inline">:</span> &#x27;<span class="hljs-attr inline">blue</span>&#x27;,
            <span class="hljs-attr inline">color:</span> &#x27;<span class="hljs-attr inline">white</span>&#x27;
          }}
        &gt;</span>
          {notification.message}
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> actions.removeNotification(notification.id)}&gt;
            ×
          <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
      ))}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}

<span class="hljs-comment inline">// 主应用</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">App</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">AppProvider</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">Header</span> /&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">NotificationList</span> /&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">AppProvider</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="异步操作处理" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#异步操作处理" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 异步操作处理">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">异步操作处理</strong>
        </h3>
<h4 id="数据获取状态管理" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#数据获取状态管理" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 数据获取状态管理">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">数据获取状态管理</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20DataFetcher()%20%7B%0Aconst%20initialState%20%3D%20%7B%0Adata%3A%20null%2C%0Aloading%3A%20false%2C%0Aerror%3A%20null%2C%0AlastFetch%3A%20null%0A%7D%3B%0Afunction%20dataReducer(state%2C%20action)%20%7B%0Aswitch%20(action.type)%20%7B%0Acase%20'FETCH_START'%3A%0Areturn%20%7B%0A...state%2C%0Aloading%3A%20true%2C%0Aerror%3A%20null%0A%7D%3B%0Acase%20'FETCH_SUCCESS'%3A%0Areturn%20%7B%0A...state%2C%0Aloading%3A%20false%2C%0Adata%3A%20action.data%2C%0AlastFetch%3A%20new%20Date()%2C%0Aerror%3A%20null%0A%7D%3B%0Acase%20'FETCH_ERROR'%3A%0Areturn%20%7B%0A...state%2C%0Aloading%3A%20false%2C%0Aerror%3A%20action.error%2C%0Adata%3A%20null%0A%7D%3B%0Acase%20'CLEAR_DATA'%3A%0Areturn%20initialState%3B%0Adefault%3A%0Areturn%20state%3B%0A%7D%0A%7D%0Aconst%20%5Bstate%2C%20dispatch%5D%20%3D%20useReducer(dataReducer%2C%20initialState)%3B%0Aconst%20fetchData%20%3D%20async%20(url)%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'FETCH_START'%20%7D)%3B%0Atry%20%7B%0Aconst%20response%20%3D%20await%20fetch(url)%3B%0Aif%20(!response.ok)%20%7B%0Athrow%20new%20Error(%60HTTP%20error!%20status%3A%20%24%7Bresponse.status%7D%60)%3B%0A%7D%0Aconst%20data%20%3D%20await%20response.json()%3B%0Adispatch(%7B%20type%3A%20'FETCH_SUCCESS'%2C%20data%20%7D)%3B%0A%7D%20catch%20(error)%20%7B%0Adispatch(%7B%20type%3A%20'FETCH_ERROR'%2C%20error%3A%20error.message%20%7D)%3B%0A%7D%0A%7D%3B%0Aconst%20clearData%20%3D%20()%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'CLEAR_DATA'%20%7D)%3B%0A%7D%3B%0Areturn%20(%0Adiv%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20fetchData('%2Fapi%2Fusers')%7D%3E%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AEbutton%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20fetchData('%2Fapi%2Fposts')%7D%3E%E8%8E%B7%E5%8F%96%E6%96%87%E7%AB%A0%E6%95%B0%E6%8D%AEbutton%3E%0Abutton%20onClick%3D%7BclearData%7D%3E%E6%B8%85%E7%A9%BA%E6%95%B0%E6%8D%AEbutton%3E%0A%7Bstate.loading%20%26%26%20p%3E%E5%8A%A0%E8%BD%BD%E4%B8%AD...p%3E%7D%0A%7Bstate.error%20%26%26%20p%20style%3D%7B%7Bcolor%3A%20'red'%7D%7D%3E%E9%94%99%E8%AF%AF%3A%20%7Bstate.error%7Dp%3E%7D%0A%7Bstate.data%20%26%26%20(%0Adiv%3E%0Ap%3E%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E6%97%B6%E9%97%B4%3A%20%7Bstate.lastFetch%3F.toLocaleString()%7Dp%3E%0Apre%3E%7BJSON.stringify(state.data%2C%20null%2C%202)%7Dpre%3E%0Adiv%3E%0A)%7D%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">DataFetcher</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> initialState = {
    <span class="hljs-attr inline">data</span>: <span class="hljs-literal inline">null</span>,
    <span class="hljs-attr inline">loading</span>: <span class="hljs-literal inline">false</span>,
    <span class="hljs-attr inline">error</span>: <span class="hljs-literal inline">null</span>,
    <span class="hljs-attr inline">lastFetch</span>: <span class="hljs-literal inline">null</span>
  };

  <span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">dataReducer</span>(<span class="hljs-params inline">state, action</span>) {
    <span class="hljs-keyword inline">switch</span> (action.<span class="hljs-property inline">type</span>) {
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;FETCH_START&#x27;</span>:
        <span class="hljs-keyword inline">return</span> {
          ...state,
          <span class="hljs-attr inline">loading</span>: <span class="hljs-literal inline">true</span>,
          <span class="hljs-attr inline">error</span>: <span class="hljs-literal inline">null</span>
        };
      
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;FETCH_SUCCESS&#x27;</span>:
        <span class="hljs-keyword inline">return</span> {
          ...state,
          <span class="hljs-attr inline">loading</span>: <span class="hljs-literal inline">false</span>,
          <span class="hljs-attr inline">data</span>: action.<span class="hljs-property inline">data</span>,
          <span class="hljs-attr inline">lastFetch</span>: <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">Date</span>(),
          <span class="hljs-attr inline">error</span>: <span class="hljs-literal inline">null</span>
        };
      
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;FETCH_ERROR&#x27;</span>:
        <span class="hljs-keyword inline">return</span> {
          ...state,
          <span class="hljs-attr inline">loading</span>: <span class="hljs-literal inline">false</span>,
          <span class="hljs-attr inline">error</span>: action.<span class="hljs-property inline">error</span>,
          <span class="hljs-attr inline">data</span>: <span class="hljs-literal inline">null</span>
        };
      
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;CLEAR_DATA&#x27;</span>:
        <span class="hljs-keyword inline">return</span> initialState;
      
      <span class="hljs-attr inline">default</span>:
        <span class="hljs-keyword inline">return</span> state;
    }
  }

  <span class="hljs-keyword inline">const</span> [state, dispatch] = <span class="hljs-title function_ inline">useReducer</span>(dataReducer, initialState);

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">fetchData</span> = <span class="hljs-keyword inline">async</span> (<span class="hljs-params inline">url</span>) =&gt; {
    <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;FETCH_START&#x27;</span> });
    
    <span class="hljs-keyword inline">try</span> {
      <span class="hljs-keyword inline">const</span> response = <span class="hljs-keyword inline">await</span> <span class="hljs-title function_ inline">fetch</span>(url);
      <span class="hljs-keyword inline">if</span> (!response.<span class="hljs-property inline">ok</span>) {
        <span class="hljs-keyword inline">throw</span> <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">Error</span>(<span class="hljs-string inline">`HTTP error! status: <span class="hljs-subst inline">${response.status}</span>`</span>);
      }
      <span class="hljs-keyword inline">const</span> data = <span class="hljs-keyword inline">await</span> response.<span class="hljs-title function_ inline">json</span>();
      <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;FETCH_SUCCESS&#x27;</span>, data });
    } <span class="hljs-keyword inline">catch</span> (error) {
      <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;FETCH_ERROR&#x27;</span>, <span class="hljs-attr inline">error</span>: error.<span class="hljs-property inline">message</span> });
    }
  };

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">clearData</span> = (<span class="hljs-params inline"></span>) =&gt; {
    <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;CLEAR_DATA&#x27;</span> });
  };

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> fetchData(&#x27;/api/users&#x27;)}&gt;获取用户数据<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> fetchData(&#x27;/api/posts&#x27;)}&gt;获取文章数据<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{clearData}</span>&gt;</span>清空数据<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>

      {state.loading &amp;&amp; <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>加载中...<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>}
      {state.error &amp;&amp; <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span> <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{color:</span> &#x27;<span class="hljs-attr inline">red</span>&#x27;}}&gt;</span>错误: {state.error}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>}
      {state.data &amp;&amp; (
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>数据获取时间: {state.lastFetch?.toLocaleString()}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">pre</span>&gt;</span>{JSON.stringify(state.data, null, 2)}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">pre</span>&gt;</span>
        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
      )}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="游戏状态管理" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#游戏状态管理" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 游戏状态管理">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">游戏状态管理</strong>
        </h3>
<h4 id="井字游戏示例" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#井字游戏示例" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 井字游戏示例">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">井字游戏示例</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20TicTacToe()%20%7B%0Aconst%20initialState%20%3D%20%7B%0Aboard%3A%20Array(9).fill(null)%2C%0AisXNext%3A%20true%2C%0Awinner%3A%20null%2C%0AgameOver%3A%20false%2C%0Amoves%3A%200%0A%7D%3B%0Afunction%20gameReducer(state%2C%20action)%20%7B%0Aswitch%20(action.type)%20%7B%0Acase%20'MAKE_MOVE'%3A%0Aif%20(state.board%5Baction.index%5D%20%7C%7C%20state.winner)%20%7B%0Areturn%20state%3B%0A%7D%0Aconst%20newBoard%20%3D%20%5B...state.board%5D%3B%0AnewBoard%5Baction.index%5D%20%3D%20state.isXNext%20%3F%20'X'%20%3A%20'O'%3B%0Aconst%20winner%20%3D%20calculateWinner(newBoard)%3B%0Aconst%20gameOver%20%3D%20winner%20%7C%7C%20newBoard.every(cell%20%3D%3E%20cell%20!%3D%3D%20null)%3B%0Areturn%20%7B%0A...state%2C%0Aboard%3A%20newBoard%2C%0AisXNext%3A%20!state.isXNext%2C%0Awinner%2C%0AgameOver%2C%0Amoves%3A%20state.moves%20%2B%201%0A%7D%3B%0Acase%20'RESET_GAME'%3A%0Areturn%20initialState%3B%0Adefault%3A%0Areturn%20state%3B%0A%7D%0A%7D%0Aconst%20calculateWinner%20%3D%20(board)%20%3D%3E%20%7B%0Aconst%20lines%20%3D%20%5B%0A%5B0%2C%201%2C%202%5D%2C%20%5B3%2C%204%2C%205%5D%2C%20%5B6%2C%207%2C%208%5D%2C%20%2F%2F%20%E8%A1%8C%0A%5B0%2C%203%2C%206%5D%2C%20%5B1%2C%204%2C%207%5D%2C%20%5B2%2C%205%2C%208%5D%2C%20%2F%2F%20%E5%88%97%0A%5B0%2C%204%2C%208%5D%2C%20%5B2%2C%204%2C%206%5D%20%2F%2F%20%E5%AF%B9%E8%A7%92%E7%BA%BF%0A%5D%3B%0Afor%20(let%20line%20of%20lines)%20%7B%0Aconst%20%5Ba%2C%20b%2C%20c%5D%20%3D%20line%3B%0Aif%20(board%5Ba%5D%20%26%26%20board%5Ba%5D%20%3D%3D%3D%20board%5Bb%5D%20%26%26%20board%5Ba%5D%20%3D%3D%3D%20board%5Bc%5D)%20%7B%0Areturn%20board%5Ba%5D%3B%0A%7D%0A%7D%0Areturn%20null%3B%0A%7D%3B%0Aconst%20%5Bstate%2C%20dispatch%5D%20%3D%20useReducer(gameReducer%2C%20initialState)%3B%0Aconst%20makeMove%20%3D%20(index)%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'MAKE_MOVE'%2C%20index%20%7D)%3B%0A%7D%3B%0Aconst%20resetGame%20%3D%20()%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'RESET_GAME'%20%7D)%3B%0A%7D%3B%0Aconst%20renderSquare%20%3D%20(index)%20%3D%3E%20(%0Abutton%0Astyle%3D%7B%7B%0Awidth%3A%20'60px'%2C%0Aheight%3A%20'60px'%2C%0AfontSize%3A%20'20px'%2C%0AfontWeight%3A%20'bold'%0A%7D%7D%0AonClick%3D%7B()%20%3D%3E%20makeMove(index)%7D%0A%3E%0A%7Bstate.board%5Bindex%5D%7D%0Abutton%3E%0A)%3B%0Alet%20status%3B%0Aif%20(state.winner)%20%7B%0Astatus%20%3D%20%60%E8%8E%B7%E8%83%9C%E8%80%85%3A%20%24%7Bstate.winner%7D%60%3B%0A%7D%20else%20if%20(state.gameOver)%20%7B%0Astatus%20%3D%20'%E5%B9%B3%E5%B1%80!'%3B%0A%7D%20else%20%7B%0Astatus%20%3D%20%60%E4%B8%8B%E4%B8%80%E4%B8%AA%E7%8E%A9%E5%AE%B6%3A%20%24%7Bstate.isXNext%20%3F%20'X'%20%3A%20'O'%7D%60%3B%0A%7D%0Areturn%20(%0Adiv%3E%0Adiv%3E%7Bstatus%7Ddiv%3E%0Ap%3E%E6%AD%A5%E6%95%B0%3A%20%7Bstate.moves%7Dp%3E%0Adiv%3E%0Adiv%3E%0A%7BrenderSquare(0)%7D%0A%7BrenderSquare(1)%7D%0A%7BrenderSquare(2)%7D%0Adiv%3E%0Adiv%3E%0A%7BrenderSquare(3)%7D%0A%7BrenderSquare(4)%7D%0A%7BrenderSquare(5)%7D%0Adiv%3E%0Adiv%3E%0A%7BrenderSquare(6)%7D%0A%7BrenderSquare(7)%7D%0A%7BrenderSquare(8)%7D%0Adiv%3E%0Adiv%3E%0Abutton%20onClick%3D%7BresetGame%7D%3E%E9%87%8D%E6%96%B0%E5%BC%80%E5%A7%8Bbutton%3E%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">TicTacToe</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> initialState = {
    <span class="hljs-attr inline">board</span>: <span class="hljs-title class_ inline">Array</span>(<span class="hljs-number inline">9</span>).<span class="hljs-title function_ inline">fill</span>(<span class="hljs-literal inline">null</span>),
    <span class="hljs-attr inline">isXNext</span>: <span class="hljs-literal inline">true</span>,
    <span class="hljs-attr inline">winner</span>: <span class="hljs-literal inline">null</span>,
    <span class="hljs-attr inline">gameOver</span>: <span class="hljs-literal inline">false</span>,
    <span class="hljs-attr inline">moves</span>: <span class="hljs-number inline">0</span>
  };

  <span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">gameReducer</span>(<span class="hljs-params inline">state, action</span>) {
    <span class="hljs-keyword inline">switch</span> (action.<span class="hljs-property inline">type</span>) {
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;MAKE_MOVE&#x27;</span>:
        <span class="hljs-keyword inline">if</span> (state.<span class="hljs-property inline">board</span>[action.<span class="hljs-property inline">index</span>] || state.<span class="hljs-property inline">winner</span>) {
          <span class="hljs-keyword inline">return</span> state;
        }

        <span class="hljs-keyword inline">const</span> newBoard = [...state.<span class="hljs-property inline">board</span>];
        newBoard[action.<span class="hljs-property inline">index</span>] = state.<span class="hljs-property inline">isXNext</span> ? <span class="hljs-string inline">&#x27;X&#x27;</span> : <span class="hljs-string inline">&#x27;O&#x27;</span>;
        
        <span class="hljs-keyword inline">const</span> winner = <span class="hljs-title function_ inline">calculateWinner</span>(newBoard);
        <span class="hljs-keyword inline">const</span> gameOver = winner || newBoard.<span class="hljs-title function_ inline">every</span>(<span class="hljs-function inline"><span class="hljs-params inline">cell</span> =&gt;</span> cell !== <span class="hljs-literal inline">null</span>);

        <span class="hljs-keyword inline">return</span> {
          ...state,
          <span class="hljs-attr inline">board</span>: newBoard,
          <span class="hljs-attr inline">isXNext</span>: !state.<span class="hljs-property inline">isXNext</span>,
          winner,
          gameOver,
          <span class="hljs-attr inline">moves</span>: state.<span class="hljs-property inline">moves</span> + <span class="hljs-number inline">1</span>
        };

      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;RESET_GAME&#x27;</span>:
        <span class="hljs-keyword inline">return</span> initialState;

      <span class="hljs-attr inline">default</span>:
        <span class="hljs-keyword inline">return</span> state;
    }
  }

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">calculateWinner</span> = (<span class="hljs-params inline">board</span>) =&gt; {
    <span class="hljs-keyword inline">const</span> lines = [
      [<span class="hljs-number inline">0</span>, <span class="hljs-number inline">1</span>, <span class="hljs-number inline">2</span>], [<span class="hljs-number inline">3</span>, <span class="hljs-number inline">4</span>, <span class="hljs-number inline">5</span>], [<span class="hljs-number inline">6</span>, <span class="hljs-number inline">7</span>, <span class="hljs-number inline">8</span>], <span class="hljs-comment inline">// 行</span>
      [<span class="hljs-number inline">0</span>, <span class="hljs-number inline">3</span>, <span class="hljs-number inline">6</span>], [<span class="hljs-number inline">1</span>, <span class="hljs-number inline">4</span>, <span class="hljs-number inline">7</span>], [<span class="hljs-number inline">2</span>, <span class="hljs-number inline">5</span>, <span class="hljs-number inline">8</span>], <span class="hljs-comment inline">// 列</span>
      [<span class="hljs-number inline">0</span>, <span class="hljs-number inline">4</span>, <span class="hljs-number inline">8</span>], [<span class="hljs-number inline">2</span>, <span class="hljs-number inline">4</span>, <span class="hljs-number inline">6</span>] <span class="hljs-comment inline">// 对角线</span>
    ];

    <span class="hljs-keyword inline">for</span> (<span class="hljs-keyword inline">let</span> line <span class="hljs-keyword inline">of</span> lines) {
      <span class="hljs-keyword inline">const</span> [a, b, c] = line;
      <span class="hljs-keyword inline">if</span> (board[a] &amp;&amp; board[a] === board[b] &amp;&amp; board[a] === board[c]) {
        <span class="hljs-keyword inline">return</span> board[a];
      }
    }
    <span class="hljs-keyword inline">return</span> <span class="hljs-literal inline">null</span>;
  };

  <span class="hljs-keyword inline">const</span> [state, dispatch] = <span class="hljs-title function_ inline">useReducer</span>(gameReducer, initialState);

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">makeMove</span> = (<span class="hljs-params inline">index</span>) =&gt; {
    <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;MAKE_MOVE&#x27;</span>, index });
  };

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">resetGame</span> = (<span class="hljs-params inline"></span>) =&gt; {
    <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;RESET_GAME&#x27;</span> });
  };

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">renderSquare</span> = (<span class="hljs-params inline">index</span>) =&gt; (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span>
      <span class="hljs-attr inline">style</span>=<span class="hljs-string inline">{{</span>
        <span class="hljs-attr inline">width:</span> &#x27;<span class="hljs-attr inline">60px</span>&#x27;,
        <span class="hljs-attr inline">height:</span> &#x27;<span class="hljs-attr inline">60px</span>&#x27;,
        <span class="hljs-attr inline">fontSize:</span> &#x27;<span class="hljs-attr inline">20px</span>&#x27;,
        <span class="hljs-attr inline">fontWeight:</span> &#x27;<span class="hljs-attr inline">bold</span>&#x27;
      }}
      <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> makeMove(index)}
    &gt;
      {state.board[index]}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span></span>
  );

  <span class="hljs-keyword inline">let</span> status;
  <span class="hljs-keyword inline">if</span> (state.<span class="hljs-property inline">winner</span>) {
    status = <span class="hljs-string inline">`获胜者: <span class="hljs-subst inline">${state.winner}</span>`</span>;
  } <span class="hljs-keyword inline">else</span> <span class="hljs-keyword inline">if</span> (state.<span class="hljs-property inline">gameOver</span>) {
    status = <span class="hljs-string inline">&#x27;平局!&#x27;</span>;
  } <span class="hljs-keyword inline">else</span> {
    status = <span class="hljs-string inline">`下一个玩家: <span class="hljs-subst inline">${state.isXNext ? <span class="hljs-string inline">&#x27;X&#x27;</span> : <span class="hljs-string inline">&#x27;O&#x27;</span>}</span>`</span>;
  }

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>{status}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>步数: {state.moves}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
          {renderSquare(0)}
          {renderSquare(1)}
          {renderSquare(2)}
        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
          {renderSquare(3)}
          {renderSquare(4)}
          {renderSquare(5)}
        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
          {renderSquare(6)}
          {renderSquare(7)}
          {renderSquare(8)}
        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{resetGame}</span>&gt;</span>重新开始<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="自定义-hook-封装" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#自定义-hook-封装" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 自定义 Hook 封装">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">自定义 Hook 封装</strong>
        </h3>
<h4 id="通用状态管理-hook" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#通用状态管理-hook" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 通用状态管理 Hook">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">通用状态管理 Hook</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20useStateWithReducer(initialState)%20%7B%0Afunction%20stateReducer(state%2C%20action)%20%7B%0Aswitch%20(action.type)%20%7B%0Acase%20'SET'%3A%0Areturn%20%7B%20...state%2C%20...action.payload%20%7D%3B%0Acase%20'RESET'%3A%0Areturn%20initialState%3B%0Acase%20'UPDATE_FIELD'%3A%0Areturn%20%7B%20...state%2C%20%5Baction.field%5D%3A%20action.value%20%7D%3B%0Adefault%3A%0Areturn%20state%3B%0A%7D%0A%7D%0Aconst%20%5Bstate%2C%20dispatch%5D%20%3D%20useReducer(stateReducer%2C%20initialState)%3B%0Aconst%20setState%20%3D%20(payload)%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'SET'%2C%20payload%20%7D)%3B%0A%7D%3B%0Aconst%20resetState%20%3D%20()%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'RESET'%20%7D)%3B%0A%7D%3B%0Aconst%20updateField%20%3D%20(field%2C%20value)%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'UPDATE_FIELD'%2C%20field%2C%20value%20%7D)%3B%0A%7D%3B%0Areturn%20%5Bstate%2C%20%7B%20setState%2C%20resetState%2C%20updateField%20%7D%5D%3B%0A%7D%0A%2F%2F%20%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B%0Afunction%20UserProfile()%20%7B%0Aconst%20%5BuserState%2C%20userActions%5D%20%3D%20useStateWithReducer(%7B%0Aname%3A%20''%2C%0Aemail%3A%20''%2C%0Aage%3A%20''%2C%0AisEditing%3A%20false%0A%7D)%3B%0Aconst%20handleSave%20%3D%20()%20%3D%3E%20%7B%0Aconsole.log('%E4%BF%9D%E5%AD%98%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%3A'%2C%20userState)%3B%0AuserActions.updateField('isEditing'%2C%20false)%3B%0A%7D%3B%0Areturn%20(%0Adiv%3E%0A%7BuserState.isEditing%20%3F%20(%0Adiv%3E%0Ainput%0Avalue%3D%7BuserState.name%7D%0AonChange%3D%7B(e)%20%3D%3E%20userActions.updateField('name'%2C%20e.target.value)%7D%0Aplaceholder%3D%22%E5%A7%93%E5%90%8D%22%0A%2F%3E%0Ainput%0Avalue%3D%7BuserState.email%7D%0AonChange%3D%7B(e)%20%3D%3E%20userActions.updateField('email'%2C%20e.target.value)%7D%0Aplaceholder%3D%22%E9%82%AE%E7%AE%B1%22%0A%2F%3E%0Ainput%0Avalue%3D%7BuserState.age%7D%0AonChange%3D%7B(e)%20%3D%3E%20userActions.updateField('age'%2C%20e.target.value)%7D%0Aplaceholder%3D%22%E5%B9%B4%E9%BE%84%22%0A%2F%3E%0Abutton%20onClick%3D%7BhandleSave%7D%3E%E4%BF%9D%E5%AD%98button%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20userActions.updateField('isEditing'%2C%20false)%7D%3E%0A%E5%8F%96%E6%B6%88%0Abutton%3E%0Adiv%3E%0A)%20%3A%20(%0Adiv%3E%0Ap%3E%E5%A7%93%E5%90%8D%3A%20%7BuserState.name%7Dp%3E%0Ap%3E%E9%82%AE%E7%AE%B1%3A%20%7BuserState.email%7Dp%3E%0Ap%3E%E5%B9%B4%E9%BE%84%3A%20%7BuserState.age%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20userActions.updateField('isEditing'%2C%20true)%7D%3E%0A%E7%BC%96%E8%BE%91%0Abutton%3E%0Adiv%3E%0A)%7D%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">useStateWithReducer</span>(<span class="hljs-params inline">initialState</span>) {
  <span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">stateReducer</span>(<span class="hljs-params inline">state, action</span>) {
    <span class="hljs-keyword inline">switch</span> (action.<span class="hljs-property inline">type</span>) {
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;SET&#x27;</span>:
        <span class="hljs-keyword inline">return</span> { ...state, ...action.<span class="hljs-property inline">payload</span> };
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;RESET&#x27;</span>:
        <span class="hljs-keyword inline">return</span> initialState;
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;UPDATE_FIELD&#x27;</span>:
        <span class="hljs-keyword inline">return</span> { ...state, [action.<span class="hljs-property inline">field</span>]: action.<span class="hljs-property inline">value</span> };
      <span class="hljs-attr inline">default</span>:
        <span class="hljs-keyword inline">return</span> state;
    }
  }

  <span class="hljs-keyword inline">const</span> [state, dispatch] = <span class="hljs-title function_ inline">useReducer</span>(stateReducer, initialState);

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">setState</span> = (<span class="hljs-params inline">payload</span>) =&gt; {
    <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;SET&#x27;</span>, payload });
  };

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">resetState</span> = (<span class="hljs-params inline"></span>) =&gt; {
    <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;RESET&#x27;</span> });
  };

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">updateField</span> = (<span class="hljs-params inline">field, value</span>) =&gt; {
    <span class="hljs-title function_ inline">dispatch</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;UPDATE_FIELD&#x27;</span>, field, value });
  };

  <span class="hljs-keyword inline">return</span> [state, { setState, resetState, updateField }];
}

<span class="hljs-comment inline">// 使用示例</span>
<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">UserProfile</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> [userState, userActions] = <span class="hljs-title function_ inline">useStateWithReducer</span>({
    <span class="hljs-attr inline">name</span>: <span class="hljs-string inline">&#x27;&#x27;</span>,
    <span class="hljs-attr inline">email</span>: <span class="hljs-string inline">&#x27;&#x27;</span>,
    <span class="hljs-attr inline">age</span>: <span class="hljs-string inline">&#x27;&#x27;</span>,
    <span class="hljs-attr inline">isEditing</span>: <span class="hljs-literal inline">false</span>
  });

  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">handleSave</span> = (<span class="hljs-params inline"></span>) =&gt; {
    <span class="hljs-variable language_ inline">console</span>.<span class="hljs-title function_ inline">log</span>(<span class="hljs-string inline">&#x27;保存用户信息:&#x27;</span>, userState);
    userActions.<span class="hljs-title function_ inline">updateField</span>(<span class="hljs-string inline">&#x27;isEditing&#x27;</span>, <span class="hljs-literal inline">false</span>);
  };

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      {userState.isEditing ? (
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">input</span>
            <span class="hljs-attr inline">value</span>=<span class="hljs-string inline">{userState.name}</span>
            <span class="hljs-attr inline">onChange</span>=<span class="hljs-string inline">{(e)</span> =&gt;</span> userActions.updateField(&#x27;name&#x27;, e.target.value)}
            placeholder=&quot;姓名&quot;
          /&gt;
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">input</span>
            <span class="hljs-attr inline">value</span>=<span class="hljs-string inline">{userState.email}</span>
            <span class="hljs-attr inline">onChange</span>=<span class="hljs-string inline">{(e)</span> =&gt;</span> userActions.updateField(&#x27;email&#x27;, e.target.value)}
            placeholder=&quot;邮箱&quot;
          /&gt;
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">input</span>
            <span class="hljs-attr inline">value</span>=<span class="hljs-string inline">{userState.age}</span>
            <span class="hljs-attr inline">onChange</span>=<span class="hljs-string inline">{(e)</span> =&gt;</span> userActions.updateField(&#x27;age&#x27;, e.target.value)}
            placeholder=&quot;年龄&quot;
          /&gt;
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{handleSave}</span>&gt;</span>保存<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> userActions.updateField(&#x27;isEditing&#x27;, false)}&gt;
            取消
          <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
      ) : (
        <span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>姓名: {userState.name}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>邮箱: {userState.email}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">p</span>&gt;</span>年龄: {userState.age}<span class="hljs-tag inline">&lt;/<span class="hljs-name inline">p</span>&gt;</span>
          <span class="hljs-tag inline">&lt;<span class="hljs-name inline">button</span> <span class="hljs-attr inline">onClick</span>=<span class="hljs-string inline">{()</span> =&gt;</span> userActions.updateField(&#x27;isEditing&#x27;, true)}&gt;
            编辑
          <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">button</span>&gt;</span>
        <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span>
      )}
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="常见陷阱和解决方案" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#常见陷阱和解决方案" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 常见陷阱和解决方案">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">常见陷阱和解决方案</strong>
        </h3>
<h4 id="状态更新不当" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#状态更新不当" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 状态更新不当">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">状态更新不当</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20BadExample()%20%7B%0Afunction%20badReducer(state%2C%20action)%20%7B%0Aswitch%20(action.type)%20%7B%0Acase%20'ADD_ITEM'%3A%0A%2F%2F%20%E9%94%99%E8%AF%AF%EF%BC%9A%E7%9B%B4%E6%8E%A5%E4%BF%AE%E6%94%B9%E5%8E%9F%E7%8A%B6%E6%80%81%E5%AF%B9%E8%B1%A1%0Astate.items.push(action.item)%3B%0Areturn%20state%3B%0Acase%20'UPDATE_USER'%3A%0A%2F%2F%20%E9%94%99%E8%AF%AF%EF%BC%9A%E7%9B%B4%E6%8E%A5%E4%BF%AE%E6%94%B9%E5%B5%8C%E5%A5%97%E5%AF%B9%E8%B1%A1%0Astate.user.name%20%3D%20action.name%3B%0Areturn%20state%3B%0Adefault%3A%0Areturn%20state%3B%0A%7D%0A%7D%0A%7D%0Afunction%20GoodExample()%20%7B%0Afunction%20goodReducer(state%2C%20action)%20%7B%0Aswitch%20(action.type)%20%7B%0Acase%20'ADD_ITEM'%3A%0A%2F%2F%20%E6%AD%A3%E7%A1%AE%EF%BC%9A%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84%E7%8A%B6%E6%80%81%E5%AF%B9%E8%B1%A1%0Areturn%20%7B%0A...state%2C%0Aitems%3A%20%5B...state.items%2C%20action.item%5D%0A%7D%3B%0Acase%20'UPDATE_USER'%3A%0A%2F%2F%20%E6%AD%A3%E7%A1%AE%EF%BC%9A%E4%BD%BF%E7%94%A8%E6%89%A9%E5%B1%95%E8%BF%90%E7%AE%97%E7%AC%A6%E5%88%9B%E5%BB%BA%E6%96%B0%E5%AF%B9%E8%B1%A1%0Areturn%20%7B%0A...state%2C%0Auser%3A%20%7B%0A...state.user%2C%0Aname%3A%20action.name%0A%7D%0A%7D%3B%0Adefault%3A%0Areturn%20state%3B%0A%7D%0A%7D%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">BadExample</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">badReducer</span>(<span class="hljs-params inline">state, action</span>) {
    <span class="hljs-keyword inline">switch</span> (action.<span class="hljs-property inline">type</span>) {
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;ADD_ITEM&#x27;</span>:
        <span class="hljs-comment inline">// 错误：直接修改原状态对象</span>
        state.<span class="hljs-property inline">items</span>.<span class="hljs-title function_ inline">push</span>(action.<span class="hljs-property inline">item</span>);
        <span class="hljs-keyword inline">return</span> state;
      
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;UPDATE_USER&#x27;</span>:
        <span class="hljs-comment inline">// 错误：直接修改嵌套对象</span>
        state.<span class="hljs-property inline">user</span>.<span class="hljs-property inline">name</span> = action.<span class="hljs-property inline">name</span>;
        <span class="hljs-keyword inline">return</span> state;
      
      <span class="hljs-attr inline">default</span>:
        <span class="hljs-keyword inline">return</span> state;
    }
  }
}

<span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">GoodExample</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">goodReducer</span>(<span class="hljs-params inline">state, action</span>) {
    <span class="hljs-keyword inline">switch</span> (action.<span class="hljs-property inline">type</span>) {
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;ADD_ITEM&#x27;</span>:
        <span class="hljs-comment inline">// 正确：创建新的状态对象</span>
        <span class="hljs-keyword inline">return</span> {
          ...state,
          <span class="hljs-attr inline">items</span>: [...state.<span class="hljs-property inline">items</span>, action.<span class="hljs-property inline">item</span>]
        };
      
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;UPDATE_USER&#x27;</span>:
        <span class="hljs-comment inline">// 正确：使用扩展运算符创建新对象</span>
        <span class="hljs-keyword inline">return</span> {
          ...state,
          <span class="hljs-attr inline">user</span>: {
            ...state.<span class="hljs-property inline">user</span>,
            <span class="hljs-attr inline">name</span>: action.<span class="hljs-property inline">name</span>
          }
        };
      
      <span class="hljs-attr inline">default</span>:
        <span class="hljs-keyword inline">return</span> state;
    }
  }
}
</code></pre>
            </div>
        
<h4 id="复杂状态的深层更新" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#复杂状态的深层更新" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 复杂状态的深层更新">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">复杂状态的深层更新</strong>
        </h4>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="jsx" data-code="function%20DeepUpdateExample()%20%7B%0Aconst%20initialState%20%3D%20%7B%0Auser%3A%20%7B%0Aprofile%3A%20%7B%0Apersonal%3A%20%7B%0Aname%3A%20''%2C%0Aage%3A%200%0A%7D%2C%0Acontact%3A%20%7B%0Aemail%3A%20''%2C%0Aphone%3A%20''%0A%7D%0A%7D%0A%7D%0A%7D%3B%0Afunction%20deepUpdateReducer(state%2C%20action)%20%7B%0Aswitch%20(action.type)%20%7B%0Acase%20'UPDATE_PERSONAL_INFO'%3A%0Areturn%20%7B%0A...state%2C%0Auser%3A%20%7B%0A...state.user%2C%0Aprofile%3A%20%7B%0A...state.user.profile%2C%0Apersonal%3A%20%7B%0A...state.user.profile.personal%2C%0A%5Baction.field%5D%3A%20action.value%0A%7D%0A%7D%0A%7D%0A%7D%3B%0Acase%20'UPDATE_CONTACT_INFO'%3A%0Areturn%20%7B%0A...state%2C%0Auser%3A%20%7B%0A...state.user%2C%0Aprofile%3A%20%7B%0A...state.user.profile%2C%0Acontact%3A%20%7B%0A...state.user.profile.contact%2C%0A%5Baction.field%5D%3A%20action.value%0A%7D%0A%7D%0A%7D%0A%7D%3B%0Adefault%3A%0Areturn%20state%3B%0A%7D%0A%7D%0Aconst%20%5Bstate%2C%20dispatch%5D%20%3D%20useReducer(deepUpdateReducer%2C%20initialState)%3B%0Areturn%20(%0Adiv%3E%0Ainput%0Aplaceholder%3D%22%E5%A7%93%E5%90%8D%22%0AonChange%3D%7B(e)%20%3D%3E%20dispatch(%7B%0Atype%3A%20'UPDATE_PERSONAL_INFO'%2C%0Afield%3A%20'name'%2C%0Avalue%3A%20e.target.value%0A%7D)%7D%0A%2F%3E%0Ainput%0Aplaceholder%3D%22%E9%82%AE%E7%AE%B1%22%0AonChange%3D%7B(e)%20%3D%3E%20dispatch(%7B%0Atype%3A%20'UPDATE_CONTACT_INFO'%2C%0Afield%3A%20'email'%2C%0Avalue%3A%20e.target.value%0A%7D)%7D%0A%2F%3E%0Adiv%3E%0A)%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">jsx</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="复制代码">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">复制</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-jsx"><span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">DeepUpdateExample</span>(<span class="hljs-params inline"></span>) {
  <span class="hljs-keyword inline">const</span> initialState = {
    <span class="hljs-attr inline">user</span>: {
      <span class="hljs-attr inline">profile</span>: {
        <span class="hljs-attr inline">personal</span>: {
          <span class="hljs-attr inline">name</span>: <span class="hljs-string inline">&#x27;&#x27;</span>,
          <span class="hljs-attr inline">age</span>: <span class="hljs-number inline">0</span>
        },
        <span class="hljs-attr inline">contact</span>: {
          <span class="hljs-attr inline">email</span>: <span class="hljs-string inline">&#x27;&#x27;</span>,
          <span class="hljs-attr inline">phone</span>: <span class="hljs-string inline">&#x27;&#x27;</span>
        }
      }
    }
  };

  <span class="hljs-keyword inline">function</span> <span class="hljs-title function_ inline">deepUpdateReducer</span>(<span class="hljs-params inline">state, action</span>) {
    <span class="hljs-keyword inline">switch</span> (action.<span class="hljs-property inline">type</span>) {
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;UPDATE_PERSONAL_INFO&#x27;</span>:
        <span class="hljs-keyword inline">return</span> {
          ...state,
          <span class="hljs-attr inline">user</span>: {
            ...state.<span class="hljs-property inline">user</span>,
            <span class="hljs-attr inline">profile</span>: {
              ...state.<span class="hljs-property inline">user</span>.<span class="hljs-property inline">profile</span>,
              <span class="hljs-attr inline">personal</span>: {
                ...state.<span class="hljs-property inline">user</span>.<span class="hljs-property inline">profile</span>.<span class="hljs-property inline">personal</span>,
                [action.<span class="hljs-property inline">field</span>]: action.<span class="hljs-property inline">value</span>
              }
            }
          }
        };
      
      <span class="hljs-keyword inline">case</span> <span class="hljs-string inline">&#x27;UPDATE_CONTACT_INFO&#x27;</span>:
        <span class="hljs-keyword inline">return</span> {
          ...state,
          <span class="hljs-attr inline">user</span>: {
            ...state.<span class="hljs-property inline">user</span>,
            <span class="hljs-attr inline">profile</span>: {
              ...state.<span class="hljs-property inline">user</span>.<span class="hljs-property inline">profile</span>,
              <span class="hljs-attr inline">contact</span>: {
                ...state.<span class="hljs-property inline">user</span>.<span class="hljs-property inline">profile</span>.<span class="hljs-property inline">contact</span>,
                [action.<span class="hljs-property inline">field</span>]: action.<span class="hljs-property inline">value</span>
              }
            }
          }
        };
      
      <span class="hljs-attr inline">default</span>:
        <span class="hljs-keyword inline">return</span> state;
    }
  }

  <span class="hljs-keyword inline">const</span> [state, dispatch] = <span class="hljs-title function_ inline">useReducer</span>(deepUpdateReducer, initialState);

  <span class="hljs-keyword inline">return</span> (
    <span class="language-xml inline"><span class="hljs-tag inline">&lt;<span class="hljs-name inline">div</span>&gt;</span>
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">input</span>
        <span class="hljs-attr inline">placeholder</span>=<span class="hljs-string inline">&quot;姓名&quot;</span>
        <span class="hljs-attr inline">onChange</span>=<span class="hljs-string inline">{(e)</span> =&gt;</span> dispatch({
          type: &#x27;UPDATE_PERSONAL_INFO&#x27;,
          field: &#x27;name&#x27;,
          value: e.target.value
        })}
      /&gt;
      <span class="hljs-tag inline">&lt;<span class="hljs-name inline">input</span>
        <span class="hljs-attr inline">placeholder</span>=<span class="hljs-string inline">&quot;邮箱&quot;</span>
        <span class="hljs-attr inline">onChange</span>=<span class="hljs-string inline">{(e)</span> =&gt;</span> dispatch({
          type: &#x27;UPDATE_CONTACT_INFO&#x27;,
          field: &#x27;email&#x27;,
          value: e.target.value
        })}
      /&gt;
    <span class="hljs-tag inline">&lt;/<span class="hljs-name inline">div</span>&gt;</span></span>
  );
}
</code></pre>
            </div>
        
<h3 id="最佳实践" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#最佳实践" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 最佳实践">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">最佳实践</strong>
        </h3>
<ol class="list-decimal list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">纯函数</strong>：Reducer 必须是纯函数，不能有副作用</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">不可变更新</strong>：始终返回新的状态对象，不要修改原状态</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">action 类型</strong>：使用常量定义 action 类型，避免拼写错误</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">状态结构</strong>：保持状态结构扁平化，避免过深的嵌套</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">默认情况</strong>：在 reducer 中处理默认情况，通常返回原状态</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">错误处理</strong>：对未知的 action 类型抛出错误或给出警告</li>
</ol>
<h3 id="何时使用-usereducer" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#何时使用-usereducer" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 何时使用 useReducer">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">何时使用 useReducer</strong>
        </h3>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">复杂状态逻辑</strong>：多个相关状态值需要一起更新</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">状态转换复杂</strong>：状态的下一个值依赖于前一个值</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">多个组件共享状态</strong>：结合 useContext 实现全局状态管理</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">可预测的状态更新</strong>：需要清晰的状态变更历史和调试</li>
</ul>
<h3 id="注意事项" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#注意事项" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to 注意事项">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            <strong class="font-bold text-foreground">注意事项</strong>
        </h3>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">性能考虑</strong>：每次 dispatch 都会触发重新渲染</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">初始化成本</strong>：useReducer 的初始化比 useState 稍重</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">学习曲线</strong>：相比 useState 有一定的学习成本</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">调试复杂</strong>：状态变更逻辑集中在 reducer 中，需要良好的调试工具</li>
</ul>
<p class="text-base leading-7 mb-4 text-foreground"><code>useReducer</code> 是管理复杂状态的强大工具，特别适合处理具有多个子值或复杂状态转换逻辑的场景。</p>
</div></article><footer class="mt-16 pt-8 border-t border-foreground/20"><div class="flex items-center justify-between"><a class="inline-flex items-center px-4 py-2 bg-primary text-foreground rounded-lg hover:bg-primary/90 transition-colors" href="/MilkWind-Website/documents/">documents.backToDocuments</a><div class="text-sm text-foreground/60"><span>documents.byAuthor<!-- --> <!-- -->MilkWind</span></div></div></footer></div></div><!--$--><!--/$--><!--$--><!--/$--><!--/$--><!--/$--><script src="/MilkWind-Website/_next/static/chunks/webpack-1674c92fb524bcda.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[38735,[\"46\",\"static/chunks/46-268e24d727b280ef.js\",\"7177\",\"static/chunks/app/layout-af4a6e723c0ff668.js\"],\"default\"]\n3:I[19945,[\"46\",\"static/chunks/46-268e24d727b280ef.js\",\"7177\",\"static/chunks/app/layout-af4a6e723c0ff668.js\"],\"default\"]\n4:I[65337,[\"46\",\"static/chunks/46-268e24d727b280ef.js\",\"7177\",\"static/chunks/app/layout-af4a6e723c0ff668.js\"],\"default\"]\n5:I[96190,[\"46\",\"static/chunks/46-268e24d727b280ef.js\",\"7177\",\"static/chunks/app/layout-af4a6e723c0ff668.js\"],\"ClientProviders\"]\n6:I[87555,[],\"\"]\n7:I[51901,[\"8039\",\"static/chunks/app/error-dda32be1d095a86c.js\"],\"default\"]\n8:I[31295,[],\"\"]\n9:I[6874,[\"6874\",\"static/chunks/6874-fbe9a08eb79b991c.js\",\"4345\",\"static/chunks/app/not-found-9ff98b2ccf24cac7.js\"],\"\"]\na:I[94970,[],\"ClientSegmentRoot\"]\nb:I[44065,[\"206\",\"static/chunks/206-4f4cbf4d7156f437.js\",\"3092\",\"static/chunks/app/documents/layout-28408791defde09e.js\"],\"default\"]\ne:I[59665,[],\"MetadataBoundary\"]\n10:I[59665,[],\"OutletBoundary\"]\n13:I[74911,[],\"AsyncMetadataOutlet\"]\n15:I[39460,[\"2415\",\"static/chunks/2415-689c103fb3d2c28d.js\",\"8610\",\"static/chunks/8610-7bd3f91f3cf2a4d6.js\",\"5650\",\"static/chunks/app/documents/loading-1fa3f98b6e5a8e78.js\"],\"default\"]\n16:I[88610,[\"2415\",\"static/chunks/2415-689c103fb3d2c28d.js\",\"8610\",\"static/chunks/8610-7bd3f91f3cf2a4d6.js\",\"4209\",\"static/chunks/app/loading-68f227fb49b3ac8c.js\"],\"default\"]\n17:I[59665,[],\"ViewportBoundary\"]\n19:I[26614,[],\"\"]\n:HL[\"/MilkWind-Website/_next/static/css/f034c804622acb16.css\",\"style\"]\n:HL[\"/MilkWind-Website/_next/static/css/276b387d8ca46690.css\",\"style\"]\n:HL[\"/MilkWind-Website/_next/static/css/5eacd01f773eed7f.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"ARIfyKTG2kypPJcFndv6Z\",\"p\":\"/MilkWind-Website\",\"c\":[\"\",\"documents\",\"zh\",\"dark\",\"basic-knowledge\",\"react-use-reducer\",\"\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"documents\",{\"children\":[[\"slug\",\"zh/dark/basic-knowledge/react-use-reducer\",\"c\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/MilkWind-Website/_next/static/css/f034c804622acb16.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/MilkWind-Website/_next/static/css/276b387d8ca46690.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"__variable_9b7fb1 __variable_ca2a15 __variable_591dcc font-sans antialiased min-h-screen bg-background text-foreground\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"$L2\",null,{}],[\"$\",\"$L3\",null,{}],[\"$\",\"$L4\",null,{}],[\"$\",\"$L5\",null,{\"children\":[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$7\",\"errorStyles\":[],\"errorScripts\":[],\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"div\",null,{\"className\":\"z-10 relative min-h-screen flex items-center justify-center bg-background p-8\",\"children\":[\"$\",\"div\",null,{\"className\":\"text-center max-w-md\",\"children\":[[\"$\",\"div\",null,{\"className\":\"text-8xl font-bold text-primary mb-4\",\"children\":\"404\"}],[\"$\",\"h2\",null,{\"className\":\"text-2xl font-bold text-foreground mb-4\",\"children\":\"Page Not Found\"}],[\"$\",\"p\",null,{\"className\":\"text-foreground/70 mb-8\",\"children\":\"The page you're looking for doesn't exist or has been moved to a different location.\"}],[\"$\",\"div\",null,{\"className\":\"flex flex-col sm:flex-row gap-4 justify-center\",\"children\":[[\"$\",\"$L9\",null,{\"href\":\"/\",\"className\":\"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/80 transition-colors\",\"children\":\"Go Home\"}],[\"$\",\"$L9\",null,{\"href\":\"/works\",\"className\":\"px-6 py-2 border border-primary text-primary rounded-lg hover:bg-primary/10 transition-colors\",\"children\":\"View Works\"}]]}],[\"$\",\"div\",null,{\"className\":\"absolute inset-0 overflow-hidden pointer-events-none -z-10\",\"children\":[[\"$\",\"div\",null,{\"className\":\"absolute top-1/4 left-1/4 w-2 h-2 bg-primary/20 rounded-full animate-float\"}],[\"$\",\"div\",null,{\"className\":\"absolute top-3/4 right-1/4 w-3 h-3 bg-accent/20 rounded-full animate-float\",\"style\":{\"animationDelay\":\"1s\"}}],[\"$\",\"div\",null,{\"className\":\"absolute bottom-1/4 left-1/3 w-1 h-1 bg-secondary/20 rounded-full animate-float\",\"style\":{\"animationDelay\":\"2s\"}}]]}]]}]}],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}]}]]}],{\"children\":[\"documents\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$La\",null,{\"Component\":\"$b\",\"slots\":{\"children\":[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]},\"params\":{},\"promise\":\"$@c\"}]]}],{\"children\":[[\"slug\",\"zh/dark/basic-knowledge/react-use-reducer\",\"c\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$Ld\",[\"$\",\"$Le\",null,{\"children\":\"$Lf\"}],[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/MilkWind-Website/_next/static/css/5eacd01f773eed7f.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$L10\",null,{\"children\":[\"$L11\",\"$L12\",[\"$\",\"$L13\",null,{\"promise\":\"$@14\"}]]}]]}],{},null,false]},null,false]},[[\"$\",\"$L15\",\"l\",{}],[],[]],false]},[[\"$\",\"$L16\",\"l\",{}],[],[]],false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"qJWEATJFKeTae1su3OKJ6\",{\"children\":[[\"$\",\"$L17\",null,{\"children\":\"$L18\"}],null]}],null]}],false]],\"m\":\"$undefined\",\"G\":[\"$19\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"1a:\"$Sreact.suspense\"\n1b:I[74911,[],\"AsyncMetadata\"]\nc:{}\nf:[\"$\",\"$1a\",null,{\"fallback\":null,\"children\":[\"$\",\"$L1b\",null,{\"promise\":\"$@1c\"}]}]\n"])</script><script>self.__next_f.push([1,"1d:I[57340,[\"5584\",\"static/chunks/b498d07c-095637f0f10883c6.js\",\"2415\",\"static/chunks/2415-689c103fb3d2c28d.js\",\"6874\",\"static/chunks/6874-fbe9a08eb79b991c.js\",\"9554\",\"static/chunks/9554-b714f9de28e85d30.js\",\"1873\",\"static/chunks/app/documents/%5B...slug%5D/page-8f3efa7e6c6c5377.js\"],\"DocumentPageClient\"]\n1e:T28d7a,"])</script><script>self.__next_f.push([1,"\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003ccode\u003euseReducer\u003c/code\u003e 是 React 提供的状态管理 Hook，适用于管理复杂的状态逻辑。它类似于 Redux 的工作方式，通过 reducer 函数来处理状态更新，特别适合处理多个相关状态值或复杂的状态转换逻辑。\u003c/p\u003e\n\u003ch3 id=\"基本作用\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#基本作用\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 基本作用\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e基本作用\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003ccode\u003euseReducer\u003c/code\u003e 的主要作用是：\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e管理复杂的组件状态逻辑\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e处理多个相关的状态值\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e提供可预测的状态更新方式\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e替代多个 useState 的复杂场景\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e与 useContext 结合实现全局状态管理\u003c/li\u003e\n\u003c/ul\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"import%20React%2C%20%7B%20useReducer%20%7D%20from%20'react'%3B%0A%2F%2F%20%E5%AE%9A%E4%B9%89%20reducer%20%E5%87%BD%E6%95%B0%0Afunction%20counterReducer(state%2C%20action)%20%7B%0Aswitch%20(action.type)%20%7B%0Acase%20'increment'%3A%0Areturn%20%7B%20count%3A%20state.count%20%2B%201%20%7D%3B%0Acase%20'decrement'%3A%0Areturn%20%7B%20count%3A%20state.count%20-%201%20%7D%3B%0Acase%20'reset'%3A%0Areturn%20%7B%20count%3A%200%20%7D%3B%0Adefault%3A%0Athrow%20new%20Error(%60%E6%9C%AA%E7%9F%A5%E7%9A%84%20action%20%E7%B1%BB%E5%9E%8B%3A%20%24%7Baction.type%7D%60)%3B%0A%7D%0A%7D%0Afunction%20Counter()%20%7B%0Aconst%20%5Bstate%2C%20dispatch%5D%20%3D%20useReducer(counterReducer%2C%20%7B%20count%3A%200%20%7D)%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E8%AE%A1%E6%95%B0%3A%20%7Bstate.count%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20dispatch(%7B%20type%3A%20'increment'%20%7D)%7D%3E%2B1button%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20dispatch(%7B%20type%3A%20'decrement'%20%7D)%7D%3E-1button%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20dispatch(%7B%20type%3A%20'reset'%20%7D)%7D%3E%E9%87%8D%E7%BD%AEbutton%3E%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eReact\u003c/span\u003e, { useReducer } \u003cspan class=\"hljs-keyword inline\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;react\u0026#x27;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 定义 reducer 函数\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003ecounterReducer\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003estate, action\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003eswitch\u003c/span\u003e (action.\u003cspan class=\"hljs-property inline\"\u003etype\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;increment\u0026#x27;\u003c/span\u003e:\n      \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e { \u003cspan class=\"hljs-attr inline\"\u003ecount\u003c/span\u003e: state.\u003cspan class=\"hljs-property inline\"\u003ecount\u003c/span\u003e + \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e };\n    \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;decrement\u0026#x27;\u003c/span\u003e:\n      \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e { \u003cspan class=\"hljs-attr inline\"\u003ecount\u003c/span\u003e: state.\u003cspan class=\"hljs-property inline\"\u003ecount\u003c/span\u003e - \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e };\n    \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;reset\u0026#x27;\u003c/span\u003e:\n      \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e { \u003cspan class=\"hljs-attr inline\"\u003ecount\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e };\n    \u003cspan class=\"hljs-attr inline\"\u003edefault\u003c/span\u003e:\n      \u003cspan class=\"hljs-keyword inline\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eError\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e`未知的 action 类型: \u003cspan class=\"hljs-subst inline\"\u003e${action.type}\u003c/span\u003e`\u003c/span\u003e);\n  }\n}\n\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eCounter\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [state, dispatch] = \u003cspan class=\"hljs-title function_ inline\"\u003euseReducer\u003c/span\u003e(counterReducer, { \u003cspan class=\"hljs-attr inline\"\u003ecount\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e });\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e计数: {state.count}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e dispatch({ type: \u0026#x27;increment\u0026#x27; })}\u0026gt;+1\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e dispatch({ type: \u0026#x27;decrement\u0026#x27; })}\u0026gt;-1\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e dispatch({ type: \u0026#x27;reset\u0026#x27; })}\u0026gt;重置\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"基本语法\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#基本语法\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 基本语法\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e基本语法\u003c/strong\u003e\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"const%20%5Bstate%2C%20dispatch%5D%20%3D%20useReducer(reducer%2C%20initialState%2C%20init)%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [state, dispatch] = \u003cspan class=\"hljs-title function_ inline\"\u003euseReducer\u003c/span\u003e(reducer, initialState, init);\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003ereducer\u003c/strong\u003e：reducer 函数 \u003ccode\u003e(state, action) =\u0026gt; newState\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003einitialState\u003c/strong\u003e：初始状态值\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003einit\u003c/strong\u003e：可选的初始化函数，用于延迟初始化\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e返回值\u003c/strong\u003e：\u003ccode\u003e[state, dispatch]\u003c/code\u003e 数组\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"与-usestate-的对比\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#与-usestate-的对比\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 与 useState 的对比\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e与 useState 的对比\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003ch4 id=\"使用-usestate（简单状态）\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#使用-usestate（简单状态）\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 使用 useState（简单状态）\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e使用 useState（简单状态）\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20SimpleCounter()%20%7B%0Aconst%20%5Bcount%2C%20setCount%5D%20%3D%20useState(0)%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E8%AE%A1%E6%95%B0%3A%20%7Bcount%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20setCount(count%20%2B%201)%7D%3E%E5%A2%9E%E5%8A%A0button%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20setCount(count%20-%201)%7D%3E%E5%87%8F%E5%B0%91button%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20setCount(0)%7D%3E%E9%87%8D%E7%BD%AEbutton%3E%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eSimpleCounter\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [count, setCount] = \u003cspan class=\"hljs-title function_ inline\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e计数: {count}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e setCount(count + 1)}\u0026gt;增加\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e setCount(count - 1)}\u0026gt;减少\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e setCount(0)}\u0026gt;重置\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch4 id=\"使用-usereducer（复杂状态）\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#使用-usereducer（复杂状态）\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 使用 useReducer（复杂状态）\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e使用 useReducer（复杂状态）\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20ComplexCounter()%20%7B%0Aconst%20initialState%20%3D%20%7B%0Acount%3A%200%2C%0Astep%3A%201%2C%0Ahistory%3A%20%5B%5D%0A%7D%3B%0Afunction%20reducer(state%2C%20action)%20%7B%0Aswitch%20(action.type)%20%7B%0Acase%20'increment'%3A%0Areturn%20%7B%0A...state%2C%0Acount%3A%20state.count%20%2B%20state.step%2C%0Ahistory%3A%20%5B...state.history%2C%20%7B%20action%3A%20'increment'%2C%20value%3A%20state.step%20%7D%5D%0A%7D%3B%0Acase%20'decrement'%3A%0Areturn%20%7B%0A...state%2C%0Acount%3A%20state.count%20-%20state.step%2C%0Ahistory%3A%20%5B...state.history%2C%20%7B%20action%3A%20'decrement'%2C%20value%3A%20state.step%20%7D%5D%0A%7D%3B%0Acase%20'setStep'%3A%0Areturn%20%7B%0A...state%2C%0Astep%3A%20action.payload%0A%7D%3B%0Acase%20'reset'%3A%0Areturn%20%7B%0A...initialState%0A%7D%3B%0Adefault%3A%0Areturn%20state%3B%0A%7D%0A%7D%0Aconst%20%5Bstate%2C%20dispatch%5D%20%3D%20useReducer(reducer%2C%20initialState)%3B%0Areturn%20(%0Adiv%3E%0Ap%3E%E8%AE%A1%E6%95%B0%3A%20%7Bstate.count%7Dp%3E%0Ap%3E%E6%AD%A5%E9%95%BF%3A%20%7Bstate.step%7Dp%3E%0Ainput%0Atype%3D%22number%22%0Avalue%3D%7Bstate.step%7D%0AonChange%3D%7B(e)%20%3D%3E%20dispatch(%7B%0Atype%3A%20'setStep'%2C%0Apayload%3A%20parseInt(e.target.value)%20%7C%7C%201%0A%7D)%7D%0A%2F%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20dispatch(%7B%20type%3A%20'increment'%20%7D)%7D%3E%0A%E5%A2%9E%E5%8A%A0%20%7Bstate.step%7D%0Abutton%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20dispatch(%7B%20type%3A%20'decrement'%20%7D)%7D%3E%0A%E5%87%8F%E5%B0%91%20%7Bstate.step%7D%0Abutton%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20dispatch(%7B%20type%3A%20'reset'%20%7D)%7D%3E%E9%87%8D%E7%BD%AEbutton%3E%0Ah3%3E%E6%93%8D%E4%BD%9C%E5%8E%86%E5%8F%B2%3Ah3%3E%0Aul%3E%0A%7Bstate.history.map((item%2C%20index)%20%3D%3E%20(%0Ali%20key%3D%7Bindex%7D%3E%0A%7Bitem.action%7D%20%7Bitem.value%7D%0Ali%3E%0A))%7D%0Aul%3E%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eComplexCounter\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e initialState = {\n    \u003cspan class=\"hljs-attr inline\"\u003ecount\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr inline\"\u003estep\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr inline\"\u003ehistory\u003c/span\u003e: []\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003ereducer\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003estate, action\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword inline\"\u003eswitch\u003c/span\u003e (action.\u003cspan class=\"hljs-property inline\"\u003etype\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;increment\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n          ...state,\n          \u003cspan class=\"hljs-attr inline\"\u003ecount\u003c/span\u003e: state.\u003cspan class=\"hljs-property inline\"\u003ecount\u003c/span\u003e + state.\u003cspan class=\"hljs-property inline\"\u003estep\u003c/span\u003e,\n          \u003cspan class=\"hljs-attr inline\"\u003ehistory\u003c/span\u003e: [...state.\u003cspan class=\"hljs-property inline\"\u003ehistory\u003c/span\u003e, { \u003cspan class=\"hljs-attr inline\"\u003eaction\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;increment\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e: state.\u003cspan class=\"hljs-property inline\"\u003estep\u003c/span\u003e }]\n        };\n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;decrement\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n          ...state,\n          \u003cspan class=\"hljs-attr inline\"\u003ecount\u003c/span\u003e: state.\u003cspan class=\"hljs-property inline\"\u003ecount\u003c/span\u003e - state.\u003cspan class=\"hljs-property inline\"\u003estep\u003c/span\u003e,\n          \u003cspan class=\"hljs-attr inline\"\u003ehistory\u003c/span\u003e: [...state.\u003cspan class=\"hljs-property inline\"\u003ehistory\u003c/span\u003e, { \u003cspan class=\"hljs-attr inline\"\u003eaction\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;decrement\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e: state.\u003cspan class=\"hljs-property inline\"\u003estep\u003c/span\u003e }]\n        };\n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;setStep\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n          ...state,\n          \u003cspan class=\"hljs-attr inline\"\u003estep\u003c/span\u003e: action.\u003cspan class=\"hljs-property inline\"\u003epayload\u003c/span\u003e\n        };\n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;reset\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n          ...initialState\n        };\n      \u003cspan class=\"hljs-attr inline\"\u003edefault\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e state;\n    }\n  }\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [state, dispatch] = \u003cspan class=\"hljs-title function_ inline\"\u003euseReducer\u003c/span\u003e(reducer, initialState);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e计数: {state.count}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e步长: {state.step}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003einput\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;number\u0026quot;\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{state.step}\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003eonChange\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{(e)\u003c/span\u003e =\u0026gt;\u003c/span\u003e dispatch({ \n          type: \u0026#x27;setStep\u0026#x27;, \n          payload: parseInt(e.target.value) || 1 \n        })}\n      /\u0026gt;\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e dispatch({ type: \u0026#x27;increment\u0026#x27; })}\u0026gt;\n        增加 {state.step}\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e dispatch({ type: \u0026#x27;decrement\u0026#x27; })}\u0026gt;\n        减少 {state.step}\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e dispatch({ type: \u0026#x27;reset\u0026#x27; })}\u0026gt;重置\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eh3\u003c/span\u003e\u0026gt;\u003c/span\u003e操作历史:\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eh3\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eul\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        {state.history.map((item, index) =\u0026gt; (\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eli\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{index}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            {item.action} {item.value}\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eli\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        ))}\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eul\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"表单状态管理\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#表单状态管理\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 表单状态管理\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e表单状态管理\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003ch4 id=\"复杂表单处理\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#复杂表单处理\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 复杂表单处理\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e复杂表单处理\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20FormWithReducer()%20%7B%0Aconst%20initialState%20%3D%20%7B%0Avalues%3A%20%7B%0Aname%3A%20''%2C%0Aemail%3A%20''%2C%0Aage%3A%20''%2C%0Apreferences%3A%20%5B%5D%0A%7D%2C%0Aerrors%3A%20%7B%7D%2C%0AisSubmitting%3A%20false%2C%0AisValid%3A%20false%0A%7D%3B%0Afunction%20formReducer(state%2C%20action)%20%7B%0Aswitch%20(action.type)%20%7B%0Acase%20'SET_FIELD'%3A%0Areturn%20%7B%0A...state%2C%0Avalues%3A%20%7B%0A...state.values%2C%0A%5Baction.field%5D%3A%20action.value%0A%7D%0A%7D%3B%0Acase%20'SET_ERROR'%3A%0Areturn%20%7B%0A...state%2C%0Aerrors%3A%20%7B%0A...state.errors%2C%0A%5Baction.field%5D%3A%20action.error%0A%7D%0A%7D%3B%0Acase%20'CLEAR_ERROR'%3A%0Aconst%20newErrors%20%3D%20%7B%20...state.errors%20%7D%3B%0Adelete%20newErrors%5Baction.field%5D%3B%0Areturn%20%7B%0A...state%2C%0Aerrors%3A%20newErrors%0A%7D%3B%0Acase%20'ADD_PREFERENCE'%3A%0Areturn%20%7B%0A...state%2C%0Avalues%3A%20%7B%0A...state.values%2C%0Apreferences%3A%20%5B...state.values.preferences%2C%20action.preference%5D%0A%7D%0A%7D%3B%0Acase%20'REMOVE_PREFERENCE'%3A%0Areturn%20%7B%0A...state%2C%0Avalues%3A%20%7B%0A...state.values%2C%0Apreferences%3A%20state.values.preferences.filter(p%20%3D%3E%20p%20!%3D%3D%20action.preference)%0A%7D%0A%7D%3B%0Acase%20'SET_SUBMITTING'%3A%0Areturn%20%7B%0A...state%2C%0AisSubmitting%3A%20action.isSubmitting%0A%7D%3B%0Acase%20'RESET_FORM'%3A%0Areturn%20initialState%3B%0Adefault%3A%0Areturn%20state%3B%0A%7D%0A%7D%0Aconst%20%5Bstate%2C%20dispatch%5D%20%3D%20useReducer(formReducer%2C%20initialState)%3B%0Aconst%20handleFieldChange%20%3D%20(field%2C%20value)%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'SET_FIELD'%2C%20field%2C%20value%20%7D)%3B%0A%2F%2F%20%E5%AE%9E%E6%97%B6%E9%AA%8C%E8%AF%81%0Aif%20(field%20%3D%3D%3D%20'email'%20%26%26%20value%20%26%26%20!value.includes('%40'))%20%7B%0Adispatch(%7B%20type%3A%20'SET_ERROR'%2C%20field%2C%20error%3A%20'%E8%AF%B7%E8%BE%93%E5%85%A5%E6%9C%89%E6%95%88%E7%9A%84%E9%82%AE%E7%AE%B1%E5%9C%B0%E5%9D%80'%20%7D)%3B%0A%7D%20else%20%7B%0Adispatch(%7B%20type%3A%20'CLEAR_ERROR'%2C%20field%20%7D)%3B%0A%7D%0A%7D%3B%0Aconst%20handleSubmit%20%3D%20async%20(e)%20%3D%3E%20%7B%0Ae.preventDefault()%3B%0Adispatch(%7B%20type%3A%20'SET_SUBMITTING'%2C%20isSubmitting%3A%20true%20%7D)%3B%0Atry%20%7B%0A%2F%2F%20%E6%A8%A1%E6%8B%9FAPI%E8%B0%83%E7%94%A8%0Aawait%20new%20Promise(resolve%20%3D%3E%20setTimeout(resolve%2C%202000))%3B%0Aconsole.log('%E8%A1%A8%E5%8D%95%E6%8F%90%E4%BA%A4%E6%88%90%E5%8A%9F%3A'%2C%20state.values)%3B%0Adispatch(%7B%20type%3A%20'RESET_FORM'%20%7D)%3B%0A%7D%20catch%20(error)%20%7B%0Aconsole.error('%E6%8F%90%E4%BA%A4%E5%A4%B1%E8%B4%A5%3A'%2C%20error)%3B%0A%7D%20finally%20%7B%0Adispatch(%7B%20type%3A%20'SET_SUBMITTING'%2C%20isSubmitting%3A%20false%20%7D)%3B%0A%7D%0A%7D%3B%0Areturn%20(%0Aform%20onSubmit%3D%7BhandleSubmit%7D%3E%0Adiv%3E%0Alabel%3E%E5%A7%93%E5%90%8D%3Alabel%3E%0Ainput%0Avalue%3D%7Bstate.values.name%7D%0AonChange%3D%7B(e)%20%3D%3E%20handleFieldChange('name'%2C%20e.target.value)%7D%0A%2F%3E%0A%7Bstate.errors.name%20%26%26%20span%20style%3D%7B%7Bcolor%3A%20'red'%7D%7D%3E%7Bstate.errors.name%7Dspan%3E%7D%0Adiv%3E%0Adiv%3E%0Alabel%3E%E9%82%AE%E7%AE%B1%3Alabel%3E%0Ainput%0Avalue%3D%7Bstate.values.email%7D%0AonChange%3D%7B(e)%20%3D%3E%20handleFieldChange('email'%2C%20e.target.value)%7D%0A%2F%3E%0A%7Bstate.errors.email%20%26%26%20span%20style%3D%7B%7Bcolor%3A%20'red'%7D%7D%3E%7Bstate.errors.email%7Dspan%3E%7D%0Adiv%3E%0Adiv%3E%0Alabel%3E%E5%B9%B4%E9%BE%84%3Alabel%3E%0Ainput%0Atype%3D%22number%22%0Avalue%3D%7Bstate.values.age%7D%0AonChange%3D%7B(e)%20%3D%3E%20handleFieldChange('age'%2C%20e.target.value)%7D%0A%2F%3E%0Adiv%3E%0Adiv%3E%0Alabel%3E%E5%81%8F%E5%A5%BD%3Alabel%3E%0A%7B%5B'%E6%8A%80%E6%9C%AF'%2C%20'%E8%AE%BE%E8%AE%A1'%2C%20'%E7%AE%A1%E7%90%86'%5D.map(pref%20%3D%3E%20(%0Alabel%20key%3D%7Bpref%7D%3E%0Ainput%0Atype%3D%22checkbox%22%0Achecked%3D%7Bstate.values.preferences.includes(pref)%7D%0AonChange%3D%7B(e)%20%3D%3E%20%7B%0Aif%20(e.target.checked)%20%7B%0Adispatch(%7B%20type%3A%20'ADD_PREFERENCE'%2C%20preference%3A%20pref%20%7D)%3B%0A%7D%20else%20%7B%0Adispatch(%7B%20type%3A%20'REMOVE_PREFERENCE'%2C%20preference%3A%20pref%20%7D)%3B%0A%7D%0A%7D%7D%0A%2F%3E%0A%7Bpref%7D%0Alabel%3E%0A))%7D%0Adiv%3E%0Abutton%20type%3D%22submit%22%20disabled%3D%7Bstate.isSubmitting%7D%3E%0A%7Bstate.isSubmitting%20%3F%20'%E6%8F%90%E4%BA%A4%E4%B8%AD...'%20%3A%20'%E6%8F%90%E4%BA%A4'%7D%0Abutton%3E%0Aform%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eFormWithReducer\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e initialState = {\n    \u003cspan class=\"hljs-attr inline\"\u003evalues\u003c/span\u003e: {\n      \u003cspan class=\"hljs-attr inline\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026#x27;\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr inline\"\u003eemail\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026#x27;\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr inline\"\u003eage\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026#x27;\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr inline\"\u003epreferences\u003c/span\u003e: []\n    },\n    \u003cspan class=\"hljs-attr inline\"\u003eerrors\u003c/span\u003e: {},\n    \u003cspan class=\"hljs-attr inline\"\u003eisSubmitting\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr inline\"\u003eisValid\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eformReducer\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003estate, action\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword inline\"\u003eswitch\u003c/span\u003e (action.\u003cspan class=\"hljs-property inline\"\u003etype\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;SET_FIELD\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n          ...state,\n          \u003cspan class=\"hljs-attr inline\"\u003evalues\u003c/span\u003e: {\n            ...state.\u003cspan class=\"hljs-property inline\"\u003evalues\u003c/span\u003e,\n            [action.\u003cspan class=\"hljs-property inline\"\u003efield\u003c/span\u003e]: action.\u003cspan class=\"hljs-property inline\"\u003evalue\u003c/span\u003e\n          }\n        };\n      \n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;SET_ERROR\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n          ...state,\n          \u003cspan class=\"hljs-attr inline\"\u003eerrors\u003c/span\u003e: {\n            ...state.\u003cspan class=\"hljs-property inline\"\u003eerrors\u003c/span\u003e,\n            [action.\u003cspan class=\"hljs-property inline\"\u003efield\u003c/span\u003e]: action.\u003cspan class=\"hljs-property inline\"\u003eerror\u003c/span\u003e\n          }\n        };\n      \n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;CLEAR_ERROR\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e newErrors = { ...state.\u003cspan class=\"hljs-property inline\"\u003eerrors\u003c/span\u003e };\n        \u003cspan class=\"hljs-keyword inline\"\u003edelete\u003c/span\u003e newErrors[action.\u003cspan class=\"hljs-property inline\"\u003efield\u003c/span\u003e];\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n          ...state,\n          \u003cspan class=\"hljs-attr inline\"\u003eerrors\u003c/span\u003e: newErrors\n        };\n      \n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;ADD_PREFERENCE\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n          ...state,\n          \u003cspan class=\"hljs-attr inline\"\u003evalues\u003c/span\u003e: {\n            ...state.\u003cspan class=\"hljs-property inline\"\u003evalues\u003c/span\u003e,\n            \u003cspan class=\"hljs-attr inline\"\u003epreferences\u003c/span\u003e: [...state.\u003cspan class=\"hljs-property inline\"\u003evalues\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003epreferences\u003c/span\u003e, action.\u003cspan class=\"hljs-property inline\"\u003epreference\u003c/span\u003e]\n          }\n        };\n      \n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;REMOVE_PREFERENCE\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n          ...state,\n          \u003cspan class=\"hljs-attr inline\"\u003evalues\u003c/span\u003e: {\n            ...state.\u003cspan class=\"hljs-property inline\"\u003evalues\u003c/span\u003e,\n            \u003cspan class=\"hljs-attr inline\"\u003epreferences\u003c/span\u003e: state.\u003cspan class=\"hljs-property inline\"\u003evalues\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003epreferences\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003efilter\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003ep\u003c/span\u003e =\u0026gt;\u003c/span\u003e p !== action.\u003cspan class=\"hljs-property inline\"\u003epreference\u003c/span\u003e)\n          }\n        };\n      \n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;SET_SUBMITTING\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n          ...state,\n          \u003cspan class=\"hljs-attr inline\"\u003eisSubmitting\u003c/span\u003e: action.\u003cspan class=\"hljs-property inline\"\u003eisSubmitting\u003c/span\u003e\n        };\n      \n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;RESET_FORM\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e initialState;\n      \n      \u003cspan class=\"hljs-attr inline\"\u003edefault\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e state;\n    }\n  }\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [state, dispatch] = \u003cspan class=\"hljs-title function_ inline\"\u003euseReducer\u003c/span\u003e(formReducer, initialState);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003ehandleFieldChange\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003efield, value\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;SET_FIELD\u0026#x27;\u003c/span\u003e, field, value });\n    \n    \u003cspan class=\"hljs-comment inline\"\u003e// 实时验证\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (field === \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;email\u0026#x27;\u003c/span\u003e \u0026amp;\u0026amp; value \u0026amp;\u0026amp; !value.\u003cspan class=\"hljs-title function_ inline\"\u003eincludes\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;@\u0026#x27;\u003c/span\u003e)) {\n      \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;SET_ERROR\u0026#x27;\u003c/span\u003e, field, \u003cspan class=\"hljs-attr inline\"\u003eerror\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;请输入有效的邮箱地址\u0026#x27;\u003c/span\u003e });\n    } \u003cspan class=\"hljs-keyword inline\"\u003eelse\u003c/span\u003e {\n      \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;CLEAR_ERROR\u0026#x27;\u003c/span\u003e, field });\n    }\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003ehandleSubmit\u003c/span\u003e = \u003cspan class=\"hljs-keyword inline\"\u003easync\u003c/span\u003e (\u003cspan class=\"hljs-params inline\"\u003ee\u003c/span\u003e) =\u0026gt; {\n    e.\u003cspan class=\"hljs-title function_ inline\"\u003epreventDefault\u003c/span\u003e();\n    \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;SET_SUBMITTING\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003eisSubmitting\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003etrue\u003c/span\u003e });\n    \n    \u003cspan class=\"hljs-keyword inline\"\u003etry\u003c/span\u003e {\n      \u003cspan class=\"hljs-comment inline\"\u003e// 模拟API调用\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword inline\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003ePromise\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eresolve\u003c/span\u003e =\u0026gt;\u003c/span\u003e \u003cspan class=\"hljs-built_in inline\"\u003esetTimeout\u003c/span\u003e(resolve, \u003cspan class=\"hljs-number inline\"\u003e2000\u003c/span\u003e));\n      \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;表单提交成功:\u0026#x27;\u003c/span\u003e, state.\u003cspan class=\"hljs-property inline\"\u003evalues\u003c/span\u003e);\n      \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;RESET_FORM\u0026#x27;\u003c/span\u003e });\n    } \u003cspan class=\"hljs-keyword inline\"\u003ecatch\u003c/span\u003e (error) {\n      \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003eerror\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;提交失败:\u0026#x27;\u003c/span\u003e, error);\n    } \u003cspan class=\"hljs-keyword inline\"\u003efinally\u003c/span\u003e {\n      \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;SET_SUBMITTING\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003eisSubmitting\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e });\n    }\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eform\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonSubmit\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{handleSubmit}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003elabel\u003c/span\u003e\u0026gt;\u003c/span\u003e姓名:\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003elabel\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003einput\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{state.values.name}\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003eonChange\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{(e)\u003c/span\u003e =\u0026gt;\u003c/span\u003e handleFieldChange(\u0026#x27;name\u0026#x27;, e.target.value)}\n        /\u0026gt;\n        {state.errors.name \u0026amp;\u0026amp; \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003espan\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003estyle\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{color:\u003c/span\u003e \u0026#x27;\u003cspan class=\"hljs-attr inline\"\u003ered\u003c/span\u003e\u0026#x27;}}\u0026gt;\u003c/span\u003e{state.errors.name}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003espan\u003c/span\u003e\u0026gt;\u003c/span\u003e}\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003elabel\u003c/span\u003e\u0026gt;\u003c/span\u003e邮箱:\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003elabel\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003einput\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{state.values.email}\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003eonChange\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{(e)\u003c/span\u003e =\u0026gt;\u003c/span\u003e handleFieldChange(\u0026#x27;email\u0026#x27;, e.target.value)}\n        /\u0026gt;\n        {state.errors.email \u0026amp;\u0026amp; \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003espan\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003estyle\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{color:\u003c/span\u003e \u0026#x27;\u003cspan class=\"hljs-attr inline\"\u003ered\u003c/span\u003e\u0026#x27;}}\u0026gt;\u003c/span\u003e{state.errors.email}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003espan\u003c/span\u003e\u0026gt;\u003c/span\u003e}\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003elabel\u003c/span\u003e\u0026gt;\u003c/span\u003e年龄:\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003elabel\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003einput\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;number\u0026quot;\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{state.values.age}\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003eonChange\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{(e)\u003c/span\u003e =\u0026gt;\u003c/span\u003e handleFieldChange(\u0026#x27;age\u0026#x27;, e.target.value)}\n        /\u0026gt;\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003elabel\u003c/span\u003e\u0026gt;\u003c/span\u003e偏好:\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003elabel\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        {[\u0026#x27;技术\u0026#x27;, \u0026#x27;设计\u0026#x27;, \u0026#x27;管理\u0026#x27;].map(pref =\u0026gt; (\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003elabel\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{pref}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003einput\u003c/span\u003e\n              \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;checkbox\u0026quot;\u003c/span\u003e\n              \u003cspan class=\"hljs-attr inline\"\u003echecked\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{state.values.preferences.includes(pref)}\u003c/span\u003e\n              \u003cspan class=\"hljs-attr inline\"\u003eonChange\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{(e)\u003c/span\u003e =\u0026gt;\u003c/span\u003e {\n                if (e.target.checked) {\n                  dispatch({ type: \u0026#x27;ADD_PREFERENCE\u0026#x27;, preference: pref });\n                } else {\n                  dispatch({ type: \u0026#x27;REMOVE_PREFERENCE\u0026#x27;, preference: pref });\n                }\n              }}\n            /\u0026gt;\n            {pref}\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003elabel\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        ))}\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;submit\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003edisabled\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{state.isSubmitting}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        {state.isSubmitting ? \u0026#x27;提交中...\u0026#x27; : \u0026#x27;提交\u0026#x27;}\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eform\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"购物车状态管理\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#购物车状态管理\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 购物车状态管理\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e购物车状态管理\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003ch4 id=\"电商购物车示例\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#电商购物车示例\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 电商购物车示例\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e电商购物车示例\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20ShoppingCart()%20%7B%0Aconst%20initialState%20%3D%20%7B%0Aitems%3A%20%5B%5D%2C%0Atotal%3A%200%2C%0Adiscount%3A%200%2C%0AcouponCode%3A%20''%2C%0AisLoading%3A%20false%0A%7D%3B%0Afunction%20cartReducer(state%2C%20action)%20%7B%0Aswitch%20(action.type)%20%7B%0Acase%20'ADD_ITEM'%3A%0Aconst%20existingItem%20%3D%20state.items.find(item%20%3D%3E%20item.id%20%3D%3D%3D%20action.item.id)%3B%0Alet%20newItems%3B%0Aif%20(existingItem)%20%7B%0AnewItems%20%3D%20state.items.map(item%20%3D%3E%0Aitem.id%20%3D%3D%3D%20action.item.id%0A%3F%20%7B%20...item%2C%20quantity%3A%20item.quantity%20%2B%201%20%7D%0A%3A%20item%0A)%3B%0A%7D%20else%20%7B%0AnewItems%20%3D%20%5B...state.items%2C%20%7B%20...action.item%2C%20quantity%3A%201%20%7D%5D%3B%0A%7D%0Areturn%20%7B%0A...state%2C%0Aitems%3A%20newItems%2C%0Atotal%3A%20calculateTotal(newItems%2C%20state.discount)%0A%7D%3B%0Acase%20'REMOVE_ITEM'%3A%0Aconst%20filteredItems%20%3D%20state.items.filter(item%20%3D%3E%20item.id%20!%3D%3D%20action.itemId)%3B%0Areturn%20%7B%0A...state%2C%0Aitems%3A%20filteredItems%2C%0Atotal%3A%20calculateTotal(filteredItems%2C%20state.discount)%0A%7D%3B%0Acase%20'UPDATE_QUANTITY'%3A%0Aconst%20updatedItems%20%3D%20state.items.map(item%20%3D%3E%0Aitem.id%20%3D%3D%3D%20action.itemId%0A%3F%20%7B%20...item%2C%20quantity%3A%20Math.max(0%2C%20action.quantity)%20%7D%0A%3A%20item%0A).filter(item%20%3D%3E%20item.quantity%20%3E%200)%3B%0Areturn%20%7B%0A...state%2C%0Aitems%3A%20updatedItems%2C%0Atotal%3A%20calculateTotal(updatedItems%2C%20state.discount)%0A%7D%3B%0Acase%20'APPLY_COUPON'%3A%0Aconst%20discount%20%3D%20calculateDiscount(action.couponCode%2C%20state.items)%3B%0Areturn%20%7B%0A...state%2C%0AcouponCode%3A%20action.couponCode%2C%0Adiscount%2C%0Atotal%3A%20calculateTotal(state.items%2C%20discount)%0A%7D%3B%0Acase%20'CLEAR_CART'%3A%0Areturn%20initialState%3B%0Acase%20'SET_LOADING'%3A%0Areturn%20%7B%0A...state%2C%0AisLoading%3A%20action.isLoading%0A%7D%3B%0Adefault%3A%0Areturn%20state%3B%0A%7D%0A%7D%0A%2F%2F%20%E8%BE%85%E5%8A%A9%E5%87%BD%E6%95%B0%0Aconst%20calculateTotal%20%3D%20(items%2C%20discount%20%3D%200)%20%3D%3E%20%7B%0Aconst%20subtotal%20%3D%20items.reduce((sum%2C%20item)%20%3D%3E%20sum%20%2B%20item.price%20*%20item.quantity%2C%200)%3B%0Areturn%20subtotal%20-%20discount%3B%0A%7D%3B%0Aconst%20calculateDiscount%20%3D%20(couponCode%2C%20items)%20%3D%3E%20%7B%0Aconst%20subtotal%20%3D%20items.reduce((sum%2C%20item)%20%3D%3E%20sum%20%2B%20item.price%20*%20item.quantity%2C%200)%3B%0Aswitch%20(couponCode)%20%7B%0Acase%20'SAVE10'%3A%0Areturn%20subtotal%20*%200.1%3B%0Acase%20'SAVE20'%3A%0Areturn%20subtotal%20*%200.2%3B%0Adefault%3A%0Areturn%200%3B%0A%7D%0A%7D%3B%0Aconst%20%5Bstate%2C%20dispatch%5D%20%3D%20useReducer(cartReducer%2C%20initialState)%3B%0A%2F%2F%20%E5%95%86%E5%93%81%E6%95%B0%E6%8D%AE%0Aconst%20products%20%3D%20%5B%0A%7B%20id%3A%201%2C%20name%3A%20'iPhone%2015'%2C%20price%3A%205999%20%7D%2C%0A%7B%20id%3A%202%2C%20name%3A%20'MacBook%20Pro'%2C%20price%3A%2015999%20%7D%2C%0A%7B%20id%3A%203%2C%20name%3A%20'AirPods'%2C%20price%3A%201299%20%7D%0A%5D%3B%0Aconst%20addToCart%20%3D%20(product)%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'ADD_ITEM'%2C%20item%3A%20product%20%7D)%3B%0A%7D%3B%0Aconst%20removeFromCart%20%3D%20(itemId)%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'REMOVE_ITEM'%2C%20itemId%20%7D)%3B%0A%7D%3B%0Aconst%20updateQuantity%20%3D%20(itemId%2C%20quantity)%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'UPDATE_QUANTITY'%2C%20itemId%2C%20quantity%20%7D)%3B%0A%7D%3B%0Aconst%20applyCoupon%20%3D%20(couponCode)%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'APPLY_COUPON'%2C%20couponCode%20%7D)%3B%0A%7D%3B%0Areturn%20(%0Adiv%3E%0Ah2%3E%E4%BA%A7%E5%93%81%E5%88%97%E8%A1%A8h2%3E%0A%7Bproducts.map(product%20%3D%3E%20(%0Adiv%20key%3D%7Bproduct.id%7D%20style%3D%7B%7B%20border%3A%20'1px%20solid%20%23ccc'%2C%20margin%3A%20'10px'%2C%20padding%3A%20'10px'%20%7D%7D%3E%0Ah3%3E%7Bproduct.name%7Dh3%3E%0Ap%3E%E4%BB%B7%E6%A0%BC%3A%20%C2%A5%7Bproduct.price%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20addToCart(product)%7D%3E%E5%8A%A0%E5%85%A5%E8%B4%AD%E7%89%A9%E8%BD%A6button%3E%0Adiv%3E%0A))%7D%0Ah2%3E%E8%B4%AD%E7%89%A9%E8%BD%A6h2%3E%0A%7Bstate.items.length%20%3D%3D%3D%200%20%3F%20(%0Ap%3E%E8%B4%AD%E7%89%A9%E8%BD%A6%E4%B8%BA%E7%A9%BAp%3E%0A)%20%3A%20(%0A%7Bstate.items.map(item%20%3D%3E%20(%0Adiv%20key%3D%7Bitem.id%7D%20style%3D%7B%7B%20border%3A%20'1px%20solid%20%23eee'%2C%20margin%3A%20'5px'%2C%20padding%3A%20'10px'%20%7D%7D%3E%0Ah4%3E%7Bitem.name%7Dh4%3E%0Ap%3E%E5%8D%95%E4%BB%B7%3A%20%C2%A5%7Bitem.price%7Dp%3E%0Adiv%3E%0A%E6%95%B0%E9%87%8F%3A%0Abutton%20onClick%3D%7B()%20%3D%3E%20updateQuantity(item.id%2C%20item.quantity%20-%201)%7D%3E-button%3E%0Aspan%20style%3D%7B%7B%20margin%3A%20'0%2010px'%20%7D%7D%3E%7Bitem.quantity%7Dspan%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20updateQuantity(item.id%2C%20item.quantity%20%2B%201)%7D%3E%2Bbutton%3E%0Adiv%3E%0Ap%3E%E5%B0%8F%E8%AE%A1%3A%20%C2%A5%7Bitem.price%20*%20item.quantity%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20removeFromCart(item.id)%7D%3E%E7%A7%BB%E9%99%A4button%3E%0Adiv%3E%0A))%7D%0Adiv%3E%0Ainput%0Aplaceholder%3D%22%E8%BE%93%E5%85%A5%E4%BC%98%E6%83%A0%E5%88%B8%E4%BB%A3%E7%A0%81%22%0AonChange%3D%7B(e)%20%3D%3E%20applyCoupon(e.target.value)%7D%0A%2F%3E%0Ap%3E%E6%8A%98%E6%89%A3%3A%20%C2%A5%7Bstate.discount%7Dp%3E%0Ah3%3E%E6%80%BB%E8%AE%A1%3A%20%C2%A5%7Bstate.total%7Dh3%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20dispatch(%7B%20type%3A%20'CLEAR_CART'%20%7D)%7D%3E%E6%B8%85%E7%A9%BA%E8%B4%AD%E7%89%A9%E8%BD%A6button%3E%0Adiv%3E%0A)%7D%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eShoppingCart\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e initialState = {\n    \u003cspan class=\"hljs-attr inline\"\u003eitems\u003c/span\u003e: [],\n    \u003cspan class=\"hljs-attr inline\"\u003etotal\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr inline\"\u003ediscount\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr inline\"\u003ecouponCode\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026#x27;\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr inline\"\u003eisLoading\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003ecartReducer\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003estate, action\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword inline\"\u003eswitch\u003c/span\u003e (action.\u003cspan class=\"hljs-property inline\"\u003etype\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;ADD_ITEM\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e existingItem = state.\u003cspan class=\"hljs-property inline\"\u003eitems\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003efind\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eitem\u003c/span\u003e =\u0026gt;\u003c/span\u003e item.\u003cspan class=\"hljs-property inline\"\u003eid\u003c/span\u003e === action.\u003cspan class=\"hljs-property inline\"\u003eitem\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003eid\u003c/span\u003e);\n        \u003cspan class=\"hljs-keyword inline\"\u003elet\u003c/span\u003e newItems;\n        \n        \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (existingItem) {\n          newItems = state.\u003cspan class=\"hljs-property inline\"\u003eitems\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003emap\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eitem\u003c/span\u003e =\u0026gt;\u003c/span\u003e\n            item.\u003cspan class=\"hljs-property inline\"\u003eid\u003c/span\u003e === action.\u003cspan class=\"hljs-property inline\"\u003eitem\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003eid\u003c/span\u003e\n              ? { ...item, \u003cspan class=\"hljs-attr inline\"\u003equantity\u003c/span\u003e: item.\u003cspan class=\"hljs-property inline\"\u003equantity\u003c/span\u003e + \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e }\n              : item\n          );\n        } \u003cspan class=\"hljs-keyword inline\"\u003eelse\u003c/span\u003e {\n          newItems = [...state.\u003cspan class=\"hljs-property inline\"\u003eitems\u003c/span\u003e, { ...action.\u003cspan class=\"hljs-property inline\"\u003eitem\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003equantity\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e }];\n        }\n\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n          ...state,\n          \u003cspan class=\"hljs-attr inline\"\u003eitems\u003c/span\u003e: newItems,\n          \u003cspan class=\"hljs-attr inline\"\u003etotal\u003c/span\u003e: \u003cspan class=\"hljs-title function_ inline\"\u003ecalculateTotal\u003c/span\u003e(newItems, state.\u003cspan class=\"hljs-property inline\"\u003ediscount\u003c/span\u003e)\n        };\n\n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;REMOVE_ITEM\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e filteredItems = state.\u003cspan class=\"hljs-property inline\"\u003eitems\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003efilter\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eitem\u003c/span\u003e =\u0026gt;\u003c/span\u003e item.\u003cspan class=\"hljs-property inline\"\u003eid\u003c/span\u003e !== action.\u003cspan class=\"hljs-property inline\"\u003eitemId\u003c/span\u003e);\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n          ...state,\n          \u003cspan class=\"hljs-attr inline\"\u003eitems\u003c/span\u003e: filteredItems,\n          \u003cspan class=\"hljs-attr inline\"\u003etotal\u003c/span\u003e: \u003cspan class=\"hljs-title function_ inline\"\u003ecalculateTotal\u003c/span\u003e(filteredItems, state.\u003cspan class=\"hljs-property inline\"\u003ediscount\u003c/span\u003e)\n        };\n\n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;UPDATE_QUANTITY\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e updatedItems = state.\u003cspan class=\"hljs-property inline\"\u003eitems\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003emap\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eitem\u003c/span\u003e =\u0026gt;\u003c/span\u003e\n          item.\u003cspan class=\"hljs-property inline\"\u003eid\u003c/span\u003e === action.\u003cspan class=\"hljs-property inline\"\u003eitemId\u003c/span\u003e\n            ? { ...item, \u003cspan class=\"hljs-attr inline\"\u003equantity\u003c/span\u003e: \u003cspan class=\"hljs-title class_ inline\"\u003eMath\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003emax\u003c/span\u003e(\u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e, action.\u003cspan class=\"hljs-property inline\"\u003equantity\u003c/span\u003e) }\n            : item\n        ).\u003cspan class=\"hljs-title function_ inline\"\u003efilter\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003eitem\u003c/span\u003e =\u0026gt;\u003c/span\u003e item.\u003cspan class=\"hljs-property inline\"\u003equantity\u003c/span\u003e \u0026gt; \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e);\n\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n          ...state,\n          \u003cspan class=\"hljs-attr inline\"\u003eitems\u003c/span\u003e: updatedItems,\n          \u003cspan class=\"hljs-attr inline\"\u003etotal\u003c/span\u003e: \u003cspan class=\"hljs-title function_ inline\"\u003ecalculateTotal\u003c/span\u003e(updatedItems, state.\u003cspan class=\"hljs-property inline\"\u003ediscount\u003c/span\u003e)\n        };\n\n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;APPLY_COUPON\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e discount = \u003cspan class=\"hljs-title function_ inline\"\u003ecalculateDiscount\u003c/span\u003e(action.\u003cspan class=\"hljs-property inline\"\u003ecouponCode\u003c/span\u003e, state.\u003cspan class=\"hljs-property inline\"\u003eitems\u003c/span\u003e);\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n          ...state,\n          \u003cspan class=\"hljs-attr inline\"\u003ecouponCode\u003c/span\u003e: action.\u003cspan class=\"hljs-property inline\"\u003ecouponCode\u003c/span\u003e,\n          discount,\n          \u003cspan class=\"hljs-attr inline\"\u003etotal\u003c/span\u003e: \u003cspan class=\"hljs-title function_ inline\"\u003ecalculateTotal\u003c/span\u003e(state.\u003cspan class=\"hljs-property inline\"\u003eitems\u003c/span\u003e, discount)\n        };\n\n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;CLEAR_CART\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e initialState;\n\n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;SET_LOADING\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n          ...state,\n          \u003cspan class=\"hljs-attr inline\"\u003eisLoading\u003c/span\u003e: action.\u003cspan class=\"hljs-property inline\"\u003eisLoading\u003c/span\u003e\n        };\n\n      \u003cspan class=\"hljs-attr inline\"\u003edefault\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e state;\n    }\n  }\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 辅助函数\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003ecalculateTotal\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003eitems, discount = \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e subtotal = items.\u003cspan class=\"hljs-title function_ inline\"\u003ereduce\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003esum, item\u003c/span\u003e) =\u0026gt;\u003c/span\u003e sum + item.\u003cspan class=\"hljs-property inline\"\u003eprice\u003c/span\u003e * item.\u003cspan class=\"hljs-property inline\"\u003equantity\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e subtotal - discount;\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003ecalculateDiscount\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003ecouponCode, items\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e subtotal = items.\u003cspan class=\"hljs-title function_ inline\"\u003ereduce\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003esum, item\u003c/span\u003e) =\u0026gt;\u003c/span\u003e sum + item.\u003cspan class=\"hljs-property inline\"\u003eprice\u003c/span\u003e * item.\u003cspan class=\"hljs-property inline\"\u003equantity\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword inline\"\u003eswitch\u003c/span\u003e (couponCode) {\n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;SAVE10\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e subtotal * \u003cspan class=\"hljs-number inline\"\u003e0.1\u003c/span\u003e;\n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;SAVE20\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e subtotal * \u003cspan class=\"hljs-number inline\"\u003e0.2\u003c/span\u003e;\n      \u003cspan class=\"hljs-attr inline\"\u003edefault\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e;\n    }\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [state, dispatch] = \u003cspan class=\"hljs-title function_ inline\"\u003euseReducer\u003c/span\u003e(cartReducer, initialState);\n\n  \u003cspan class=\"hljs-comment inline\"\u003e// 商品数据\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e products = [\n    { \u003cspan class=\"hljs-attr inline\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;iPhone 15\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003eprice\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e5999\u003c/span\u003e },\n    { \u003cspan class=\"hljs-attr inline\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;MacBook Pro\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003eprice\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e15999\u003c/span\u003e },\n    { \u003cspan class=\"hljs-attr inline\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;AirPods\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003eprice\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e1299\u003c/span\u003e }\n  ];\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eaddToCart\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003eproduct\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;ADD_ITEM\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003eitem\u003c/span\u003e: product });\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eremoveFromCart\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003eitemId\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;REMOVE_ITEM\u0026#x27;\u003c/span\u003e, itemId });\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eupdateQuantity\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003eitemId, quantity\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;UPDATE_QUANTITY\u0026#x27;\u003c/span\u003e, itemId, quantity });\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eapplyCoupon\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003ecouponCode\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;APPLY_COUPON\u0026#x27;\u003c/span\u003e, couponCode });\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eh2\u003c/span\u003e\u0026gt;\u003c/span\u003e产品列表\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eh2\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {products.map(product =\u0026gt; (\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{product.id}\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003estyle\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eborder:\u003c/span\u003e \u0026#x27;\u003cspan class=\"hljs-attr inline\"\u003e1px\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003esolid\u003c/span\u003e #\u003cspan class=\"hljs-attr inline\"\u003eccc\u003c/span\u003e\u0026#x27;, \u003cspan class=\"hljs-attr inline\"\u003emargin:\u003c/span\u003e \u0026#x27;\u003cspan class=\"hljs-attr inline\"\u003e10px\u003c/span\u003e\u0026#x27;, \u003cspan class=\"hljs-attr inline\"\u003epadding:\u003c/span\u003e \u0026#x27;\u003cspan class=\"hljs-attr inline\"\u003e10px\u003c/span\u003e\u0026#x27; }}\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eh3\u003c/span\u003e\u0026gt;\u003c/span\u003e{product.name}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eh3\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e价格: ¥{product.price}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e addToCart(product)}\u0026gt;加入购物车\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      ))}\n\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eh2\u003c/span\u003e\u0026gt;\u003c/span\u003e购物车\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eh2\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {state.items.length === 0 ? (\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e购物车为空\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      ) : (\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u0026gt;\u003c/span\u003e\n          {state.items.map(item =\u0026gt; (\n            \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{item.id}\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003estyle\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eborder:\u003c/span\u003e \u0026#x27;\u003cspan class=\"hljs-attr inline\"\u003e1px\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003esolid\u003c/span\u003e #\u003cspan class=\"hljs-attr inline\"\u003eeee\u003c/span\u003e\u0026#x27;, \u003cspan class=\"hljs-attr inline\"\u003emargin:\u003c/span\u003e \u0026#x27;\u003cspan class=\"hljs-attr inline\"\u003e5px\u003c/span\u003e\u0026#x27;, \u003cspan class=\"hljs-attr inline\"\u003epadding:\u003c/span\u003e \u0026#x27;\u003cspan class=\"hljs-attr inline\"\u003e10px\u003c/span\u003e\u0026#x27; }}\u0026gt;\u003c/span\u003e\n              \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eh4\u003c/span\u003e\u0026gt;\u003c/span\u003e{item.name}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eh4\u003c/span\u003e\u0026gt;\u003c/span\u003e\n              \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e单价: ¥{item.price}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n              \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n                数量: \n                \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e updateQuantity(item.id, item.quantity - 1)}\u0026gt;-\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n                \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003espan\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003estyle\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003emargin:\u003c/span\u003e \u0026#x27;\u003cspan class=\"hljs-attr inline\"\u003e0\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003e10px\u003c/span\u003e\u0026#x27; }}\u0026gt;\u003c/span\u003e{item.quantity}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003espan\u003c/span\u003e\u0026gt;\u003c/span\u003e\n                \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e updateQuantity(item.id, item.quantity + 1)}\u0026gt;+\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n              \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n              \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e小计: ¥{item.price * item.quantity}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n              \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e removeFromCart(item.id)}\u0026gt;移除\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          ))}\n\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003einput\u003c/span\u003e\n              \u003cspan class=\"hljs-attr inline\"\u003eplaceholder\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;输入优惠券代码\u0026quot;\u003c/span\u003e\n              \u003cspan class=\"hljs-attr inline\"\u003eonChange\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{(e)\u003c/span\u003e =\u0026gt;\u003c/span\u003e applyCoupon(e.target.value)}\n            /\u0026gt;\n            \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e折扣: ¥{state.discount}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eh3\u003c/span\u003e\u0026gt;\u003c/span\u003e总计: ¥{state.total}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eh3\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e dispatch({ type: \u0026#x27;CLEAR_CART\u0026#x27; })}\u0026gt;清空购物车\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u0026gt;\u003c/span\u003e\u003c/span\u003e\n      )}\n    \u0026lt;/div\u0026gt;\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"与-usecontext-结合使用\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#与-usecontext-结合使用\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 与 useContext 结合使用\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e与 useContext 结合使用\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003ch4 id=\"全局状态管理\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#全局状态管理\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 全局状态管理\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e全局状态管理\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"%2F%2F%20%E5%88%9B%E5%BB%BA%20Context%0Aconst%20AppContext%20%3D%20React.createContext()%3B%0A%2F%2F%20%E5%88%9D%E5%A7%8B%E7%8A%B6%E6%80%81%0Aconst%20initialState%20%3D%20%7B%0Auser%3A%20null%2C%0Atheme%3A%20'light'%2C%0Anotifications%3A%20%5B%5D%2C%0AisLoading%3A%20false%0A%7D%3B%0A%2F%2F%20Reducer%20%E5%87%BD%E6%95%B0%0Afunction%20appReducer(state%2C%20action)%20%7B%0Aswitch%20(action.type)%20%7B%0Acase%20'SET_USER'%3A%0Areturn%20%7B%0A...state%2C%0Auser%3A%20action.user%0A%7D%3B%0Acase%20'LOGOUT'%3A%0Areturn%20%7B%0A...state%2C%0Auser%3A%20null%0A%7D%3B%0Acase%20'TOGGLE_THEME'%3A%0Areturn%20%7B%0A...state%2C%0Atheme%3A%20state.theme%20%3D%3D%3D%20'light'%20%3F%20'dark'%20%3A%20'light'%0A%7D%3B%0Acase%20'ADD_NOTIFICATION'%3A%0Areturn%20%7B%0A...state%2C%0Anotifications%3A%20%5B...state.notifications%2C%20%7B%0Aid%3A%20Date.now()%2C%0Amessage%3A%20action.message%2C%0Atype%3A%20action.notificationType%20%7C%7C%20'info'%0A%7D%5D%0A%7D%3B%0Acase%20'REMOVE_NOTIFICATION'%3A%0Areturn%20%7B%0A...state%2C%0Anotifications%3A%20state.notifications.filter(n%20%3D%3E%20n.id%20!%3D%3D%20action.id)%0A%7D%3B%0Acase%20'SET_LOADING'%3A%0Areturn%20%7B%0A...state%2C%0AisLoading%3A%20action.isLoading%0A%7D%3B%0Adefault%3A%0Areturn%20state%3B%0A%7D%0A%7D%0A%2F%2F%20Provider%20%E7%BB%84%E4%BB%B6%0Afunction%20AppProvider(%7B%20children%20%7D)%20%7B%0Aconst%20%5Bstate%2C%20dispatch%5D%20%3D%20useReducer(appReducer%2C%20initialState)%3B%0Aconst%20actions%20%3D%20%7B%0Alogin%3A%20(user)%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'SET_USER'%2C%20user%20%7D)%3B%0Adispatch(%7B%20type%3A%20'ADD_NOTIFICATION'%2C%20message%3A%20'%E7%99%BB%E5%BD%95%E6%88%90%E5%8A%9F'%2C%20notificationType%3A%20'success'%20%7D)%3B%0A%7D%2C%0Alogout%3A%20()%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'LOGOUT'%20%7D)%3B%0Adispatch(%7B%20type%3A%20'ADD_NOTIFICATION'%2C%20message%3A%20'%E5%B7%B2%E9%80%80%E5%87%BA%E7%99%BB%E5%BD%95'%2C%20notificationType%3A%20'info'%20%7D)%3B%0A%7D%2C%0AtoggleTheme%3A%20()%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'TOGGLE_THEME'%20%7D)%3B%0A%7D%2C%0AaddNotification%3A%20(message%2C%20type)%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'ADD_NOTIFICATION'%2C%20message%2C%20notificationType%3A%20type%20%7D)%3B%0A%7D%2C%0AremoveNotification%3A%20(id)%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'REMOVE_NOTIFICATION'%2C%20id%20%7D)%3B%0A%7D%2C%0AsetLoading%3A%20(isLoading)%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'SET_LOADING'%2C%20isLoading%20%7D)%3B%0A%7D%0A%7D%3B%0Areturn%20(%0AAppContext.Provider%20value%3D%7B%7B%20state%2C%20actions%20%7D%7D%3E%0A%7Bchildren%7D%0AAppContext.Provider%3E%0A)%3B%0A%7D%0A%2F%2F%20%E8%87%AA%E5%AE%9A%E4%B9%89%20Hook%0Afunction%20useAppContext()%20%7B%0Aconst%20context%20%3D%20useContext(AppContext)%3B%0Aif%20(!context)%20%7B%0Athrow%20new%20Error('useAppContext%20%E5%BF%85%E9%A1%BB%E5%9C%A8%20AppProvider%20%E5%86%85%E9%83%A8%E4%BD%BF%E7%94%A8')%3B%0A%7D%0Areturn%20context%3B%0A%7D%0A%2F%2F%20%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B%E7%BB%84%E4%BB%B6%0Afunction%20Header()%20%7B%0Aconst%20%7B%20state%2C%20actions%20%7D%20%3D%20useAppContext()%3B%0Areturn%20(%0Aheader%20style%3D%7B%7B%0Abackground%3A%20state.theme%20%3D%3D%3D%20'light'%20%3F%20'%23fff'%20%3A%20'%23333'%2C%0Acolor%3A%20state.theme%20%3D%3D%3D%20'light'%20%3F%20'%23333'%20%3A%20'%23fff'%2C%0Apadding%3A%20'1rem'%0A%7D%7D%3E%0Ah1%3E%E6%88%91%E7%9A%84%E5%BA%94%E7%94%A8h1%3E%0Adiv%3E%0A%7Bstate.user%20%3F%20(%0Adiv%3E%0Aspan%3E%E6%AC%A2%E8%BF%8E%2C%20%7Bstate.user.name%7Dspan%3E%0Abutton%20onClick%3D%7Bactions.logout%7D%3E%E9%80%80%E5%87%BAbutton%3E%0Adiv%3E%0A)%20%3A%20(%0Abutton%20onClick%3D%7B()%20%3D%3E%20actions.login(%7B%20name%3A%20'%E7%94%A8%E6%88%B7'%2C%20id%3A%201%20%7D)%7D%3E%0A%E7%99%BB%E5%BD%95%0Abutton%3E%0A)%7D%0Abutton%20onClick%3D%7Bactions.toggleTheme%7D%3E%0A%E5%88%87%E6%8D%A2%E5%88%B0%20%7Bstate.theme%20%3D%3D%3D%20'light'%20%3F%20'%E6%9A%97%E8%89%B2'%20%3A%20'%E4%BA%AE%E8%89%B2'%7D%20%E4%B8%BB%E9%A2%98%0Abutton%3E%0Adiv%3E%0Aheader%3E%0A)%3B%0A%7D%0Afunction%20NotificationList()%20%7B%0Aconst%20%7B%20state%2C%20actions%20%7D%20%3D%20useAppContext()%3B%0Areturn%20(%0Adiv%3E%0A%7Bstate.notifications.map(notification%20%3D%3E%20(%0Adiv%0Akey%3D%7Bnotification.id%7D%0Astyle%3D%7B%7B%0Apadding%3A%20'10px'%2C%0Amargin%3A%20'5px'%2C%0Abackground%3A%20notification.type%20%3D%3D%3D%20'success'%20%3F%20'green'%20%3A%0Anotification.type%20%3D%3D%3D%20'error'%20%3F%20'red'%20%3A%20'blue'%2C%0Acolor%3A%20'white'%0A%7D%7D%0A%3E%0A%7Bnotification.message%7D%0Abutton%20onClick%3D%7B()%20%3D%3E%20actions.removeNotification(notification.id)%7D%3E%0A%C3%97%0Abutton%3E%0Adiv%3E%0A))%7D%0Adiv%3E%0A)%3B%0A%7D%0A%2F%2F%20%E4%B8%BB%E5%BA%94%E7%94%A8%0Afunction%20App()%20%7B%0Areturn%20(%0AAppProvider%3E%0AHeader%20%2F%3E%0ANotificationList%20%2F%3E%0AAppProvider%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// 创建 Context\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eAppContext\u003c/span\u003e = \u003cspan class=\"hljs-title class_ inline\"\u003eReact\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003ecreateContext\u003c/span\u003e();\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 初始状态\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e initialState = {\n  \u003cspan class=\"hljs-attr inline\"\u003euser\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003enull\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr inline\"\u003etheme\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;light\u0026#x27;\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr inline\"\u003enotifications\u003c/span\u003e: [],\n  \u003cspan class=\"hljs-attr inline\"\u003eisLoading\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e\n};\n\n\u003cspan class=\"hljs-comment inline\"\u003e// Reducer 函数\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eappReducer\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003estate, action\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003eswitch\u003c/span\u003e (action.\u003cspan class=\"hljs-property inline\"\u003etype\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;SET_USER\u0026#x27;\u003c/span\u003e:\n      \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n        ...state,\n        \u003cspan class=\"hljs-attr inline\"\u003euser\u003c/span\u003e: action.\u003cspan class=\"hljs-property inline\"\u003euser\u003c/span\u003e\n      };\n    \n    \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;LOGOUT\u0026#x27;\u003c/span\u003e:\n      \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n        ...state,\n        \u003cspan class=\"hljs-attr inline\"\u003euser\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003enull\u003c/span\u003e\n      };\n    \n    \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;TOGGLE_THEME\u0026#x27;\u003c/span\u003e:\n      \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n        ...state,\n        \u003cspan class=\"hljs-attr inline\"\u003etheme\u003c/span\u003e: state.\u003cspan class=\"hljs-property inline\"\u003etheme\u003c/span\u003e === \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;light\u0026#x27;\u003c/span\u003e ? \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;dark\u0026#x27;\u003c/span\u003e : \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;light\u0026#x27;\u003c/span\u003e\n      };\n    \n    \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;ADD_NOTIFICATION\u0026#x27;\u003c/span\u003e:\n      \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n        ...state,\n        \u003cspan class=\"hljs-attr inline\"\u003enotifications\u003c/span\u003e: [...state.\u003cspan class=\"hljs-property inline\"\u003enotifications\u003c/span\u003e, {\n          \u003cspan class=\"hljs-attr inline\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-title class_ inline\"\u003eDate\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003enow\u003c/span\u003e(),\n          \u003cspan class=\"hljs-attr inline\"\u003emessage\u003c/span\u003e: action.\u003cspan class=\"hljs-property inline\"\u003emessage\u003c/span\u003e,\n          \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: action.\u003cspan class=\"hljs-property inline\"\u003enotificationType\u003c/span\u003e || \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;info\u0026#x27;\u003c/span\u003e\n        }]\n      };\n    \n    \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;REMOVE_NOTIFICATION\u0026#x27;\u003c/span\u003e:\n      \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n        ...state,\n        \u003cspan class=\"hljs-attr inline\"\u003enotifications\u003c/span\u003e: state.\u003cspan class=\"hljs-property inline\"\u003enotifications\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003efilter\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003en\u003c/span\u003e =\u0026gt;\u003c/span\u003e n.\u003cspan class=\"hljs-property inline\"\u003eid\u003c/span\u003e !== action.\u003cspan class=\"hljs-property inline\"\u003eid\u003c/span\u003e)\n      };\n    \n    \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;SET_LOADING\u0026#x27;\u003c/span\u003e:\n      \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n        ...state,\n        \u003cspan class=\"hljs-attr inline\"\u003eisLoading\u003c/span\u003e: action.\u003cspan class=\"hljs-property inline\"\u003eisLoading\u003c/span\u003e\n      };\n    \n    \u003cspan class=\"hljs-attr inline\"\u003edefault\u003c/span\u003e:\n      \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e state;\n  }\n}\n\n\u003cspan class=\"hljs-comment inline\"\u003e// Provider 组件\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eAppProvider\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e{ children }\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [state, dispatch] = \u003cspan class=\"hljs-title function_ inline\"\u003euseReducer\u003c/span\u003e(appReducer, initialState);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e actions = {\n    \u003cspan class=\"hljs-attr inline\"\u003elogin\u003c/span\u003e: \u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003euser\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n      \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;SET_USER\u0026#x27;\u003c/span\u003e, user });\n      \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;ADD_NOTIFICATION\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003emessage\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;登录成功\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003enotificationType\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;success\u0026#x27;\u003c/span\u003e });\n    },\n    \n    \u003cspan class=\"hljs-attr inline\"\u003elogout\u003c/span\u003e: \u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n      \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;LOGOUT\u0026#x27;\u003c/span\u003e });\n      \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;ADD_NOTIFICATION\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003emessage\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;已退出登录\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003enotificationType\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;info\u0026#x27;\u003c/span\u003e });\n    },\n    \n    \u003cspan class=\"hljs-attr inline\"\u003etoggleTheme\u003c/span\u003e: \u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n      \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;TOGGLE_THEME\u0026#x27;\u003c/span\u003e });\n    },\n    \n    \u003cspan class=\"hljs-attr inline\"\u003eaddNotification\u003c/span\u003e: \u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003emessage, type\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n      \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;ADD_NOTIFICATION\u0026#x27;\u003c/span\u003e, message, \u003cspan class=\"hljs-attr inline\"\u003enotificationType\u003c/span\u003e: type });\n    },\n    \n    \u003cspan class=\"hljs-attr inline\"\u003eremoveNotification\u003c/span\u003e: \u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003eid\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n      \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;REMOVE_NOTIFICATION\u0026#x27;\u003c/span\u003e, id });\n    },\n    \n    \u003cspan class=\"hljs-attr inline\"\u003esetLoading\u003c/span\u003e: \u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003eisLoading\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n      \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;SET_LOADING\u0026#x27;\u003c/span\u003e, isLoading });\n    }\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eAppContext.Provider\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003estate\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003eactions\u003c/span\u003e }}\u0026gt;\u003c/span\u003e\n      {children}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eAppContext.Provider\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 自定义 Hook\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003euseAppContext\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e context = \u003cspan class=\"hljs-title function_ inline\"\u003euseContext\u003c/span\u003e(\u003cspan class=\"hljs-title class_ inline\"\u003eAppContext\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (!context) {\n    \u003cspan class=\"hljs-keyword inline\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eError\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;useAppContext 必须在 AppProvider 内部使用\u0026#x27;\u003c/span\u003e);\n  }\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e context;\n}\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 使用示例组件\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eHeader\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e { state, actions } = \u003cspan class=\"hljs-title function_ inline\"\u003euseAppContext\u003c/span\u003e();\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eheader\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003estyle\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e \n      \u003cspan class=\"hljs-attr inline\"\u003ebackground:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003estate.theme\u003c/span\u003e === \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;light\u0026#x27;\u003c/span\u003e ? \u0026#x27;#\u003cspan class=\"hljs-attr inline\"\u003efff\u003c/span\u003e\u0026#x27; \u003cspan class=\"hljs-attr inline\"\u003e:\u003c/span\u003e \u0026#x27;#\u003cspan class=\"hljs-attr inline\"\u003e333\u003c/span\u003e\u0026#x27;,\n      \u003cspan class=\"hljs-attr inline\"\u003ecolor:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003estate.theme\u003c/span\u003e === \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;light\u0026#x27;\u003c/span\u003e ? \u0026#x27;#\u003cspan class=\"hljs-attr inline\"\u003e333\u003c/span\u003e\u0026#x27; \u003cspan class=\"hljs-attr inline\"\u003e:\u003c/span\u003e \u0026#x27;#\u003cspan class=\"hljs-attr inline\"\u003efff\u003c/span\u003e\u0026#x27;,\n      \u003cspan class=\"hljs-attr inline\"\u003epadding:\u003c/span\u003e \u0026#x27;\u003cspan class=\"hljs-attr inline\"\u003e1rem\u003c/span\u003e\u0026#x27;\n    }}\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eh1\u003c/span\u003e\u0026gt;\u003c/span\u003e我的应用\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eh1\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        {state.user ? (\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003espan\u003c/span\u003e\u0026gt;\u003c/span\u003e欢迎, {state.user.name}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003espan\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{actions.logout}\u003c/span\u003e\u0026gt;\u003c/span\u003e退出\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        ) : (\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e actions.login({ name: \u0026#x27;用户\u0026#x27;, id: 1 })}\u0026gt;\n            登录\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        )}\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{actions.toggleTheme}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          切换到 {state.theme === \u0026#x27;light\u0026#x27; ? \u0026#x27;暗色\u0026#x27; : \u0026#x27;亮色\u0026#x27;} 主题\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eheader\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eNotificationList\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e { state, actions } = \u003cspan class=\"hljs-title function_ inline\"\u003euseAppContext\u003c/span\u003e();\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {state.notifications.map(notification =\u0026gt; (\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e \n          \u003cspan class=\"hljs-attr inline\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{notification.id}\u003c/span\u003e\n          \u003cspan class=\"hljs-attr inline\"\u003estyle\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e\n            \u003cspan class=\"hljs-attr inline\"\u003epadding:\u003c/span\u003e \u0026#x27;\u003cspan class=\"hljs-attr inline\"\u003e10px\u003c/span\u003e\u0026#x27;,\n            \u003cspan class=\"hljs-attr inline\"\u003emargin:\u003c/span\u003e \u0026#x27;\u003cspan class=\"hljs-attr inline\"\u003e5px\u003c/span\u003e\u0026#x27;,\n            \u003cspan class=\"hljs-attr inline\"\u003ebackground:\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003enotification.type\u003c/span\u003e === \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;success\u0026#x27;\u003c/span\u003e ? \u0026#x27;\u003cspan class=\"hljs-attr inline\"\u003egreen\u003c/span\u003e\u0026#x27; \u003cspan class=\"hljs-attr inline\"\u003e:\u003c/span\u003e \n                       \u003cspan class=\"hljs-attr inline\"\u003enotification.type\u003c/span\u003e === \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;error\u0026#x27;\u003c/span\u003e ? \u0026#x27;\u003cspan class=\"hljs-attr inline\"\u003ered\u003c/span\u003e\u0026#x27; \u003cspan class=\"hljs-attr inline\"\u003e:\u003c/span\u003e \u0026#x27;\u003cspan class=\"hljs-attr inline\"\u003eblue\u003c/span\u003e\u0026#x27;,\n            \u003cspan class=\"hljs-attr inline\"\u003ecolor:\u003c/span\u003e \u0026#x27;\u003cspan class=\"hljs-attr inline\"\u003ewhite\u003c/span\u003e\u0026#x27;\n          }}\n        \u0026gt;\u003c/span\u003e\n          {notification.message}\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e actions.removeNotification(notification.id)}\u0026gt;\n            ×\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      ))}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 主应用\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eApp\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eAppProvider\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eHeader\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003eNotificationList\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003eAppProvider\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"异步操作处理\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#异步操作处理\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 异步操作处理\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e异步操作处理\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003ch4 id=\"数据获取状态管理\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#数据获取状态管理\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 数据获取状态管理\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e数据获取状态管理\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20DataFetcher()%20%7B%0Aconst%20initialState%20%3D%20%7B%0Adata%3A%20null%2C%0Aloading%3A%20false%2C%0Aerror%3A%20null%2C%0AlastFetch%3A%20null%0A%7D%3B%0Afunction%20dataReducer(state%2C%20action)%20%7B%0Aswitch%20(action.type)%20%7B%0Acase%20'FETCH_START'%3A%0Areturn%20%7B%0A...state%2C%0Aloading%3A%20true%2C%0Aerror%3A%20null%0A%7D%3B%0Acase%20'FETCH_SUCCESS'%3A%0Areturn%20%7B%0A...state%2C%0Aloading%3A%20false%2C%0Adata%3A%20action.data%2C%0AlastFetch%3A%20new%20Date()%2C%0Aerror%3A%20null%0A%7D%3B%0Acase%20'FETCH_ERROR'%3A%0Areturn%20%7B%0A...state%2C%0Aloading%3A%20false%2C%0Aerror%3A%20action.error%2C%0Adata%3A%20null%0A%7D%3B%0Acase%20'CLEAR_DATA'%3A%0Areturn%20initialState%3B%0Adefault%3A%0Areturn%20state%3B%0A%7D%0A%7D%0Aconst%20%5Bstate%2C%20dispatch%5D%20%3D%20useReducer(dataReducer%2C%20initialState)%3B%0Aconst%20fetchData%20%3D%20async%20(url)%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'FETCH_START'%20%7D)%3B%0Atry%20%7B%0Aconst%20response%20%3D%20await%20fetch(url)%3B%0Aif%20(!response.ok)%20%7B%0Athrow%20new%20Error(%60HTTP%20error!%20status%3A%20%24%7Bresponse.status%7D%60)%3B%0A%7D%0Aconst%20data%20%3D%20await%20response.json()%3B%0Adispatch(%7B%20type%3A%20'FETCH_SUCCESS'%2C%20data%20%7D)%3B%0A%7D%20catch%20(error)%20%7B%0Adispatch(%7B%20type%3A%20'FETCH_ERROR'%2C%20error%3A%20error.message%20%7D)%3B%0A%7D%0A%7D%3B%0Aconst%20clearData%20%3D%20()%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'CLEAR_DATA'%20%7D)%3B%0A%7D%3B%0Areturn%20(%0Adiv%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20fetchData('%2Fapi%2Fusers')%7D%3E%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AEbutton%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20fetchData('%2Fapi%2Fposts')%7D%3E%E8%8E%B7%E5%8F%96%E6%96%87%E7%AB%A0%E6%95%B0%E6%8D%AEbutton%3E%0Abutton%20onClick%3D%7BclearData%7D%3E%E6%B8%85%E7%A9%BA%E6%95%B0%E6%8D%AEbutton%3E%0A%7Bstate.loading%20%26%26%20p%3E%E5%8A%A0%E8%BD%BD%E4%B8%AD...p%3E%7D%0A%7Bstate.error%20%26%26%20p%20style%3D%7B%7Bcolor%3A%20'red'%7D%7D%3E%E9%94%99%E8%AF%AF%3A%20%7Bstate.error%7Dp%3E%7D%0A%7Bstate.data%20%26%26%20(%0Adiv%3E%0Ap%3E%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E6%97%B6%E9%97%B4%3A%20%7Bstate.lastFetch%3F.toLocaleString()%7Dp%3E%0Apre%3E%7BJSON.stringify(state.data%2C%20null%2C%202)%7Dpre%3E%0Adiv%3E%0A)%7D%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eDataFetcher\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e initialState = {\n    \u003cspan class=\"hljs-attr inline\"\u003edata\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003enull\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr inline\"\u003eloading\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr inline\"\u003eerror\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003enull\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr inline\"\u003elastFetch\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003enull\u003c/span\u003e\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003edataReducer\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003estate, action\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword inline\"\u003eswitch\u003c/span\u003e (action.\u003cspan class=\"hljs-property inline\"\u003etype\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;FETCH_START\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n          ...state,\n          \u003cspan class=\"hljs-attr inline\"\u003eloading\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003etrue\u003c/span\u003e,\n          \u003cspan class=\"hljs-attr inline\"\u003eerror\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003enull\u003c/span\u003e\n        };\n      \n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;FETCH_SUCCESS\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n          ...state,\n          \u003cspan class=\"hljs-attr inline\"\u003eloading\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e,\n          \u003cspan class=\"hljs-attr inline\"\u003edata\u003c/span\u003e: action.\u003cspan class=\"hljs-property inline\"\u003edata\u003c/span\u003e,\n          \u003cspan class=\"hljs-attr inline\"\u003elastFetch\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eDate\u003c/span\u003e(),\n          \u003cspan class=\"hljs-attr inline\"\u003eerror\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003enull\u003c/span\u003e\n        };\n      \n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;FETCH_ERROR\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n          ...state,\n          \u003cspan class=\"hljs-attr inline\"\u003eloading\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e,\n          \u003cspan class=\"hljs-attr inline\"\u003eerror\u003c/span\u003e: action.\u003cspan class=\"hljs-property inline\"\u003eerror\u003c/span\u003e,\n          \u003cspan class=\"hljs-attr inline\"\u003edata\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003enull\u003c/span\u003e\n        };\n      \n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;CLEAR_DATA\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e initialState;\n      \n      \u003cspan class=\"hljs-attr inline\"\u003edefault\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e state;\n    }\n  }\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [state, dispatch] = \u003cspan class=\"hljs-title function_ inline\"\u003euseReducer\u003c/span\u003e(dataReducer, initialState);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003efetchData\u003c/span\u003e = \u003cspan class=\"hljs-keyword inline\"\u003easync\u003c/span\u003e (\u003cspan class=\"hljs-params inline\"\u003eurl\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;FETCH_START\u0026#x27;\u003c/span\u003e });\n    \n    \u003cspan class=\"hljs-keyword inline\"\u003etry\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e response = \u003cspan class=\"hljs-keyword inline\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003efetch\u003c/span\u003e(url);\n      \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (!response.\u003cspan class=\"hljs-property inline\"\u003eok\u003c/span\u003e) {\n        \u003cspan class=\"hljs-keyword inline\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eError\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e`HTTP error! status: \u003cspan class=\"hljs-subst inline\"\u003e${response.status}\u003c/span\u003e`\u003c/span\u003e);\n      }\n      \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e data = \u003cspan class=\"hljs-keyword inline\"\u003eawait\u003c/span\u003e response.\u003cspan class=\"hljs-title function_ inline\"\u003ejson\u003c/span\u003e();\n      \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;FETCH_SUCCESS\u0026#x27;\u003c/span\u003e, data });\n    } \u003cspan class=\"hljs-keyword inline\"\u003ecatch\u003c/span\u003e (error) {\n      \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;FETCH_ERROR\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003eerror\u003c/span\u003e: error.\u003cspan class=\"hljs-property inline\"\u003emessage\u003c/span\u003e });\n    }\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eclearData\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;CLEAR_DATA\u0026#x27;\u003c/span\u003e });\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e fetchData(\u0026#x27;/api/users\u0026#x27;)}\u0026gt;获取用户数据\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e fetchData(\u0026#x27;/api/posts\u0026#x27;)}\u0026gt;获取文章数据\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{clearData}\u003c/span\u003e\u0026gt;\u003c/span\u003e清空数据\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\n      {state.loading \u0026amp;\u0026amp; \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e加载中...\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e}\n      {state.error \u0026amp;\u0026amp; \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003estyle\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{color:\u003c/span\u003e \u0026#x27;\u003cspan class=\"hljs-attr inline\"\u003ered\u003c/span\u003e\u0026#x27;}}\u0026gt;\u003c/span\u003e错误: {state.error}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e}\n      {state.data \u0026amp;\u0026amp; (\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e数据获取时间: {state.lastFetch?.toLocaleString()}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003epre\u003c/span\u003e\u0026gt;\u003c/span\u003e{JSON.stringify(state.data, null, 2)}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003epre\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      )}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"游戏状态管理\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#游戏状态管理\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 游戏状态管理\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e游戏状态管理\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003ch4 id=\"井字游戏示例\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#井字游戏示例\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 井字游戏示例\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e井字游戏示例\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20TicTacToe()%20%7B%0Aconst%20initialState%20%3D%20%7B%0Aboard%3A%20Array(9).fill(null)%2C%0AisXNext%3A%20true%2C%0Awinner%3A%20null%2C%0AgameOver%3A%20false%2C%0Amoves%3A%200%0A%7D%3B%0Afunction%20gameReducer(state%2C%20action)%20%7B%0Aswitch%20(action.type)%20%7B%0Acase%20'MAKE_MOVE'%3A%0Aif%20(state.board%5Baction.index%5D%20%7C%7C%20state.winner)%20%7B%0Areturn%20state%3B%0A%7D%0Aconst%20newBoard%20%3D%20%5B...state.board%5D%3B%0AnewBoard%5Baction.index%5D%20%3D%20state.isXNext%20%3F%20'X'%20%3A%20'O'%3B%0Aconst%20winner%20%3D%20calculateWinner(newBoard)%3B%0Aconst%20gameOver%20%3D%20winner%20%7C%7C%20newBoard.every(cell%20%3D%3E%20cell%20!%3D%3D%20null)%3B%0Areturn%20%7B%0A...state%2C%0Aboard%3A%20newBoard%2C%0AisXNext%3A%20!state.isXNext%2C%0Awinner%2C%0AgameOver%2C%0Amoves%3A%20state.moves%20%2B%201%0A%7D%3B%0Acase%20'RESET_GAME'%3A%0Areturn%20initialState%3B%0Adefault%3A%0Areturn%20state%3B%0A%7D%0A%7D%0Aconst%20calculateWinner%20%3D%20(board)%20%3D%3E%20%7B%0Aconst%20lines%20%3D%20%5B%0A%5B0%2C%201%2C%202%5D%2C%20%5B3%2C%204%2C%205%5D%2C%20%5B6%2C%207%2C%208%5D%2C%20%2F%2F%20%E8%A1%8C%0A%5B0%2C%203%2C%206%5D%2C%20%5B1%2C%204%2C%207%5D%2C%20%5B2%2C%205%2C%208%5D%2C%20%2F%2F%20%E5%88%97%0A%5B0%2C%204%2C%208%5D%2C%20%5B2%2C%204%2C%206%5D%20%2F%2F%20%E5%AF%B9%E8%A7%92%E7%BA%BF%0A%5D%3B%0Afor%20(let%20line%20of%20lines)%20%7B%0Aconst%20%5Ba%2C%20b%2C%20c%5D%20%3D%20line%3B%0Aif%20(board%5Ba%5D%20%26%26%20board%5Ba%5D%20%3D%3D%3D%20board%5Bb%5D%20%26%26%20board%5Ba%5D%20%3D%3D%3D%20board%5Bc%5D)%20%7B%0Areturn%20board%5Ba%5D%3B%0A%7D%0A%7D%0Areturn%20null%3B%0A%7D%3B%0Aconst%20%5Bstate%2C%20dispatch%5D%20%3D%20useReducer(gameReducer%2C%20initialState)%3B%0Aconst%20makeMove%20%3D%20(index)%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'MAKE_MOVE'%2C%20index%20%7D)%3B%0A%7D%3B%0Aconst%20resetGame%20%3D%20()%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'RESET_GAME'%20%7D)%3B%0A%7D%3B%0Aconst%20renderSquare%20%3D%20(index)%20%3D%3E%20(%0Abutton%0Astyle%3D%7B%7B%0Awidth%3A%20'60px'%2C%0Aheight%3A%20'60px'%2C%0AfontSize%3A%20'20px'%2C%0AfontWeight%3A%20'bold'%0A%7D%7D%0AonClick%3D%7B()%20%3D%3E%20makeMove(index)%7D%0A%3E%0A%7Bstate.board%5Bindex%5D%7D%0Abutton%3E%0A)%3B%0Alet%20status%3B%0Aif%20(state.winner)%20%7B%0Astatus%20%3D%20%60%E8%8E%B7%E8%83%9C%E8%80%85%3A%20%24%7Bstate.winner%7D%60%3B%0A%7D%20else%20if%20(state.gameOver)%20%7B%0Astatus%20%3D%20'%E5%B9%B3%E5%B1%80!'%3B%0A%7D%20else%20%7B%0Astatus%20%3D%20%60%E4%B8%8B%E4%B8%80%E4%B8%AA%E7%8E%A9%E5%AE%B6%3A%20%24%7Bstate.isXNext%20%3F%20'X'%20%3A%20'O'%7D%60%3B%0A%7D%0Areturn%20(%0Adiv%3E%0Adiv%3E%7Bstatus%7Ddiv%3E%0Ap%3E%E6%AD%A5%E6%95%B0%3A%20%7Bstate.moves%7Dp%3E%0Adiv%3E%0Adiv%3E%0A%7BrenderSquare(0)%7D%0A%7BrenderSquare(1)%7D%0A%7BrenderSquare(2)%7D%0Adiv%3E%0Adiv%3E%0A%7BrenderSquare(3)%7D%0A%7BrenderSquare(4)%7D%0A%7BrenderSquare(5)%7D%0Adiv%3E%0Adiv%3E%0A%7BrenderSquare(6)%7D%0A%7BrenderSquare(7)%7D%0A%7BrenderSquare(8)%7D%0Adiv%3E%0Adiv%3E%0Abutton%20onClick%3D%7BresetGame%7D%3E%E9%87%8D%E6%96%B0%E5%BC%80%E5%A7%8Bbutton%3E%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eTicTacToe\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e initialState = {\n    \u003cspan class=\"hljs-attr inline\"\u003eboard\u003c/span\u003e: \u003cspan class=\"hljs-title class_ inline\"\u003eArray\u003c/span\u003e(\u003cspan class=\"hljs-number inline\"\u003e9\u003c/span\u003e).\u003cspan class=\"hljs-title function_ inline\"\u003efill\u003c/span\u003e(\u003cspan class=\"hljs-literal inline\"\u003enull\u003c/span\u003e),\n    \u003cspan class=\"hljs-attr inline\"\u003eisXNext\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003etrue\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr inline\"\u003ewinner\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003enull\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr inline\"\u003egameOver\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr inline\"\u003emoves\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003egameReducer\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003estate, action\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword inline\"\u003eswitch\u003c/span\u003e (action.\u003cspan class=\"hljs-property inline\"\u003etype\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;MAKE_MOVE\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (state.\u003cspan class=\"hljs-property inline\"\u003eboard\u003c/span\u003e[action.\u003cspan class=\"hljs-property inline\"\u003eindex\u003c/span\u003e] || state.\u003cspan class=\"hljs-property inline\"\u003ewinner\u003c/span\u003e) {\n          \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e state;\n        }\n\n        \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e newBoard = [...state.\u003cspan class=\"hljs-property inline\"\u003eboard\u003c/span\u003e];\n        newBoard[action.\u003cspan class=\"hljs-property inline\"\u003eindex\u003c/span\u003e] = state.\u003cspan class=\"hljs-property inline\"\u003eisXNext\u003c/span\u003e ? \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;X\u0026#x27;\u003c/span\u003e : \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;O\u0026#x27;\u003c/span\u003e;\n        \n        \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e winner = \u003cspan class=\"hljs-title function_ inline\"\u003ecalculateWinner\u003c/span\u003e(newBoard);\n        \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e gameOver = winner || newBoard.\u003cspan class=\"hljs-title function_ inline\"\u003eevery\u003c/span\u003e(\u003cspan class=\"hljs-function inline\"\u003e\u003cspan class=\"hljs-params inline\"\u003ecell\u003c/span\u003e =\u0026gt;\u003c/span\u003e cell !== \u003cspan class=\"hljs-literal inline\"\u003enull\u003c/span\u003e);\n\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n          ...state,\n          \u003cspan class=\"hljs-attr inline\"\u003eboard\u003c/span\u003e: newBoard,\n          \u003cspan class=\"hljs-attr inline\"\u003eisXNext\u003c/span\u003e: !state.\u003cspan class=\"hljs-property inline\"\u003eisXNext\u003c/span\u003e,\n          winner,\n          gameOver,\n          \u003cspan class=\"hljs-attr inline\"\u003emoves\u003c/span\u003e: state.\u003cspan class=\"hljs-property inline\"\u003emoves\u003c/span\u003e + \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e\n        };\n\n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;RESET_GAME\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e initialState;\n\n      \u003cspan class=\"hljs-attr inline\"\u003edefault\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e state;\n    }\n  }\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003ecalculateWinner\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003eboard\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e lines = [\n      [\u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e2\u003c/span\u003e], [\u003cspan class=\"hljs-number inline\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e4\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e5\u003c/span\u003e], [\u003cspan class=\"hljs-number inline\"\u003e6\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e7\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e8\u003c/span\u003e], \u003cspan class=\"hljs-comment inline\"\u003e// 行\u003c/span\u003e\n      [\u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e6\u003c/span\u003e], [\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e4\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e7\u003c/span\u003e], [\u003cspan class=\"hljs-number inline\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e5\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e8\u003c/span\u003e], \u003cspan class=\"hljs-comment inline\"\u003e// 列\u003c/span\u003e\n      [\u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e4\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e8\u003c/span\u003e], [\u003cspan class=\"hljs-number inline\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e4\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e6\u003c/span\u003e] \u003cspan class=\"hljs-comment inline\"\u003e// 对角线\u003c/span\u003e\n    ];\n\n    \u003cspan class=\"hljs-keyword inline\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword inline\"\u003elet\u003c/span\u003e line \u003cspan class=\"hljs-keyword inline\"\u003eof\u003c/span\u003e lines) {\n      \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [a, b, c] = line;\n      \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (board[a] \u0026amp;\u0026amp; board[a] === board[b] \u0026amp;\u0026amp; board[a] === board[c]) {\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e board[a];\n      }\n    }\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-literal inline\"\u003enull\u003c/span\u003e;\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [state, dispatch] = \u003cspan class=\"hljs-title function_ inline\"\u003euseReducer\u003c/span\u003e(gameReducer, initialState);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003emakeMove\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003eindex\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;MAKE_MOVE\u0026#x27;\u003c/span\u003e, index });\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eresetGame\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;RESET_GAME\u0026#x27;\u003c/span\u003e });\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003erenderSquare\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003eindex\u003c/span\u003e) =\u0026gt; (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\n      \u003cspan class=\"hljs-attr inline\"\u003estyle\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{{\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003ewidth:\u003c/span\u003e \u0026#x27;\u003cspan class=\"hljs-attr inline\"\u003e60px\u003c/span\u003e\u0026#x27;,\n        \u003cspan class=\"hljs-attr inline\"\u003eheight:\u003c/span\u003e \u0026#x27;\u003cspan class=\"hljs-attr inline\"\u003e60px\u003c/span\u003e\u0026#x27;,\n        \u003cspan class=\"hljs-attr inline\"\u003efontSize:\u003c/span\u003e \u0026#x27;\u003cspan class=\"hljs-attr inline\"\u003e20px\u003c/span\u003e\u0026#x27;,\n        \u003cspan class=\"hljs-attr inline\"\u003efontWeight:\u003c/span\u003e \u0026#x27;\u003cspan class=\"hljs-attr inline\"\u003ebold\u003c/span\u003e\u0026#x27;\n      }}\n      \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e makeMove(index)}\n    \u0026gt;\n      {state.board[index]}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n\n  \u003cspan class=\"hljs-keyword inline\"\u003elet\u003c/span\u003e status;\n  \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (state.\u003cspan class=\"hljs-property inline\"\u003ewinner\u003c/span\u003e) {\n    status = \u003cspan class=\"hljs-string inline\"\u003e`获胜者: \u003cspan class=\"hljs-subst inline\"\u003e${state.winner}\u003c/span\u003e`\u003c/span\u003e;\n  } \u003cspan class=\"hljs-keyword inline\"\u003eelse\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (state.\u003cspan class=\"hljs-property inline\"\u003egameOver\u003c/span\u003e) {\n    status = \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;平局!\u0026#x27;\u003c/span\u003e;\n  } \u003cspan class=\"hljs-keyword inline\"\u003eelse\u003c/span\u003e {\n    status = \u003cspan class=\"hljs-string inline\"\u003e`下一个玩家: \u003cspan class=\"hljs-subst inline\"\u003e${state.isXNext ? \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;X\u0026#x27;\u003c/span\u003e : \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;O\u0026#x27;\u003c/span\u003e}\u003c/span\u003e`\u003c/span\u003e;\n  }\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e{status}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e步数: {state.moves}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          {renderSquare(0)}\n          {renderSquare(1)}\n          {renderSquare(2)}\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          {renderSquare(3)}\n          {renderSquare(4)}\n          {renderSquare(5)}\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          {renderSquare(6)}\n          {renderSquare(7)}\n          {renderSquare(8)}\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{resetGame}\u003c/span\u003e\u0026gt;\u003c/span\u003e重新开始\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"自定义-hook-封装\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#自定义-hook-封装\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 自定义 Hook 封装\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e自定义 Hook 封装\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003ch4 id=\"通用状态管理-hook\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#通用状态管理-hook\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 通用状态管理 Hook\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e通用状态管理 Hook\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20useStateWithReducer(initialState)%20%7B%0Afunction%20stateReducer(state%2C%20action)%20%7B%0Aswitch%20(action.type)%20%7B%0Acase%20'SET'%3A%0Areturn%20%7B%20...state%2C%20...action.payload%20%7D%3B%0Acase%20'RESET'%3A%0Areturn%20initialState%3B%0Acase%20'UPDATE_FIELD'%3A%0Areturn%20%7B%20...state%2C%20%5Baction.field%5D%3A%20action.value%20%7D%3B%0Adefault%3A%0Areturn%20state%3B%0A%7D%0A%7D%0Aconst%20%5Bstate%2C%20dispatch%5D%20%3D%20useReducer(stateReducer%2C%20initialState)%3B%0Aconst%20setState%20%3D%20(payload)%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'SET'%2C%20payload%20%7D)%3B%0A%7D%3B%0Aconst%20resetState%20%3D%20()%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'RESET'%20%7D)%3B%0A%7D%3B%0Aconst%20updateField%20%3D%20(field%2C%20value)%20%3D%3E%20%7B%0Adispatch(%7B%20type%3A%20'UPDATE_FIELD'%2C%20field%2C%20value%20%7D)%3B%0A%7D%3B%0Areturn%20%5Bstate%2C%20%7B%20setState%2C%20resetState%2C%20updateField%20%7D%5D%3B%0A%7D%0A%2F%2F%20%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B%0Afunction%20UserProfile()%20%7B%0Aconst%20%5BuserState%2C%20userActions%5D%20%3D%20useStateWithReducer(%7B%0Aname%3A%20''%2C%0Aemail%3A%20''%2C%0Aage%3A%20''%2C%0AisEditing%3A%20false%0A%7D)%3B%0Aconst%20handleSave%20%3D%20()%20%3D%3E%20%7B%0Aconsole.log('%E4%BF%9D%E5%AD%98%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%3A'%2C%20userState)%3B%0AuserActions.updateField('isEditing'%2C%20false)%3B%0A%7D%3B%0Areturn%20(%0Adiv%3E%0A%7BuserState.isEditing%20%3F%20(%0Adiv%3E%0Ainput%0Avalue%3D%7BuserState.name%7D%0AonChange%3D%7B(e)%20%3D%3E%20userActions.updateField('name'%2C%20e.target.value)%7D%0Aplaceholder%3D%22%E5%A7%93%E5%90%8D%22%0A%2F%3E%0Ainput%0Avalue%3D%7BuserState.email%7D%0AonChange%3D%7B(e)%20%3D%3E%20userActions.updateField('email'%2C%20e.target.value)%7D%0Aplaceholder%3D%22%E9%82%AE%E7%AE%B1%22%0A%2F%3E%0Ainput%0Avalue%3D%7BuserState.age%7D%0AonChange%3D%7B(e)%20%3D%3E%20userActions.updateField('age'%2C%20e.target.value)%7D%0Aplaceholder%3D%22%E5%B9%B4%E9%BE%84%22%0A%2F%3E%0Abutton%20onClick%3D%7BhandleSave%7D%3E%E4%BF%9D%E5%AD%98button%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20userActions.updateField('isEditing'%2C%20false)%7D%3E%0A%E5%8F%96%E6%B6%88%0Abutton%3E%0Adiv%3E%0A)%20%3A%20(%0Adiv%3E%0Ap%3E%E5%A7%93%E5%90%8D%3A%20%7BuserState.name%7Dp%3E%0Ap%3E%E9%82%AE%E7%AE%B1%3A%20%7BuserState.email%7Dp%3E%0Ap%3E%E5%B9%B4%E9%BE%84%3A%20%7BuserState.age%7Dp%3E%0Abutton%20onClick%3D%7B()%20%3D%3E%20userActions.updateField('isEditing'%2C%20true)%7D%3E%0A%E7%BC%96%E8%BE%91%0Abutton%3E%0Adiv%3E%0A)%7D%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003euseStateWithReducer\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003einitialState\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003estateReducer\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003estate, action\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword inline\"\u003eswitch\u003c/span\u003e (action.\u003cspan class=\"hljs-property inline\"\u003etype\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;SET\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e { ...state, ...action.\u003cspan class=\"hljs-property inline\"\u003epayload\u003c/span\u003e };\n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;RESET\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e initialState;\n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;UPDATE_FIELD\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e { ...state, [action.\u003cspan class=\"hljs-property inline\"\u003efield\u003c/span\u003e]: action.\u003cspan class=\"hljs-property inline\"\u003evalue\u003c/span\u003e };\n      \u003cspan class=\"hljs-attr inline\"\u003edefault\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e state;\n    }\n  }\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [state, dispatch] = \u003cspan class=\"hljs-title function_ inline\"\u003euseReducer\u003c/span\u003e(stateReducer, initialState);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003esetState\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003epayload\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;SET\u0026#x27;\u003c/span\u003e, payload });\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eresetState\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;RESET\u0026#x27;\u003c/span\u003e });\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eupdateField\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003efield, value\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-title function_ inline\"\u003edispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;UPDATE_FIELD\u0026#x27;\u003c/span\u003e, field, value });\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e [state, { setState, resetState, updateField }];\n}\n\n\u003cspan class=\"hljs-comment inline\"\u003e// 使用示例\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eUserProfile\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [userState, userActions] = \u003cspan class=\"hljs-title function_ inline\"\u003euseStateWithReducer\u003c/span\u003e({\n    \u003cspan class=\"hljs-attr inline\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026#x27;\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr inline\"\u003eemail\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026#x27;\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr inline\"\u003eage\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026#x27;\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr inline\"\u003eisEditing\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e\n  });\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003ehandleSave\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-variable language_ inline\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;保存用户信息:\u0026#x27;\u003c/span\u003e, userState);\n    userActions.\u003cspan class=\"hljs-title function_ inline\"\u003eupdateField\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;isEditing\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e);\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {userState.isEditing ? (\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003einput\u003c/span\u003e\n            \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{userState.name}\u003c/span\u003e\n            \u003cspan class=\"hljs-attr inline\"\u003eonChange\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{(e)\u003c/span\u003e =\u0026gt;\u003c/span\u003e userActions.updateField(\u0026#x27;name\u0026#x27;, e.target.value)}\n            placeholder=\u0026quot;姓名\u0026quot;\n          /\u0026gt;\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003einput\u003c/span\u003e\n            \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{userState.email}\u003c/span\u003e\n            \u003cspan class=\"hljs-attr inline\"\u003eonChange\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{(e)\u003c/span\u003e =\u0026gt;\u003c/span\u003e userActions.updateField(\u0026#x27;email\u0026#x27;, e.target.value)}\n            placeholder=\u0026quot;邮箱\u0026quot;\n          /\u0026gt;\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003einput\u003c/span\u003e\n            \u003cspan class=\"hljs-attr inline\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{userState.age}\u003c/span\u003e\n            \u003cspan class=\"hljs-attr inline\"\u003eonChange\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{(e)\u003c/span\u003e =\u0026gt;\u003c/span\u003e userActions.updateField(\u0026#x27;age\u0026#x27;, e.target.value)}\n            placeholder=\u0026quot;年龄\u0026quot;\n          /\u0026gt;\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{handleSave}\u003c/span\u003e\u0026gt;\u003c/span\u003e保存\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e userActions.updateField(\u0026#x27;isEditing\u0026#x27;, false)}\u0026gt;\n            取消\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      ) : (\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e姓名: {userState.name}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e邮箱: {userState.email}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e年龄: {userState.age}\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e userActions.updateField(\u0026#x27;isEditing\u0026#x27;, true)}\u0026gt;\n            编辑\n          \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      )}\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"常见陷阱和解决方案\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#常见陷阱和解决方案\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 常见陷阱和解决方案\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e常见陷阱和解决方案\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003ch4 id=\"状态更新不当\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#状态更新不当\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 状态更新不当\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e状态更新不当\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20BadExample()%20%7B%0Afunction%20badReducer(state%2C%20action)%20%7B%0Aswitch%20(action.type)%20%7B%0Acase%20'ADD_ITEM'%3A%0A%2F%2F%20%E9%94%99%E8%AF%AF%EF%BC%9A%E7%9B%B4%E6%8E%A5%E4%BF%AE%E6%94%B9%E5%8E%9F%E7%8A%B6%E6%80%81%E5%AF%B9%E8%B1%A1%0Astate.items.push(action.item)%3B%0Areturn%20state%3B%0Acase%20'UPDATE_USER'%3A%0A%2F%2F%20%E9%94%99%E8%AF%AF%EF%BC%9A%E7%9B%B4%E6%8E%A5%E4%BF%AE%E6%94%B9%E5%B5%8C%E5%A5%97%E5%AF%B9%E8%B1%A1%0Astate.user.name%20%3D%20action.name%3B%0Areturn%20state%3B%0Adefault%3A%0Areturn%20state%3B%0A%7D%0A%7D%0A%7D%0Afunction%20GoodExample()%20%7B%0Afunction%20goodReducer(state%2C%20action)%20%7B%0Aswitch%20(action.type)%20%7B%0Acase%20'ADD_ITEM'%3A%0A%2F%2F%20%E6%AD%A3%E7%A1%AE%EF%BC%9A%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84%E7%8A%B6%E6%80%81%E5%AF%B9%E8%B1%A1%0Areturn%20%7B%0A...state%2C%0Aitems%3A%20%5B...state.items%2C%20action.item%5D%0A%7D%3B%0Acase%20'UPDATE_USER'%3A%0A%2F%2F%20%E6%AD%A3%E7%A1%AE%EF%BC%9A%E4%BD%BF%E7%94%A8%E6%89%A9%E5%B1%95%E8%BF%90%E7%AE%97%E7%AC%A6%E5%88%9B%E5%BB%BA%E6%96%B0%E5%AF%B9%E8%B1%A1%0Areturn%20%7B%0A...state%2C%0Auser%3A%20%7B%0A...state.user%2C%0Aname%3A%20action.name%0A%7D%0A%7D%3B%0Adefault%3A%0Areturn%20state%3B%0A%7D%0A%7D%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eBadExample\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003ebadReducer\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003estate, action\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword inline\"\u003eswitch\u003c/span\u003e (action.\u003cspan class=\"hljs-property inline\"\u003etype\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;ADD_ITEM\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-comment inline\"\u003e// 错误：直接修改原状态对象\u003c/span\u003e\n        state.\u003cspan class=\"hljs-property inline\"\u003eitems\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003epush\u003c/span\u003e(action.\u003cspan class=\"hljs-property inline\"\u003eitem\u003c/span\u003e);\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e state;\n      \n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;UPDATE_USER\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-comment inline\"\u003e// 错误：直接修改嵌套对象\u003c/span\u003e\n        state.\u003cspan class=\"hljs-property inline\"\u003euser\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003ename\u003c/span\u003e = action.\u003cspan class=\"hljs-property inline\"\u003ename\u003c/span\u003e;\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e state;\n      \n      \u003cspan class=\"hljs-attr inline\"\u003edefault\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e state;\n    }\n  }\n}\n\n\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eGoodExample\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003egoodReducer\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003estate, action\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword inline\"\u003eswitch\u003c/span\u003e (action.\u003cspan class=\"hljs-property inline\"\u003etype\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;ADD_ITEM\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-comment inline\"\u003e// 正确：创建新的状态对象\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n          ...state,\n          \u003cspan class=\"hljs-attr inline\"\u003eitems\u003c/span\u003e: [...state.\u003cspan class=\"hljs-property inline\"\u003eitems\u003c/span\u003e, action.\u003cspan class=\"hljs-property inline\"\u003eitem\u003c/span\u003e]\n        };\n      \n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;UPDATE_USER\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-comment inline\"\u003e// 正确：使用扩展运算符创建新对象\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n          ...state,\n          \u003cspan class=\"hljs-attr inline\"\u003euser\u003c/span\u003e: {\n            ...state.\u003cspan class=\"hljs-property inline\"\u003euser\u003c/span\u003e,\n            \u003cspan class=\"hljs-attr inline\"\u003ename\u003c/span\u003e: action.\u003cspan class=\"hljs-property inline\"\u003ename\u003c/span\u003e\n          }\n        };\n      \n      \u003cspan class=\"hljs-attr inline\"\u003edefault\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e state;\n    }\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch4 id=\"复杂状态的深层更新\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#复杂状态的深层更新\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 复杂状态的深层更新\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e复杂状态的深层更新\u003c/strong\u003e\n        \u003c/h4\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"jsx\" data-code=\"function%20DeepUpdateExample()%20%7B%0Aconst%20initialState%20%3D%20%7B%0Auser%3A%20%7B%0Aprofile%3A%20%7B%0Apersonal%3A%20%7B%0Aname%3A%20''%2C%0Aage%3A%200%0A%7D%2C%0Acontact%3A%20%7B%0Aemail%3A%20''%2C%0Aphone%3A%20''%0A%7D%0A%7D%0A%7D%0A%7D%3B%0Afunction%20deepUpdateReducer(state%2C%20action)%20%7B%0Aswitch%20(action.type)%20%7B%0Acase%20'UPDATE_PERSONAL_INFO'%3A%0Areturn%20%7B%0A...state%2C%0Auser%3A%20%7B%0A...state.user%2C%0Aprofile%3A%20%7B%0A...state.user.profile%2C%0Apersonal%3A%20%7B%0A...state.user.profile.personal%2C%0A%5Baction.field%5D%3A%20action.value%0A%7D%0A%7D%0A%7D%0A%7D%3B%0Acase%20'UPDATE_CONTACT_INFO'%3A%0Areturn%20%7B%0A...state%2C%0Auser%3A%20%7B%0A...state.user%2C%0Aprofile%3A%20%7B%0A...state.user.profile%2C%0Acontact%3A%20%7B%0A...state.user.profile.contact%2C%0A%5Baction.field%5D%3A%20action.value%0A%7D%0A%7D%0A%7D%0A%7D%3B%0Adefault%3A%0Areturn%20state%3B%0A%7D%0A%7D%0Aconst%20%5Bstate%2C%20dispatch%5D%20%3D%20useReducer(deepUpdateReducer%2C%20initialState)%3B%0Areturn%20(%0Adiv%3E%0Ainput%0Aplaceholder%3D%22%E5%A7%93%E5%90%8D%22%0AonChange%3D%7B(e)%20%3D%3E%20dispatch(%7B%0Atype%3A%20'UPDATE_PERSONAL_INFO'%2C%0Afield%3A%20'name'%2C%0Avalue%3A%20e.target.value%0A%7D)%7D%0A%2F%3E%0Ainput%0Aplaceholder%3D%22%E9%82%AE%E7%AE%B1%22%0AonChange%3D%7B(e)%20%3D%3E%20dispatch(%7B%0Atype%3A%20'UPDATE_CONTACT_INFO'%2C%0Afield%3A%20'email'%2C%0Avalue%3A%20e.target.value%0A%7D)%7D%0A%2F%3E%0Adiv%3E%0A)%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejsx\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"复制代码\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003e复制\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-jsx\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eDeepUpdateExample\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e initialState = {\n    \u003cspan class=\"hljs-attr inline\"\u003euser\u003c/span\u003e: {\n      \u003cspan class=\"hljs-attr inline\"\u003eprofile\u003c/span\u003e: {\n        \u003cspan class=\"hljs-attr inline\"\u003epersonal\u003c/span\u003e: {\n          \u003cspan class=\"hljs-attr inline\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026#x27;\u003c/span\u003e,\n          \u003cspan class=\"hljs-attr inline\"\u003eage\u003c/span\u003e: \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e\n        },\n        \u003cspan class=\"hljs-attr inline\"\u003econtact\u003c/span\u003e: {\n          \u003cspan class=\"hljs-attr inline\"\u003eemail\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026#x27;\u003c/span\u003e,\n          \u003cspan class=\"hljs-attr inline\"\u003ephone\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026#x27;\u003c/span\u003e\n        }\n      }\n    }\n  };\n\n  \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003edeepUpdateReducer\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003estate, action\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword inline\"\u003eswitch\u003c/span\u003e (action.\u003cspan class=\"hljs-property inline\"\u003etype\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;UPDATE_PERSONAL_INFO\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n          ...state,\n          \u003cspan class=\"hljs-attr inline\"\u003euser\u003c/span\u003e: {\n            ...state.\u003cspan class=\"hljs-property inline\"\u003euser\u003c/span\u003e,\n            \u003cspan class=\"hljs-attr inline\"\u003eprofile\u003c/span\u003e: {\n              ...state.\u003cspan class=\"hljs-property inline\"\u003euser\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003eprofile\u003c/span\u003e,\n              \u003cspan class=\"hljs-attr inline\"\u003epersonal\u003c/span\u003e: {\n                ...state.\u003cspan class=\"hljs-property inline\"\u003euser\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003eprofile\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003epersonal\u003c/span\u003e,\n                [action.\u003cspan class=\"hljs-property inline\"\u003efield\u003c/span\u003e]: action.\u003cspan class=\"hljs-property inline\"\u003evalue\u003c/span\u003e\n              }\n            }\n          }\n        };\n      \n      \u003cspan class=\"hljs-keyword inline\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;UPDATE_CONTACT_INFO\u0026#x27;\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e {\n          ...state,\n          \u003cspan class=\"hljs-attr inline\"\u003euser\u003c/span\u003e: {\n            ...state.\u003cspan class=\"hljs-property inline\"\u003euser\u003c/span\u003e,\n            \u003cspan class=\"hljs-attr inline\"\u003eprofile\u003c/span\u003e: {\n              ...state.\u003cspan class=\"hljs-property inline\"\u003euser\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003eprofile\u003c/span\u003e,\n              \u003cspan class=\"hljs-attr inline\"\u003econtact\u003c/span\u003e: {\n                ...state.\u003cspan class=\"hljs-property inline\"\u003euser\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003eprofile\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003econtact\u003c/span\u003e,\n                [action.\u003cspan class=\"hljs-property inline\"\u003efield\u003c/span\u003e]: action.\u003cspan class=\"hljs-property inline\"\u003evalue\u003c/span\u003e\n              }\n            }\n          }\n        };\n      \n      \u003cspan class=\"hljs-attr inline\"\u003edefault\u003c/span\u003e:\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e state;\n    }\n  }\n\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e [state, dispatch] = \u003cspan class=\"hljs-title function_ inline\"\u003euseReducer\u003c/span\u003e(deepUpdateReducer, initialState);\n\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml inline\"\u003e\u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003einput\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003eplaceholder\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;姓名\u0026quot;\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003eonChange\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{(e)\u003c/span\u003e =\u0026gt;\u003c/span\u003e dispatch({\n          type: \u0026#x27;UPDATE_PERSONAL_INFO\u0026#x27;,\n          field: \u0026#x27;name\u0026#x27;,\n          value: e.target.value\n        })}\n      /\u0026gt;\n      \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;\u003cspan class=\"hljs-name inline\"\u003einput\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003eplaceholder\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;邮箱\u0026quot;\u003c/span\u003e\n        \u003cspan class=\"hljs-attr inline\"\u003eonChange\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e{(e)\u003c/span\u003e =\u0026gt;\u003c/span\u003e dispatch({\n          type: \u0026#x27;UPDATE_CONTACT_INFO\u0026#x27;,\n          field: \u0026#x27;email\u0026#x27;,\n          value: e.target.value\n        })}\n      /\u0026gt;\n    \u003cspan class=\"hljs-tag inline\"\u003e\u0026lt;/\u003cspan class=\"hljs-name inline\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003ch3 id=\"最佳实践\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#最佳实践\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 最佳实践\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e最佳实践\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003col class=\"list-decimal list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e纯函数\u003c/strong\u003e：Reducer 必须是纯函数，不能有副作用\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e不可变更新\u003c/strong\u003e：始终返回新的状态对象，不要修改原状态\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eaction 类型\u003c/strong\u003e：使用常量定义 action 类型，避免拼写错误\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e状态结构\u003c/strong\u003e：保持状态结构扁平化，避免过深的嵌套\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e默认情况\u003c/strong\u003e：在 reducer 中处理默认情况，通常返回原状态\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e错误处理\u003c/strong\u003e：对未知的 action 类型抛出错误或给出警告\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"何时使用-usereducer\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#何时使用-usereducer\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 何时使用 useReducer\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e何时使用 useReducer\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e复杂状态逻辑\u003c/strong\u003e：多个相关状态值需要一起更新\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e状态转换复杂\u003c/strong\u003e：状态的下一个值依赖于前一个值\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e多个组件共享状态\u003c/strong\u003e：结合 useContext 实现全局状态管理\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e可预测的状态更新\u003c/strong\u003e：需要清晰的状态变更历史和调试\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"注意事项\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#注意事项\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to 注意事项\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            \u003cstrong class=\"font-bold text-foreground\"\u003e注意事项\u003c/strong\u003e\n        \u003c/h3\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e性能考虑\u003c/strong\u003e：每次 dispatch 都会触发重新渲染\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e初始化成本\u003c/strong\u003e：useReducer 的初始化比 useState 稍重\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e学习曲线\u003c/strong\u003e：相比 useState 有一定的学习成本\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e调试复杂\u003c/strong\u003e：状态变更逻辑集中在 reducer 中，需要良好的调试工具\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003ccode\u003euseReducer\u003c/code\u003e 是管理复杂状态的强大工具，特别适合处理具有多个子值或复杂状态转换逻辑的场景。\u003c/p\u003e\n"])</script><script>self.__next_f.push([1,"d:[\"$\",\"$L1d\",null,{\"htmlContent\":\"$1e\",\"frontMatter\":{\"title\":\"useReducer\",\"description\":\"React基础知识篇-useReducer\",\"date\":\"2025-06-22\",\"author\":\"MilkWind\",\"tags\":[\"React\",\"基础知识\",\"useReducer\",\"React Hook\"],\"references\":{}},\"readingTime\":\"16 min read\",\"category\":\"basic-knowledge\",\"tocItems\":[{\"id\":\"基本作用\",\"text\":\"基本作用\",\"level\":3},{\"id\":\"基本语法\",\"text\":\"基本语法\",\"level\":3},{\"id\":\"与-usestate-的对比\",\"text\":\"与 useState 的对比\",\"level\":3},{\"id\":\"使用-usestate（简单状态）\",\"text\":\"使用 useState（简单状态）\",\"level\":4},{\"id\":\"使用-usereducer（复杂状态）\",\"text\":\"使用 useReducer（复杂状态）\",\"level\":4},{\"id\":\"表单状态管理\",\"text\":\"表单状态管理\",\"level\":3},{\"id\":\"复杂表单处理\",\"text\":\"复杂表单处理\",\"level\":4},{\"id\":\"购物车状态管理\",\"text\":\"购物车状态管理\",\"level\":3},{\"id\":\"电商购物车示例\",\"text\":\"电商购物车示例\",\"level\":4},{\"id\":\"与-usecontext-结合使用\",\"text\":\"与 useContext 结合使用\",\"level\":3},{\"id\":\"全局状态管理\",\"text\":\"全局状态管理\",\"level\":4},{\"id\":\"异步操作处理\",\"text\":\"异步操作处理\",\"level\":3},{\"id\":\"数据获取状态管理\",\"text\":\"数据获取状态管理\",\"level\":4},{\"id\":\"游戏状态管理\",\"text\":\"游戏状态管理\",\"level\":3},{\"id\":\"井字游戏示例\",\"text\":\"井字游戏示例\",\"level\":4},{\"id\":\"自定义-hook-封装\",\"text\":\"自定义 Hook 封装\",\"level\":3},{\"id\":\"通用状态管理-hook\",\"text\":\"通用状态管理 Hook\",\"level\":4},{\"id\":\"常见陷阱和解决方案\",\"text\":\"常见陷阱和解决方案\",\"level\":3},{\"id\":\"状态更新不当\",\"text\":\"状态更新不当\",\"level\":4},{\"id\":\"复杂状态的深层更新\",\"text\":\"复杂状态的深层更新\",\"level\":4},{\"id\":\"最佳实践\",\"text\":\"最佳实践\",\"level\":3},{\"id\":\"何时使用-usereducer\",\"text\":\"何时使用 useReducer\",\"level\":3},{\"id\":\"注意事项\",\"text\":\"注意事项\",\"level\":3}],\"translations\":{\"common\":{\"welcome\":\"欢迎\",\"loading\":\"加载中...\",\"error\":\"出现了一些问题\",\"retry\":\"重试\",\"theme\":\"主题\",\"language\":\"语言\",\"light\":\"浅色\",\"dark\":\"深色\"},\"navigation\":{\"home\":\"首页\",\"personal\":\"个人\",\"works\":\"作品\",\"contributions\":\"贡献\",\"documents\":\"文档\",\"about\":\"关于\",\"contact\":\"联系\"},\"personal\":{\"technicalSkills\":\"技术技能\",\"email\":\"邮箱\",\"github\":\"代码仓库\",\"resume\":\"简历\",\"codeRepository\":\"代码仓库\",\"loadingPersonalInfo\":\"加载个人信息中...\",\"loadingResume\":\"加载简历中...\",\"closeResume\":\"关闭简历\",\"emailCopied\":\"邮箱已复制到剪贴板！\",\"galaxyDefaultDescription\":\"精通全栈开发技术，具备跨平台架构能力，擅长AI技术整合与高性能系统优化\",\"skillGalaxy\":\"技能星系\",\"stirGalaxy\":\"搅动星系\",\"stirring\":\"搅动中...\",\"fullStackEngineer\":\"MilkWind - 全栈工程师\",\"professionalProfile\":\"关于我\"},\"documents\":{\"technicalDocuments\":\"技术文档\",\"description\":\"基本原理、代码拆分以及一些碎碎念。\",\"articles\":\"文章\",\"categories\":\"分类\",\"allCategories\":\"所有分类\",\"noArticlesFound\":\"未找到文章\",\"noArticlesAvailable\":\"中文暂无文章。\",\"noArticlesInCategory\":\"该分类下未找到文章。\",\"readMore\":\"阅读更多\",\"loadingDocuments\":\"加载文档中...\",\"backToDocuments\":\"← 返回文档\",\"documentNotFound\":\"文档未找到\",\"documentNotFoundDescription\":\"请求的文档无法找到。\",\"technicalInsights\":\"技术拆解\",\"untitledDocument\":\"无标题文档\",\"byAuthor\":\"作者：\",\"search\":\"搜索文章...\",\"searchByTags\":\"按标签筛选\",\"searching\":\"搜索中...\",\"noSearchResults\":\"没有找到符合搜索条件的文章\",\"clearSearch\":\"清除搜索\",\"selectedTags\":\"已选标签\",\"allTags\":\"所有标签\",\"searchInTitle\":\"在标题、描述和内容中搜索\",\"enterImmersiveMode\":\"沉浸阅读\",\"exitImmersiveMode\":\"退出沉浸模式\",\"immersiveReading\":\"沉浸阅读模式\",\"exploreContent\":\"按分类探索内容\",\"browseBy\":\"浏览方式\",\"exploreAll\":\"所有内容汇总\",\"categoryDescription\":\"该分类下的文章\",\"totalArticles\":\"文章\",\"totalCategories\":\"分类\",\"foundArticles\":\"找到文章\",\"categoriesWithResults\":\"有结果的分类\"},\"works\":{\"workCases\":\"作品案例\",\"projects\":\"作品集\",\"loadingProjects\":\"加载项目中...\",\"grid\":\"网格\",\"stack\":\"堆叠\",\"of\":\"共\",\"workCasesPageTitle\":\"作品案例页面\",\"pageWorkingCorrectly\":\"此页面运行正常！路由配置正确。\",\"try3DVersion\":\"尝试3D版本\",\"dragToScroll\":\"拖拽滚动\",\"dragToChange\":\"拖拽切换\",\"swipeCards\":\"切换卡片\",\"keyboardNav\":\"键盘导航\"},\"contributions\":{\"contributionCases\":\"开源项目\",\"contributions\":\"贡献\",\"loadingContributions\":\"加载贡献中...\",\"grid\":\"网格\",\"stack\":\"堆叠\",\"of\":\"共\",\"contributionCasesPageTitle\":\"贡献案例页面\",\"pageWorkingCorrectly\":\"此页面运行正常！路由配置正确。\",\"try3DVersion\":\"尝试3D版本\",\"dragToScroll\":\"拖拽滚动\",\"dragToChange\":\"拖拽切换\",\"swipeCards\":\"切换卡片\",\"keyboardNav\":\"键盘导航\"},\"contribution\":{\"contributionPreview\":\"贡献预览\",\"accessible\":\"可访问\",\"code\":\"代码\",\"maintenance\":\"维护\",\"enhancement\":\"增强\",\"documentation\":\"文档\",\"community\":\"社区\",\"moreItems\":\"更多\",\"technicalDetails\":\"技术详情\",\"technologies\":\"技术栈：\",\"contributionDetail\":\"贡献详情\",\"description\":\"描述：\",\"seeDetails\":\"查看详情\",\"github\":\"代码仓库\",\"viewContribution\":\"查看贡献\",\"viewCode\":\"查看代码\"},\"project\":{\"projectPreview\":\"项目预览\",\"accessible\":\"可访问\",\"tool\":\"工具\",\"plugin\":\"插件\",\"toy\":\"小玩意\",\"moreItems\":\"更多\",\"technicalDetails\":\"技术详情\",\"technologies\":\"技术栈：\",\"description\":\"描述：\",\"seeDetails\":\"查看详情\",\"github\":\"GitHub\",\"gitee\":\"Gitee\",\"viewLiveDemo\":\"查看演示\",\"viewCode\":\"查看代码\",\"access\":\"访问\",\"videos\":\"视频\",\"watchVideo\":\"观看视频\",\"hasVideo\":\"有视频\"},\"codeblock\":{\"copy\":\"复制\",\"copySuccess\":\"代码已复制到剪贴板！\",\"copyError\":\"复制代码失败\",\"copyTooltip\":\"复制代码\"},\"toc\":{\"contents\":\"目录\",\"autoScroll\":\"自动滚动到章节\",\"collapse\":\"折叠\",\"expand\":\"展开\"},\"loading\":{\"loading\":\"加载中\",\"preparingExperience\":\"准备体验中\"}},\"lang\":\"zh\",\"theme\":\"dark\"}]\n"])</script><script>self.__next_f.push([1,"12:null\n"])</script><script>self.__next_f.push([1,"18:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n11:null\n"])</script><script>self.__next_f.push([1,"1c:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"useReducer | Interactive Portfolio\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"React基础知识篇-useReducer\"}],[\"$\",\"meta\",\"2\",{\"name\":\"author\",\"content\":\"Developer\"}],[\"$\",\"meta\",\"3\",{\"name\":\"keywords\",\"content\":\"portfolio,3D,interactive,web development,Three.js,Next.js\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:title\",\"content\":\"useReducer | Interactive Portfolio\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:description\",\"content\":\"React基础知识篇-useReducer\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"7\",{\"property\":\"article:published_time\",\"content\":\"2025-06-22\"}],[\"$\",\"meta\",\"8\",{\"property\":\"article:tag\",\"content\":\"React\"}],[\"$\",\"meta\",\"9\",{\"property\":\"article:tag\",\"content\":\"基础知识\"}],[\"$\",\"meta\",\"10\",{\"property\":\"article:tag\",\"content\":\"useReducer\"}],[\"$\",\"meta\",\"11\",{\"property\":\"article:tag\",\"content\":\"React Hook\"}],[\"$\",\"meta\",\"12\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"13\",{\"name\":\"twitter:title\",\"content\":\"useReducer | Interactive Portfolio\"}],[\"$\",\"meta\",\"14\",{\"name\":\"twitter:description\",\"content\":\"React基础知识篇-useReducer\"}],[\"$\",\"link\",\"15\",{\"rel\":\"icon\",\"href\":\"/MilkWind-Website/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"32x32\"}]],\"error\":null,\"digest\":\"$undefined\"}\n14:{\"metadata\":\"$1c:metadata\",\"error\":null,\"digest\":\"$undefined\"}\n"])</script></body></html>