<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/f034c804622acb16.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/b226d7ef8e491b72.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/5eacd01f773eed7f.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-18c0f30037e967de.js"/><script src="/_next/static/chunks/4bd1b696-5119e10e90c1bd1b.js" async=""></script><script src="/_next/static/chunks/1684-be5e4efdb509cc75.js" async=""></script><script src="/_next/static/chunks/main-app-c5f95d71e93250dc.js" async=""></script><script src="/_next/static/chunks/46-72724587da45cdb8.js" async=""></script><script src="/_next/static/chunks/app/layout-af4a6e723c0ff668.js" async=""></script><script src="/_next/static/chunks/app/error-dda32be1d095a86c.js" async=""></script><script src="/_next/static/chunks/6874-fbe9a08eb79b991c.js" async=""></script><script src="/_next/static/chunks/app/not-found-9ff98b2ccf24cac7.js" async=""></script><script src="/_next/static/chunks/206-4f4cbf4d7156f437.js" async=""></script><script src="/_next/static/chunks/app/documents/layout-28408791defde09e.js" async=""></script><script src="/_next/static/chunks/2415-689c103fb3d2c28d.js" async=""></script><script src="/_next/static/chunks/8610-7bd3f91f3cf2a4d6.js" async=""></script><script src="/_next/static/chunks/app/documents/loading-1fa3f98b6e5a8e78.js" async=""></script><script src="/_next/static/chunks/app/loading-68f227fb49b3ac8c.js" async=""></script><script src="/_next/static/chunks/b498d07c-095637f0f10883c6.js" async=""></script><script src="/_next/static/chunks/9554-b714f9de28e85d30.js" async=""></script><script src="/_next/static/chunks/app/documents/%5B...slug%5D/page-8f3efa7e6c6c5377.js" async=""></script><title>Complete Code Analysis of remarkable-katex-plus | Interactive Portfolio</title><meta name="description" content="Detailed analysis of the remarkable-katex-plus plugin code"/><meta name="author" content="Developer"/><meta name="keywords" content="portfolio,3D,interactive,web development,Three.js,Next.js"/><meta property="og:title" content="Complete Code Analysis of remarkable-katex-plus | Interactive Portfolio"/><meta property="og:description" content="Detailed analysis of the remarkable-katex-plus plugin code"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2025-06-22"/><meta property="article:tag" content="Code Analysis"/><meta property="article:tag" content="Plugin"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Complete Code Analysis of remarkable-katex-plus | Interactive Portfolio"/><meta name="twitter:description" content="Detailed analysis of the remarkable-katex-plus plugin code"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="32x32"/><script>document.querySelectorAll('body link[rel="icon"], body link[rel="apple-touch-icon"]').forEach(el => document.head.appendChild(el))</script><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__variable_d4c88d __variable_7b4e2b __variable_c3272d font-sans antialiased min-h-screen bg-background text-foreground"><div class="fixed inset-0 w-full h-full overflow-hidden pointer-events-none z-0" style="background:linear-gradient(135deg, hsl(210, 80%, 60%), hsl(180, 40%, 50%))"></div><div class="fixed top-20 right-5 z-50"><div class="w-16 h-16 rounded-full backdrop-blur-md border animate-pulse bg-surface/60 border-surface/40"></div></div><!--$--><style>
:root {
  --bprogress-color: #0066cc;
  --bprogress-height: 4px;
  --bprogress-spinner-size: 18px;
  --bprogress-spinner-animation-duration: 400ms;
  --bprogress-spinner-border-size: 2px;
  --bprogress-box-shadow: 0 0 10px #0066cc, 0 0 5px #0066cc;
  --bprogress-z-index: 99999;
  --bprogress-spinner-top: 15px;
  --bprogress-spinner-bottom: auto;
  --bprogress-spinner-right: 15px;
  --bprogress-spinner-left: auto;
}

.bprogress {
  width: 0;
  height: 0;
  pointer-events: none;
  z-index: var(--bprogress-z-index);
}

.bprogress .bar {
  background: var(--bprogress-color);
  position: fixed;
  z-index: var(--bprogress-z-index);
  top: 0;
  left: 0;
  width: 100%;
  height: var(--bprogress-height);
}

/* Fancy blur effect */
.bprogress .peg {
  display: block;
  position: absolute;
  right: 0;
  width: 100px;
  height: 100%;
  box-shadow: var(--bprogress-box-shadow);
  opacity: 1.0;
  transform: rotate(3deg) translate(0px, -4px);
}

/* Remove these to get rid of the spinner */
.bprogress .spinner {
  display: block;
  position: fixed;
  z-index: var(--bprogress-z-index);
  top: var(--bprogress-spinner-top);
  bottom: var(--bprogress-spinner-bottom);
  right: var(--bprogress-spinner-right);
  left: var(--bprogress-spinner-left);
}

.bprogress .spinner-icon {
  width: var(--bprogress-spinner-size);
  height: var(--bprogress-spinner-size);
  box-sizing: border-box;
  border: solid var(--bprogress-spinner-border-size) transparent;
  border-top-color: var(--bprogress-color);
  border-left-color: var(--bprogress-color);
  border-radius: 50%;
  -webkit-animation: bprogress-spinner var(--bprogress-spinner-animation-duration) linear infinite;
  animation: bprogress-spinner var(--bprogress-spinner-animation-duration) linear infinite;
}

.bprogress-custom-parent {
  overflow: hidden;
  position: relative;
}

.bprogress-custom-parent .bprogress .spinner,
.bprogress-custom-parent .bprogress .bar {
  position: absolute;
}

.bprogress .indeterminate {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--bprogress-height);
  overflow: hidden;
}

.bprogress .indeterminate .inc,
.bprogress .indeterminate .dec {
  position: absolute;
  top: 0;
  height: 100%;
  background-color: var(--bprogress-color);
}

.bprogress .indeterminate .inc {
  animation: bprogress-indeterminate-increase 2s infinite;
}

.bprogress .indeterminate .dec {
  animation: bprogress-indeterminate-decrease 2s 0.5s infinite;
}

@-webkit-keyframes bprogress-spinner {
  0%   { -webkit-transform: rotate(0deg); transform: rotate(0deg); }
  100% { -webkit-transform: rotate(360deg); transform: rotate(360deg); }
}

@keyframes bprogress-spinner {
  0%   { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes bprogress-indeterminate-increase {
  from { left: -5%; width: 5%; }
  to { left: 130%; width: 100%; }
}

@keyframes bprogress-indeterminate-decrease {
  from { left: -80%; width: 80%; }
  to { left: 110%; width: 10%; }
}
</style><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--><!--$--><div class="relative z-30 min-h-screen bg-background "><div class="container mx-auto px-4 py-8 max-w-4xl"><div class="mb-8"><a class="inline-flex items-center text-primary hover:text-primary/80 transition-colors" href="/documents/">documents.backToDocuments</a></div><header class="mb-12"><div class="flex items-center gap-4 mb-4 text-sm text-foreground/60"><span class="px-3 py-1 bg-primary/20 text-primary rounded-full capitalize">plugins</span><span>29 min read</span></div><h1 class="font-bold mb-4 bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent text-4xl md:text-5xl">Complete Code Analysis of remarkable-katex-plus</h1><p class="text-xl text-foreground/80 max-w-3xl">Detailed analysis of the remarkable-katex-plus plugin code</p><div class="flex flex-wrap gap-2 mt-6"><span class="px-3 py-1 text-sm bg-accent/20 text-accent rounded-full">Code Analysis</span><span class="px-3 py-1 text-sm bg-accent/20 text-accent rounded-full">Plugin</span></div></header><article class="prose prose-headings:mt-8 prose-headings:font-semibold prose-headings:text-foreground prose-h1:text-5xl prose-h2:text-4xl prose-h3:text-3xl prose-h4:text-2xl prose-h5:text-xl prose-h6:text-lg max-w-none "><div class="prose-pre:p-4 prose-pre:bg-surface w-full"><h1 id="remarkable-katex-plus-plugin-code-analysis" class="group relative text-4xl font-bold mt-8 mb-4 text-foreground leading-tight">
            <a href="#remarkable-katex-plus-plugin-code-analysis" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Remarkable KaTeX Plus Plugin Code Analysis">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Remarkable KaTeX Plus Plugin Code Analysis
        </h1>
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Plugin Version: v1.1.2</strong></p>
<p class="text-base leading-7 mb-4 text-foreground">This article will provide a line-by-line analysis of the <code>remarkable-katex-plus</code> plugin code, including the main plugin file <code>index.js</code> and test file <code>index.test.js</code>. This analysis not only explains the purpose of each line of code but also provides detailed explanations of all non-JavaScript standard library functions, their usage, and principles.</p>
<h2 id="overview" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#overview" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Overview">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Overview
        </h2>
<p class="text-base leading-7 mb-4 text-foreground"><code>remarkable-katex-plus</code> is a plugin for the Remarkable Markdown processor that can convert <code>$...$</code> and <code>$$..$$</code> sequences into mathematical formula HTML rendered using the KaTeX package.</p>
<h2 id="dependency-library-functions" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#dependency-library-functions" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Dependency Library Functions">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Dependency Library Functions
        </h2>
<p class="text-base leading-7 mb-4 text-foreground">Before diving into the code analysis, let’s first understand the main non-standard library functions used by this plugin:</p>
<h3 id="nodejs-related-functions" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#nodejs-related-functions" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Node.js Related Functions">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Node.js Related Functions
        </h3>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>require(moduleName)</code></strong>: Node.js module loading function, used to import external modules or libraries
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Parameters</strong>:
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>moduleName</code> (string): Module name or path string</li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Return value</strong>: Imported module object or function</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Usage examples</strong>:

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20Import%20external%20npm%20package%0Aconst%20katex%20%3D%20require('katex')%3B%0A%2F%2F%20Import%20local%20file%20module%0Aconst%20plugin%20%3D%20require('.%2Findex.js')%3B%0A%2F%2F%20Use%20destructuring%20syntax%20to%20import%20specific%20exports%0Aconst%20%7B%20Remarkable%20%7D%20%3D%20require('remarkable')%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-comment inline">// Import external npm package</span>
<span class="hljs-keyword inline">const</span> katex = <span class="hljs-built_in inline">require</span>(<span class="hljs-string inline">&#x27;katex&#x27;</span>);

<span class="hljs-comment inline">// Import local file module</span>
<span class="hljs-keyword inline">const</span> plugin = <span class="hljs-built_in inline">require</span>(<span class="hljs-string inline">&#x27;./index.js&#x27;</span>);

<span class="hljs-comment inline">// Use destructuring syntax to import specific exports</span>
<span class="hljs-keyword inline">const</span> { <span class="hljs-title class_ inline">Remarkable</span> } = <span class="hljs-built_in inline">require</span>(<span class="hljs-string inline">&#x27;remarkable&#x27;</span>);
</code></pre>
            </div>
        </li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>module.exports</code></strong>: Node.js module export object, used to provide module functionality to external modules
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Parameters</strong>: None (this is a property, not a function)</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Return value</strong>: None</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Usage examples</strong>:

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20Export%20single%20function%0Amodule.exports%20%3D%20rkatex%3B%0A%2F%2F%20Export%20object%20containing%20multiple%20functions%0Amodule.exports%20%3D%20%7B%20renderKatex%2C%20parseInlineKatex%20%7D%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-comment inline">// Export single function</span>
<span class="hljs-variable language_ inline">module</span>.<span class="hljs-property inline">exports</span> = rkatex;

<span class="hljs-comment inline">// Export object containing multiple functions</span>
<span class="hljs-variable language_ inline">module</span>.<span class="hljs-property inline">exports</span> = { renderKatex, parseInlineKatex };
</code></pre>
            </div>
        </li>
</ul></li>
</ul>
<h3 id="katex-library-functions" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#katex-library-functions" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to KaTeX Library Functions">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            KaTeX Library Functions
        </h3>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>katex.renderToString(expression, options)</code></strong>: KaTeX core rendering function
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Parameters</strong>:
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>expression</code> (string): LaTeX mathematical expression string to render</li>
<li class="text-foreground leading-relaxed"><code>options</code> (Object): Rendering options object, containing the following optional configurations:
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>displayMode</code> (boolean): Whether to use block display mode, default false</li>
<li class="text-foreground leading-relaxed"><code>throwOnError</code> (boolean): Whether to throw exception on error, default true</li>
<li class="text-foreground leading-relaxed"><code>errorColor</code> (string): Error text color, default ‘#cc0000’</li>
<li class="text-foreground leading-relaxed"><code>macros</code> (Object): Custom macro definitions</li>
<li class="text-foreground leading-relaxed"><code>strict</code> (boolean): Whether to use strict mode, default true</li>
</ul></li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Return value</strong>: Rendered HTML string</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Usage examples</strong>:

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20Render%20inline%20mathematical%20formula%0Aconst%20inlineHtml%20%3D%20katex.renderToString('x%5E2%20%2B%20y%5E2%20%3D%20z%5E2'%2C%20%7B%0AdisplayMode%3A%20false%2C%20%20%20%20%2F%2F%20Inline%20mode%0AthrowOnError%3A%20false%20%20%20%20%2F%2F%20Don't%20throw%20exception%20on%20error%0A%7D)%3B%0A%2F%2F%20Render%20block%20mode%20fraction%20formula%0Aconst%20blockHtml%20%3D%20katex.renderToString('%5C%5Cfrac%7Ba%7D%7Bb%7D'%2C%20%7B%0AdisplayMode%3A%20true%2C%20%20%20%20%20%2F%2F%20Block%20display%20mode%0AthrowOnError%3A%20false%2C%20%20%20%2F%2F%20Don't%20throw%20exception%20on%20error%0AerrorColor%3A%20'%23ff0000'%20%20%2F%2F%20Custom%20error%20color%20to%20red%0A%7D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-comment inline">// Render inline mathematical formula</span>
<span class="hljs-keyword inline">const</span> inlineHtml = katex.<span class="hljs-title function_ inline">renderToString</span>(<span class="hljs-string inline">&#x27;x^2 + y^2 = z^2&#x27;</span>, {
  <span class="hljs-attr inline">displayMode</span>: <span class="hljs-literal inline">false</span>,    <span class="hljs-comment inline">// Inline mode</span>
  <span class="hljs-attr inline">throwOnError</span>: <span class="hljs-literal inline">false</span>    <span class="hljs-comment inline">// Don&#x27;t throw exception on error</span>
});

<span class="hljs-comment inline">// Render block mode fraction formula</span>
<span class="hljs-keyword inline">const</span> blockHtml = katex.<span class="hljs-title function_ inline">renderToString</span>(<span class="hljs-string inline">&#x27;\\frac{a}{b}&#x27;</span>, {
  <span class="hljs-attr inline">displayMode</span>: <span class="hljs-literal inline">true</span>,     <span class="hljs-comment inline">// Block display mode</span>
  <span class="hljs-attr inline">throwOnError</span>: <span class="hljs-literal inline">false</span>,   <span class="hljs-comment inline">// Don&#x27;t throw exception on error</span>
  <span class="hljs-attr inline">errorColor</span>: <span class="hljs-string inline">&#x27;#ff0000&#x27;</span>  <span class="hljs-comment inline">// Custom error color to red</span>
});
</code></pre>
            </div>
        </li>
</ul></li>
</ul>
<h3 id="remarkable-parser-state-object-properties" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#remarkable-parser-state-object-properties" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Remarkable Parser State Object Properties">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Remarkable Parser State Object Properties
        </h3>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>state.bMarks[line]</code></strong>: Array of beginning markers for each line (begin marks)
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Type</strong>: Array<number></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Description</strong>: Stores the character index of the beginning position of each line (excluding leading spaces)</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Usage examples</strong>:

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20Get%20the%20beginning%20position%20index%20of%20the%20first%20line%0Aconst%20lineStart%20%3D%20state.bMarks%5B0%5D%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-comment inline">// Get the beginning position index of the first line</span>
<span class="hljs-keyword inline">const</span> lineStart = state.<span class="hljs-property inline">bMarks</span>[<span class="hljs-number inline">0</span>];
</code></pre>
            </div>
        </li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>state.tShift[line]</code></strong>: Array of leading spaces for each line (tab shift)
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Type</strong>: Array<number></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Description</strong>: Stores the indentation amount (number of spaces and tabs) for each line</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Usage examples</strong>:

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20Get%20the%20indentation%20amount%20(number%20of%20spaces)%20of%20the%20first%20line%0Aconst%20indent%20%3D%20state.tShift%5B0%5D%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-comment inline">// Get the indentation amount (number of spaces) of the first line</span>
<span class="hljs-keyword inline">const</span> indent = state.<span class="hljs-property inline">tShift</span>[<span class="hljs-number inline">0</span>];
</code></pre>
            </div>
        </li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>state.eMarks[line]</code></strong>: Array of ending markers for each line (end marks)
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Type</strong>: Array<number></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Description</strong>: Stores the character index of the ending position of each line</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Usage examples</strong>:

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20Get%20the%20ending%20position%20index%20of%20the%20first%20line%0Aconst%20lineEnd%20%3D%20state.eMarks%5B0%5D%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-comment inline">// Get the ending position index of the first line</span>
<span class="hljs-keyword inline">const</span> lineEnd = state.<span class="hljs-property inline">eMarks</span>[<span class="hljs-number inline">0</span>];
</code></pre>
            </div>
        </li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>state.src</code></strong>: Complete source text string
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Type</strong>: string</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Description</strong>: Contains the entire Markdown text to be parsed</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Usage examples</strong>:

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20Get%20the%20character%20at%20the%20specified%20position%0Aconst%20char%20%3D%20state.src.charAt(pos)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-comment inline">// Get the character at the specified position</span>
<span class="hljs-keyword inline">const</span> char = state.<span class="hljs-property inline">src</span>.<span class="hljs-title function_ inline">charAt</span>(pos);
</code></pre>
            </div>
        </li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>state.pos</code></strong>: Current parsing position
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Type</strong>: number</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Description</strong>: Current position index of the parser in the source text</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Usage examples</strong>:

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20Update%20current%20parsing%20position%0Astate.pos%20%3D%20newPos%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-comment inline">// Update current parsing position</span>
state.<span class="hljs-property inline">pos</span> = newPos;
</code></pre>
            </div>
        </li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>state.posMax</code></strong>: Maximum parsing position
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Type</strong>: number</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Description</strong>: Maximum position index that the parser can handle</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Usage examples</strong>:

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20Check%20if%20reaching%20the%20end%20of%20parsing%0Aif%20(state.pos%20%3E%3D%20state.posMax)%20%7B%0Areturn%20false%3B%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-comment inline">// Check if reaching the end of parsing</span>
<span class="hljs-keyword inline">if</span> (state.<span class="hljs-property inline">pos</span> &gt;= state.<span class="hljs-property inline">posMax</span>) { 
  <span class="hljs-keyword inline">return</span> <span class="hljs-literal inline">false</span>; 
}
</code></pre>
            </div>
        </li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>state.level</code></strong>: Current nesting level
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Type</strong>: number</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Description</strong>: Nesting depth of the current parsing element</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Usage examples</strong>:

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20Get%20the%20nesting%20level%20of%20the%20current%20element%0Aconst%20tokenLevel%20%3D%20state.level%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-comment inline">// Get the nesting level of the current element</span>
<span class="hljs-keyword inline">const</span> tokenLevel = state.<span class="hljs-property inline">level</span>;
</code></pre>
            </div>
        </li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>state.line</code></strong>: Current line number
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Type</strong>: number</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Description</strong>: Line number currently being processed by the parser (starting from 0)</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Usage examples</strong>:

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20Update%20the%20current%20line%20number%20being%20processed%0Astate.line%20%3D%20nextLine%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-comment inline">// Update the current line number being processed</span>
state.<span class="hljs-property inline">line</span> = nextLine;
</code></pre>
            </div>
        </li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>state.blkIndent</code></strong>: Block-level element indentation amount
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Type</strong>: number</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Description</strong>: Indentation amount of the current block-level element</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Usage examples</strong>:

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20Get%20the%20indentation%20amount%20of%20the%20current%20block-level%20element%0Aconst%20blockIndent%20%3D%20state.blkIndent%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-comment inline">// Get the indentation amount of the current block-level element</span>
<span class="hljs-keyword inline">const</span> blockIndent = state.<span class="hljs-property inline">blkIndent</span>;
</code></pre>
            </div>
        </li>
</ul></li>
</ul>
<h3 id="remarkable-parser-state-methods" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#remarkable-parser-state-methods" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Remarkable Parser State Methods">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Remarkable Parser State Methods
        </h3>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>state.skipChars(pos, char)</code></strong>: Skip consecutive identical characters from the specified position
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Parameters</strong>:
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>pos</code> (number): Starting position index</li>
<li class="text-foreground leading-relaxed"><code>char</code> (string): Character to skip</li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Return value</strong>: (number) New position index after skipping consecutive characters</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Usage examples</strong>:

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20Skip%20consecutive%20%24%20characters%20starting%20from%20position%200%0Aconst%20pos%20%3D%20state.skipChars(0%2C%20'%24')%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-comment inline">// Skip consecutive $ characters starting from position 0</span>
<span class="hljs-keyword inline">const</span> pos = state.<span class="hljs-title function_ inline">skipChars</span>(<span class="hljs-number inline">0</span>, <span class="hljs-string inline">&#x27;$&#x27;</span>);
</code></pre>
            </div>
        </li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>state.skipSpaces(pos)</code></strong>: Skip space characters from the specified position
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Parameters</strong>:
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>pos</code> (number): Starting position index</li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Return value</strong>: (number) Position index after skipping spaces and tabs</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Usage examples</strong>:

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20Skip%20spaces%20and%20tabs%20from%20the%20current%20position%0Aconst%20newPos%20%3D%20state.skipSpaces(pos)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-comment inline">// Skip spaces and tabs from the current position</span>
<span class="hljs-keyword inline">const</span> newPos = state.<span class="hljs-title function_ inline">skipSpaces</span>(pos);
</code></pre>
            </div>
        </li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>state.getLines(startLine, endLine, indent, keepLastLF)</code></strong>: Get text from the specified line range
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Parameters</strong>:
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>startLine</code> (number): Starting line number (inclusive)</li>
<li class="text-foreground leading-relaxed"><code>endLine</code> (number): Ending line number (exclusive)</li>
<li class="text-foreground leading-relaxed"><code>indent</code> (number): Indentation amount to remove</li>
<li class="text-foreground leading-relaxed"><code>keepLastLF</code> (boolean): Whether to keep the last line feed</li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Return value</strong>: (string) Extracted text string</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Usage examples</strong>:

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20Get%20content%20from%20lines%201-4%2C%20no%20indentation%20removal%2C%20keep%20line%20feeds%0Aconst%20content%20%3D%20state.getLines(1%2C%205%2C%200%2C%20true)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-comment inline">// Get content from lines 1-4, no indentation removal, keep line feeds</span>
<span class="hljs-keyword inline">const</span> content = state.<span class="hljs-title function_ inline">getLines</span>(<span class="hljs-number inline">1</span>, <span class="hljs-number inline">5</span>, <span class="hljs-number inline">0</span>, <span class="hljs-literal inline">true</span>);
</code></pre>
            </div>
        </li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>state.push(token)</code></strong>: Add a new token object to the tokens array
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Parameters</strong>:
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>token</code> (Object): Token object to add</li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Return value</strong>: None</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Usage examples</strong>:

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20Add%20inline%20math%20formula%20token%0Astate.push(%7B%0Atype%3A%20'katex'%2C%20%20%20%20%20%20%20%20%20%20%2F%2F%20Token%20type%0Acontent%3A%20'x%5E2'%2C%20%20%20%20%20%20%20%20%20%2F%2F%20Math%20expression%20content%0Ablock%3A%20false%2C%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Inline%20mode%0Alevel%3A%20state.level%20%20%20%20%20%20%2F%2F%20Current%20nesting%20level%0A%7D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-comment inline">// Add inline math formula token</span>
state.<span class="hljs-title function_ inline">push</span>({ 
  <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;katex&#x27;</span>,          <span class="hljs-comment inline">// Token type</span>
  <span class="hljs-attr inline">content</span>: <span class="hljs-string inline">&#x27;x^2&#x27;</span>,         <span class="hljs-comment inline">// Math expression content</span>
  <span class="hljs-attr inline">block</span>: <span class="hljs-literal inline">false</span>,           <span class="hljs-comment inline">// Inline mode</span>
  <span class="hljs-attr inline">level</span>: state.<span class="hljs-property inline">level</span>      <span class="hljs-comment inline">// Current nesting level</span>
});
</code></pre>
            </div>
        </li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>state.tokens.push(token)</code></strong>: Directly add token to the tokens array
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Parameters</strong>:
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>token</code> (Object): Token object to add</li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Return value</strong>: (number) New length of the array</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Usage examples</strong>:

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20Directly%20add%20block%20math%20formula%20token%20to%20tokens%20array%0Astate.tokens.push(%7B%0Atype%3A%20'katex'%2C%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Token%20type%0Acontent%3A%20'%5C%5Cfrac%7Ba%7D%7Bb%7D'%2C%20%20%2F%2F%20LaTeX%20fraction%20expression%0Ablock%3A%20true%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Block%20mode%0Alevel%3A%20state.level%20%20%20%20%20%20%20%20%2F%2F%20Current%20nesting%20level%0A%7D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-comment inline">// Directly add block math formula token to tokens array</span>
state.<span class="hljs-property inline">tokens</span>.<span class="hljs-title function_ inline">push</span>({
  <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;katex&#x27;</span>,            <span class="hljs-comment inline">// Token type</span>
  <span class="hljs-attr inline">content</span>: <span class="hljs-string inline">&#x27;\\frac{a}{b}&#x27;</span>,  <span class="hljs-comment inline">// LaTeX fraction expression</span>
  <span class="hljs-attr inline">block</span>: <span class="hljs-literal inline">true</span>,              <span class="hljs-comment inline">// Block mode</span>
  <span class="hljs-attr inline">level</span>: state.<span class="hljs-property inline">level</span>        <span class="hljs-comment inline">// Current nesting level</span>
});
</code></pre>
            </div>
        </li>
</ul></li>
</ul>
<h3 id="remarkable-plugin-api" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#remarkable-plugin-api" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Remarkable Plugin API">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Remarkable Plugin API
        </h3>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>md.inline.ruler.push(name, fn, options)</code></strong>: Register inline parsing rules
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Parameters</strong>:
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>name</code> (string): Rule name for identifying the parsing rule</li>
<li class="text-foreground leading-relaxed"><code>fn</code> (function): Parsing function that receives state and silent parameters</li>
<li class="text-foreground leading-relaxed"><code>options</code> (Object): Parsing options (optional)</li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Return value</strong>: None</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Usage examples</strong>:

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20Register%20inline%20KaTeX%20parsing%20rule%0Amd.inline.ruler.push('katex'%2C%20parseInlineKatex%2C%20%7B%0Aalt%3A%20%5B'paragraph'%2C%20'text'%5D%20%20%2F%2F%20Optional%20alternative%20rules%0A%7D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-comment inline">// Register inline KaTeX parsing rule</span>
md.<span class="hljs-property inline">inline</span>.<span class="hljs-property inline">ruler</span>.<span class="hljs-title function_ inline">push</span>(<span class="hljs-string inline">&#x27;katex&#x27;</span>, parseInlineKatex, {
  <span class="hljs-attr inline">alt</span>: [<span class="hljs-string inline">&#x27;paragraph&#x27;</span>, <span class="hljs-string inline">&#x27;text&#x27;</span>]  <span class="hljs-comment inline">// Optional alternative rules</span>
});
</code></pre>
            </div>
        </li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>md.block.ruler.push(name, fn, options)</code></strong>: Register block-level parsing rules
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Parameters</strong>:
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>name</code> (string): Rule name for identifying the parsing rule</li>
<li class="text-foreground leading-relaxed"><code>fn</code> (function): Parsing function that receives state, startLine, and endLine parameters</li>
<li class="text-foreground leading-relaxed"><code>options</code> (Object): Parsing options (optional)</li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Return value</strong>: None</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Usage examples</strong>:

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20Register%20block-level%20KaTeX%20parsing%20rule%0Amd.block.ruler.push('katex'%2C%20parseBlockKatex%2C%20%7B%0Aalt%3A%20%5B'paragraph'%2C%20'blockquote'%5D%20%20%2F%2F%20Optional%20alternative%20rules%0A%7D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-comment inline">// Register block-level KaTeX parsing rule</span>
md.<span class="hljs-property inline">block</span>.<span class="hljs-property inline">ruler</span>.<span class="hljs-title function_ inline">push</span>(<span class="hljs-string inline">&#x27;katex&#x27;</span>, parseBlockKatex, {
  <span class="hljs-attr inline">alt</span>: [<span class="hljs-string inline">&#x27;paragraph&#x27;</span>, <span class="hljs-string inline">&#x27;blockquote&#x27;</span>]  <span class="hljs-comment inline">// Optional alternative rules</span>
});
</code></pre>
            </div>
        </li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>md.renderer.rules[name]</code></strong>: Rendering rules object, used to define how tokens are converted to HTML
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Parameters</strong>:
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>name</code> (string): Token type name</li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Return value</strong>: Rendering function</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Usage examples</strong>:

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20Define%20rendering%20rule%20for%20KaTeX%20tokens%0Amd.renderer.rules.katex%20%3D%20function(tokens%2C%20idx)%20%7B%0Aconst%20token%20%3D%20tokens%5Bidx%5D%3B%20%20%2F%2F%20Get%20current%20token%0A%2F%2F%20Call%20KaTeX%20rendering%20function%0Areturn%20renderKatex(token.content%2C%20token.block)%3B%0A%7D%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-comment inline">// Define rendering rule for KaTeX tokens</span>
md.<span class="hljs-property inline">renderer</span>.<span class="hljs-property inline">rules</span>.<span class="hljs-property inline">katex</span> = <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">tokens, idx</span>) {
  <span class="hljs-keyword inline">const</span> token = tokens[idx];  <span class="hljs-comment inline">// Get current token</span>
  <span class="hljs-comment inline">// Call KaTeX rendering function</span>
  <span class="hljs-keyword inline">return</span> <span class="hljs-title function_ inline">renderKatex</span>(token.<span class="hljs-property inline">content</span>, token.<span class="hljs-property inline">block</span>);
};
</code></pre>
            </div>
        </li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>md.use(plugin, options)</code></strong>: Use plugin
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Parameters</strong>:
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>plugin</code> (function): Plugin function</li>
<li class="text-foreground leading-relaxed"><code>options</code> (Object): Plugin options (optional)</li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Return value</strong>: Remarkable instance (supports method chaining)</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Usage examples</strong>:

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20Create%20Remarkable%20instance%20and%20use%20KaTeX%20plugin%0Aconst%20md%20%3D%20new%20Remarkable()%3B%0Amd.use(katexPlugin%2C%20%7B%0Adelimiter%3A%20'%24'%2C%20%20%20%20%20%20%20%20%20%2F%2F%20Use%20%24%20as%20delimiter%0AthrowOnError%3A%20false%20%20%20%20%20%2F%2F%20Don't%20throw%20exception%20on%20error%0A%7D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-comment inline">// Create Remarkable instance and use KaTeX plugin</span>
<span class="hljs-keyword inline">const</span> md = <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">Remarkable</span>();
md.<span class="hljs-title function_ inline">use</span>(katexPlugin, { 
  <span class="hljs-attr inline">delimiter</span>: <span class="hljs-string inline">&#x27;$&#x27;</span>,         <span class="hljs-comment inline">// Use $ as delimiter</span>
  <span class="hljs-attr inline">throwOnError</span>: <span class="hljs-literal inline">false</span>     <span class="hljs-comment inline">// Don&#x27;t throw exception on error</span>
});
</code></pre>
            </div>
        </li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>md.render(markdown)</code></strong>: Render Markdown text to HTML
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Parameters</strong>:
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>markdown</code> (string): Markdown text to render</li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Return value</strong>: (string) Rendered HTML string</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Usage examples</strong>:

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20Render%20Markdown%20text%20containing%20inline%20math%20formula%0Aconst%20html%20%3D%20md.render('This%20is%20%24x%5E2%24%20inline%20math.')%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-comment inline">// Render Markdown text containing inline math formula</span>
<span class="hljs-keyword inline">const</span> html = md.<span class="hljs-title function_ inline">render</span>(<span class="hljs-string inline">&#x27;This is $x^2$ inline math.&#x27;</span>);
</code></pre>
            </div>
        </li>
</ul></li>
</ul>
<h3 id="testing-framework-functions" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#testing-framework-functions" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Testing Framework Functions">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Testing Framework Functions
        </h3>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>vows.describe(name)</code></strong>: Create test suite
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Parameters</strong>:
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>name</code> (string): Test suite name</li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Return value</strong>: Test suite object</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Usage examples</strong>:

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20Create%20test%20suite%20named%20'KatexPlugin'%0Avows.describe('KatexPlugin').addBatch(%7B%0A'Test%20case%201'%3A%20%7B%0Atopic%3A%20function()%20%7B%20%2F*%20Prepare%20test%20data%20*%2F%20%7D%2C%0A'should%20work'%3A%20function(topic)%20%7B%20%2F*%20Verify%20result%20*%2F%20%7D%0A%7D%0A%7D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-comment inline">// Create test suite named &#x27;KatexPlugin&#x27;</span>
vows.<span class="hljs-title function_ inline">describe</span>(<span class="hljs-string inline">&#x27;KatexPlugin&#x27;</span>).<span class="hljs-title function_ inline">addBatch</span>({
  <span class="hljs-string inline">&#x27;Test case 1&#x27;</span>: {
    <span class="hljs-attr inline">topic</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline"></span>) { <span class="hljs-comment inline">/* Prepare test data */</span> },
    <span class="hljs-string inline">&#x27;should work&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) { <span class="hljs-comment inline">/* Verify result */</span> }
  }
});
</code></pre>
            </div>
        </li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>addBatch(tests)</code></strong>: Add test batch
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Parameters</strong>:
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>tests</code> (Object): Test cases object</li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Return value</strong>: Test suite object (supports method chaining)</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Usage examples</strong>:

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20Add%20test%20batch%20to%20test%20suite%0Asuite.addBatch(%7B%0A'Basic%20functionality'%3A%20%7B%0Atopic%3A%20'test%20data'%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Test%20topic%20data%0A'should%20pass'%3A%20function(topic)%20%7B%20%20%20%20%20%20%20%2F%2F%20Assertion%20test%0Aassert.equal(topic%2C%20'test%20data')%3B%20%20%20%2F%2F%20Verify%20equality%0A%7D%0A%7D%0A%7D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-comment inline">// Add test batch to test suite</span>
suite.<span class="hljs-title function_ inline">addBatch</span>({
  <span class="hljs-string inline">&#x27;Basic functionality&#x27;</span>: {
    <span class="hljs-attr inline">topic</span>: <span class="hljs-string inline">&#x27;test data&#x27;</span>,                    <span class="hljs-comment inline">// Test topic data</span>
    <span class="hljs-string inline">&#x27;should pass&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {       <span class="hljs-comment inline">// Assertion test</span>
      assert.<span class="hljs-title function_ inline">equal</span>(topic, <span class="hljs-string inline">&#x27;test data&#x27;</span>);   <span class="hljs-comment inline">// Verify equality</span>
    }
  }
});
</code></pre>
            </div>
        </li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>assert.*</code></strong>: Various assertion methods from Node.js assertion library
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Common methods</strong>:
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>assert.equal(actual, expected)</code>: Strict equality comparison</li>
<li class="text-foreground leading-relaxed"><code>assert.isTrue(value)</code>: Check if value is true</li>
<li class="text-foreground leading-relaxed"><code>assert.notEqual(actual, unexpected)</code>: Check if values are not equal</li>
<li class="text-foreground leading-relaxed"><code>assert.throws(fn)</code>: Check if function throws exception</li>
<li class="text-foreground leading-relaxed"><code>assert.isObject(value)</code>: Check if value is an object</li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Usage examples</strong>:

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20Verify%20result%20equals%20expected%20value%0Aassert.equal(result%2C%20'test')%3B%0A%2F%2F%20Verify%20HTML%20contains%20KaTeX%20element%0Aassert.isTrue(html.includes(''))%3B%0A%2F%2F%20Verify%20function%20throws%20exception%0Aassert.throws(function()%20%7B%20throw%20new%20Error()%3B%20%7D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-comment inline">// Verify result equals expected value</span>
assert.<span class="hljs-title function_ inline">equal</span>(result, <span class="hljs-string inline">&#x27;&lt;p&gt;test&lt;/p&gt;&#x27;</span>);

<span class="hljs-comment inline">// Verify HTML contains KaTeX element</span>
assert.<span class="hljs-title function_ inline">isTrue</span>(html.<span class="hljs-title function_ inline">includes</span>(<span class="hljs-string inline">&#x27;&lt;span class=&quot;katex&quot;&gt;&#x27;</span>));

<span class="hljs-comment inline">// Verify function throws exception</span>
assert.<span class="hljs-title function_ inline">throws</span>(<span class="hljs-keyword inline">function</span>(<span class="hljs-params inline"></span>) { <span class="hljs-keyword inline">throw</span> <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">Error</span>(); });
</code></pre>
            </div>
        </li>
</ul></li>
</ul>
<hr class="border-0 h-px bg-gray-300 my-8">
<h2 id="indexjs-code-line-by-line-analysis" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#indexjs-code-line-by-line-analysis" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to index.js Code Line-by-Line Analysis">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            index.js Code Line-by-Line Analysis
        </h2>
<h3 id="file-header-and-module-declaration" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#file-header-and-module-declaration" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to File Header and Module Declaration">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            File Header and Module Declaration
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%22use%20strict%22%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-meta inline">&quot;use strict&quot;</span>;
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Line 1</strong>: Use strict mode to ensure the code runs in a strict JavaScript environment, helping to catch common programming errors and improve code quality.</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F**%0A*%20Plugin%20for%20Remarkable%20Markdown%20processor%20which%20transforms%20%24..%24%20and%20%24%24..%24%24%20sequences%20into%20math%20HTML%20using%20the%0A*%20Katex%20package.%0A*%2F">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-comment inline">/**
 * Plugin for Remarkable Markdown processor which transforms $..$ and $$..$$ sequences into math HTML using the
 * Katex package.
 */</span>
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 3-6</strong>: JSDoc comment describing the plugin’s purpose: provides plugin functionality for the Remarkable Markdown processor, converting mathematical formula markers to KaTeX-rendered HTML.</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="const%20rkatex%20%3D%20(md%2C%20options)%20%3D%3E%20%7B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">rkatex</span> = (<span class="hljs-params inline">md, options</span>) =&gt; {
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Line 7</strong>: Define the main function <code>rkatex</code>, which accepts two parameters:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>md</code>: Remarkable instance</li>
<li class="text-foreground leading-relaxed"><code>options</code>: Configuration options object</li>
</ul>
<h3 id="basic-configuration-and-variable-declaration" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#basic-configuration-and-variable-declaration" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Basic Configuration and Variable Declaration">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Basic Configuration and Variable Declaration
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="const%20backslash%20%3D%20'%5C%5C'%3B%0Aconst%20dollar%20%3D%20'%24'%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">  <span class="hljs-keyword inline">const</span> backslash = <span class="hljs-string inline">&#x27;\\&#x27;</span>;
  <span class="hljs-keyword inline">const</span> dollar = <span class="hljs-string inline">&#x27;$&#x27;</span>;
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 8-9</strong>: Define constant characters:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>backslash</code>: Backslash character, used for escaping</li>
<li class="text-foreground leading-relaxed"><code>dollar</code>: Dollar sign, default mathematical formula delimiter</li>
</ul>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="const%20opts%20%3D%20options%20%7C%7C%20%7B%7D%3B%0Aconst%20delimiter%20%3D%20opts.delimiter%20%7C%7C%20dollar%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">  <span class="hljs-keyword inline">const</span> opts = options || {};
  <span class="hljs-keyword inline">const</span> delimiter = opts.<span class="hljs-property inline">delimiter</span> || dollar;
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 10-11</strong>: Process configuration options:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>opts</code>: Ensure options exists, use empty object if null</li>
<li class="text-foreground leading-relaxed"><code>delimiter</code>: Get delimiter from options, default to dollar sign</li>
</ul>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="if%20(delimiter.length%20!%3D%3D%201)%20%7B%20throw%20new%20Error('invalid%20delimiter')%3B%20%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">  <span class="hljs-keyword inline">if</span> (delimiter.<span class="hljs-property inline">length</span> !== <span class="hljs-number inline">1</span>) { <span class="hljs-keyword inline">throw</span> <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">Error</span>(<span class="hljs-string inline">&#x27;invalid delimiter&#x27;</span>); }
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Line 12</strong>: Validate delimiter length, only allow single character delimiters, otherwise throw error.</p>
<h3 id="utility-module-import-and-styling-configuration" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#utility-module-import-and-styling-configuration" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Utility Module Import and Styling Configuration">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Utility Module Import and Styling Configuration
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20Import%20styling%20utilities%0Aconst%20%7B%20applyCustomStyling%20%7D%20%3D%20require('.%2Futils')%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">  <span class="hljs-comment inline">// Import styling utilities</span>
  <span class="hljs-keyword inline">const</span> { applyCustomStyling } = <span class="hljs-built_in inline">require</span>(<span class="hljs-string inline">&#x27;./utils&#x27;</span>);
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 14-15</strong>: Import custom styling processing function from utils module.</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>require('./utils')</code></strong>: Node.js module loading function, relative path loads utils.js file in same directory</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Destructuring assignment</strong>: Extract applyCustomStyling function from utils module</li>
</ul>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20Extract%20styling%20configuration%20(kept%20for%20backward%20compatibility)%0Aconst%20stylingConfig%20%3D%20%7B%0AuseTailwind%3A%20opts.useTailwind%20%7C%7C%20false%2C%0A%2F%2F%20Add%20other%20styling%20options%20here%20as%20needed%0A%7D%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">  <span class="hljs-comment inline">// Extract styling configuration (kept for backward compatibility)</span>
  <span class="hljs-keyword inline">const</span> stylingConfig = {
    <span class="hljs-attr inline">useTailwind</span>: opts.<span class="hljs-property inline">useTailwind</span> || <span class="hljs-literal inline">false</span>,
    <span class="hljs-comment inline">// Add other styling options here as needed</span>
  };
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 17-21</strong>: Create styling configuration object:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>useTailwind</code>: Whether to use Tailwind CSS, default false</li>
<li class="text-foreground leading-relaxed">Preserve backward compatibility, can add other styling options</li>
</ul>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="const%20katex%20%3D%20require(%22katex%22)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">  <span class="hljs-keyword inline">const</span> katex = <span class="hljs-built_in inline">require</span>(<span class="hljs-string inline">&quot;katex&quot;</span>);
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Line 23</strong>: Import KaTeX library for mathematical formula rendering.</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>require(&quot;katex&quot;)</code></strong>: Load KaTeX npm package, a fast mathematical formula rendering library</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">KaTeX</strong>: JavaScript mathematical formula rendering library developed by Khan Academy, supports LaTeX syntax</li>
</ul>
<h3 id="katex-rendering-function" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#katex-rendering-function" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to KaTeX Rendering Function">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            KaTeX Rendering Function
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F**%0A*%20Render%20the%20contents%20as%20KaTeX%0A*%2F%0Aconst%20renderKatex%20%3D%20(source%2C%20displayMode)%20%3D%3E%20%7B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">  <span class="hljs-comment inline">/**
   * Render the contents as KaTeX
   */</span>
  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">renderKatex</span> = (<span class="hljs-params inline">source, displayMode</span>) =&gt; {
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 25-28</strong>: Define KaTeX rendering function, accepting source content and display mode parameters.</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="const%20rendered%20%3D%20katex.renderToString(source%2C%20%7B%0AdisplayMode%3A%20displayMode%2C%0AthrowOnError%3A%20false%0A%7D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">    <span class="hljs-keyword inline">const</span> rendered = katex.<span class="hljs-title function_ inline">renderToString</span>(source, {
      <span class="hljs-attr inline">displayMode</span>: displayMode,
      <span class="hljs-attr inline">throwOnError</span>: <span class="hljs-literal inline">false</span>
    });
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 29-32</strong>: Use KaTeX to render mathematical formulas:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>katex.renderToString()</code></strong>: KaTeX core rendering function, converts LaTeX expressions to HTML strings
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>source</code>: Input LaTeX mathematical expression string</li>
<li class="text-foreground leading-relaxed"><code>options</code>: Rendering configuration object</li>
</ul></li>
<li class="text-foreground leading-relaxed"><code>displayMode</code>: Boolean value, true uses block display mode (centered, large font), false uses inline mode</li>
<li class="text-foreground leading-relaxed"><code>throwOnError: false</code>: Don’t throw exceptions on LaTeX syntax errors, instead render error messages</li>
</ul>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20Always%20apply%20custom%20styling%20to%20process%20aria-hidden%20elements%0Areturn%20applyCustomStyling(rendered%2C%20stylingConfig)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">    <span class="hljs-comment inline">// Always apply custom styling to process aria-hidden elements</span>
    <span class="hljs-keyword inline">return</span> <span class="hljs-title function_ inline">applyCustomStyling</span>(rendered, stylingConfig);
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 34-35</strong>: Apply custom styling processing to rendered results, especially for aria-hidden elements.</p>
<h3 id="block-level-katex-parsing-function" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#block-level-katex-parsing-function" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Block-level KaTeX Parsing Function">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Block-level KaTeX Parsing Function
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F**%0A*%20Parse%20'%24%24'%20as%20a%20block.%20Based%20off%20of%20similar%20method%20in%20remarkable.%0A*%2F%0Aconst%20parseBlockKatex%20%3D%20(state%2C%20startLine%2C%20endLine)%20%3D%3E%20%7B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">  <span class="hljs-comment inline">/**
   * Parse &#x27;$$&#x27; as a block. Based off of similar method in remarkable.
   */</span>
  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">parseBlockKatex</span> = (<span class="hljs-params inline">state, startLine, endLine</span>) =&gt; {
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 39-42</strong>: Define block-level KaTeX parsing function, based on similar methods in Remarkable.</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="let%20haveEndMarker%20%3D%20false%3B%0Alet%20pos%20%3D%20state.bMarks%5BstartLine%5D%20%2B%20state.tShift%5BstartLine%5D%3B%0Alet%20max%20%3D%20state.eMarks%5BstartLine%5D%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">    <span class="hljs-keyword inline">let</span> haveEndMarker = <span class="hljs-literal inline">false</span>;
    <span class="hljs-keyword inline">let</span> pos = state.<span class="hljs-property inline">bMarks</span>[startLine] + state.<span class="hljs-property inline">tShift</span>[startLine];
    <span class="hljs-keyword inline">let</span> max = state.<span class="hljs-property inline">eMarks</span>[startLine];
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 43-45</strong>: Initialize parsing state:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>haveEndMarker</code>: Boolean flag, tracks whether matching end marker is found</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>state.bMarks[startLine]</code></strong>: Remarkable state object property, get starting character position of specified line (excluding leading spaces)</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>state.tShift[startLine]</code></strong>: Remarkable state object property, get leading space/tab count of specified line</li>
<li class="text-foreground leading-relaxed"><code>pos</code>: Calculated actual parsing starting position (position after skipping leading spaces)</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>state.eMarks[startLine]</code></strong>: Remarkable state object property, get ending character position of specified line</li>
</ul>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="if%20(pos%20%2B%201%20%3E%20max)%20%7B%20return%20false%3B%20%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">    <span class="hljs-keyword inline">if</span> (pos + <span class="hljs-number inline">1</span> &gt; max) { <span class="hljs-keyword inline">return</span> <span class="hljs-literal inline">false</span>; }
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Line 47</strong>: Check if there are enough characters to form a marker, return false if not enough.</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="const%20marker%20%3D%20state.src.charAt(pos)%3B%0Aif%20(marker%20!%3D%3D%20delimiter)%20%7B%20return%20false%3B%20%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">    <span class="hljs-keyword inline">const</span> marker = state.<span class="hljs-property inline">src</span>.<span class="hljs-title function_ inline">charAt</span>(pos);
    <span class="hljs-keyword inline">if</span> (marker !== delimiter) { <span class="hljs-keyword inline">return</span> <span class="hljs-literal inline">false</span>; }
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 49-50</strong>: Check if current character is delimiter, return false if not.</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20scan%20marker%20length%0Alet%20mem%20%3D%20pos%3B%0Apos%20%3D%20state.skipChars(pos%2C%20marker)%3B%0Alet%20len%20%3D%20pos%20-%20mem%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">    <span class="hljs-comment inline">// scan marker length</span>
    <span class="hljs-keyword inline">let</span> mem = pos;
    pos = state.<span class="hljs-title function_ inline">skipChars</span>(pos, marker);
    <span class="hljs-keyword inline">let</span> len = pos - mem;
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 52-55</strong>: Scan marker length:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>mem</code>: Remember starting position for subsequent length calculation</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>state.skipChars(pos, marker)</code></strong>: Remarkable state method, skip consecutive identical characters from specified position
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>pos</code>: Starting position</li>
<li class="text-foreground leading-relaxed"><code>marker</code>: Character to skip (here delimiter, like ‘$’)</li>
<li class="text-foreground leading-relaxed">Return value: New position after skipping consecutive characters</li>
</ul></li>
<li class="text-foreground leading-relaxed"><code>len</code>: Calculate marker length (number of consecutive delimiters)</li>
</ul>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="if%20(len%20!%3D%3D%202)%20%7B%20return%20false%3B%20%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">    <span class="hljs-keyword inline">if</span> (len !== <span class="hljs-number inline">2</span>) { <span class="hljs-keyword inline">return</span> <span class="hljs-literal inline">false</span>; }
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Line 57</strong>: Block-level formulas need exactly two delimiters (like $$), otherwise return false.</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20search%20end%20of%20block%0Alet%20nextLine%20%3D%20startLine%3B%0Afor%20(%3B%20%3B)%20%7B%0A%2B%2BnextLine%3B%0Aif%20(nextLine%20%3E%3D%20endLine)%20%7B%20break%3B%20%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">    <span class="hljs-comment inline">// search end of block</span>
    <span class="hljs-keyword inline">let</span> nextLine = startLine;

    <span class="hljs-keyword inline">for</span> (; ;) {
      ++nextLine;
      <span class="hljs-keyword inline">if</span> (nextLine &gt;= endLine) { <span class="hljs-keyword inline">break</span>; }
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 59-64</strong>: Start searching for block end marker, iterate through subsequent lines.</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="pos%20%3D%20mem%20%3D%20state.bMarks%5BnextLine%5D%20%2B%20state.tShift%5BnextLine%5D%3B%0Amax%20%3D%20state.eMarks%5BnextLine%5D%3B%0Aif%20(pos%20tShift%5BnextLine%5D%20blkIndent)%20%7B%20break%3B%20%7D%0Aif%20(state.src.charAt(pos)%20!%3D%3D%20delimiter)%20%7B%20continue%3B%20%7D%0Aif%20(state.tShift%5BnextLine%5D%20-%20state.blkIndent%20%3E%3D%204)%20%7B%20continue%3B%20%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">      pos = mem = state.<span class="hljs-property inline">bMarks</span>[nextLine] + state.<span class="hljs-property inline">tShift</span>[nextLine];
      max = state.<span class="hljs-property inline">eMarks</span>[nextLine];

      <span class="hljs-keyword inline">if</span> (pos &lt; max &amp;&amp; state.<span class="hljs-property inline">tShift</span>[nextLine] &lt; state.<span class="hljs-property inline">blkIndent</span>) { <span class="hljs-keyword inline">break</span>; }
      <span class="hljs-keyword inline">if</span> (state.<span class="hljs-property inline">src</span>.<span class="hljs-title function_ inline">charAt</span>(pos) !== delimiter) { <span class="hljs-keyword inline">continue</span>; }
      <span class="hljs-keyword inline">if</span> (state.<span class="hljs-property inline">tShift</span>[nextLine] - state.<span class="hljs-property inline">blkIndent</span> &gt;= <span class="hljs-number inline">4</span>) { <span class="hljs-keyword inline">continue</span>; }
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 66-71</strong>: Check each line:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">Calculate current line position information</li>
<li class="text-foreground leading-relaxed">Check if indentation is appropriate</li>
<li class="text-foreground leading-relaxed">Check if it starts with delimiter</li>
<li class="text-foreground leading-relaxed">Check if indentation exceeds 4 spaces (code block rule)</li>
</ul>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="pos%20%3D%20state.skipChars(pos%2C%20marker)%3B%0Aif%20(pos%20-%20mem%20continue%3B%20%7D%0Apos%20%3D%20state.skipSpaces(pos)%3B%0Aif%20(pos%20continue%3B%20%7D%0AhaveEndMarker%20%3D%20true%3B%0Abreak%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">      pos = state.<span class="hljs-title function_ inline">skipChars</span>(pos, marker);
      <span class="hljs-keyword inline">if</span> (pos - mem &lt; len) { <span class="hljs-keyword inline">continue</span>; }

      pos = state.<span class="hljs-title function_ inline">skipSpaces</span>(pos);
      <span class="hljs-keyword inline">if</span> (pos &lt; max) { <span class="hljs-keyword inline">continue</span>; }

      haveEndMarker = <span class="hljs-literal inline">true</span>;
      <span class="hljs-keyword inline">break</span>;
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 73-80</strong>: Validate end marker:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>state.skipChars(pos, marker)</code></strong>: Skip consecutive delimiter characters</li>
<li class="text-foreground leading-relaxed">Check if number of skipped characters matches starting marker length</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>state.skipSpaces(pos)</code></strong>: Remarkable state method, skip spaces and tabs from specified position
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>pos</code>: Starting position</li>
<li class="text-foreground leading-relaxed">Return value: New position after skipping spaces</li>
</ul></li>
<li class="text-foreground leading-relaxed">If there’s other content on the line after skipping spaces, it’s not a valid end marker</li>
<li class="text-foreground leading-relaxed">Found valid end marker, set flag and exit loop</li>
</ul>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20Only%20process%20if%20we%20found%20a%20complete%20block%20(with%20end%20marker)%0Aif%20(!haveEndMarker)%20%7B%20return%20false%3B%20%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">    <span class="hljs-comment inline">// Only process if we found a complete block (with end marker)</span>
    <span class="hljs-keyword inline">if</span> (!haveEndMarker) { <span class="hljs-keyword inline">return</span> <span class="hljs-literal inline">false</span>; }
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 83-84</strong>: Only continue processing if complete block (with end marker) is found.</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F%2F%20If%20a%20fence%20has%20heading%20spaces%2C%20they%20should%20be%20removed%20from%20its%20inner%20block%0Alen%20%3D%20state.tShift%5BstartLine%5D%3B%0Astate.line%20%3D%20nextLine%20%2B%201%3B%20%2F%2F%20Always%20advance%20past%20the%20end%20marker%0Aconst%20content%20%3D%20state.getLines(startLine%20%2B%201%2C%20nextLine%2C%20len%2C%20true)%0A.replace(%2F%5B%20%5Cn%5D%2B%2Fg%2C%20'%20')%0A.trim()%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">    <span class="hljs-comment inline">// If a fence has heading spaces, they should be removed from its inner block</span>
    len = state.<span class="hljs-property inline">tShift</span>[startLine];
    state.<span class="hljs-property inline">line</span> = nextLine + <span class="hljs-number inline">1</span>; <span class="hljs-comment inline">// Always advance past the end marker</span>
    <span class="hljs-keyword inline">const</span> content = state.<span class="hljs-title function_ inline">getLines</span>(startLine + <span class="hljs-number inline">1</span>, nextLine, len, <span class="hljs-literal inline">true</span>)
      .<span class="hljs-title function_ inline">replace</span>(<span class="hljs-regexp inline">/[ \n]+/g</span>, <span class="hljs-string inline">&#x27; &#x27;</span>)
      .<span class="hljs-title function_ inline">trim</span>();
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 86-91</strong>: Extract block content:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">Record starting line indentation for consistent indentation processing in subsequent content extraction</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>state.line</code></strong>: Update Remarkable state object’s current line number, skip end marker line</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>state.getLines(startLine + 1, nextLine, len, true)</code></strong>: Remarkable state method, extract text from specified line range
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>startLine + 1</code>: Start from next line after starting marker (skip starting $$ line)</li>
<li class="text-foreground leading-relaxed"><code>nextLine</code>: End at end marker line (exclude ending $$ line)</li>
<li class="text-foreground leading-relaxed"><code>len</code>: Indentation amount to remove (consistent with starting line indentation)</li>
<li class="text-foreground leading-relaxed"><code>true</code>: Keep final line feed</li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>.replace(/[ \n]+/g, ' ')</code></strong>: Use regex to replace multiple consecutive spaces and line feeds with single space</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>.trim()</code></strong>: Remove leading and trailing whitespace characters</li>
</ul>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="state.tokens.push(%7B%0Atype%3A%20'katex'%2C%20params%3A%20null%2C%20content%3A%20content%2C%20lines%3A%20%5BstartLine%2C%20state.line%5D%2C%0Alevel%3A%20state.level%2C%20block%3A%20true%0A%7D)%3B%0Areturn%20true%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">    state.<span class="hljs-property inline">tokens</span>.<span class="hljs-title function_ inline">push</span>({
      <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;katex&#x27;</span>, <span class="hljs-attr inline">params</span>: <span class="hljs-literal inline">null</span>, <span class="hljs-attr inline">content</span>: content, <span class="hljs-attr inline">lines</span>: [startLine, state.<span class="hljs-property inline">line</span>],
      <span class="hljs-attr inline">level</span>: state.<span class="hljs-property inline">level</span>, <span class="hljs-attr inline">block</span>: <span class="hljs-literal inline">true</span>
    });
    <span class="hljs-keyword inline">return</span> <span class="hljs-literal inline">true</span>;
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 93-97</strong>: Create and add token:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>state.tokens.push()</code></strong>: Add new token object to Remarkable state object’s tokens array</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Token object structure</strong>:
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>type: 'katex'</code>: Specify token type for subsequent renderer identification</li>
<li class="text-foreground leading-relaxed"><code>params: null</code>: Additional parameters (empty here)</li>
<li class="text-foreground leading-relaxed"><code>content: content</code>: Extracted LaTeX mathematical expression content</li>
<li class="text-foreground leading-relaxed"><code>lines: [startLine, state.line]</code>: Record token’s line number range in source document</li>
<li class="text-foreground leading-relaxed"><code>level: state.level</code>: Current nesting level</li>
<li class="text-foreground leading-relaxed"><code>block: true</code>: Mark as block-level element (distinguish from inline elements)</li>
</ul></li>
<li class="text-foreground leading-relaxed"><code>return true</code>: Return true to indicate successful parsing and processing of this block</li>
</ul>
<h3 id="inline-katex-parsing-function" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#inline-katex-parsing-function" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Inline KaTeX Parsing Function">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Inline KaTeX Parsing Function
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2F**%0A*%20Look%20for%20'%24'%20or%20'%24%24'%20spans%20in%20Markdown%20text.%20Based%20off%20of%20the%20'fenced'%20parser%20in%20remarkable.%0A*%2F%0Aconst%20parseInlineKatex%20%3D%20(state%2C%20silent)%20%3D%3E%20%7B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">  <span class="hljs-comment inline">/**
   * Look for &#x27;$&#x27; or &#x27;$$&#x27; spans in Markdown text. Based off of the &#x27;fenced&#x27; parser in remarkable.
   */</span>
  <span class="hljs-keyword inline">const</span> <span class="hljs-title function_ inline">parseInlineKatex</span> = (<span class="hljs-params inline">state, silent</span>) =&gt; {
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 101-104</strong>: Define inline KaTeX parsing function, based on Remarkable’s fenced parser.</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="const%20start%20%3D%20state.pos%3B%0Aconst%20max%20%3D%20state.posMax%3B%0Alet%20pos%20%3D%20start%3B%0A%2F%2F%20Unexpected%20starting%20character%0Aif%20(state.src.charAt(pos)%20!%3D%3D%20delimiter)%20%7B%20return%20false%3B%20%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">    <span class="hljs-keyword inline">const</span> start = state.<span class="hljs-property inline">pos</span>;
    <span class="hljs-keyword inline">const</span> max = state.<span class="hljs-property inline">posMax</span>;
    <span class="hljs-keyword inline">let</span> pos = start;

    <span class="hljs-comment inline">// Unexpected starting character</span>
    <span class="hljs-keyword inline">if</span> (state.<span class="hljs-property inline">src</span>.<span class="hljs-title function_ inline">charAt</span>(pos) !== delimiter) { <span class="hljs-keyword inline">return</span> <span class="hljs-literal inline">false</span>; }
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 105-110</strong>: Initialize parsing state and check if starting character is delimiter.</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%2B%2Bpos%3B%0Awhile%20(pos%20src.charAt(pos)%20%3D%3D%3D%20delimiter)%20%7B%20%2B%2Bpos%3B%20%7D%0A%2F%2F%20Capture%20the%20length%20of%20the%20starting%20delimiter%20--%20closing%20one%20must%20match%20in%20size%0Aconst%20marker%20%3D%20state.src.slice(start%2C%20pos)%3B%0Aif%20(marker.length%20%3E%202)%20%7B%20return%20false%3B%20%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">    ++pos;
    <span class="hljs-keyword inline">while</span> (pos &lt; max &amp;&amp; state.<span class="hljs-property inline">src</span>.<span class="hljs-title function_ inline">charAt</span>(pos) === delimiter) { ++pos; }

    <span class="hljs-comment inline">// Capture the length of the starting delimiter -- closing one must match in size</span>
    <span class="hljs-keyword inline">const</span> marker = state.<span class="hljs-property inline">src</span>.<span class="hljs-title function_ inline">slice</span>(start, pos);
    <span class="hljs-keyword inline">if</span> (marker.<span class="hljs-property inline">length</span> &gt; <span class="hljs-number inline">2</span>) { <span class="hljs-keyword inline">return</span> <span class="hljs-literal inline">false</span>; }
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 112-117</strong>: Scan starting marker:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">Skip first delimiter</li>
<li class="text-foreground leading-relaxed">Continue skipping consecutive delimiters</li>
<li class="text-foreground leading-relaxed">Record marker content</li>
<li class="text-foreground leading-relaxed">Limit marker length to no more than 2 (<span class="katex-error inline" title="ParseError: KaTeX parse error: Can&#x27;t use function &#x27;$&#x27; in math mode at position 4: or $̲" style="color:#cc0000">or $</span>)</li>
</ul>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="const%20spanStart%20%3D%20pos%3B%0Alet%20escapedDepth%20%3D%200%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">    <span class="hljs-keyword inline">const</span> spanStart = pos;
    <span class="hljs-keyword inline">let</span> escapedDepth = <span class="hljs-number inline">0</span>;
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 119-120</strong>: Initialize content parsing:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>spanStart</code>: Record content starting position</li>
<li class="text-foreground leading-relaxed"><code>escapedDepth</code>: Track brace nesting depth</li>
</ul>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="while%20(pos%20const%20char%20%3D%20state.src.charAt(pos)%3B%0Aif%20(char%20%3D%3D%3D%20'%7B'%20%26%26%20(pos%20%3D%3D%200%20%7C%7C%20state.src.charAt(pos%20-%201)%20!%3D%20backslash))%20%7B%0AescapedDepth%20%2B%3D%201%3B%0A%7D%20else%20if%20(char%20%3D%3D%3D%20'%7D'%20%26%26%20(pos%20%3D%3D%200%20%7C%7C%20state.src.charAt(pos%20-%201)%20!%3D%20backslash))%20%7B%0AescapedDepth%20-%3D%201%3B%0Aif%20(escapedDepth%200)%20%7B%20return%20false%3B%20%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">    <span class="hljs-keyword inline">while</span> (pos &lt; max) {
      <span class="hljs-keyword inline">const</span> char = state.<span class="hljs-property inline">src</span>.<span class="hljs-title function_ inline">charAt</span>(pos);
      <span class="hljs-keyword inline">if</span> (char === <span class="hljs-string inline">&#x27;{&#x27;</span> &amp;&amp; (pos == <span class="hljs-number inline">0</span> || state.<span class="hljs-property inline">src</span>.<span class="hljs-title function_ inline">charAt</span>(pos - <span class="hljs-number inline">1</span>) != backslash)) {
        escapedDepth += <span class="hljs-number inline">1</span>;
      } <span class="hljs-keyword inline">else</span> <span class="hljs-keyword inline">if</span> (char === <span class="hljs-string inline">&#x27;}&#x27;</span> &amp;&amp; (pos == <span class="hljs-number inline">0</span> || state.<span class="hljs-property inline">src</span>.<span class="hljs-title function_ inline">charAt</span>(pos - <span class="hljs-number inline">1</span>) != backslash)) {
        escapedDepth -= <span class="hljs-number inline">1</span>;
        <span class="hljs-keyword inline">if</span> (escapedDepth &lt; <span class="hljs-number inline">0</span>) { <span class="hljs-keyword inline">return</span> <span class="hljs-literal inline">false</span>; }
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 121-127</strong>: Handle brace nesting:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">Increase depth when encountering unescaped <code>{</code></li>
<li class="text-foreground leading-relaxed">Decrease depth when encountering unescaped <code>}</code></li>
<li class="text-foreground leading-relaxed">If depth is negative, brackets don’t match</li>
</ul>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%7D%20else%20if%20(char%20%3D%3D%3D%20delimiter%20%26%26%20escapedDepth%20%3D%3D%3D%200)%20%7B%0Aconst%20matchStart%20%3D%20pos%3B%0Alet%20matchEnd%20%3D%20pos%20%2B%201%3B%0Awhile%20(matchEnd%20src.charAt(matchEnd)%20%3D%3D%3D%20delimiter)%20%7B%20%2B%2BmatchEnd%3B%20%7D%0Aif%20(matchEnd%20-%20matchStart%20%3D%3D%3D%20marker.length)%20%7B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">      } <span class="hljs-keyword inline">else</span> <span class="hljs-keyword inline">if</span> (char === delimiter &amp;&amp; escapedDepth === <span class="hljs-number inline">0</span>) {
        <span class="hljs-keyword inline">const</span> matchStart = pos;
        <span class="hljs-keyword inline">let</span> matchEnd = pos + <span class="hljs-number inline">1</span>;
        <span class="hljs-keyword inline">while</span> (matchEnd &lt; max &amp;&amp; state.<span class="hljs-property inline">src</span>.<span class="hljs-title function_ inline">charAt</span>(matchEnd) === delimiter) { ++matchEnd; }

        <span class="hljs-keyword inline">if</span> (matchEnd - matchStart === marker.<span class="hljs-property inline">length</span>) {
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 128-133</strong>: Look for matching end marker:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">Only consider delimiters when braces are balanced</li>
<li class="text-foreground leading-relaxed">Calculate consecutive delimiter length</li>
<li class="text-foreground leading-relaxed">Check if length matches starting marker</li>
</ul>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="if%20(!silent)%20%7B%0Aconst%20content%20%3D%20state.src.slice(spanStart%2C%20matchStart)%0A.replace(%2F%5B%20%5Cn%5D%2B%2Fg%2C%20'%20')%0A.trim()%3B%0Astate.push(%7B%20type%3A%20'katex'%2C%20content%3A%20content%2C%20block%3A%20marker.length%20%3E%201%2C%20level%3A%20state.level%20%7D)%3B%0A%7D%0Astate.pos%20%3D%20matchEnd%3B%0Areturn%20true%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">          <span class="hljs-keyword inline">if</span> (!silent) {
            <span class="hljs-keyword inline">const</span> content = state.<span class="hljs-property inline">src</span>.<span class="hljs-title function_ inline">slice</span>(spanStart, matchStart)
              .<span class="hljs-title function_ inline">replace</span>(<span class="hljs-regexp inline">/[ \n]+/g</span>, <span class="hljs-string inline">&#x27; &#x27;</span>)
              .<span class="hljs-title function_ inline">trim</span>();
            state.<span class="hljs-title function_ inline">push</span>({ <span class="hljs-attr inline">type</span>: <span class="hljs-string inline">&#x27;katex&#x27;</span>, <span class="hljs-attr inline">content</span>: content, <span class="hljs-attr inline">block</span>: marker.<span class="hljs-property inline">length</span> &gt; <span class="hljs-number inline">1</span>, <span class="hljs-attr inline">level</span>: state.<span class="hljs-property inline">level</span> });
          }
          state.<span class="hljs-property inline">pos</span> = matchEnd;
          <span class="hljs-keyword inline">return</span> <span class="hljs-literal inline">true</span>;
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 134-141</strong>: Process matching markers:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>!silent</code>: Check if non-silent mode (silent mode only checks syntax, doesn’t create tokens)</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>state.src.slice(spanStart, matchStart)</code></strong>: Extract content from specified range in source text
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>spanStart</code>: Content starting position (after skipping starting delimiter)</li>
<li class="text-foreground leading-relaxed"><code>matchStart</code>: End delimiter starting position (exclude end delimiter)</li>
</ul></li>
<li class="text-foreground leading-relaxed">Content cleanup: replace multiple spaces/line feeds with single space, remove leading/trailing whitespace</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>state.push(tokenObject)</code></strong>: Remarkable state method, add token to tokens array
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>type: 'katex'</code>: Token type</li>
<li class="text-foreground leading-relaxed"><code>content: content</code>: Processed LaTeX expression</li>
<li class="text-foreground leading-relaxed"><code>block: marker.length &gt; 1</code>: Determine if block-level based on delimiter length ($<span class="katex inline"><span class="katex-mathml inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mi>s</mi><mi>b</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>k</mi><mo separator="true">,</mo></mrow><annotation encoding="application/x-tex">is block,</annotation></semantics></math></span><span class="katex-html inline" aria-hidden="true" style="display:none"><span class="base inline"><span class="strut inline" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal inline">i</span><span class="mord mathnormal inline">s</span><span class="mord mathnormal inline">b</span><span class="mord mathnormal inline" style="margin-right:0.01968em;">l</span><span class="mord mathnormal inline">oc</span><span class="mord mathnormal inline" style="margin-right:0.03148em;">k</span><span class="mpunct inline">,</span></span></span></span> is inline)</li>
<li class="text-foreground leading-relaxed"><code>level: state.level</code>: Current nesting level</li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>state.pos</code></strong>: Update Remarkable state object’s current parsing position to after end delimiter</li>
</ul>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%7D%0A%7D%0Apos%20%2B%3D%201%3B%0A%7D%0A%2F%2F%20If%20we%20reach%20here%2C%20no%20matching%20closing%20delimiter%20was%20found%0A%2F%2F%20Don't%20add%20anything%20to%20pending%20and%20don't%20advance%20position%20to%20avoid%20partial%20rendering%0Areturn%20false%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">        }
      }
      pos += <span class="hljs-number inline">1</span>;
    }

    <span class="hljs-comment inline">// If we reach here, no matching closing delimiter was found</span>
    <span class="hljs-comment inline">// Don&#x27;t add anything to pending and don&#x27;t advance position to avoid partial rendering</span>
    <span class="hljs-keyword inline">return</span> <span class="hljs-literal inline">false</span>;
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 142-148</strong>: Handle case where no matching marker is found:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">Continue searching forward</li>
<li class="text-foreground leading-relaxed">If reaching end without finding matching end marker</li>
<li class="text-foreground leading-relaxed">Return false, don’t create token, avoid partial rendering</li>
</ul>
<h3 id="plugin-registration" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#plugin-registration" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Plugin Registration">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Plugin Registration
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="md.inline.ruler.push('katex'%2C%20parseInlineKatex%2C%20options)%3B%0Amd.block.ruler.push('katex'%2C%20parseBlockKatex%2C%20options)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">  md.<span class="hljs-property inline">inline</span>.<span class="hljs-property inline">ruler</span>.<span class="hljs-title function_ inline">push</span>(<span class="hljs-string inline">&#x27;katex&#x27;</span>, parseInlineKatex, options);
  md.<span class="hljs-property inline">block</span>.<span class="hljs-property inline">ruler</span>.<span class="hljs-title function_ inline">push</span>(<span class="hljs-string inline">&#x27;katex&#x27;</span>, parseBlockKatex, options);
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 151-152</strong>: Register parsing rules with Remarkable:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>md.inline.ruler.push()</code></strong>: Remarkable plugin API, register new parsing rule with inline parser
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>'katex'</code>: Rule name for identification and ordering</li>
<li class="text-foreground leading-relaxed"><code>parseInlineKatex</code>: Inline parsing function</li>
<li class="text-foreground leading-relaxed"><code>options</code>: Parsing options (optional)</li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>md.block.ruler.push()</code></strong>: Remarkable plugin API, register new parsing rule with block parser
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>'katex'</code>: Rule name</li>
<li class="text-foreground leading-relaxed"><code>parseBlockKatex</code>: Block parsing function</li>
<li class="text-foreground leading-relaxed"><code>options</code>: Parsing options (optional)</li>
</ul></li>
</ul>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="md.renderer.rules.katex%20%3D%20(tokens%2C%20idx)%20%3D%3E%20%7B%0Aconst%20token%20%3D%20tokens%5Bidx%5D%3B%0Aconst%20rendered%20%3D%20renderKatex(token.content%2C%20token.block)%3B%0A%2F%2F%20Return%20clean%20HTML%20without%20any%20markdown%20artifacts%0Areturn%20rendered%3B%0A%7D%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">  md.<span class="hljs-property inline">renderer</span>.<span class="hljs-property inline">rules</span>.<span class="hljs-property inline">katex</span> = <span class="hljs-function inline">(<span class="hljs-params inline">tokens, idx</span>) =&gt;</span> {
    <span class="hljs-keyword inline">const</span> token = tokens[idx];
    <span class="hljs-keyword inline">const</span> rendered = <span class="hljs-title function_ inline">renderKatex</span>(token.<span class="hljs-property inline">content</span>, token.<span class="hljs-property inline">block</span>);
    <span class="hljs-comment inline">// Return clean HTML without any markdown artifacts</span>
    <span class="hljs-keyword inline">return</span> rendered;
  };
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 153-158</strong>: Define rendering rule:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>md.renderer.rules.katex</code></strong>: Remarkable renderer API, define rendering function for ‘katex’ type tokens</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Rendering function parameters</strong>:
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>tokens</code>: Complete tokens array</li>
<li class="text-foreground leading-relaxed"><code>idx</code>: Index of current token to render in array</li>
</ul></li>
<li class="text-foreground leading-relaxed"><code>tokens[idx]</code>: Get current token object to render</li>
<li class="text-foreground leading-relaxed"><code>renderKatex(token.content, token.block)</code>: Call previously defined KaTeX rendering function</li>
<li class="text-foreground leading-relaxed">Return rendered HTML string, no Markdown syntax artifacts</li>
</ul>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="md.renderer.rules.katex.delimiter%20%3D%20delimiter%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">  md.<span class="hljs-property inline">renderer</span>.<span class="hljs-property inline">rules</span>.<span class="hljs-property inline">katex</span>.<span class="hljs-property inline">delimiter</span> = delimiter;
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Line 159</strong>: Attach delimiter information to rendering rule for debugging and configuration checking.</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%7D%3B%0Amodule.exports%20%3D%20rkatex%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">};

<span class="hljs-variable language_ inline">module</span>.<span class="hljs-property inline">exports</span> = rkatex;
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 160-162</strong>: End function definition and export module.</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>};</code>: End rkatex function definition</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>module.exports</code></strong>: Node.js module export mechanism, makes rkatex function importable by other modules via require()</li>
</ul>
<hr class="border-0 h-px bg-gray-300 my-8">
<h2 id="indextestjs-code-line-by-line-analysis" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#indextestjs-code-line-by-line-analysis" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to index.test.js Code Line-by-Line Analysis">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            index.test.js Code Line-by-Line Analysis
        </h2>
<h3 id="test-file-header" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#test-file-header" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Test File Header">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Test File Header
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%22use%20strict%22%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-meta inline">&quot;use strict&quot;</span>;
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Line 1</strong>: Enable strict mode.</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="const%20vows%20%3D%20require('vows')%3B%0Aconst%20assert%20%3D%20require('assert')%3B%0Aconst%20%7B%20Remarkable%20%7D%20%3D%20require('remarkable')%3B%0Aconst%20plugin%20%3D%20require('.%2Findex.js')%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-keyword inline">const</span> vows = <span class="hljs-built_in inline">require</span>(<span class="hljs-string inline">&#x27;vows&#x27;</span>);
<span class="hljs-keyword inline">const</span> assert = <span class="hljs-built_in inline">require</span>(<span class="hljs-string inline">&#x27;assert&#x27;</span>);
<span class="hljs-keyword inline">const</span> { <span class="hljs-title class_ inline">Remarkable</span> } = <span class="hljs-built_in inline">require</span>(<span class="hljs-string inline">&#x27;remarkable&#x27;</span>);

<span class="hljs-keyword inline">const</span> plugin = <span class="hljs-built_in inline">require</span>(<span class="hljs-string inline">&#x27;./index.js&#x27;</span>);
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 3-6</strong>: Import test dependencies:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>require('vows')</code></strong>: Import vows testing framework, a BDD (Behavior Driven Development) testing framework for Node.js</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>require('assert')</code></strong>: Import Node.js built-in assertion library, provides various assertion methods for test verification</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>require('remarkable')</code></strong>: Import Remarkable Markdown processor, use destructuring syntax to get Remarkable constructor</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>require('./index.js')</code></strong>: Import plugin main file from current directory (relative path import)</li>
</ul>
<h3 id="test-instance-preparation" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#test-instance-preparation" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Test Instance Preparation">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Test Instance Preparation
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="const%20mdWithDollar%20%3D%20new%20Remarkable()%3B%0AmdWithDollar.use(plugin)%3B%0Aconst%20mdWithAt%20%3D%20new%20Remarkable()%3B%0AmdWithAt.use(plugin%2C%20%7Bdelimiter%3A%20'%40'%7D)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-keyword inline">const</span> mdWithDollar = <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">Remarkable</span>();
mdWithDollar.<span class="hljs-title function_ inline">use</span>(plugin);

<span class="hljs-keyword inline">const</span> mdWithAt = <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">Remarkable</span>();
mdWithAt.<span class="hljs-title function_ inline">use</span>(plugin, {<span class="hljs-attr inline">delimiter</span>: <span class="hljs-string inline">&#x27;@&#x27;</span>});
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 8-12</strong>: Create test instances:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>new Remarkable()</code></strong>: Create Remarkable Markdown processor instance</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>mdWithDollar.use(plugin)</code></strong>: Use Remarkable plugin API to load KaTeX plugin (use default configuration)
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>plugin</code>: Previously imported KaTeX plugin function</li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>mdWithAt.use(plugin, {delimiter: '@'})</code></strong>: Load plugin and pass custom configuration
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>{delimiter: '@'}</code>: Configuration object, specify using @ symbol as mathematical formula delimiter instead of default $ symbol</li>
</ul></li>
</ul>
<h3 id="test-suite-start" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#test-suite-start" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Test Suite Start">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Test Suite Start
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="vows.describe('KatexPlugin').addBatch(%7B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">vows.<span class="hljs-title function_ inline">describe</span>(<span class="hljs-string inline">&#x27;KatexPlugin&#x27;</span>).<span class="hljs-title function_ inline">addBatch</span>({
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Line 14</strong>: Use vows framework to create test suite named 'KatexPlugin’.</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>vows.describe('KatexPlugin')</code></strong>: vows testing framework API, create a test suite (Test Suite)
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>'KatexPlugin'</code>: Test suite name for test output and organization</li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>.addBatch(testObject)</code></strong>: vows framework method, add batch of test cases to test suite
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>testObject</code>: Object containing multiple test cases</li>
</ul></li>
</ul>
<h3 id="configuration-tests" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#configuration-tests" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Configuration Tests">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Configuration Tests
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="'Config%20empty%20delimiter'%3A%20%7B%0Atopic()%20%7B%0Aconst%20md%20%3D%20new%20Remarkable()%3B%0Amd.use(plugin%2C%20%7Bdelimiter%3A%20''%7D)%3B%0Areturn%20md%3B%0A%7D%2C%0A'Uses%20default%20delimiter'%3A%20function(topic)%20%7B%0Aassert.equal(topic.renderer.rules.katex.delimiter%2C%20'%24')%3B%0A%7D%0A%7D%2C">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">  <span class="hljs-string inline">&#x27;Config empty delimiter&#x27;</span>: {
    <span class="hljs-title function_ inline">topic</span>(<span class="hljs-params inline"></span>) {
      <span class="hljs-keyword inline">const</span> md = <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">Remarkable</span>();
      md.<span class="hljs-title function_ inline">use</span>(plugin, {<span class="hljs-attr inline">delimiter</span>: <span class="hljs-string inline">&#x27;&#x27;</span>});
      <span class="hljs-keyword inline">return</span> md;
    },
    <span class="hljs-string inline">&#x27;Uses default delimiter&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {
      assert.<span class="hljs-title function_ inline">equal</span>(topic.<span class="hljs-property inline">renderer</span>.<span class="hljs-property inline">rules</span>.<span class="hljs-property inline">katex</span>.<span class="hljs-property inline">delimiter</span>, <span class="hljs-string inline">&#x27;$&#x27;</span>);
    }
  },
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 15-24</strong>: Test empty delimiter configuration:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">Create instance with empty delimiter</li>
<li class="text-foreground leading-relaxed">Verify fallback to default $ delimiter</li>
</ul>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="'Multi-char%20delimiter'%3A%20%7B%0Atopic()%20%7B%0Areturn%20()%20%3D%3E%20%7B%0Aconst%20md%20%3D%20new%20Remarkable()%3B%0Amd.use(plugin%2C%20%7Bdelimiter%3A%20'%24%24'%7D)%3B%0Areturn%20md%3B%0A%7D%3B%0A%7D%2C%0A'Throws%20exception'%3A%20function(topic)%20%7B%0Aassert.throws(topic)%3B%0A%7D%0A%7D%2C">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">  <span class="hljs-string inline">&#x27;Multi-char delimiter&#x27;</span>: {
    <span class="hljs-title function_ inline">topic</span>(<span class="hljs-params inline"></span>) {
      <span class="hljs-keyword inline">return</span> <span class="hljs-function inline">() =&gt;</span> {
        <span class="hljs-keyword inline">const</span> md = <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">Remarkable</span>();
        md.<span class="hljs-title function_ inline">use</span>(plugin, {<span class="hljs-attr inline">delimiter</span>: <span class="hljs-string inline">&#x27;$$&#x27;</span>});
        <span class="hljs-keyword inline">return</span> md;
      };
    },
    <span class="hljs-string inline">&#x27;Throws exception&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {
      assert.<span class="hljs-title function_ inline">throws</span>(topic);
    }
  },
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 25-36</strong>: Test multi-character delimiter:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">Try using two-character delimiter</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>assert.throws(topic)</code></strong>: Node.js assertion library method, verify if function call throws exception
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>topic</code>: Function to test (here function returning Remarkable instance creation function)</li>
<li class="text-foreground leading-relaxed">If function doesn’t throw exception, assertion fails</li>
</ul></li>
</ul>
<h3 id="basic-text-rendering-tests" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#basic-text-rendering-tests" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Basic Text Rendering Tests">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Basic Text Rendering Tests
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="'Render%20plain%20text'%3A%20%7B%0Atopic%3A%20mdWithDollar.render('This%20is%20a%20test.')%2C%0A'Nothing%20done'%3A%20function(topic)%20%7B%0Aassert.equal(topic%2C%20'This%20is%20a%20test.%5Cn')%3B%0A%7D%0A%7D%2C">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">  <span class="hljs-string inline">&#x27;Render plain text&#x27;</span>: {
    <span class="hljs-attr inline">topic</span>: mdWithDollar.<span class="hljs-title function_ inline">render</span>(<span class="hljs-string inline">&#x27;This is a test.&#x27;</span>),
    <span class="hljs-string inline">&#x27;Nothing done&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {
      assert.<span class="hljs-title function_ inline">equal</span>(topic, <span class="hljs-string inline">&#x27;&lt;p&gt;This is a test.&lt;/p&gt;\n&#x27;</span>);
    }
  },
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 37-42</strong>: Test plain text rendering:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>mdWithDollar.render('This is a test.')</code></strong>: Use Remarkable instance’s render method to process Markdown text
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>render()</code>: Remarkable core method, converts Markdown text to HTML</li>
<li class="text-foreground leading-relaxed">Return value: Rendered HTML string</li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>assert.equal(actual, expected)</code></strong>: Node.js assertion library method, verify two values are strictly equal
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>actual</code>: Actually obtained value (render method return value)</li>
<li class="text-foreground leading-relaxed"><code>expected</code>: Expected value ('<p class="text-base leading-7 mb-4 text-foreground">This is a test.</p>\n’)</li>
</ul></li>
<li class="text-foreground leading-relaxed">Ensure plugin doesn’t affect normal text rendering</li>
</ul>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="'Render%20with%20single%20%24%20in%20text'%3A%20%7B%0Atopic%3A%20mdWithDollar.render('The%20car%20cost%20%2420%2C000%20new.')%2C%0A'Nothing%20done'%3A%20function(topic)%20%7B%0Aassert.equal(topic%2C%20'The%20car%20cost%20%2420%2C000%20new.%5Cn')%3B%0A%7D%0A%7D%2C">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">  <span class="hljs-string inline">&#x27;Render with single $ in text&#x27;</span>: {
    <span class="hljs-attr inline">topic</span>: mdWithDollar.<span class="hljs-title function_ inline">render</span>(<span class="hljs-string inline">&#x27;The car cost $20,000 new.&#x27;</span>),
    <span class="hljs-string inline">&#x27;Nothing done&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {
      assert.<span class="hljs-title function_ inline">equal</span>(topic, <span class="hljs-string inline">&#x27;&lt;p&gt;The car cost $20,000 new.&lt;/p&gt;\n&#x27;</span>);
    }
  },
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 43-48</strong>: Test single dollar sign:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">Verify single $ symbol not mistaken for mathematical formula marker</li>
<li class="text-foreground leading-relaxed">Ensure currency symbols in normal text display correctly</li>
</ul>
<h3 id="inline-mathematical-formula-tests" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#inline-mathematical-formula-tests" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Inline Mathematical Formula Tests">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Inline Mathematical Formula Tests
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="'Render%20%24...%24%20in%20text'%3A%20%7B%0Atopic%3A%20mdWithDollar.render('Equation%20%24x%20%2B%20y%24.')%2C%0A'Starts%20with%20%22Equation%20%22'%3A%20function(topic)%20%7B%0Aassert.isTrue(topic.startsWith('Equation%20'))%3B%0A%7D%2C%0A'Ends%20with%20%22.%22'%3A%20function(topic)%20%7B%0Aassert.isTrue(topic.endsWith('.%5Cn'))%3B%0A%7D%2C%0A'Contains%20math%20span'%3A%20function(topic)%20%7B%0Aassert.notEqual(topic.indexOf('')%2C%20-1)%3B%0A%7D%0A%7D%2C">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">  <span class="hljs-string inline">&#x27;Render $...$ in text&#x27;</span>: {
    <span class="hljs-attr inline">topic</span>: mdWithDollar.<span class="hljs-title function_ inline">render</span>(<span class="hljs-string inline">&#x27;Equation $x + y$.&#x27;</span>),
    <span class="hljs-string inline">&#x27;Starts with &quot;&lt;p&gt;Equation &quot;&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {
      assert.<span class="hljs-title function_ inline">isTrue</span>(topic.<span class="hljs-title function_ inline">startsWith</span>(<span class="hljs-string inline">&#x27;&lt;p&gt;Equation &#x27;</span>));
    },
    <span class="hljs-string inline">&#x27;Ends with &quot;.&lt;/p&gt;&quot;&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {
      assert.<span class="hljs-title function_ inline">isTrue</span>(topic.<span class="hljs-title function_ inline">endsWith</span>(<span class="hljs-string inline">&#x27;&lt;/span&gt;.&lt;/p&gt;\n&#x27;</span>));
    },
    <span class="hljs-string inline">&#x27;Contains math span&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {
      assert.<span class="hljs-title function_ inline">notEqual</span>(topic.<span class="hljs-title function_ inline">indexOf</span>(<span class="hljs-string inline">&#x27;&lt;span class=&quot;katex&quot;&gt;&#x27;</span>), -<span class="hljs-number inline">1</span>);
    }
  },
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 49-61</strong>: Test basic inline mathematical formula:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>assert.isTrue(condition)</code></strong>: Node.js assertion library method, verify condition is truthy
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>topic.startsWith('&lt;p&gt;Equation ')</code>: JavaScript string method, check if string starts with specified prefix</li>
<li class="text-foreground leading-relaxed"><code>topic.endsWith('&lt;/span&gt;.&lt;/p&gt;\n')</code>: JavaScript string method, check if string ends with specified suffix</li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>assert.notEqual(actual, unexpected)</code></strong>: Node.js assertion library method, verify two values are not equal
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>topic.indexOf('&lt;span class=&quot;katex&quot;&gt;')</code>: JavaScript string method, find substring position in string</li>
<li class="text-foreground leading-relaxed"><code>-1</code>: indexOf method return value when not found</li>
<li class="text-foreground leading-relaxed">This assertion ensures HTML contains KaTeX-rendered span element</li>
</ul></li>
</ul>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="'Render%20%24...%24%20in%20text%20with%20embedded%20%7B%24...%24%7D'%3A%20%7B%0Atopic%3A%20mdWithDollar.render('Equation%20%24%5C%5Ccolorbox%7Baqua%7D%7B%24F%3Dma%24%7D%24.')%2C%0A%2F%2F%20...%20similar%20assertions%0A%7D%2C">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">  <span class="hljs-string inline">&#x27;Render $...$ in text with embedded {$...$}&#x27;</span>: {
    <span class="hljs-attr inline">topic</span>: mdWithDollar.<span class="hljs-title function_ inline">render</span>(<span class="hljs-string inline">&#x27;Equation $\\colorbox{aqua}{$F=ma$}$.&#x27;</span>),
    <span class="hljs-comment inline">// ... similar assertions</span>
  },
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 62-74</strong>: Test complex formula with nested braces:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">Verify plugin correctly handles nested brace structures</li>
<li class="text-foreground leading-relaxed">Ensure complex LaTeX commands render correctly</li>
</ul>
<h3 id="block-level-mathematical-formula-tests" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#block-level-mathematical-formula-tests" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Block-level Mathematical Formula Tests">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Block-level Mathematical Formula Tests
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="'Render%20%24%24...%24%24%20in%20text'%3A%20%7B%0Atopic%3A%20mdWithDollar.render('Before%5Cn%24%24%5Cnx%20%2B%20y%5Cn%24%24%5Cnafter.')%2C%0A'Starts%20with%20%22Before%20%22'%3A%20function(topic)%20%7B%0Aassert.isTrue(topic.startsWith('Before%5Cn'))%3B%0A%7D%2C%0A'Ends%20with%20%22after.%22'%3A%20function(topic)%20%7B%0Aassert.isTrue(topic.endsWith('%5Cnafter.%5Cn'))%3B%0A%7D%2C%0A'Contains%20math%20span'%3A%20function(topic)%20%7B%0Aassert.notEqual(topic.indexOf('')%2C%20-1)%3B%0A%7D%0A%7D%2C">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">  <span class="hljs-string inline">&#x27;Render $$...$$ in text&#x27;</span>: {
    <span class="hljs-attr inline">topic</span>: mdWithDollar.<span class="hljs-title function_ inline">render</span>(<span class="hljs-string inline">&#x27;Before\n$$\nx + y\n$$\nafter.&#x27;</span>),
    <span class="hljs-string inline">&#x27;Starts with &quot;&lt;p&gt;Before &quot;&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {
      assert.<span class="hljs-title function_ inline">isTrue</span>(topic.<span class="hljs-title function_ inline">startsWith</span>(<span class="hljs-string inline">&#x27;&lt;p&gt;Before\n&#x27;</span>));
    },
    <span class="hljs-string inline">&#x27;Ends with &quot;after.&lt;/p&gt;&quot;&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {
      assert.<span class="hljs-title function_ inline">isTrue</span>(topic.<span class="hljs-title function_ inline">endsWith</span>(<span class="hljs-string inline">&#x27;&lt;/span&gt;\nafter.&lt;/p&gt;\n&#x27;</span>));
    },
    <span class="hljs-string inline">&#x27;Contains math span&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {
      assert.<span class="hljs-title function_ inline">notEqual</span>(topic.<span class="hljs-title function_ inline">indexOf</span>(<span class="hljs-string inline">&#x27;&lt;span class=&quot;katex-display&quot;&gt;&#x27;</span>), -<span class="hljs-number inline">1</span>);
    }
  },
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 87-99</strong>: Test block-level mathematical formula:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">Verify multi-line $$ blocks render correctly</li>
<li class="text-foreground leading-relaxed">Ensure katex-display class name is used</li>
</ul>
<h3 id="custom-delimiter-tests" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#custom-delimiter-tests" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Custom Delimiter Tests">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Custom Delimiter Tests
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="'Render%20%40...%40%20in%20text'%3A%20%7B%0Atopic%3A%20mdWithAt.render('Equation%20%40x%20%2B%20y%40.')%2C%0A%2F%2F%20...%20verify%20inline%20formula%20using%20%40%20delimiter%0A%7D%2C%0A'Render%20%40%40...%40%40%20in%20text'%3A%20%7B%0Atopic%3A%20mdWithAt.render('Before%20%40%40x%20%2B%20y%40%40%20after.')%2C%0A%2F%2F%20...%20verify%20block%20formula%20using%20%40%20delimiter%0A%7D%2C">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">  <span class="hljs-string inline">&#x27;Render @...@ in text&#x27;</span>: {
    <span class="hljs-attr inline">topic</span>: mdWithAt.<span class="hljs-title function_ inline">render</span>(<span class="hljs-string inline">&#x27;Equation @x + y@.&#x27;</span>),
    <span class="hljs-comment inline">// ... verify inline formula using @ delimiter</span>
  },
  <span class="hljs-string inline">&#x27;Render @@...@@ in text&#x27;</span>: {
    <span class="hljs-attr inline">topic</span>: mdWithAt.<span class="hljs-title function_ inline">render</span>(<span class="hljs-string inline">&#x27;Before @@x + y@@ after.&#x27;</span>),
    <span class="hljs-comment inline">// ... verify block formula using @ delimiter</span>
  },
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 75-86 and 100-112</strong>: Test custom delimiter:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">Verify plugin supports custom delimiters (@ instead of $)</li>
<li class="text-foreground leading-relaxed">Ensure both inline and block formulas work correctly with custom delimiter</li>
</ul>
<h3 id="error-handling-tests" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#error-handling-tests" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Error Handling Tests">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Error Handling Tests
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="'Incomplete%20inline%20expression%20(no%20closing%20delimiter)'%3A%20%7B%0Atopic%3A%20mdWithDollar.render('This%20has%20%24incomplete%20math%20expression.')%2C%0A'Original%20text%20preserved'%3A%20function(topic)%20%7B%0Aassert.equal(topic%2C%20'This%20has%20%24incomplete%20math%20expression.%5Cn')%3B%0A%7D%2C%0A'No%20KaTeX%20HTML%20generated'%3A%20function(topic)%20%7B%0Aassert.equal(topic.indexOf('')%2C%20-1)%3B%0A%7D%0A%7D%2C">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">  <span class="hljs-string inline">&#x27;Incomplete inline expression (no closing delimiter)&#x27;</span>: {
    <span class="hljs-attr inline">topic</span>: mdWithDollar.<span class="hljs-title function_ inline">render</span>(<span class="hljs-string inline">&#x27;This has $incomplete math expression.&#x27;</span>),
    <span class="hljs-string inline">&#x27;Original text preserved&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {
      assert.<span class="hljs-title function_ inline">equal</span>(topic, <span class="hljs-string inline">&#x27;&lt;p&gt;This has $incomplete math expression.&lt;/p&gt;\n&#x27;</span>);
    },
    <span class="hljs-string inline">&#x27;No KaTeX HTML generated&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {
      assert.<span class="hljs-title function_ inline">equal</span>(topic.<span class="hljs-title function_ inline">indexOf</span>(<span class="hljs-string inline">&#x27;&lt;span class=&quot;katex&quot;&gt;&#x27;</span>), -<span class="hljs-number inline">1</span>);
    }
  },
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 113-122</strong>: Test incomplete inline expression:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">Verify original text preserved when missing end delimiter</li>
<li class="text-foreground leading-relaxed">Ensure no erroneous KaTeX HTML generated</li>
</ul>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="'Incomplete%20block%20expression%20(no%20closing%20delimiter)'%3A%20%7B%0Atopic%3A%20mdWithDollar.render('Before%5Cn%24%24%5Cnincomplete%20block%5Cnafter.')%2C%0A'Original%20text%20preserved'%3A%20function(topic)%20%7B%0Aassert.equal(topic%2C%20'Before%5Cn%24%24%5Cnincomplete%20block%5Cnafter.%5Cn')%3B%0A%7D%2C%0A'No%20KaTeX%20HTML%20generated'%3A%20function(topic)%20%7B%0Aassert.equal(topic.indexOf('')%2C%20-1)%3B%0A%7D%0A%7D%2C">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">  <span class="hljs-string inline">&#x27;Incomplete block expression (no closing delimiter)&#x27;</span>: {
    <span class="hljs-attr inline">topic</span>: mdWithDollar.<span class="hljs-title function_ inline">render</span>(<span class="hljs-string inline">&#x27;Before\n$$\nincomplete block\nafter.&#x27;</span>),
    <span class="hljs-string inline">&#x27;Original text preserved&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {
      assert.<span class="hljs-title function_ inline">equal</span>(topic, <span class="hljs-string inline">&#x27;&lt;p&gt;Before\n$$\nincomplete block\nafter.&lt;/p&gt;\n&#x27;</span>);
    },
    <span class="hljs-string inline">&#x27;No KaTeX HTML generated&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {
      assert.<span class="hljs-title function_ inline">equal</span>(topic.<span class="hljs-title function_ inline">indexOf</span>(<span class="hljs-string inline">&#x27;&lt;span class=&quot;katex-display&quot;&gt;&#x27;</span>), -<span class="hljs-number inline">1</span>);
    }
  },
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 123-132</strong>: Test incomplete block expression:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">Verify original text preserved when missing end marker</li>
<li class="text-foreground leading-relaxed">Ensure no partial mathematical formula HTML generated</li>
</ul>
<h3 id="content-cleanup-tests" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#content-cleanup-tests" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Content Cleanup Tests">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Content Cleanup Tests
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="'Original%20expression%20completely%20removed%20in%20inline%20math'%3A%20%7B%0Atopic%3A%20mdWithDollar.render('Test%20%24x%5E2%24%20here.')%2C%0A'No%20dollar%20signs%20in%20output'%3A%20function(topic)%20%7B%0A%2F%2F%20Should%20not%20contain%20the%20original%20%24%20delimiters%0Aassert.equal(topic.indexOf('%24x%5E2%24')%2C%20-1)%3B%0A%7D%2C%0A'Contains%20rendered%20math'%3A%20function(topic)%20%7B%0Aassert.notEqual(topic.indexOf('')%2C%20-1)%3B%0A%7D%2C%0A'Contains%20x%5E2%20in%20rendered%20form'%3A%20function(topic)%20%7B%0A%2F%2F%20KaTeX%20should%20render%20x%5E2%20as%20superscript%0Aassert.notEqual(topic.indexOf('x')%2C%20-1)%3B%0Aassert.notEqual(topic.indexOf('2')%2C%20-1)%3B%0A%7D%0A%7D%2C">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">  <span class="hljs-string inline">&#x27;Original expression completely removed in inline math&#x27;</span>: {
    <span class="hljs-attr inline">topic</span>: mdWithDollar.<span class="hljs-title function_ inline">render</span>(<span class="hljs-string inline">&#x27;Test $x^2$ here.&#x27;</span>),
    <span class="hljs-string inline">&#x27;No dollar signs in output&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {
      <span class="hljs-comment inline">// Should not contain the original $ delimiters</span>
      assert.<span class="hljs-title function_ inline">equal</span>(topic.<span class="hljs-title function_ inline">indexOf</span>(<span class="hljs-string inline">&#x27;$x^2$&#x27;</span>), -<span class="hljs-number inline">1</span>);
    },
    <span class="hljs-string inline">&#x27;Contains rendered math&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {
      assert.<span class="hljs-title function_ inline">notEqual</span>(topic.<span class="hljs-title function_ inline">indexOf</span>(<span class="hljs-string inline">&#x27;&lt;span class=&quot;katex&quot;&gt;&#x27;</span>), -<span class="hljs-number inline">1</span>);
    },
    <span class="hljs-string inline">&#x27;Contains x^2 in rendered form&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {
      <span class="hljs-comment inline">// KaTeX should render x^2 as superscript</span>
      assert.<span class="hljs-title function_ inline">notEqual</span>(topic.<span class="hljs-title function_ inline">indexOf</span>(<span class="hljs-string inline">&#x27;x&#x27;</span>), -<span class="hljs-number inline">1</span>);
      assert.<span class="hljs-title function_ inline">notEqual</span>(topic.<span class="hljs-title function_ inline">indexOf</span>(<span class="hljs-string inline">&#x27;2&#x27;</span>), -<span class="hljs-number inline">1</span>);
    }
  },
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 133-149</strong>: Test complete removal of original expression:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">Verify original $ delimiters don’t appear in output</li>
<li class="text-foreground leading-relaxed">Ensure content correctly converted to KaTeX HTML</li>
<li class="text-foreground leading-relaxed">Verify mathematical symbols render correctly</li>
</ul>
<h3 id="katex-annotation-preservation-tests" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#katex-annotation-preservation-tests" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to KaTeX Annotation Preservation Tests">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            KaTeX Annotation Preservation Tests
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="'Original%20expression%20completely%20removed%20in%20block%20math'%3A%20%7B%0Atopic%3A%20mdWithDollar.render('Before%5Cn%24%24%5Cn%5C%5Cfrac%7Ba%7D%7Bb%7D%5Cn%24%24%5Cnafter.')%2C%0A'No%20double%20dollar%20signs%20in%20output'%3A%20function(topic)%20%7B%0A%2F%2F%20Should%20not%20contain%20the%20original%20%24%24%20delimiters%0Aassert.equal(topic.indexOf('%24%24')%2C%20-1)%3B%0A%7D%2C%0A'Raw%20LaTeX%20preserved%20in%20annotation%20(correct%20behavior)'%3A%20function(topic)%20%7B%0A%2F%2F%20KaTeX%20preserves%20original%20LaTeX%20in%20annotation%20tags%20-%20this%20is%20correct%0Aassert.notEqual(topic.indexOf('%5C%5Cfrac%7Ba%7D%7Bb%7D')%2C%20-1)%3B%0Aassert.notEqual(topic.indexOf('')%2C%20-1)%3B%0A%7D%2C%0A'Contains%20rendered%20math'%3A%20function(topic)%20%7B%0Aassert.notEqual(topic.indexOf('')%2C%20-1)%3B%0A%7D%0A%7D%2C">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">  <span class="hljs-string inline">&#x27;Original expression completely removed in block math&#x27;</span>: {
    <span class="hljs-attr inline">topic</span>: mdWithDollar.<span class="hljs-title function_ inline">render</span>(<span class="hljs-string inline">&#x27;Before\n$$\n\\frac{a}{b}\n$$\nafter.&#x27;</span>),
    <span class="hljs-string inline">&#x27;No double dollar signs in output&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {
      <span class="hljs-comment inline">// Should not contain the original $$ delimiters</span>
      assert.<span class="hljs-title function_ inline">equal</span>(topic.<span class="hljs-title function_ inline">indexOf</span>(<span class="hljs-string inline">&#x27;$$&#x27;</span>), -<span class="hljs-number inline">1</span>);
    },
    <span class="hljs-string inline">&#x27;Raw LaTeX preserved in annotation (correct behavior)&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {
      <span class="hljs-comment inline">// KaTeX preserves original LaTeX in annotation tags - this is correct</span>
      assert.<span class="hljs-title function_ inline">notEqual</span>(topic.<span class="hljs-title function_ inline">indexOf</span>(<span class="hljs-string inline">&#x27;\\frac{a}{b}&#x27;</span>), -<span class="hljs-number inline">1</span>);
      assert.<span class="hljs-title function_ inline">notEqual</span>(topic.<span class="hljs-title function_ inline">indexOf</span>(<span class="hljs-string inline">&#x27;&lt;annotation encoding=&quot;application/x-tex&quot;&gt;&#x27;</span>), -<span class="hljs-number inline">1</span>);
    },
    <span class="hljs-string inline">&#x27;Contains rendered math&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {
      assert.<span class="hljs-title function_ inline">notEqual</span>(topic.<span class="hljs-title function_ inline">indexOf</span>(<span class="hljs-string inline">&#x27;&lt;span class=&quot;katex-display&quot;&gt;&#x27;</span>), -<span class="hljs-number inline">1</span>);
    }
  },
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 150-165</strong>: Test block formula processing:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">Verify $$ delimiters removed</li>
<li class="text-foreground leading-relaxed">Confirm KaTeX preserves original LaTeX in annotation tags (this is correct behavior)</li>
<li class="text-foreground leading-relaxed">Verify contains rendered mathematical elements</li>
</ul>
<h3 id="multiple-expression-tests" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#multiple-expression-tests" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Multiple Expression Tests">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Multiple Expression Tests
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="'Multiple%20expressions%20all%20converted'%3A%20%7B%0Atopic%3A%20mdWithDollar.render('First%20%24a%2Bb%24%20and%20second%20%24c%2Bd%24%20expressions.')%2C%0A'No%20dollar%20signs%20remain'%3A%20function(topic)%20%7B%0Aassert.equal(topic.indexOf('%24a%2Bb%24')%2C%20-1)%3B%0Aassert.equal(topic.indexOf('%24c%2Bd%24')%2C%20-1)%3B%0A%7D%2C%0A'Two%20math%20spans%20created'%3A%20function(topic)%20%7B%0Aconst%20matches%20%3D%20topic.match(%2F%2Fg)%3B%0Aassert.equal(matches%20%3F%20matches.length%20%3A%200%2C%202)%3B%0A%7D%0A%7D%2C">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">  <span class="hljs-string inline">&#x27;Multiple expressions all converted&#x27;</span>: {
    <span class="hljs-attr inline">topic</span>: mdWithDollar.<span class="hljs-title function_ inline">render</span>(<span class="hljs-string inline">&#x27;First $a+b$ and second $c+d$ expressions.&#x27;</span>),
    <span class="hljs-string inline">&#x27;No dollar signs remain&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {
      assert.<span class="hljs-title function_ inline">equal</span>(topic.<span class="hljs-title function_ inline">indexOf</span>(<span class="hljs-string inline">&#x27;$a+b$&#x27;</span>), -<span class="hljs-number inline">1</span>);
      assert.<span class="hljs-title function_ inline">equal</span>(topic.<span class="hljs-title function_ inline">indexOf</span>(<span class="hljs-string inline">&#x27;$c+d$&#x27;</span>), -<span class="hljs-number inline">1</span>);
    },
    <span class="hljs-string inline">&#x27;Two math spans created&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {
      <span class="hljs-keyword inline">const</span> matches = topic.<span class="hljs-title function_ inline">match</span>(<span class="hljs-regexp inline">/&lt;span class=&quot;katex&quot;&gt;/g</span>);
      assert.<span class="hljs-title function_ inline">equal</span>(matches ? matches.<span class="hljs-property inline">length</span> : <span class="hljs-number inline">0</span>, <span class="hljs-number inline">2</span>);
    }
  },
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 166-177</strong>: Test multiple mathematical expressions:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">Verify all original delimiters removed</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>topic.match(/&lt;span class=&quot;katex&quot;&gt;/g)</code></strong>: JavaScript string regex matching method
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>/&lt;span class=&quot;katex&quot;&gt;/g</code>: Global regex, find all KaTeX span tags</li>
<li class="text-foreground leading-relaxed"><code>g</code> flag: Global match, return all matches instead of just first</li>
<li class="text-foreground leading-relaxed">Return value: Array of matches or null (when no matches)</li>
</ul></li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Ternary operator <code>matches ? matches.length : 0</code></strong>: Safely get match count
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">If matches not null, return array length</li>
<li class="text-foreground leading-relaxed">If matches null (no matches), return 0</li>
</ul></li>
<li class="text-foreground leading-relaxed">Ensure correct number (2) of mathematical span elements created</li>
</ul>
<h3 id="mixed-expression-tests" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#mixed-expression-tests" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Mixed Expression Tests">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Mixed Expression Tests
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="'Mixed%20inline%20and%20block%20expressions'%3A%20%7B%0Atopic%3A%20mdWithDollar.render('Inline%20%24x%24%20and%20block%3A%5Cn%24%24%5Cny%20%3D%20mx%20%2B%20b%5Cn%24%24%5Cndone.')%2C%0A'No%20original%20delimiters%20remain'%3A%20function(topic)%20%7B%0Aassert.equal(topic.indexOf('%24x%24')%2C%20-1)%3B%0Aassert.equal(topic.indexOf('%24%24')%2C%20-1)%3B%0A%2F%2F%20Note%3A%20%22y%20%3D%20mx%20%2B%20b%22%20will%20be%20preserved%20in%20KaTeX%20annotation%20-%20this%20is%20correct%0A%7D%2C%0A'Contains%20both%20inline%20and%20block%20math'%3A%20function(topic)%20%7B%0Aassert.notEqual(topic.indexOf('')%2C%20-1)%3B%0Aassert.notEqual(topic.indexOf('')%2C%20-1)%3B%0A%7D%2C%0A'LaTeX%20content%20preserved%20in%20annotations'%3A%20function(topic)%20%7B%0A%2F%2F%20KaTeX%20correctly%20preserves%20LaTeX%20in%20annotations%0Aassert.notEqual(topic.indexOf('x')%2C%20-1)%3B%0Aassert.notEqual(topic.indexOf('y%20%3D%20mx%20%2B%20b')%2C%20-1)%3B%0A%7D%0A%7D%2C">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">  <span class="hljs-string inline">&#x27;Mixed inline and block expressions&#x27;</span>: {
    <span class="hljs-attr inline">topic</span>: mdWithDollar.<span class="hljs-title function_ inline">render</span>(<span class="hljs-string inline">&#x27;Inline $x$ and block:\n$$\ny = mx + b\n$$\ndone.&#x27;</span>),
    <span class="hljs-string inline">&#x27;No original delimiters remain&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {
      assert.<span class="hljs-title function_ inline">equal</span>(topic.<span class="hljs-title function_ inline">indexOf</span>(<span class="hljs-string inline">&#x27;$x$&#x27;</span>), -<span class="hljs-number inline">1</span>);
      assert.<span class="hljs-title function_ inline">equal</span>(topic.<span class="hljs-title function_ inline">indexOf</span>(<span class="hljs-string inline">&#x27;$$&#x27;</span>), -<span class="hljs-number inline">1</span>);
      <span class="hljs-comment inline">// Note: &quot;y = mx + b&quot; will be preserved in KaTeX annotation - this is correct</span>
    },
    <span class="hljs-string inline">&#x27;Contains both inline and block math&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {
      assert.<span class="hljs-title function_ inline">notEqual</span>(topic.<span class="hljs-title function_ inline">indexOf</span>(<span class="hljs-string inline">&#x27;&lt;span class=&quot;katex&quot;&gt;&#x27;</span>), -<span class="hljs-number inline">1</span>);
      assert.<span class="hljs-title function_ inline">notEqual</span>(topic.<span class="hljs-title function_ inline">indexOf</span>(<span class="hljs-string inline">&#x27;&lt;span class=&quot;katex-display&quot;&gt;&#x27;</span>), -<span class="hljs-number inline">1</span>);
    },
    <span class="hljs-string inline">&#x27;LaTeX content preserved in annotations&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {
      <span class="hljs-comment inline">// KaTeX correctly preserves LaTeX in annotations</span>
      assert.<span class="hljs-title function_ inline">notEqual</span>(topic.<span class="hljs-title function_ inline">indexOf</span>(<span class="hljs-string inline">&#x27;&lt;annotation encoding=&quot;application/x-tex&quot;&gt;x&lt;/annotation&gt;&#x27;</span>), -<span class="hljs-number inline">1</span>);
      assert.<span class="hljs-title function_ inline">notEqual</span>(topic.<span class="hljs-title function_ inline">indexOf</span>(<span class="hljs-string inline">&#x27;&lt;annotation encoding=&quot;application/x-tex&quot;&gt;y = mx + b&lt;/annotation&gt;&#x27;</span>), -<span class="hljs-number inline">1</span>);
    }
  },
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 178-194</strong>: Test mixed inline and block expressions:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">Verify all original delimiters removed</li>
<li class="text-foreground leading-relaxed">Ensure both inline and block mathematical elements included</li>
<li class="text-foreground leading-relaxed">Verify LaTeX content correctly preserved in annotations</li>
</ul>
<h3 id="error-handling-configuration-tests" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#error-handling-configuration-tests" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Error Handling Configuration Tests">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Error Handling Configuration Tests
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="Here's%20the%20complete%20remaining%20content%20for%20the%20English%20translation%3A%0A%60%60%60markdown%0A'KaTeX%20error%20handling%20(throwOnError%3A%20false)'%3A%20%7B%0Atopic%3A%20mdWithDollar.render('Invalid%20math%3A%20%24%5C%5Cinvalidcommand%7Btest%7D%24.')%2C%0A'Renders%20without%20throwing'%3A%20function(topic)%20%7B%0A%2F%2F%20Should%20render%20something%20even%20with%20invalid%20LaTeX%20(due%20to%20throwOnError%3A%20false)%0Aassert.isTrue(topic.length%20%3E%200)%3B%0Aassert.notEqual(topic.indexOf('class%3D%22katex%22%3E')%2C%20-1)%3B%0A%7D%2C%0A'No%20original%20delimiters%20remain'%3A%20function(topic)%20%7B%0Aassert.equal(topic.indexOf('%24%5C%5Cinvalidcommand%7Btest%7D%24')%2C%20-1)%3B%0A%7D%0A%7D%2C">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript"><span class="hljs-title class_ inline">Here</span><span class="hljs-string inline">&#x27;s the complete remaining content for the English translation:

```markdown
  &#x27;</span><span class="hljs-title class_ inline">KaTeX</span> error <span class="hljs-title function_ inline">handling</span> (<span class="hljs-attr inline">throwOnError</span>: <span class="hljs-literal inline">false</span>)<span class="hljs-string inline">&#x27;: {
    topic: mdWithDollar.render(&#x27;</span><span class="hljs-title class_ inline">Invalid</span> <span class="hljs-attr inline">math</span>: $\\invalidcommand{test}$.<span class="hljs-string inline">&#x27;),
    &#x27;</span><span class="hljs-title class_ inline">Renders</span> without throwing<span class="hljs-string inline">&#x27;: function(topic) {
      // Should render something even with invalid LaTeX (due to throwOnError: false)
      assert.isTrue(topic.length &gt; 0);
      assert.notEqual(topic.indexOf(&#x27;</span>&lt;span <span class="hljs-keyword inline">class</span>=<span class="hljs-string inline">&quot;katex&quot;</span>&gt;<span class="hljs-string inline">&#x27;), -1);
    },
    &#x27;</span><span class="hljs-title class_ inline">No</span> original delimiters remain<span class="hljs-string inline">&#x27;: function(topic) {
      assert.equal(topic.indexOf(&#x27;</span>$\\invalidcommand{test}$<span class="hljs-string inline">&#x27;), -1);
    }
  },
</span></code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 195-206</strong>: Test KaTeX error handling:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">Verify invalid LaTeX commands don’t throw exceptions</li>
<li class="text-foreground leading-relaxed">Ensure still generates some output (error display)</li>
<li class="text-foreground leading-relaxed">Verify original delimiters removed</li>
</ul>
<h3 id="configuration-option-tests" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#configuration-option-tests" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Configuration Option Tests">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Configuration Option Tests
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="'Config%20with%20useTailwind%3Dfalse%20(default)'%3A%20%7B%0Atopic()%20%7B%0Aconst%20md%20%3D%20new%20Remarkable()%3B%0Amd.use(plugin%2C%20%7B%20useTailwind%3A%20false%20%7D)%3B%0Areturn%20md%3B%0A%7D%2C%0A'Configuration%20applied%20correctly'%3A%20function(topic)%20%7B%0A%2F%2F%20Test%20that%20configuration%20is%20accepted%20without%20error%0Aassert.isObject(topic)%3B%0A%7D%0A%7D%2C%0A'Config%20with%20useTailwind%3Dtrue'%3A%20%7B%0Atopic()%20%7B%0Aconst%20md%20%3D%20new%20Remarkable()%3B%0Amd.use(plugin%2C%20%7B%20useTailwind%3A%20true%20%7D)%3B%0Areturn%20md%3B%0A%7D%2C%0A'Configuration%20applied%20correctly'%3A%20function(topic)%20%7B%0A%2F%2F%20Test%20that%20configuration%20is%20accepted%20without%20error%0Aassert.isObject(topic)%3B%0A%7D%0A%7D%2C">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">  <span class="hljs-string inline">&#x27;Config with useTailwind=false (default)&#x27;</span>: {
    <span class="hljs-title function_ inline">topic</span>(<span class="hljs-params inline"></span>) {
      <span class="hljs-keyword inline">const</span> md = <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">Remarkable</span>();
      md.<span class="hljs-title function_ inline">use</span>(plugin, { <span class="hljs-attr inline">useTailwind</span>: <span class="hljs-literal inline">false</span> });
      <span class="hljs-keyword inline">return</span> md;
    },
    <span class="hljs-string inline">&#x27;Configuration applied correctly&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {
      <span class="hljs-comment inline">// Test that configuration is accepted without error</span>
      assert.<span class="hljs-title function_ inline">isObject</span>(topic);
    }
  },
  <span class="hljs-string inline">&#x27;Config with useTailwind=true&#x27;</span>: {
    <span class="hljs-title function_ inline">topic</span>(<span class="hljs-params inline"></span>) {
      <span class="hljs-keyword inline">const</span> md = <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">Remarkable</span>();
      md.<span class="hljs-title function_ inline">use</span>(plugin, { <span class="hljs-attr inline">useTailwind</span>: <span class="hljs-literal inline">true</span> });
      <span class="hljs-keyword inline">return</span> md;
    },
    <span class="hljs-string inline">&#x27;Configuration applied correctly&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {
      <span class="hljs-comment inline">// Test that configuration is accepted without error</span>
      assert.<span class="hljs-title function_ inline">isObject</span>(topic);
    }
  },
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 207-225</strong>: Test Tailwind configuration options:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed">Verify <code>useTailwind: false</code> configuration applied correctly</li>
<li class="text-foreground leading-relaxed">Verify <code>useTailwind: true</code> configuration applied correctly</li>
<li class="text-foreground leading-relaxed">Ensure configuration accepted without errors</li>
</ul>
<h3 id="styling-processing-tests" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#styling-processing-tests" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Styling Processing Tests">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Styling Processing Tests
        </h3>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="'Aria-hidden%20processing%20with%20default%20styling'%3A%20%7B%0Atopic()%20%7B%0Aconst%20md%20%3D%20new%20Remarkable()%3B%0Amd.use(plugin%2C%20%7B%20useTailwind%3A%20false%20%7D)%3B%0A%2F%2F%20Create%20a%20mock%20rendered%20output%20with%20aria-hidden%20elements%0Aconst%20%7B%20applyCustomStyling%20%7D%20%3D%20require('.%2Futils')%3B%0Aconst%20mockHtml%20%3D%20'hidden%20content'%3B%0Areturn%20applyCustomStyling(mockHtml%2C%20%7B%20useTailwind%3A%20false%20%7D)%3B%0A%7D%2C%0A'Removes%20inline%20class%20and%20adds%20display%3Anone%20style'%3A%20function(topic)%20%7B%0Aassert.equal(topic.indexOf('class%3D%22inline%22')%2C%20-1)%3B%0Aassert.notEqual(topic.indexOf('style%3D%22display%3Anone%22')%2C%20-1)%3B%0A%7D%0A%7D%2C%0A'Aria-hidden%20processing%20with%20Tailwind%20styling'%3A%20%7B%0Atopic()%20%7B%0Aconst%20md%20%3D%20new%20Remarkable()%3B%0Amd.use(plugin%2C%20%7B%20useTailwind%3A%20true%20%7D)%3B%0A%2F%2F%20Create%20a%20mock%20rendered%20output%20with%20aria-hidden%20elements%0Aconst%20%7B%20applyCustomStyling%20%7D%20%3D%20require('.%2Futils')%3B%0Aconst%20mockHtml%20%3D%20'hidden%20content'%3B%0Areturn%20applyCustomStyling(mockHtml%2C%20%7B%20useTailwind%3A%20true%20%7D)%3B%0A%7D%2C%0A'Removes%20inline%20class%20and%20adds%20display%3Anone%20style'%3A%20function(topic)%20%7B%0Aassert.equal(topic.indexOf('class%3D%22inline%22')%2C%20-1)%3B%0Aassert.notEqual(topic.indexOf('style%3D%22display%3Anone%22')%2C%20-1)%3B%0A%7D%0A%7D">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">  <span class="hljs-string inline">&#x27;Aria-hidden processing with default styling&#x27;</span>: {
    <span class="hljs-title function_ inline">topic</span>(<span class="hljs-params inline"></span>) {
      <span class="hljs-keyword inline">const</span> md = <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">Remarkable</span>();
      md.<span class="hljs-title function_ inline">use</span>(plugin, { <span class="hljs-attr inline">useTailwind</span>: <span class="hljs-literal inline">false</span> });
      <span class="hljs-comment inline">// Create a mock rendered output with aria-hidden elements</span>
      <span class="hljs-keyword inline">const</span> { applyCustomStyling } = <span class="hljs-built_in inline">require</span>(<span class="hljs-string inline">&#x27;./utils&#x27;</span>);
      <span class="hljs-keyword inline">const</span> mockHtml = <span class="hljs-string inline">&#x27;&lt;span class=&quot;inline&quot; aria-hidden=&quot;true&quot;&gt;hidden content&lt;/span&gt;&#x27;</span>;
      <span class="hljs-keyword inline">return</span> <span class="hljs-title function_ inline">applyCustomStyling</span>(mockHtml, { <span class="hljs-attr inline">useTailwind</span>: <span class="hljs-literal inline">false</span> });
    },
    <span class="hljs-string inline">&#x27;Removes inline class and adds display:none style&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {
      assert.<span class="hljs-title function_ inline">equal</span>(topic.<span class="hljs-title function_ inline">indexOf</span>(<span class="hljs-string inline">&#x27;class=&quot;inline&quot;&#x27;</span>), -<span class="hljs-number inline">1</span>);
      assert.<span class="hljs-title function_ inline">notEqual</span>(topic.<span class="hljs-title function_ inline">indexOf</span>(<span class="hljs-string inline">&#x27;style=&quot;display:none&quot;&#x27;</span>), -<span class="hljs-number inline">1</span>);
    }
  },
  <span class="hljs-string inline">&#x27;Aria-hidden processing with Tailwind styling&#x27;</span>: {
    <span class="hljs-title function_ inline">topic</span>(<span class="hljs-params inline"></span>) {
      <span class="hljs-keyword inline">const</span> md = <span class="hljs-keyword inline">new</span> <span class="hljs-title class_ inline">Remarkable</span>();
      md.<span class="hljs-title function_ inline">use</span>(plugin, { <span class="hljs-attr inline">useTailwind</span>: <span class="hljs-literal inline">true</span> });
      <span class="hljs-comment inline">// Create a mock rendered output with aria-hidden elements</span>
      <span class="hljs-keyword inline">const</span> { applyCustomStyling } = <span class="hljs-built_in inline">require</span>(<span class="hljs-string inline">&#x27;./utils&#x27;</span>);
      <span class="hljs-keyword inline">const</span> mockHtml = <span class="hljs-string inline">&#x27;&lt;span class=&quot;inline&quot; aria-hidden=&quot;true&quot;&gt;hidden content&lt;/span&gt;&#x27;</span>;
      <span class="hljs-keyword inline">return</span> <span class="hljs-title function_ inline">applyCustomStyling</span>(mockHtml, { <span class="hljs-attr inline">useTailwind</span>: <span class="hljs-literal inline">true</span> });
    },
    <span class="hljs-string inline">&#x27;Removes inline class and adds display:none style&#x27;</span>: <span class="hljs-keyword inline">function</span>(<span class="hljs-params inline">topic</span>) {
      assert.<span class="hljs-title function_ inline">equal</span>(topic.<span class="hljs-title function_ inline">indexOf</span>(<span class="hljs-string inline">&#x27;class=&quot;inline&quot;&#x27;</span>), -<span class="hljs-number inline">1</span>);
      assert.<span class="hljs-title function_ inline">notEqual</span>(topic.<span class="hljs-title function_ inline">indexOf</span>(<span class="hljs-string inline">&#x27;style=&quot;display:none&quot;&#x27;</span>), -<span class="hljs-number inline">1</span>);
    }
  }
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Lines 226-250</strong>: Test aria-hidden element styling processing:</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>require('./utils')</code></strong>: Re-import utils module to directly test applyCustomStyling function</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Mock HTML testing</strong>: Create test HTML fragment containing aria-hidden attributes</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>applyCustomStyling(mockHtml, config)</code></strong>: Call styling processing function
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>mockHtml</code>: Mock KaTeX rendered HTML</li>
<li class="text-foreground leading-relaxed"><code>config</code>: Styling configuration object (containing useTailwind and other options)</li>
</ul></li>
<li class="text-foreground leading-relaxed">Test styling processing behavior under different configurations</li>
<li class="text-foreground leading-relaxed">Verify accessibility improvements: inline class removed, display:none style added</li>
</ul>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="javascript" data-code="%7D).export(module)%3B">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">javascript</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code class="language-javascript">}).<span class="hljs-title function_ inline">export</span>(<span class="hljs-variable language_ inline">module</span>);
</code></pre>
            </div>
        
<p class="text-base leading-7 mb-4 text-foreground"><strong class="font-bold text-foreground">Line 251</strong>: Export test suite module.</p>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground"><code>.export(module)</code></strong>: vows testing framework method, export test suite for execution by test runner
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><code>module</code>: Node.js current module object</li>
<li class="text-foreground leading-relaxed">This enables test file to be run via command line tools</li>
</ul></li>
</ul>
<hr class="border-0 h-px bg-gray-300 my-8">
<h2 id="summary" class="group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight">
            <a href="#summary" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Summary">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Summary
        </h2>
<p class="text-base leading-7 mb-4 text-foreground">The core functionality of this plugin includes:</p>
<ol class="list-decimal list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Flexible delimiter support</strong>: Supports custom delimiters (default $)</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Inline and block support</strong>: Simultaneously supports <code>$...$</code> (inline) and <code>$$...$$</code> (block)</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Intelligent parsing</strong>: Correctly handles nested braces and escape characters</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Error handling</strong>: Incomplete expressions preserve original text, invalid LaTeX displays errors without crashing</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Style customization</strong>: Supports Tailwind CSS and custom styling processing</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Accessibility</strong>: Processes aria-hidden elements to improve accessibility</li>
</ol>
<h3 id="non-standard-library-function-usage-summary" class="group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug">
            <a href="#non-standard-library-function-usage-summary" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Non-Standard Library Function Usage Summary">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Non-Standard Library Function Usage Summary
        </h3>
<p class="text-base leading-7 mb-4 text-foreground">This plugin primarily relies on the following non-JavaScript standard library functions and APIs:</p>
<h4 id="nodejs-ecosystem" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#nodejs-ecosystem" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Node.js Ecosystem">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Node.js Ecosystem
        </h4>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Module system</strong>: <code>require()</code>, <code>module.exports</code> for module import/export</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Assertion library</strong>: <code>assert.*</code> method group for test verification</li>
</ul>
<h4 id="remarkable-markdown-processor" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#remarkable-markdown-processor" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Remarkable Markdown Processor">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Remarkable Markdown Processor
        </h4>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Parser state management</strong>: <code>state.bMarks</code>, <code>state.tShift</code>, <code>state.eMarks</code> and other properties manage text position information</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Text processing methods</strong>: <code>state.skipChars()</code>, <code>state.skipSpaces()</code>, <code>state.getLines()</code> and other methods handle text parsing</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Token management</strong>: <code>state.push()</code>, <code>state.tokens.push()</code> for creating syntax tree nodes</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Plugin registration</strong>: <code>md.inline.ruler.push()</code>, <code>md.block.ruler.push()</code> register parsing rules</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Rendering system</strong>: <code>md.renderer.rules.*</code> define HTML rendering logic</li>
</ul>
<h4 id="katex-mathematical-rendering-library" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#katex-mathematical-rendering-library" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to KaTeX Mathematical Rendering Library">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            KaTeX Mathematical Rendering Library
        </h4>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Core rendering</strong>: <code>katex.renderToString()</code> converts LaTeX to HTML</li>
</ul>
<h4 id="vows-testing-framework" class="group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug">
            <a href="#vows-testing-framework" class="absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary" aria-label="Link to Vows Testing Framework">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                </svg>
            </a>
            Vows Testing Framework
        </h4>
<ul class="list-disc list-inside mb-4 pl-6 space-y-2">
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Test organization</strong>: <code>vows.describe()</code>, <code>.addBatch()</code>, <code>.export()</code> build test structure</li>
<li class="text-foreground leading-relaxed"><strong class="font-bold text-foreground">Behavior verification</strong>: Various assert methods for functionality verification</li>
</ul>
<p class="text-base leading-7 mb-4 text-foreground">Tests cover all major functionality and edge cases, ensuring deep understanding of plugin architecture and implementation through detailed function-level analysis.</p>

            <div class="enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm" data-enhanced-codeblock="true" data-language="" data-code="This%20completes%20the%20full%20English%20translation%20of%20the%20%60remarkable-katex-plus.mdx%60%20file.%20The%20translation%20maintains%20all%20the%20technical%20details%2C%20code%20examples%2C%20and%20comprehensive%20explanations%20from%20the%20original%20Chinese%20version.">
                <div class="codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700">
                    <span class="codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline">code</span>
                    <button class="codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95" title="Copy code">
                        <svg class="copy-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                        </svg>
                        <svg class="copied-icon w-4 h-4 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="copy-text inline">Copy</span>
                    </button>
                </div>
                <pre class="codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground"><code>
This completes <span class="hljs-keyword inline">the</span> full English translation <span class="hljs-keyword inline">of</span> <span class="hljs-keyword inline">the</span> `remarkable-katex-plus.mdx` <span class="hljs-built_in inline">file</span>. The translation maintains all <span class="hljs-keyword inline">the</span> technical details, code examples, <span class="hljs-keyword inline">and</span> comprehensive explanations <span class="hljs-built_in inline">from</span> <span class="hljs-keyword inline">the</span> original Chinese <span class="hljs-built_in inline">version</span>.</code></pre>
            </div>
        
</div></article><footer class="mt-16 pt-8 border-t border-foreground/20"><div class="flex items-center justify-between"><a class="inline-flex items-center px-4 py-2 bg-primary text-foreground rounded-lg hover:bg-primary/90 transition-colors" href="/documents/">documents.backToDocuments</a><div class="text-sm text-foreground/60"><span>documents.byAuthor<!-- --> <!-- -->MilkWind</span></div></div></footer></div></div><!--$--><!--/$--><!--$--><!--/$--><!--/$--><!--/$--><script src="/_next/static/chunks/webpack-18c0f30037e967de.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[38735,[\"46\",\"static/chunks/46-72724587da45cdb8.js\",\"7177\",\"static/chunks/app/layout-af4a6e723c0ff668.js\"],\"default\"]\n3:I[19945,[\"46\",\"static/chunks/46-72724587da45cdb8.js\",\"7177\",\"static/chunks/app/layout-af4a6e723c0ff668.js\"],\"default\"]\n4:I[65337,[\"46\",\"static/chunks/46-72724587da45cdb8.js\",\"7177\",\"static/chunks/app/layout-af4a6e723c0ff668.js\"],\"default\"]\n5:I[96190,[\"46\",\"static/chunks/46-72724587da45cdb8.js\",\"7177\",\"static/chunks/app/layout-af4a6e723c0ff668.js\"],\"ClientProviders\"]\n6:I[87555,[],\"\"]\n7:I[51901,[\"8039\",\"static/chunks/app/error-dda32be1d095a86c.js\"],\"default\"]\n8:I[31295,[],\"\"]\n9:I[6874,[\"6874\",\"static/chunks/6874-fbe9a08eb79b991c.js\",\"4345\",\"static/chunks/app/not-found-9ff98b2ccf24cac7.js\"],\"\"]\na:I[94970,[],\"ClientSegmentRoot\"]\nb:I[44065,[\"206\",\"static/chunks/206-4f4cbf4d7156f437.js\",\"3092\",\"static/chunks/app/documents/layout-28408791defde09e.js\"],\"default\"]\ne:I[59665,[],\"MetadataBoundary\"]\n10:I[59665,[],\"OutletBoundary\"]\n13:I[74911,[],\"AsyncMetadataOutlet\"]\n15:I[39460,[\"2415\",\"static/chunks/2415-689c103fb3d2c28d.js\",\"8610\",\"static/chunks/8610-7bd3f91f3cf2a4d6.js\",\"5650\",\"static/chunks/app/documents/loading-1fa3f98b6e5a8e78.js\"],\"default\"]\n16:I[88610,[\"2415\",\"static/chunks/2415-689c103fb3d2c28d.js\",\"8610\",\"static/chunks/8610-7bd3f91f3cf2a4d6.js\",\"4209\",\"static/chunks/app/loading-68f227fb49b3ac8c.js\"],\"default\"]\n17:I[59665,[],\"ViewportBoundary\"]\n19:I[26614,[],\"\"]\n:HL[\"/_next/static/css/f034c804622acb16.css\",\"style\"]\n:HL[\"/_next/static/css/b226d7ef8e491b72.css\",\"style\"]\n:HL[\"/_next/static/css/5eacd01f773eed7f.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"8iYUZMse8Ho5_L3OUpHmO\",\"p\":\"\",\"c\":[\"\",\"documents\",\"en\",\"light\",\"plugins\",\"remarkable-katex-plus\",\"\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"documents\",{\"children\":[[\"slug\",\"en/light/plugins/remarkable-katex-plus\",\"c\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/f034c804622acb16.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/b226d7ef8e491b72.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"__variable_d4c88d __variable_7b4e2b __variable_c3272d font-sans antialiased min-h-screen bg-background text-foreground\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"$L2\",null,{}],[\"$\",\"$L3\",null,{}],[\"$\",\"$L4\",null,{}],[\"$\",\"$L5\",null,{\"children\":[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$7\",\"errorStyles\":[],\"errorScripts\":[],\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"div\",null,{\"className\":\"z-10 relative min-h-screen flex items-center justify-center bg-background p-8\",\"children\":[\"$\",\"div\",null,{\"className\":\"text-center max-w-md\",\"children\":[[\"$\",\"div\",null,{\"className\":\"text-8xl font-bold text-primary mb-4\",\"children\":\"404\"}],[\"$\",\"h2\",null,{\"className\":\"text-2xl font-bold text-foreground mb-4\",\"children\":\"Page Not Found\"}],[\"$\",\"p\",null,{\"className\":\"text-foreground/70 mb-8\",\"children\":\"The page you're looking for doesn't exist or has been moved to a different location.\"}],[\"$\",\"div\",null,{\"className\":\"flex flex-col sm:flex-row gap-4 justify-center\",\"children\":[[\"$\",\"$L9\",null,{\"href\":\"/\",\"className\":\"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/80 transition-colors\",\"children\":\"Go Home\"}],[\"$\",\"$L9\",null,{\"href\":\"/works\",\"className\":\"px-6 py-2 border border-primary text-primary rounded-lg hover:bg-primary/10 transition-colors\",\"children\":\"View Works\"}]]}],[\"$\",\"div\",null,{\"className\":\"absolute inset-0 overflow-hidden pointer-events-none -z-10\",\"children\":[[\"$\",\"div\",null,{\"className\":\"absolute top-1/4 left-1/4 w-2 h-2 bg-primary/20 rounded-full animate-float\"}],[\"$\",\"div\",null,{\"className\":\"absolute top-3/4 right-1/4 w-3 h-3 bg-accent/20 rounded-full animate-float\",\"style\":{\"animationDelay\":\"1s\"}}],[\"$\",\"div\",null,{\"className\":\"absolute bottom-1/4 left-1/3 w-1 h-1 bg-secondary/20 rounded-full animate-float\",\"style\":{\"animationDelay\":\"2s\"}}]]}]]}]}],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}]}]]}],{\"children\":[\"documents\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$La\",null,{\"Component\":\"$b\",\"slots\":{\"children\":[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]},\"params\":{},\"promise\":\"$@c\"}]]}],{\"children\":[[\"slug\",\"en/light/plugins/remarkable-katex-plus\",\"c\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$Ld\",[\"$\",\"$Le\",null,{\"children\":\"$Lf\"}],[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/5eacd01f773eed7f.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$L10\",null,{\"children\":[\"$L11\",\"$L12\",[\"$\",\"$L13\",null,{\"promise\":\"$@14\"}]]}]]}],{},null,false]},null,false]},[[\"$\",\"$L15\",\"l\",{}],[],[]],false]},[[\"$\",\"$L16\",\"l\",{}],[],[]],false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"USxumGuM7WRlDaW5gVtMU\",{\"children\":[[\"$\",\"$L17\",null,{\"children\":\"$L18\"}],null]}],null]}],false]],\"m\":\"$undefined\",\"G\":[\"$19\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"1a:\"$Sreact.suspense\"\n1b:I[74911,[],\"AsyncMetadata\"]\nc:{}\nf:[\"$\",\"$1a\",null,{\"fallback\":null,\"children\":[\"$\",\"$L1b\",null,{\"promise\":\"$@1c\"}]}]\n"])</script><script>self.__next_f.push([1,"1d:I[57340,[\"5584\",\"static/chunks/b498d07c-095637f0f10883c6.js\",\"2415\",\"static/chunks/2415-689c103fb3d2c28d.js\",\"6874\",\"static/chunks/6874-fbe9a08eb79b991c.js\",\"9554\",\"static/chunks/9554-b714f9de28e85d30.js\",\"1873\",\"static/chunks/app/documents/%5B...slug%5D/page-8f3efa7e6c6c5377.js\"],\"DocumentPageClient\"]\n1e:T51997,"])</script><script>self.__next_f.push([1,"\u003ch1 id=\"remarkable-katex-plus-plugin-code-analysis\" class=\"group relative text-4xl font-bold mt-8 mb-4 text-foreground leading-tight\"\u003e\n            \u003ca href=\"#remarkable-katex-plus-plugin-code-analysis\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Remarkable KaTeX Plus Plugin Code Analysis\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Remarkable KaTeX Plus Plugin Code Analysis\n        \u003c/h1\u003e\n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003ePlugin Version: v1.1.2\u003c/strong\u003e\u003c/p\u003e\n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003eThis article will provide a line-by-line analysis of the \u003ccode\u003eremarkable-katex-plus\u003c/code\u003e plugin code, including the main plugin file \u003ccode\u003eindex.js\u003c/code\u003e and test file \u003ccode\u003eindex.test.js\u003c/code\u003e. This analysis not only explains the purpose of each line of code but also provides detailed explanations of all non-JavaScript standard library functions, their usage, and principles.\u003c/p\u003e\n\u003ch2 id=\"overview\" class=\"group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight\"\u003e\n            \u003ca href=\"#overview\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Overview\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Overview\n        \u003c/h2\u003e\n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003ccode\u003eremarkable-katex-plus\u003c/code\u003e is a plugin for the Remarkable Markdown processor that can convert \u003ccode\u003e$...$\u003c/code\u003e and \u003ccode\u003e$$..$$\u003c/code\u003e sequences into mathematical formula HTML rendered using the KaTeX package.\u003c/p\u003e\n\u003ch2 id=\"dependency-library-functions\" class=\"group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight\"\u003e\n            \u003ca href=\"#dependency-library-functions\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Dependency Library Functions\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Dependency Library Functions\n        \u003c/h2\u003e\n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003eBefore diving into the code analysis, let’s first understand the main non-standard library functions used by this plugin:\u003c/p\u003e\n\u003ch3 id=\"nodejs-related-functions\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#nodejs-related-functions\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Node.js Related Functions\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Node.js Related Functions\n        \u003c/h3\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003erequire(moduleName)\u003c/code\u003e\u003c/strong\u003e: Node.js module loading function, used to import external modules or libraries\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eParameters\u003c/strong\u003e:\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003emoduleName\u003c/code\u003e (string): Module name or path string\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eReturn value\u003c/strong\u003e: Imported module object or function\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eUsage examples\u003c/strong\u003e:\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20Import%20external%20npm%20package%0Aconst%20katex%20%3D%20require('katex')%3B%0A%2F%2F%20Import%20local%20file%20module%0Aconst%20plugin%20%3D%20require('.%2Findex.js')%3B%0A%2F%2F%20Use%20destructuring%20syntax%20to%20import%20specific%20exports%0Aconst%20%7B%20Remarkable%20%7D%20%3D%20require('remarkable')%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// Import external npm package\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e katex = \u003cspan class=\"hljs-built_in inline\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;katex\u0026#x27;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment inline\"\u003e// Import local file module\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e plugin = \u003cspan class=\"hljs-built_in inline\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;./index.js\u0026#x27;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment inline\"\u003e// Use destructuring syntax to import specific exports\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e { \u003cspan class=\"hljs-title class_ inline\"\u003eRemarkable\u003c/span\u003e } = \u003cspan class=\"hljs-built_in inline\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;remarkable\u0026#x27;\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003emodule.exports\u003c/code\u003e\u003c/strong\u003e: Node.js module export object, used to provide module functionality to external modules\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eParameters\u003c/strong\u003e: None (this is a property, not a function)\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eReturn value\u003c/strong\u003e: None\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eUsage examples\u003c/strong\u003e:\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20Export%20single%20function%0Amodule.exports%20%3D%20rkatex%3B%0A%2F%2F%20Export%20object%20containing%20multiple%20functions%0Amodule.exports%20%3D%20%7B%20renderKatex%2C%20parseInlineKatex%20%7D%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// Export single function\u003c/span\u003e\n\u003cspan class=\"hljs-variable language_ inline\"\u003emodule\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003eexports\u003c/span\u003e = rkatex;\n\n\u003cspan class=\"hljs-comment inline\"\u003e// Export object containing multiple functions\u003c/span\u003e\n\u003cspan class=\"hljs-variable language_ inline\"\u003emodule\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003eexports\u003c/span\u003e = { renderKatex, parseInlineKatex };\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"katex-library-functions\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#katex-library-functions\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to KaTeX Library Functions\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            KaTeX Library Functions\n        \u003c/h3\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003ekatex.renderToString(expression, options)\u003c/code\u003e\u003c/strong\u003e: KaTeX core rendering function\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eParameters\u003c/strong\u003e:\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eexpression\u003c/code\u003e (string): LaTeX mathematical expression string to render\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eoptions\u003c/code\u003e (Object): Rendering options object, containing the following optional configurations:\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003edisplayMode\u003c/code\u003e (boolean): Whether to use block display mode, default false\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003ethrowOnError\u003c/code\u003e (boolean): Whether to throw exception on error, default true\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eerrorColor\u003c/code\u003e (string): Error text color, default ‘#cc0000’\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003emacros\u003c/code\u003e (Object): Custom macro definitions\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003estrict\u003c/code\u003e (boolean): Whether to use strict mode, default true\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eReturn value\u003c/strong\u003e: Rendered HTML string\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eUsage examples\u003c/strong\u003e:\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20Render%20inline%20mathematical%20formula%0Aconst%20inlineHtml%20%3D%20katex.renderToString('x%5E2%20%2B%20y%5E2%20%3D%20z%5E2'%2C%20%7B%0AdisplayMode%3A%20false%2C%20%20%20%20%2F%2F%20Inline%20mode%0AthrowOnError%3A%20false%20%20%20%20%2F%2F%20Don't%20throw%20exception%20on%20error%0A%7D)%3B%0A%2F%2F%20Render%20block%20mode%20fraction%20formula%0Aconst%20blockHtml%20%3D%20katex.renderToString('%5C%5Cfrac%7Ba%7D%7Bb%7D'%2C%20%7B%0AdisplayMode%3A%20true%2C%20%20%20%20%20%2F%2F%20Block%20display%20mode%0AthrowOnError%3A%20false%2C%20%20%20%2F%2F%20Don't%20throw%20exception%20on%20error%0AerrorColor%3A%20'%23ff0000'%20%20%2F%2F%20Custom%20error%20color%20to%20red%0A%7D)%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// Render inline mathematical formula\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e inlineHtml = katex.\u003cspan class=\"hljs-title function_ inline\"\u003erenderToString\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;x^2 + y^2 = z^2\u0026#x27;\u003c/span\u003e, {\n  \u003cspan class=\"hljs-attr inline\"\u003edisplayMode\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e,    \u003cspan class=\"hljs-comment inline\"\u003e// Inline mode\u003c/span\u003e\n  \u003cspan class=\"hljs-attr inline\"\u003ethrowOnError\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e    \u003cspan class=\"hljs-comment inline\"\u003e// Don\u0026#x27;t throw exception on error\u003c/span\u003e\n});\n\n\u003cspan class=\"hljs-comment inline\"\u003e// Render block mode fraction formula\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e blockHtml = katex.\u003cspan class=\"hljs-title function_ inline\"\u003erenderToString\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\\\\frac{a}{b}\u0026#x27;\u003c/span\u003e, {\n  \u003cspan class=\"hljs-attr inline\"\u003edisplayMode\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003etrue\u003c/span\u003e,     \u003cspan class=\"hljs-comment inline\"\u003e// Block display mode\u003c/span\u003e\n  \u003cspan class=\"hljs-attr inline\"\u003ethrowOnError\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e,   \u003cspan class=\"hljs-comment inline\"\u003e// Don\u0026#x27;t throw exception on error\u003c/span\u003e\n  \u003cspan class=\"hljs-attr inline\"\u003eerrorColor\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;#ff0000\u0026#x27;\u003c/span\u003e  \u003cspan class=\"hljs-comment inline\"\u003e// Custom error color to red\u003c/span\u003e\n});\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"remarkable-parser-state-object-properties\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#remarkable-parser-state-object-properties\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Remarkable Parser State Object Properties\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Remarkable Parser State Object Properties\n        \u003c/h3\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003estate.bMarks[line]\u003c/code\u003e\u003c/strong\u003e: Array of beginning markers for each line (begin marks)\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eType\u003c/strong\u003e: Array\u003cnumber\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eDescription\u003c/strong\u003e: Stores the character index of the beginning position of each line (excluding leading spaces)\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eUsage examples\u003c/strong\u003e:\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20Get%20the%20beginning%20position%20index%20of%20the%20first%20line%0Aconst%20lineStart%20%3D%20state.bMarks%5B0%5D%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// Get the beginning position index of the first line\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e lineStart = state.\u003cspan class=\"hljs-property inline\"\u003ebMarks\u003c/span\u003e[\u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e];\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003estate.tShift[line]\u003c/code\u003e\u003c/strong\u003e: Array of leading spaces for each line (tab shift)\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eType\u003c/strong\u003e: Array\u003cnumber\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eDescription\u003c/strong\u003e: Stores the indentation amount (number of spaces and tabs) for each line\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eUsage examples\u003c/strong\u003e:\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20Get%20the%20indentation%20amount%20(number%20of%20spaces)%20of%20the%20first%20line%0Aconst%20indent%20%3D%20state.tShift%5B0%5D%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// Get the indentation amount (number of spaces) of the first line\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e indent = state.\u003cspan class=\"hljs-property inline\"\u003etShift\u003c/span\u003e[\u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e];\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003estate.eMarks[line]\u003c/code\u003e\u003c/strong\u003e: Array of ending markers for each line (end marks)\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eType\u003c/strong\u003e: Array\u003cnumber\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eDescription\u003c/strong\u003e: Stores the character index of the ending position of each line\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eUsage examples\u003c/strong\u003e:\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20Get%20the%20ending%20position%20index%20of%20the%20first%20line%0Aconst%20lineEnd%20%3D%20state.eMarks%5B0%5D%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// Get the ending position index of the first line\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e lineEnd = state.\u003cspan class=\"hljs-property inline\"\u003eeMarks\u003c/span\u003e[\u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e];\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003estate.src\u003c/code\u003e\u003c/strong\u003e: Complete source text string\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eType\u003c/strong\u003e: string\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eDescription\u003c/strong\u003e: Contains the entire Markdown text to be parsed\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eUsage examples\u003c/strong\u003e:\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20Get%20the%20character%20at%20the%20specified%20position%0Aconst%20char%20%3D%20state.src.charAt(pos)%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// Get the character at the specified position\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e char = state.\u003cspan class=\"hljs-property inline\"\u003esrc\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003echarAt\u003c/span\u003e(pos);\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003estate.pos\u003c/code\u003e\u003c/strong\u003e: Current parsing position\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eType\u003c/strong\u003e: number\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eDescription\u003c/strong\u003e: Current position index of the parser in the source text\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eUsage examples\u003c/strong\u003e:\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20Update%20current%20parsing%20position%0Astate.pos%20%3D%20newPos%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// Update current parsing position\u003c/span\u003e\nstate.\u003cspan class=\"hljs-property inline\"\u003epos\u003c/span\u003e = newPos;\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003estate.posMax\u003c/code\u003e\u003c/strong\u003e: Maximum parsing position\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eType\u003c/strong\u003e: number\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eDescription\u003c/strong\u003e: Maximum position index that the parser can handle\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eUsage examples\u003c/strong\u003e:\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20Check%20if%20reaching%20the%20end%20of%20parsing%0Aif%20(state.pos%20%3E%3D%20state.posMax)%20%7B%0Areturn%20false%3B%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// Check if reaching the end of parsing\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (state.\u003cspan class=\"hljs-property inline\"\u003epos\u003c/span\u003e \u0026gt;= state.\u003cspan class=\"hljs-property inline\"\u003eposMax\u003c/span\u003e) { \n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e; \n}\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003estate.level\u003c/code\u003e\u003c/strong\u003e: Current nesting level\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eType\u003c/strong\u003e: number\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eDescription\u003c/strong\u003e: Nesting depth of the current parsing element\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eUsage examples\u003c/strong\u003e:\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20Get%20the%20nesting%20level%20of%20the%20current%20element%0Aconst%20tokenLevel%20%3D%20state.level%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// Get the nesting level of the current element\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e tokenLevel = state.\u003cspan class=\"hljs-property inline\"\u003elevel\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003estate.line\u003c/code\u003e\u003c/strong\u003e: Current line number\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eType\u003c/strong\u003e: number\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eDescription\u003c/strong\u003e: Line number currently being processed by the parser (starting from 0)\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eUsage examples\u003c/strong\u003e:\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20Update%20the%20current%20line%20number%20being%20processed%0Astate.line%20%3D%20nextLine%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// Update the current line number being processed\u003c/span\u003e\nstate.\u003cspan class=\"hljs-property inline\"\u003eline\u003c/span\u003e = nextLine;\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003estate.blkIndent\u003c/code\u003e\u003c/strong\u003e: Block-level element indentation amount\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eType\u003c/strong\u003e: number\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eDescription\u003c/strong\u003e: Indentation amount of the current block-level element\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eUsage examples\u003c/strong\u003e:\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20Get%20the%20indentation%20amount%20of%20the%20current%20block-level%20element%0Aconst%20blockIndent%20%3D%20state.blkIndent%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// Get the indentation amount of the current block-level element\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e blockIndent = state.\u003cspan class=\"hljs-property inline\"\u003eblkIndent\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"remarkable-parser-state-methods\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#remarkable-parser-state-methods\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Remarkable Parser State Methods\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Remarkable Parser State Methods\n        \u003c/h3\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003estate.skipChars(pos, char)\u003c/code\u003e\u003c/strong\u003e: Skip consecutive identical characters from the specified position\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eParameters\u003c/strong\u003e:\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003epos\u003c/code\u003e (number): Starting position index\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003echar\u003c/code\u003e (string): Character to skip\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eReturn value\u003c/strong\u003e: (number) New position index after skipping consecutive characters\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eUsage examples\u003c/strong\u003e:\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20Skip%20consecutive%20%24%20characters%20starting%20from%20position%200%0Aconst%20pos%20%3D%20state.skipChars(0%2C%20'%24')%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// Skip consecutive $ characters starting from position 0\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e pos = state.\u003cspan class=\"hljs-title function_ inline\"\u003eskipChars\u003c/span\u003e(\u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;$\u0026#x27;\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003estate.skipSpaces(pos)\u003c/code\u003e\u003c/strong\u003e: Skip space characters from the specified position\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eParameters\u003c/strong\u003e:\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003epos\u003c/code\u003e (number): Starting position index\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eReturn value\u003c/strong\u003e: (number) Position index after skipping spaces and tabs\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eUsage examples\u003c/strong\u003e:\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20Skip%20spaces%20and%20tabs%20from%20the%20current%20position%0Aconst%20newPos%20%3D%20state.skipSpaces(pos)%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// Skip spaces and tabs from the current position\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e newPos = state.\u003cspan class=\"hljs-title function_ inline\"\u003eskipSpaces\u003c/span\u003e(pos);\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003estate.getLines(startLine, endLine, indent, keepLastLF)\u003c/code\u003e\u003c/strong\u003e: Get text from the specified line range\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eParameters\u003c/strong\u003e:\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003estartLine\u003c/code\u003e (number): Starting line number (inclusive)\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eendLine\u003c/code\u003e (number): Ending line number (exclusive)\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eindent\u003c/code\u003e (number): Indentation amount to remove\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003ekeepLastLF\u003c/code\u003e (boolean): Whether to keep the last line feed\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eReturn value\u003c/strong\u003e: (string) Extracted text string\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eUsage examples\u003c/strong\u003e:\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20Get%20content%20from%20lines%201-4%2C%20no%20indentation%20removal%2C%20keep%20line%20feeds%0Aconst%20content%20%3D%20state.getLines(1%2C%205%2C%200%2C%20true)%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// Get content from lines 1-4, no indentation removal, keep line feeds\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e content = state.\u003cspan class=\"hljs-title function_ inline\"\u003egetLines\u003c/span\u003e(\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e5\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-literal inline\"\u003etrue\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003estate.push(token)\u003c/code\u003e\u003c/strong\u003e: Add a new token object to the tokens array\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eParameters\u003c/strong\u003e:\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003etoken\u003c/code\u003e (Object): Token object to add\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eReturn value\u003c/strong\u003e: None\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eUsage examples\u003c/strong\u003e:\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20Add%20inline%20math%20formula%20token%0Astate.push(%7B%0Atype%3A%20'katex'%2C%20%20%20%20%20%20%20%20%20%20%2F%2F%20Token%20type%0Acontent%3A%20'x%5E2'%2C%20%20%20%20%20%20%20%20%20%2F%2F%20Math%20expression%20content%0Ablock%3A%20false%2C%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Inline%20mode%0Alevel%3A%20state.level%20%20%20%20%20%20%2F%2F%20Current%20nesting%20level%0A%7D)%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// Add inline math formula token\u003c/span\u003e\nstate.\u003cspan class=\"hljs-title function_ inline\"\u003epush\u003c/span\u003e({ \n  \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;katex\u0026#x27;\u003c/span\u003e,          \u003cspan class=\"hljs-comment inline\"\u003e// Token type\u003c/span\u003e\n  \u003cspan class=\"hljs-attr inline\"\u003econtent\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;x^2\u0026#x27;\u003c/span\u003e,         \u003cspan class=\"hljs-comment inline\"\u003e// Math expression content\u003c/span\u003e\n  \u003cspan class=\"hljs-attr inline\"\u003eblock\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e,           \u003cspan class=\"hljs-comment inline\"\u003e// Inline mode\u003c/span\u003e\n  \u003cspan class=\"hljs-attr inline\"\u003elevel\u003c/span\u003e: state.\u003cspan class=\"hljs-property inline\"\u003elevel\u003c/span\u003e      \u003cspan class=\"hljs-comment inline\"\u003e// Current nesting level\u003c/span\u003e\n});\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003estate.tokens.push(token)\u003c/code\u003e\u003c/strong\u003e: Directly add token to the tokens array\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eParameters\u003c/strong\u003e:\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003etoken\u003c/code\u003e (Object): Token object to add\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eReturn value\u003c/strong\u003e: (number) New length of the array\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eUsage examples\u003c/strong\u003e:\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20Directly%20add%20block%20math%20formula%20token%20to%20tokens%20array%0Astate.tokens.push(%7B%0Atype%3A%20'katex'%2C%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Token%20type%0Acontent%3A%20'%5C%5Cfrac%7Ba%7D%7Bb%7D'%2C%20%20%2F%2F%20LaTeX%20fraction%20expression%0Ablock%3A%20true%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Block%20mode%0Alevel%3A%20state.level%20%20%20%20%20%20%20%20%2F%2F%20Current%20nesting%20level%0A%7D)%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// Directly add block math formula token to tokens array\u003c/span\u003e\nstate.\u003cspan class=\"hljs-property inline\"\u003etokens\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003epush\u003c/span\u003e({\n  \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;katex\u0026#x27;\u003c/span\u003e,            \u003cspan class=\"hljs-comment inline\"\u003e// Token type\u003c/span\u003e\n  \u003cspan class=\"hljs-attr inline\"\u003econtent\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\\\\frac{a}{b}\u0026#x27;\u003c/span\u003e,  \u003cspan class=\"hljs-comment inline\"\u003e// LaTeX fraction expression\u003c/span\u003e\n  \u003cspan class=\"hljs-attr inline\"\u003eblock\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003etrue\u003c/span\u003e,              \u003cspan class=\"hljs-comment inline\"\u003e// Block mode\u003c/span\u003e\n  \u003cspan class=\"hljs-attr inline\"\u003elevel\u003c/span\u003e: state.\u003cspan class=\"hljs-property inline\"\u003elevel\u003c/span\u003e        \u003cspan class=\"hljs-comment inline\"\u003e// Current nesting level\u003c/span\u003e\n});\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"remarkable-plugin-api\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#remarkable-plugin-api\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Remarkable Plugin API\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Remarkable Plugin API\n        \u003c/h3\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003emd.inline.ruler.push(name, fn, options)\u003c/code\u003e\u003c/strong\u003e: Register inline parsing rules\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eParameters\u003c/strong\u003e:\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003ename\u003c/code\u003e (string): Rule name for identifying the parsing rule\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003efn\u003c/code\u003e (function): Parsing function that receives state and silent parameters\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eoptions\u003c/code\u003e (Object): Parsing options (optional)\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eReturn value\u003c/strong\u003e: None\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eUsage examples\u003c/strong\u003e:\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20Register%20inline%20KaTeX%20parsing%20rule%0Amd.inline.ruler.push('katex'%2C%20parseInlineKatex%2C%20%7B%0Aalt%3A%20%5B'paragraph'%2C%20'text'%5D%20%20%2F%2F%20Optional%20alternative%20rules%0A%7D)%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// Register inline KaTeX parsing rule\u003c/span\u003e\nmd.\u003cspan class=\"hljs-property inline\"\u003einline\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003eruler\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003epush\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;katex\u0026#x27;\u003c/span\u003e, parseInlineKatex, {\n  \u003cspan class=\"hljs-attr inline\"\u003ealt\u003c/span\u003e: [\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;paragraph\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;text\u0026#x27;\u003c/span\u003e]  \u003cspan class=\"hljs-comment inline\"\u003e// Optional alternative rules\u003c/span\u003e\n});\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003emd.block.ruler.push(name, fn, options)\u003c/code\u003e\u003c/strong\u003e: Register block-level parsing rules\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eParameters\u003c/strong\u003e:\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003ename\u003c/code\u003e (string): Rule name for identifying the parsing rule\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003efn\u003c/code\u003e (function): Parsing function that receives state, startLine, and endLine parameters\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eoptions\u003c/code\u003e (Object): Parsing options (optional)\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eReturn value\u003c/strong\u003e: None\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eUsage examples\u003c/strong\u003e:\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20Register%20block-level%20KaTeX%20parsing%20rule%0Amd.block.ruler.push('katex'%2C%20parseBlockKatex%2C%20%7B%0Aalt%3A%20%5B'paragraph'%2C%20'blockquote'%5D%20%20%2F%2F%20Optional%20alternative%20rules%0A%7D)%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// Register block-level KaTeX parsing rule\u003c/span\u003e\nmd.\u003cspan class=\"hljs-property inline\"\u003eblock\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003eruler\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003epush\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;katex\u0026#x27;\u003c/span\u003e, parseBlockKatex, {\n  \u003cspan class=\"hljs-attr inline\"\u003ealt\u003c/span\u003e: [\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;paragraph\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;blockquote\u0026#x27;\u003c/span\u003e]  \u003cspan class=\"hljs-comment inline\"\u003e// Optional alternative rules\u003c/span\u003e\n});\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003emd.renderer.rules[name]\u003c/code\u003e\u003c/strong\u003e: Rendering rules object, used to define how tokens are converted to HTML\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eParameters\u003c/strong\u003e:\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003ename\u003c/code\u003e (string): Token type name\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eReturn value\u003c/strong\u003e: Rendering function\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eUsage examples\u003c/strong\u003e:\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20Define%20rendering%20rule%20for%20KaTeX%20tokens%0Amd.renderer.rules.katex%20%3D%20function(tokens%2C%20idx)%20%7B%0Aconst%20token%20%3D%20tokens%5Bidx%5D%3B%20%20%2F%2F%20Get%20current%20token%0A%2F%2F%20Call%20KaTeX%20rendering%20function%0Areturn%20renderKatex(token.content%2C%20token.block)%3B%0A%7D%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// Define rendering rule for KaTeX tokens\u003c/span\u003e\nmd.\u003cspan class=\"hljs-property inline\"\u003erenderer\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003erules\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003ekatex\u003c/span\u003e = \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etokens, idx\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e token = tokens[idx];  \u003cspan class=\"hljs-comment inline\"\u003e// Get current token\u003c/span\u003e\n  \u003cspan class=\"hljs-comment inline\"\u003e// Call KaTeX rendering function\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003erenderKatex\u003c/span\u003e(token.\u003cspan class=\"hljs-property inline\"\u003econtent\u003c/span\u003e, token.\u003cspan class=\"hljs-property inline\"\u003eblock\u003c/span\u003e);\n};\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003emd.use(plugin, options)\u003c/code\u003e\u003c/strong\u003e: Use plugin\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eParameters\u003c/strong\u003e:\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eplugin\u003c/code\u003e (function): Plugin function\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eoptions\u003c/code\u003e (Object): Plugin options (optional)\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eReturn value\u003c/strong\u003e: Remarkable instance (supports method chaining)\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eUsage examples\u003c/strong\u003e:\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20Create%20Remarkable%20instance%20and%20use%20KaTeX%20plugin%0Aconst%20md%20%3D%20new%20Remarkable()%3B%0Amd.use(katexPlugin%2C%20%7B%0Adelimiter%3A%20'%24'%2C%20%20%20%20%20%20%20%20%20%2F%2F%20Use%20%24%20as%20delimiter%0AthrowOnError%3A%20false%20%20%20%20%20%2F%2F%20Don't%20throw%20exception%20on%20error%0A%7D)%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// Create Remarkable instance and use KaTeX plugin\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e md = \u003cspan class=\"hljs-keyword inline\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eRemarkable\u003c/span\u003e();\nmd.\u003cspan class=\"hljs-title function_ inline\"\u003euse\u003c/span\u003e(katexPlugin, { \n  \u003cspan class=\"hljs-attr inline\"\u003edelimiter\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;$\u0026#x27;\u003c/span\u003e,         \u003cspan class=\"hljs-comment inline\"\u003e// Use $ as delimiter\u003c/span\u003e\n  \u003cspan class=\"hljs-attr inline\"\u003ethrowOnError\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e     \u003cspan class=\"hljs-comment inline\"\u003e// Don\u0026#x27;t throw exception on error\u003c/span\u003e\n});\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003emd.render(markdown)\u003c/code\u003e\u003c/strong\u003e: Render Markdown text to HTML\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eParameters\u003c/strong\u003e:\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003emarkdown\u003c/code\u003e (string): Markdown text to render\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eReturn value\u003c/strong\u003e: (string) Rendered HTML string\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eUsage examples\u003c/strong\u003e:\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20Render%20Markdown%20text%20containing%20inline%20math%20formula%0Aconst%20html%20%3D%20md.render('This%20is%20%24x%5E2%24%20inline%20math.')%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// Render Markdown text containing inline math formula\u003c/span\u003e\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e html = md.\u003cspan class=\"hljs-title function_ inline\"\u003erender\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;This is $x^2$ inline math.\u0026#x27;\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"testing-framework-functions\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#testing-framework-functions\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Testing Framework Functions\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Testing Framework Functions\n        \u003c/h3\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003evows.describe(name)\u003c/code\u003e\u003c/strong\u003e: Create test suite\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eParameters\u003c/strong\u003e:\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003ename\u003c/code\u003e (string): Test suite name\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eReturn value\u003c/strong\u003e: Test suite object\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eUsage examples\u003c/strong\u003e:\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20Create%20test%20suite%20named%20'KatexPlugin'%0Avows.describe('KatexPlugin').addBatch(%7B%0A'Test%20case%201'%3A%20%7B%0Atopic%3A%20function()%20%7B%20%2F*%20Prepare%20test%20data%20*%2F%20%7D%2C%0A'should%20work'%3A%20function(topic)%20%7B%20%2F*%20Verify%20result%20*%2F%20%7D%0A%7D%0A%7D)%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// Create test suite named \u0026#x27;KatexPlugin\u0026#x27;\u003c/span\u003e\nvows.\u003cspan class=\"hljs-title function_ inline\"\u003edescribe\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;KatexPlugin\u0026#x27;\u003c/span\u003e).\u003cspan class=\"hljs-title function_ inline\"\u003eaddBatch\u003c/span\u003e({\n  \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Test case 1\u0026#x27;\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr inline\"\u003etopic\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) { \u003cspan class=\"hljs-comment inline\"\u003e/* Prepare test data */\u003c/span\u003e },\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;should work\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) { \u003cspan class=\"hljs-comment inline\"\u003e/* Verify result */\u003c/span\u003e }\n  }\n});\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003eaddBatch(tests)\u003c/code\u003e\u003c/strong\u003e: Add test batch\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eParameters\u003c/strong\u003e:\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003etests\u003c/code\u003e (Object): Test cases object\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eReturn value\u003c/strong\u003e: Test suite object (supports method chaining)\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eUsage examples\u003c/strong\u003e:\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20Add%20test%20batch%20to%20test%20suite%0Asuite.addBatch(%7B%0A'Basic%20functionality'%3A%20%7B%0Atopic%3A%20'test%20data'%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Test%20topic%20data%0A'should%20pass'%3A%20function(topic)%20%7B%20%20%20%20%20%20%20%2F%2F%20Assertion%20test%0Aassert.equal(topic%2C%20'test%20data')%3B%20%20%20%2F%2F%20Verify%20equality%0A%7D%0A%7D%0A%7D)%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// Add test batch to test suite\u003c/span\u003e\nsuite.\u003cspan class=\"hljs-title function_ inline\"\u003eaddBatch\u003c/span\u003e({\n  \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Basic functionality\u0026#x27;\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr inline\"\u003etopic\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;test data\u0026#x27;\u003c/span\u003e,                    \u003cspan class=\"hljs-comment inline\"\u003e// Test topic data\u003c/span\u003e\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;should pass\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {       \u003cspan class=\"hljs-comment inline\"\u003e// Assertion test\u003c/span\u003e\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003eequal\u003c/span\u003e(topic, \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;test data\u0026#x27;\u003c/span\u003e);   \u003cspan class=\"hljs-comment inline\"\u003e// Verify equality\u003c/span\u003e\n    }\n  }\n});\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003eassert.*\u003c/code\u003e\u003c/strong\u003e: Various assertion methods from Node.js assertion library\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eCommon methods\u003c/strong\u003e:\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eassert.equal(actual, expected)\u003c/code\u003e: Strict equality comparison\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eassert.isTrue(value)\u003c/code\u003e: Check if value is true\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eassert.notEqual(actual, unexpected)\u003c/code\u003e: Check if values are not equal\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eassert.throws(fn)\u003c/code\u003e: Check if function throws exception\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eassert.isObject(value)\u003c/code\u003e: Check if value is an object\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eUsage examples\u003c/strong\u003e:\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20Verify%20result%20equals%20expected%20value%0Aassert.equal(result%2C%20'test')%3B%0A%2F%2F%20Verify%20HTML%20contains%20KaTeX%20element%0Aassert.isTrue(html.includes(''))%3B%0A%2F%2F%20Verify%20function%20throws%20exception%0Aassert.throws(function()%20%7B%20throw%20new%20Error()%3B%20%7D)%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e// Verify result equals expected value\u003c/span\u003e\nassert.\u003cspan class=\"hljs-title function_ inline\"\u003eequal\u003c/span\u003e(result, \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026lt;p\u0026gt;test\u0026lt;/p\u0026gt;\u0026#x27;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment inline\"\u003e// Verify HTML contains KaTeX element\u003c/span\u003e\nassert.\u003cspan class=\"hljs-title function_ inline\"\u003eisTrue\u003c/span\u003e(html.\u003cspan class=\"hljs-title function_ inline\"\u003eincludes\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026lt;span class=\u0026quot;katex\u0026quot;\u0026gt;\u0026#x27;\u003c/span\u003e));\n\n\u003cspan class=\"hljs-comment inline\"\u003e// Verify function throws exception\u003c/span\u003e\nassert.\u003cspan class=\"hljs-title function_ inline\"\u003ethrows\u003c/span\u003e(\u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) { \u003cspan class=\"hljs-keyword inline\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eError\u003c/span\u003e(); });\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr class=\"border-0 h-px bg-gray-300 my-8\"\u003e\n\u003ch2 id=\"indexjs-code-line-by-line-analysis\" class=\"group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight\"\u003e\n            \u003ca href=\"#indexjs-code-line-by-line-analysis\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to index.js Code Line-by-Line Analysis\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            index.js Code Line-by-Line Analysis\n        \u003c/h2\u003e\n\u003ch3 id=\"file-header-and-module-declaration\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#file-header-and-module-declaration\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to File Header and Module Declaration\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            File Header and Module Declaration\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%22use%20strict%22%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-meta inline\"\u003e\u0026quot;use strict\u0026quot;\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLine 1\u003c/strong\u003e: Use strict mode to ensure the code runs in a strict JavaScript environment, helping to catch common programming errors and improve code quality.\u003c/p\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F**%0A*%20Plugin%20for%20Remarkable%20Markdown%20processor%20which%20transforms%20%24..%24%20and%20%24%24..%24%24%20sequences%20into%20math%20HTML%20using%20the%0A*%20Katex%20package.%0A*%2F\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-comment inline\"\u003e/**\n * Plugin for Remarkable Markdown processor which transforms $..$ and $$..$$ sequences into math HTML using the\n * Katex package.\n */\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 3-6\u003c/strong\u003e: JSDoc comment describing the plugin’s purpose: provides plugin functionality for the Remarkable Markdown processor, converting mathematical formula markers to KaTeX-rendered HTML.\u003c/p\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"const%20rkatex%20%3D%20(md%2C%20options)%20%3D%3E%20%7B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003erkatex\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003emd, options\u003c/span\u003e) =\u0026gt; {\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLine 7\u003c/strong\u003e: Define the main function \u003ccode\u003erkatex\u003c/code\u003e, which accepts two parameters:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003emd\u003c/code\u003e: Remarkable instance\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eoptions\u003c/code\u003e: Configuration options object\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"basic-configuration-and-variable-declaration\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#basic-configuration-and-variable-declaration\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Basic Configuration and Variable Declaration\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Basic Configuration and Variable Declaration\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"const%20backslash%20%3D%20'%5C%5C'%3B%0Aconst%20dollar%20%3D%20'%24'%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e backslash = \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\\\\\u0026#x27;\u003c/span\u003e;\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e dollar = \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;$\u0026#x27;\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 8-9\u003c/strong\u003e: Define constant characters:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003ebackslash\u003c/code\u003e: Backslash character, used for escaping\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003edollar\u003c/code\u003e: Dollar sign, default mathematical formula delimiter\u003c/li\u003e\n\u003c/ul\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"const%20opts%20%3D%20options%20%7C%7C%20%7B%7D%3B%0Aconst%20delimiter%20%3D%20opts.delimiter%20%7C%7C%20dollar%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e opts = options || {};\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e delimiter = opts.\u003cspan class=\"hljs-property inline\"\u003edelimiter\u003c/span\u003e || dollar;\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 10-11\u003c/strong\u003e: Process configuration options:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eopts\u003c/code\u003e: Ensure options exists, use empty object if null\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003edelimiter\u003c/code\u003e: Get delimiter from options, default to dollar sign\u003c/li\u003e\n\u003c/ul\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"if%20(delimiter.length%20!%3D%3D%201)%20%7B%20throw%20new%20Error('invalid%20delimiter')%3B%20%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e  \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (delimiter.\u003cspan class=\"hljs-property inline\"\u003elength\u003c/span\u003e !== \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e) { \u003cspan class=\"hljs-keyword inline\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eError\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;invalid delimiter\u0026#x27;\u003c/span\u003e); }\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLine 12\u003c/strong\u003e: Validate delimiter length, only allow single character delimiters, otherwise throw error.\u003c/p\u003e\n\u003ch3 id=\"utility-module-import-and-styling-configuration\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#utility-module-import-and-styling-configuration\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Utility Module Import and Styling Configuration\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Utility Module Import and Styling Configuration\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20Import%20styling%20utilities%0Aconst%20%7B%20applyCustomStyling%20%7D%20%3D%20require('.%2Futils')%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e  \u003cspan class=\"hljs-comment inline\"\u003e// Import styling utilities\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e { applyCustomStyling } = \u003cspan class=\"hljs-built_in inline\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;./utils\u0026#x27;\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 14-15\u003c/strong\u003e: Import custom styling processing function from utils module.\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003erequire('./utils')\u003c/code\u003e\u003c/strong\u003e: Node.js module loading function, relative path loads utils.js file in same directory\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eDestructuring assignment\u003c/strong\u003e: Extract applyCustomStyling function from utils module\u003c/li\u003e\n\u003c/ul\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20Extract%20styling%20configuration%20(kept%20for%20backward%20compatibility)%0Aconst%20stylingConfig%20%3D%20%7B%0AuseTailwind%3A%20opts.useTailwind%20%7C%7C%20false%2C%0A%2F%2F%20Add%20other%20styling%20options%20here%20as%20needed%0A%7D%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e  \u003cspan class=\"hljs-comment inline\"\u003e// Extract styling configuration (kept for backward compatibility)\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e stylingConfig = {\n    \u003cspan class=\"hljs-attr inline\"\u003euseTailwind\u003c/span\u003e: opts.\u003cspan class=\"hljs-property inline\"\u003euseTailwind\u003c/span\u003e || \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e,\n    \u003cspan class=\"hljs-comment inline\"\u003e// Add other styling options here as needed\u003c/span\u003e\n  };\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 17-21\u003c/strong\u003e: Create styling configuration object:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003euseTailwind\u003c/code\u003e: Whether to use Tailwind CSS, default false\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003ePreserve backward compatibility, can add other styling options\u003c/li\u003e\n\u003c/ul\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"const%20katex%20%3D%20require(%22katex%22)%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e katex = \u003cspan class=\"hljs-built_in inline\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;katex\u0026quot;\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLine 23\u003c/strong\u003e: Import KaTeX library for mathematical formula rendering.\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003erequire(\u0026quot;katex\u0026quot;)\u003c/code\u003e\u003c/strong\u003e: Load KaTeX npm package, a fast mathematical formula rendering library\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eKaTeX\u003c/strong\u003e: JavaScript mathematical formula rendering library developed by Khan Academy, supports LaTeX syntax\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"katex-rendering-function\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#katex-rendering-function\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to KaTeX Rendering Function\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            KaTeX Rendering Function\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F**%0A*%20Render%20the%20contents%20as%20KaTeX%0A*%2F%0Aconst%20renderKatex%20%3D%20(source%2C%20displayMode)%20%3D%3E%20%7B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e  \u003cspan class=\"hljs-comment inline\"\u003e/**\n   * Render the contents as KaTeX\n   */\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003erenderKatex\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003esource, displayMode\u003c/span\u003e) =\u0026gt; {\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 25-28\u003c/strong\u003e: Define KaTeX rendering function, accepting source content and display mode parameters.\u003c/p\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"const%20rendered%20%3D%20katex.renderToString(source%2C%20%7B%0AdisplayMode%3A%20displayMode%2C%0AthrowOnError%3A%20false%0A%7D)%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e    \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e rendered = katex.\u003cspan class=\"hljs-title function_ inline\"\u003erenderToString\u003c/span\u003e(source, {\n      \u003cspan class=\"hljs-attr inline\"\u003edisplayMode\u003c/span\u003e: displayMode,\n      \u003cspan class=\"hljs-attr inline\"\u003ethrowOnError\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e\n    });\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 29-32\u003c/strong\u003e: Use KaTeX to render mathematical formulas:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003ekatex.renderToString()\u003c/code\u003e\u003c/strong\u003e: KaTeX core rendering function, converts LaTeX expressions to HTML strings\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003esource\u003c/code\u003e: Input LaTeX mathematical expression string\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eoptions\u003c/code\u003e: Rendering configuration object\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003edisplayMode\u003c/code\u003e: Boolean value, true uses block display mode (centered, large font), false uses inline mode\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003ethrowOnError: false\u003c/code\u003e: Don’t throw exceptions on LaTeX syntax errors, instead render error messages\u003c/li\u003e\n\u003c/ul\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20Always%20apply%20custom%20styling%20to%20process%20aria-hidden%20elements%0Areturn%20applyCustomStyling(rendered%2C%20stylingConfig)%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e    \u003cspan class=\"hljs-comment inline\"\u003e// Always apply custom styling to process aria-hidden elements\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eapplyCustomStyling\u003c/span\u003e(rendered, stylingConfig);\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 34-35\u003c/strong\u003e: Apply custom styling processing to rendered results, especially for aria-hidden elements.\u003c/p\u003e\n\u003ch3 id=\"block-level-katex-parsing-function\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#block-level-katex-parsing-function\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Block-level KaTeX Parsing Function\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Block-level KaTeX Parsing Function\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F**%0A*%20Parse%20'%24%24'%20as%20a%20block.%20Based%20off%20of%20similar%20method%20in%20remarkable.%0A*%2F%0Aconst%20parseBlockKatex%20%3D%20(state%2C%20startLine%2C%20endLine)%20%3D%3E%20%7B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e  \u003cspan class=\"hljs-comment inline\"\u003e/**\n   * Parse \u0026#x27;$$\u0026#x27; as a block. Based off of similar method in remarkable.\n   */\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eparseBlockKatex\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003estate, startLine, endLine\u003c/span\u003e) =\u0026gt; {\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 39-42\u003c/strong\u003e: Define block-level KaTeX parsing function, based on similar methods in Remarkable.\u003c/p\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"let%20haveEndMarker%20%3D%20false%3B%0Alet%20pos%20%3D%20state.bMarks%5BstartLine%5D%20%2B%20state.tShift%5BstartLine%5D%3B%0Alet%20max%20%3D%20state.eMarks%5BstartLine%5D%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e    \u003cspan class=\"hljs-keyword inline\"\u003elet\u003c/span\u003e haveEndMarker = \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword inline\"\u003elet\u003c/span\u003e pos = state.\u003cspan class=\"hljs-property inline\"\u003ebMarks\u003c/span\u003e[startLine] + state.\u003cspan class=\"hljs-property inline\"\u003etShift\u003c/span\u003e[startLine];\n    \u003cspan class=\"hljs-keyword inline\"\u003elet\u003c/span\u003e max = state.\u003cspan class=\"hljs-property inline\"\u003eeMarks\u003c/span\u003e[startLine];\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 43-45\u003c/strong\u003e: Initialize parsing state:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003ehaveEndMarker\u003c/code\u003e: Boolean flag, tracks whether matching end marker is found\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003estate.bMarks[startLine]\u003c/code\u003e\u003c/strong\u003e: Remarkable state object property, get starting character position of specified line (excluding leading spaces)\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003estate.tShift[startLine]\u003c/code\u003e\u003c/strong\u003e: Remarkable state object property, get leading space/tab count of specified line\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003epos\u003c/code\u003e: Calculated actual parsing starting position (position after skipping leading spaces)\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003estate.eMarks[startLine]\u003c/code\u003e\u003c/strong\u003e: Remarkable state object property, get ending character position of specified line\u003c/li\u003e\n\u003c/ul\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"if%20(pos%20%2B%201%20%3E%20max)%20%7B%20return%20false%3B%20%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e    \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (pos + \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e \u0026gt; max) { \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e; }\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLine 47\u003c/strong\u003e: Check if there are enough characters to form a marker, return false if not enough.\u003c/p\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"const%20marker%20%3D%20state.src.charAt(pos)%3B%0Aif%20(marker%20!%3D%3D%20delimiter)%20%7B%20return%20false%3B%20%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e    \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e marker = state.\u003cspan class=\"hljs-property inline\"\u003esrc\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003echarAt\u003c/span\u003e(pos);\n    \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (marker !== delimiter) { \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e; }\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 49-50\u003c/strong\u003e: Check if current character is delimiter, return false if not.\u003c/p\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20scan%20marker%20length%0Alet%20mem%20%3D%20pos%3B%0Apos%20%3D%20state.skipChars(pos%2C%20marker)%3B%0Alet%20len%20%3D%20pos%20-%20mem%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e    \u003cspan class=\"hljs-comment inline\"\u003e// scan marker length\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword inline\"\u003elet\u003c/span\u003e mem = pos;\n    pos = state.\u003cspan class=\"hljs-title function_ inline\"\u003eskipChars\u003c/span\u003e(pos, marker);\n    \u003cspan class=\"hljs-keyword inline\"\u003elet\u003c/span\u003e len = pos - mem;\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 52-55\u003c/strong\u003e: Scan marker length:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003emem\u003c/code\u003e: Remember starting position for subsequent length calculation\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003estate.skipChars(pos, marker)\u003c/code\u003e\u003c/strong\u003e: Remarkable state method, skip consecutive identical characters from specified position\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003epos\u003c/code\u003e: Starting position\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003emarker\u003c/code\u003e: Character to skip (here delimiter, like ‘$’)\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eReturn value: New position after skipping consecutive characters\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003elen\u003c/code\u003e: Calculate marker length (number of consecutive delimiters)\u003c/li\u003e\n\u003c/ul\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"if%20(len%20!%3D%3D%202)%20%7B%20return%20false%3B%20%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e    \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (len !== \u003cspan class=\"hljs-number inline\"\u003e2\u003c/span\u003e) { \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e; }\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLine 57\u003c/strong\u003e: Block-level formulas need exactly two delimiters (like $$), otherwise return false.\u003c/p\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20search%20end%20of%20block%0Alet%20nextLine%20%3D%20startLine%3B%0Afor%20(%3B%20%3B)%20%7B%0A%2B%2BnextLine%3B%0Aif%20(nextLine%20%3E%3D%20endLine)%20%7B%20break%3B%20%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e    \u003cspan class=\"hljs-comment inline\"\u003e// search end of block\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword inline\"\u003elet\u003c/span\u003e nextLine = startLine;\n\n    \u003cspan class=\"hljs-keyword inline\"\u003efor\u003c/span\u003e (; ;) {\n      ++nextLine;\n      \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (nextLine \u0026gt;= endLine) { \u003cspan class=\"hljs-keyword inline\"\u003ebreak\u003c/span\u003e; }\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 59-64\u003c/strong\u003e: Start searching for block end marker, iterate through subsequent lines.\u003c/p\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"pos%20%3D%20mem%20%3D%20state.bMarks%5BnextLine%5D%20%2B%20state.tShift%5BnextLine%5D%3B%0Amax%20%3D%20state.eMarks%5BnextLine%5D%3B%0Aif%20(pos%20tShift%5BnextLine%5D%20blkIndent)%20%7B%20break%3B%20%7D%0Aif%20(state.src.charAt(pos)%20!%3D%3D%20delimiter)%20%7B%20continue%3B%20%7D%0Aif%20(state.tShift%5BnextLine%5D%20-%20state.blkIndent%20%3E%3D%204)%20%7B%20continue%3B%20%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e      pos = mem = state.\u003cspan class=\"hljs-property inline\"\u003ebMarks\u003c/span\u003e[nextLine] + state.\u003cspan class=\"hljs-property inline\"\u003etShift\u003c/span\u003e[nextLine];\n      max = state.\u003cspan class=\"hljs-property inline\"\u003eeMarks\u003c/span\u003e[nextLine];\n\n      \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (pos \u0026lt; max \u0026amp;\u0026amp; state.\u003cspan class=\"hljs-property inline\"\u003etShift\u003c/span\u003e[nextLine] \u0026lt; state.\u003cspan class=\"hljs-property inline\"\u003eblkIndent\u003c/span\u003e) { \u003cspan class=\"hljs-keyword inline\"\u003ebreak\u003c/span\u003e; }\n      \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (state.\u003cspan class=\"hljs-property inline\"\u003esrc\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003echarAt\u003c/span\u003e(pos) !== delimiter) { \u003cspan class=\"hljs-keyword inline\"\u003econtinue\u003c/span\u003e; }\n      \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (state.\u003cspan class=\"hljs-property inline\"\u003etShift\u003c/span\u003e[nextLine] - state.\u003cspan class=\"hljs-property inline\"\u003eblkIndent\u003c/span\u003e \u0026gt;= \u003cspan class=\"hljs-number inline\"\u003e4\u003c/span\u003e) { \u003cspan class=\"hljs-keyword inline\"\u003econtinue\u003c/span\u003e; }\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 66-71\u003c/strong\u003e: Check each line:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eCalculate current line position information\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eCheck if indentation is appropriate\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eCheck if it starts with delimiter\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eCheck if indentation exceeds 4 spaces (code block rule)\u003c/li\u003e\n\u003c/ul\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"pos%20%3D%20state.skipChars(pos%2C%20marker)%3B%0Aif%20(pos%20-%20mem%20continue%3B%20%7D%0Apos%20%3D%20state.skipSpaces(pos)%3B%0Aif%20(pos%20continue%3B%20%7D%0AhaveEndMarker%20%3D%20true%3B%0Abreak%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e      pos = state.\u003cspan class=\"hljs-title function_ inline\"\u003eskipChars\u003c/span\u003e(pos, marker);\n      \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (pos - mem \u0026lt; len) { \u003cspan class=\"hljs-keyword inline\"\u003econtinue\u003c/span\u003e; }\n\n      pos = state.\u003cspan class=\"hljs-title function_ inline\"\u003eskipSpaces\u003c/span\u003e(pos);\n      \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (pos \u0026lt; max) { \u003cspan class=\"hljs-keyword inline\"\u003econtinue\u003c/span\u003e; }\n\n      haveEndMarker = \u003cspan class=\"hljs-literal inline\"\u003etrue\u003c/span\u003e;\n      \u003cspan class=\"hljs-keyword inline\"\u003ebreak\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 73-80\u003c/strong\u003e: Validate end marker:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003estate.skipChars(pos, marker)\u003c/code\u003e\u003c/strong\u003e: Skip consecutive delimiter characters\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eCheck if number of skipped characters matches starting marker length\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003estate.skipSpaces(pos)\u003c/code\u003e\u003c/strong\u003e: Remarkable state method, skip spaces and tabs from specified position\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003epos\u003c/code\u003e: Starting position\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eReturn value: New position after skipping spaces\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eIf there’s other content on the line after skipping spaces, it’s not a valid end marker\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eFound valid end marker, set flag and exit loop\u003c/li\u003e\n\u003c/ul\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20Only%20process%20if%20we%20found%20a%20complete%20block%20(with%20end%20marker)%0Aif%20(!haveEndMarker)%20%7B%20return%20false%3B%20%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e    \u003cspan class=\"hljs-comment inline\"\u003e// Only process if we found a complete block (with end marker)\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (!haveEndMarker) { \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e; }\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 83-84\u003c/strong\u003e: Only continue processing if complete block (with end marker) is found.\u003c/p\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F%2F%20If%20a%20fence%20has%20heading%20spaces%2C%20they%20should%20be%20removed%20from%20its%20inner%20block%0Alen%20%3D%20state.tShift%5BstartLine%5D%3B%0Astate.line%20%3D%20nextLine%20%2B%201%3B%20%2F%2F%20Always%20advance%20past%20the%20end%20marker%0Aconst%20content%20%3D%20state.getLines(startLine%20%2B%201%2C%20nextLine%2C%20len%2C%20true)%0A.replace(%2F%5B%20%5Cn%5D%2B%2Fg%2C%20'%20')%0A.trim()%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e    \u003cspan class=\"hljs-comment inline\"\u003e// If a fence has heading spaces, they should be removed from its inner block\u003c/span\u003e\n    len = state.\u003cspan class=\"hljs-property inline\"\u003etShift\u003c/span\u003e[startLine];\n    state.\u003cspan class=\"hljs-property inline\"\u003eline\u003c/span\u003e = nextLine + \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e; \u003cspan class=\"hljs-comment inline\"\u003e// Always advance past the end marker\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e content = state.\u003cspan class=\"hljs-title function_ inline\"\u003egetLines\u003c/span\u003e(startLine + \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e, nextLine, len, \u003cspan class=\"hljs-literal inline\"\u003etrue\u003c/span\u003e)\n      .\u003cspan class=\"hljs-title function_ inline\"\u003ereplace\u003c/span\u003e(\u003cspan class=\"hljs-regexp inline\"\u003e/[ \\n]+/g\u003c/span\u003e, \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27; \u0026#x27;\u003c/span\u003e)\n      .\u003cspan class=\"hljs-title function_ inline\"\u003etrim\u003c/span\u003e();\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 86-91\u003c/strong\u003e: Extract block content:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eRecord starting line indentation for consistent indentation processing in subsequent content extraction\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003estate.line\u003c/code\u003e\u003c/strong\u003e: Update Remarkable state object’s current line number, skip end marker line\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003estate.getLines(startLine + 1, nextLine, len, true)\u003c/code\u003e\u003c/strong\u003e: Remarkable state method, extract text from specified line range\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003estartLine + 1\u003c/code\u003e: Start from next line after starting marker (skip starting $$ line)\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003enextLine\u003c/code\u003e: End at end marker line (exclude ending $$ line)\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003elen\u003c/code\u003e: Indentation amount to remove (consistent with starting line indentation)\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003etrue\u003c/code\u003e: Keep final line feed\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003e.replace(/[ \\n]+/g, ' ')\u003c/code\u003e\u003c/strong\u003e: Use regex to replace multiple consecutive spaces and line feeds with single space\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003e.trim()\u003c/code\u003e\u003c/strong\u003e: Remove leading and trailing whitespace characters\u003c/li\u003e\n\u003c/ul\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"state.tokens.push(%7B%0Atype%3A%20'katex'%2C%20params%3A%20null%2C%20content%3A%20content%2C%20lines%3A%20%5BstartLine%2C%20state.line%5D%2C%0Alevel%3A%20state.level%2C%20block%3A%20true%0A%7D)%3B%0Areturn%20true%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e    state.\u003cspan class=\"hljs-property inline\"\u003etokens\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003epush\u003c/span\u003e({\n      \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;katex\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003eparams\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003enull\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003econtent\u003c/span\u003e: content, \u003cspan class=\"hljs-attr inline\"\u003elines\u003c/span\u003e: [startLine, state.\u003cspan class=\"hljs-property inline\"\u003eline\u003c/span\u003e],\n      \u003cspan class=\"hljs-attr inline\"\u003elevel\u003c/span\u003e: state.\u003cspan class=\"hljs-property inline\"\u003elevel\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003eblock\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003etrue\u003c/span\u003e\n    });\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-literal inline\"\u003etrue\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 93-97\u003c/strong\u003e: Create and add token:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003estate.tokens.push()\u003c/code\u003e\u003c/strong\u003e: Add new token object to Remarkable state object’s tokens array\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eToken object structure\u003c/strong\u003e:\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003etype: 'katex'\u003c/code\u003e: Specify token type for subsequent renderer identification\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eparams: null\u003c/code\u003e: Additional parameters (empty here)\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003econtent: content\u003c/code\u003e: Extracted LaTeX mathematical expression content\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003elines: [startLine, state.line]\u003c/code\u003e: Record token’s line number range in source document\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003elevel: state.level\u003c/code\u003e: Current nesting level\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eblock: true\u003c/code\u003e: Mark as block-level element (distinguish from inline elements)\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003ereturn true\u003c/code\u003e: Return true to indicate successful parsing and processing of this block\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"inline-katex-parsing-function\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#inline-katex-parsing-function\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Inline KaTeX Parsing Function\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Inline KaTeX Parsing Function\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2F**%0A*%20Look%20for%20'%24'%20or%20'%24%24'%20spans%20in%20Markdown%20text.%20Based%20off%20of%20the%20'fenced'%20parser%20in%20remarkable.%0A*%2F%0Aconst%20parseInlineKatex%20%3D%20(state%2C%20silent)%20%3D%3E%20%7B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e  \u003cspan class=\"hljs-comment inline\"\u003e/**\n   * Look for \u0026#x27;$\u0026#x27; or \u0026#x27;$$\u0026#x27; spans in Markdown text. Based off of the \u0026#x27;fenced\u0026#x27; parser in remarkable.\n   */\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eparseInlineKatex\u003c/span\u003e = (\u003cspan class=\"hljs-params inline\"\u003estate, silent\u003c/span\u003e) =\u0026gt; {\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 101-104\u003c/strong\u003e: Define inline KaTeX parsing function, based on Remarkable’s fenced parser.\u003c/p\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"const%20start%20%3D%20state.pos%3B%0Aconst%20max%20%3D%20state.posMax%3B%0Alet%20pos%20%3D%20start%3B%0A%2F%2F%20Unexpected%20starting%20character%0Aif%20(state.src.charAt(pos)%20!%3D%3D%20delimiter)%20%7B%20return%20false%3B%20%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e    \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e start = state.\u003cspan class=\"hljs-property inline\"\u003epos\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e max = state.\u003cspan class=\"hljs-property inline\"\u003eposMax\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword inline\"\u003elet\u003c/span\u003e pos = start;\n\n    \u003cspan class=\"hljs-comment inline\"\u003e// Unexpected starting character\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (state.\u003cspan class=\"hljs-property inline\"\u003esrc\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003echarAt\u003c/span\u003e(pos) !== delimiter) { \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e; }\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 105-110\u003c/strong\u003e: Initialize parsing state and check if starting character is delimiter.\u003c/p\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%2B%2Bpos%3B%0Awhile%20(pos%20src.charAt(pos)%20%3D%3D%3D%20delimiter)%20%7B%20%2B%2Bpos%3B%20%7D%0A%2F%2F%20Capture%20the%20length%20of%20the%20starting%20delimiter%20--%20closing%20one%20must%20match%20in%20size%0Aconst%20marker%20%3D%20state.src.slice(start%2C%20pos)%3B%0Aif%20(marker.length%20%3E%202)%20%7B%20return%20false%3B%20%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e    ++pos;\n    \u003cspan class=\"hljs-keyword inline\"\u003ewhile\u003c/span\u003e (pos \u0026lt; max \u0026amp;\u0026amp; state.\u003cspan class=\"hljs-property inline\"\u003esrc\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003echarAt\u003c/span\u003e(pos) === delimiter) { ++pos; }\n\n    \u003cspan class=\"hljs-comment inline\"\u003e// Capture the length of the starting delimiter -- closing one must match in size\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e marker = state.\u003cspan class=\"hljs-property inline\"\u003esrc\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003eslice\u003c/span\u003e(start, pos);\n    \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (marker.\u003cspan class=\"hljs-property inline\"\u003elength\u003c/span\u003e \u0026gt; \u003cspan class=\"hljs-number inline\"\u003e2\u003c/span\u003e) { \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e; }\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 112-117\u003c/strong\u003e: Scan starting marker:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eSkip first delimiter\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eContinue skipping consecutive delimiters\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eRecord marker content\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eLimit marker length to no more than 2 (\u003cspan class=\"katex-error inline\" title=\"ParseError: KaTeX parse error: Can\u0026#x27;t use function \u0026#x27;$\u0026#x27; in math mode at position 4: or $̲\" style=\"color:#cc0000\"\u003eor $\u003c/span\u003e)\u003c/li\u003e\n\u003c/ul\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"const%20spanStart%20%3D%20pos%3B%0Alet%20escapedDepth%20%3D%200%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e    \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e spanStart = pos;\n    \u003cspan class=\"hljs-keyword inline\"\u003elet\u003c/span\u003e escapedDepth = \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 119-120\u003c/strong\u003e: Initialize content parsing:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003espanStart\u003c/code\u003e: Record content starting position\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eescapedDepth\u003c/code\u003e: Track brace nesting depth\u003c/li\u003e\n\u003c/ul\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"while%20(pos%20const%20char%20%3D%20state.src.charAt(pos)%3B%0Aif%20(char%20%3D%3D%3D%20'%7B'%20%26%26%20(pos%20%3D%3D%200%20%7C%7C%20state.src.charAt(pos%20-%201)%20!%3D%20backslash))%20%7B%0AescapedDepth%20%2B%3D%201%3B%0A%7D%20else%20if%20(char%20%3D%3D%3D%20'%7D'%20%26%26%20(pos%20%3D%3D%200%20%7C%7C%20state.src.charAt(pos%20-%201)%20!%3D%20backslash))%20%7B%0AescapedDepth%20-%3D%201%3B%0Aif%20(escapedDepth%200)%20%7B%20return%20false%3B%20%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e    \u003cspan class=\"hljs-keyword inline\"\u003ewhile\u003c/span\u003e (pos \u0026lt; max) {\n      \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e char = state.\u003cspan class=\"hljs-property inline\"\u003esrc\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003echarAt\u003c/span\u003e(pos);\n      \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (char === \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;{\u0026#x27;\u003c/span\u003e \u0026amp;\u0026amp; (pos == \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e || state.\u003cspan class=\"hljs-property inline\"\u003esrc\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003echarAt\u003c/span\u003e(pos - \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e) != backslash)) {\n        escapedDepth += \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e;\n      } \u003cspan class=\"hljs-keyword inline\"\u003eelse\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (char === \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;}\u0026#x27;\u003c/span\u003e \u0026amp;\u0026amp; (pos == \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e || state.\u003cspan class=\"hljs-property inline\"\u003esrc\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003echarAt\u003c/span\u003e(pos - \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e) != backslash)) {\n        escapedDepth -= \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e;\n        \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (escapedDepth \u0026lt; \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e) { \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e; }\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 121-127\u003c/strong\u003e: Handle brace nesting:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eIncrease depth when encountering unescaped \u003ccode\u003e{\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eDecrease depth when encountering unescaped \u003ccode\u003e}\u003c/code\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eIf depth is negative, brackets don’t match\u003c/li\u003e\n\u003c/ul\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%7D%20else%20if%20(char%20%3D%3D%3D%20delimiter%20%26%26%20escapedDepth%20%3D%3D%3D%200)%20%7B%0Aconst%20matchStart%20%3D%20pos%3B%0Alet%20matchEnd%20%3D%20pos%20%2B%201%3B%0Awhile%20(matchEnd%20src.charAt(matchEnd)%20%3D%3D%3D%20delimiter)%20%7B%20%2B%2BmatchEnd%3B%20%7D%0Aif%20(matchEnd%20-%20matchStart%20%3D%3D%3D%20marker.length)%20%7B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e      } \u003cspan class=\"hljs-keyword inline\"\u003eelse\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (char === delimiter \u0026amp;\u0026amp; escapedDepth === \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e) {\n        \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e matchStart = pos;\n        \u003cspan class=\"hljs-keyword inline\"\u003elet\u003c/span\u003e matchEnd = pos + \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e;\n        \u003cspan class=\"hljs-keyword inline\"\u003ewhile\u003c/span\u003e (matchEnd \u0026lt; max \u0026amp;\u0026amp; state.\u003cspan class=\"hljs-property inline\"\u003esrc\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003echarAt\u003c/span\u003e(matchEnd) === delimiter) { ++matchEnd; }\n\n        \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (matchEnd - matchStart === marker.\u003cspan class=\"hljs-property inline\"\u003elength\u003c/span\u003e) {\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 128-133\u003c/strong\u003e: Look for matching end marker:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eOnly consider delimiters when braces are balanced\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eCalculate consecutive delimiter length\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eCheck if length matches starting marker\u003c/li\u003e\n\u003c/ul\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"if%20(!silent)%20%7B%0Aconst%20content%20%3D%20state.src.slice(spanStart%2C%20matchStart)%0A.replace(%2F%5B%20%5Cn%5D%2B%2Fg%2C%20'%20')%0A.trim()%3B%0Astate.push(%7B%20type%3A%20'katex'%2C%20content%3A%20content%2C%20block%3A%20marker.length%20%3E%201%2C%20level%3A%20state.level%20%7D)%3B%0A%7D%0Astate.pos%20%3D%20matchEnd%3B%0Areturn%20true%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e          \u003cspan class=\"hljs-keyword inline\"\u003eif\u003c/span\u003e (!silent) {\n            \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e content = state.\u003cspan class=\"hljs-property inline\"\u003esrc\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003eslice\u003c/span\u003e(spanStart, matchStart)\n              .\u003cspan class=\"hljs-title function_ inline\"\u003ereplace\u003c/span\u003e(\u003cspan class=\"hljs-regexp inline\"\u003e/[ \\n]+/g\u003c/span\u003e, \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27; \u0026#x27;\u003c/span\u003e)\n              .\u003cspan class=\"hljs-title function_ inline\"\u003etrim\u003c/span\u003e();\n            state.\u003cspan class=\"hljs-title function_ inline\"\u003epush\u003c/span\u003e({ \u003cspan class=\"hljs-attr inline\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;katex\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003econtent\u003c/span\u003e: content, \u003cspan class=\"hljs-attr inline\"\u003eblock\u003c/span\u003e: marker.\u003cspan class=\"hljs-property inline\"\u003elength\u003c/span\u003e \u0026gt; \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-attr inline\"\u003elevel\u003c/span\u003e: state.\u003cspan class=\"hljs-property inline\"\u003elevel\u003c/span\u003e });\n          }\n          state.\u003cspan class=\"hljs-property inline\"\u003epos\u003c/span\u003e = matchEnd;\n          \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-literal inline\"\u003etrue\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 134-141\u003c/strong\u003e: Process matching markers:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003e!silent\u003c/code\u003e: Check if non-silent mode (silent mode only checks syntax, doesn’t create tokens)\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003estate.src.slice(spanStart, matchStart)\u003c/code\u003e\u003c/strong\u003e: Extract content from specified range in source text\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003espanStart\u003c/code\u003e: Content starting position (after skipping starting delimiter)\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003ematchStart\u003c/code\u003e: End delimiter starting position (exclude end delimiter)\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eContent cleanup: replace multiple spaces/line feeds with single space, remove leading/trailing whitespace\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003estate.push(tokenObject)\u003c/code\u003e\u003c/strong\u003e: Remarkable state method, add token to tokens array\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003etype: 'katex'\u003c/code\u003e: Token type\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003econtent: content\u003c/code\u003e: Processed LaTeX expression\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eblock: marker.length \u0026gt; 1\u003c/code\u003e: Determine if block-level based on delimiter length ($\u003cspan class=\"katex inline\"\u003e\u003cspan class=\"katex-mathml inline\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmi\u003es\u003c/mi\u003e\u003cmi\u003eb\u003c/mi\u003e\u003cmi\u003el\u003c/mi\u003e\u003cmi\u003eo\u003c/mi\u003e\u003cmi\u003ec\u003c/mi\u003e\u003cmi\u003ek\u003c/mi\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eis block,\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html inline\" aria-hidden=\"true\" style=\"display:none\"\u003e\u003cspan class=\"base inline\"\u003e\u003cspan class=\"strut inline\" style=\"height:0.8889em;vertical-align:-0.1944em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal inline\"\u003ei\u003c/span\u003e\u003cspan class=\"mord mathnormal inline\"\u003es\u003c/span\u003e\u003cspan class=\"mord mathnormal inline\"\u003eb\u003c/span\u003e\u003cspan class=\"mord mathnormal inline\" style=\"margin-right:0.01968em;\"\u003el\u003c/span\u003e\u003cspan class=\"mord mathnormal inline\"\u003eoc\u003c/span\u003e\u003cspan class=\"mord mathnormal inline\" style=\"margin-right:0.03148em;\"\u003ek\u003c/span\u003e\u003cspan class=\"mpunct inline\"\u003e,\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e is inline)\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003elevel: state.level\u003c/code\u003e: Current nesting level\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003estate.pos\u003c/code\u003e\u003c/strong\u003e: Update Remarkable state object’s current parsing position to after end delimiter\u003c/li\u003e\n\u003c/ul\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%7D%0A%7D%0Apos%20%2B%3D%201%3B%0A%7D%0A%2F%2F%20If%20we%20reach%20here%2C%20no%20matching%20closing%20delimiter%20was%20found%0A%2F%2F%20Don't%20add%20anything%20to%20pending%20and%20don't%20advance%20position%20to%20avoid%20partial%20rendering%0Areturn%20false%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e        }\n      }\n      pos += \u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e;\n    }\n\n    \u003cspan class=\"hljs-comment inline\"\u003e// If we reach here, no matching closing delimiter was found\u003c/span\u003e\n    \u003cspan class=\"hljs-comment inline\"\u003e// Don\u0026#x27;t add anything to pending and don\u0026#x27;t advance position to avoid partial rendering\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 142-148\u003c/strong\u003e: Handle case where no matching marker is found:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eContinue searching forward\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eIf reaching end without finding matching end marker\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eReturn false, don’t create token, avoid partial rendering\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"plugin-registration\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#plugin-registration\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Plugin Registration\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Plugin Registration\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"md.inline.ruler.push('katex'%2C%20parseInlineKatex%2C%20options)%3B%0Amd.block.ruler.push('katex'%2C%20parseBlockKatex%2C%20options)%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e  md.\u003cspan class=\"hljs-property inline\"\u003einline\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003eruler\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003epush\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;katex\u0026#x27;\u003c/span\u003e, parseInlineKatex, options);\n  md.\u003cspan class=\"hljs-property inline\"\u003eblock\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003eruler\u003c/span\u003e.\u003cspan class=\"hljs-title function_ inline\"\u003epush\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;katex\u0026#x27;\u003c/span\u003e, parseBlockKatex, options);\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 151-152\u003c/strong\u003e: Register parsing rules with Remarkable:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003emd.inline.ruler.push()\u003c/code\u003e\u003c/strong\u003e: Remarkable plugin API, register new parsing rule with inline parser\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003e'katex'\u003c/code\u003e: Rule name for identification and ordering\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eparseInlineKatex\u003c/code\u003e: Inline parsing function\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eoptions\u003c/code\u003e: Parsing options (optional)\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003emd.block.ruler.push()\u003c/code\u003e\u003c/strong\u003e: Remarkable plugin API, register new parsing rule with block parser\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003e'katex'\u003c/code\u003e: Rule name\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eparseBlockKatex\u003c/code\u003e: Block parsing function\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eoptions\u003c/code\u003e: Parsing options (optional)\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"md.renderer.rules.katex%20%3D%20(tokens%2C%20idx)%20%3D%3E%20%7B%0Aconst%20token%20%3D%20tokens%5Bidx%5D%3B%0Aconst%20rendered%20%3D%20renderKatex(token.content%2C%20token.block)%3B%0A%2F%2F%20Return%20clean%20HTML%20without%20any%20markdown%20artifacts%0Areturn%20rendered%3B%0A%7D%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e  md.\u003cspan class=\"hljs-property inline\"\u003erenderer\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003erules\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003ekatex\u003c/span\u003e = \u003cspan class=\"hljs-function inline\"\u003e(\u003cspan class=\"hljs-params inline\"\u003etokens, idx\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e token = tokens[idx];\n    \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e rendered = \u003cspan class=\"hljs-title function_ inline\"\u003erenderKatex\u003c/span\u003e(token.\u003cspan class=\"hljs-property inline\"\u003econtent\u003c/span\u003e, token.\u003cspan class=\"hljs-property inline\"\u003eblock\u003c/span\u003e);\n    \u003cspan class=\"hljs-comment inline\"\u003e// Return clean HTML without any markdown artifacts\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e rendered;\n  };\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 153-158\u003c/strong\u003e: Define rendering rule:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003emd.renderer.rules.katex\u003c/code\u003e\u003c/strong\u003e: Remarkable renderer API, define rendering function for ‘katex’ type tokens\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eRendering function parameters\u003c/strong\u003e:\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003etokens\u003c/code\u003e: Complete tokens array\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eidx\u003c/code\u003e: Index of current token to render in array\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003etokens[idx]\u003c/code\u003e: Get current token object to render\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003erenderKatex(token.content, token.block)\u003c/code\u003e: Call previously defined KaTeX rendering function\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eReturn rendered HTML string, no Markdown syntax artifacts\u003c/li\u003e\n\u003c/ul\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"md.renderer.rules.katex.delimiter%20%3D%20delimiter%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e  md.\u003cspan class=\"hljs-property inline\"\u003erenderer\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003erules\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003ekatex\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003edelimiter\u003c/span\u003e = delimiter;\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLine 159\u003c/strong\u003e: Attach delimiter information to rendering rule for debugging and configuration checking.\u003c/p\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%7D%3B%0Amodule.exports%20%3D%20rkatex%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e};\n\n\u003cspan class=\"hljs-variable language_ inline\"\u003emodule\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003eexports\u003c/span\u003e = rkatex;\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 160-162\u003c/strong\u003e: End function definition and export module.\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003e};\u003c/code\u003e: End rkatex function definition\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003emodule.exports\u003c/code\u003e\u003c/strong\u003e: Node.js module export mechanism, makes rkatex function importable by other modules via require()\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr class=\"border-0 h-px bg-gray-300 my-8\"\u003e\n\u003ch2 id=\"indextestjs-code-line-by-line-analysis\" class=\"group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight\"\u003e\n            \u003ca href=\"#indextestjs-code-line-by-line-analysis\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to index.test.js Code Line-by-Line Analysis\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            index.test.js Code Line-by-Line Analysis\n        \u003c/h2\u003e\n\u003ch3 id=\"test-file-header\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#test-file-header\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Test File Header\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Test File Header\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%22use%20strict%22%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-meta inline\"\u003e\u0026quot;use strict\u0026quot;\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLine 1\u003c/strong\u003e: Enable strict mode.\u003c/p\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"const%20vows%20%3D%20require('vows')%3B%0Aconst%20assert%20%3D%20require('assert')%3B%0Aconst%20%7B%20Remarkable%20%7D%20%3D%20require('remarkable')%3B%0Aconst%20plugin%20%3D%20require('.%2Findex.js')%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e vows = \u003cspan class=\"hljs-built_in inline\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;vows\u0026#x27;\u003c/span\u003e);\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e assert = \u003cspan class=\"hljs-built_in inline\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;assert\u0026#x27;\u003c/span\u003e);\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e { \u003cspan class=\"hljs-title class_ inline\"\u003eRemarkable\u003c/span\u003e } = \u003cspan class=\"hljs-built_in inline\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;remarkable\u0026#x27;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e plugin = \u003cspan class=\"hljs-built_in inline\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;./index.js\u0026#x27;\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 3-6\u003c/strong\u003e: Import test dependencies:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003erequire('vows')\u003c/code\u003e\u003c/strong\u003e: Import vows testing framework, a BDD (Behavior Driven Development) testing framework for Node.js\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003erequire('assert')\u003c/code\u003e\u003c/strong\u003e: Import Node.js built-in assertion library, provides various assertion methods for test verification\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003erequire('remarkable')\u003c/code\u003e\u003c/strong\u003e: Import Remarkable Markdown processor, use destructuring syntax to get Remarkable constructor\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003erequire('./index.js')\u003c/code\u003e\u003c/strong\u003e: Import plugin main file from current directory (relative path import)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"test-instance-preparation\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#test-instance-preparation\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Test Instance Preparation\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Test Instance Preparation\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"const%20mdWithDollar%20%3D%20new%20Remarkable()%3B%0AmdWithDollar.use(plugin)%3B%0Aconst%20mdWithAt%20%3D%20new%20Remarkable()%3B%0AmdWithAt.use(plugin%2C%20%7Bdelimiter%3A%20'%40'%7D)%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e mdWithDollar = \u003cspan class=\"hljs-keyword inline\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eRemarkable\u003c/span\u003e();\nmdWithDollar.\u003cspan class=\"hljs-title function_ inline\"\u003euse\u003c/span\u003e(plugin);\n\n\u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e mdWithAt = \u003cspan class=\"hljs-keyword inline\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eRemarkable\u003c/span\u003e();\nmdWithAt.\u003cspan class=\"hljs-title function_ inline\"\u003euse\u003c/span\u003e(plugin, {\u003cspan class=\"hljs-attr inline\"\u003edelimiter\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;@\u0026#x27;\u003c/span\u003e});\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 8-12\u003c/strong\u003e: Create test instances:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003enew Remarkable()\u003c/code\u003e\u003c/strong\u003e: Create Remarkable Markdown processor instance\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003emdWithDollar.use(plugin)\u003c/code\u003e\u003c/strong\u003e: Use Remarkable plugin API to load KaTeX plugin (use default configuration)\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eplugin\u003c/code\u003e: Previously imported KaTeX plugin function\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003emdWithAt.use(plugin, {delimiter: '@'})\u003c/code\u003e\u003c/strong\u003e: Load plugin and pass custom configuration\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003e{delimiter: '@'}\u003c/code\u003e: Configuration object, specify using @ symbol as mathematical formula delimiter instead of default $ symbol\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"test-suite-start\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#test-suite-start\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Test Suite Start\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Test Suite Start\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"vows.describe('KatexPlugin').addBatch(%7B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003evows.\u003cspan class=\"hljs-title function_ inline\"\u003edescribe\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;KatexPlugin\u0026#x27;\u003c/span\u003e).\u003cspan class=\"hljs-title function_ inline\"\u003eaddBatch\u003c/span\u003e({\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLine 14\u003c/strong\u003e: Use vows framework to create test suite named 'KatexPlugin’.\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003evows.describe('KatexPlugin')\u003c/code\u003e\u003c/strong\u003e: vows testing framework API, create a test suite (Test Suite)\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003e'KatexPlugin'\u003c/code\u003e: Test suite name for test output and organization\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003e.addBatch(testObject)\u003c/code\u003e\u003c/strong\u003e: vows framework method, add batch of test cases to test suite\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003etestObject\u003c/code\u003e: Object containing multiple test cases\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"configuration-tests\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#configuration-tests\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Configuration Tests\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Configuration Tests\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"'Config%20empty%20delimiter'%3A%20%7B%0Atopic()%20%7B%0Aconst%20md%20%3D%20new%20Remarkable()%3B%0Amd.use(plugin%2C%20%7Bdelimiter%3A%20''%7D)%3B%0Areturn%20md%3B%0A%7D%2C%0A'Uses%20default%20delimiter'%3A%20function(topic)%20%7B%0Aassert.equal(topic.renderer.rules.katex.delimiter%2C%20'%24')%3B%0A%7D%0A%7D%2C\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e  \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Config empty delimiter\u0026#x27;\u003c/span\u003e: {\n    \u003cspan class=\"hljs-title function_ inline\"\u003etopic\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e md = \u003cspan class=\"hljs-keyword inline\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eRemarkable\u003c/span\u003e();\n      md.\u003cspan class=\"hljs-title function_ inline\"\u003euse\u003c/span\u003e(plugin, {\u003cspan class=\"hljs-attr inline\"\u003edelimiter\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026#x27;\u003c/span\u003e});\n      \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e md;\n    },\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Uses default delimiter\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003eequal\u003c/span\u003e(topic.\u003cspan class=\"hljs-property inline\"\u003erenderer\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003erules\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003ekatex\u003c/span\u003e.\u003cspan class=\"hljs-property inline\"\u003edelimiter\u003c/span\u003e, \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;$\u0026#x27;\u003c/span\u003e);\n    }\n  },\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 15-24\u003c/strong\u003e: Test empty delimiter configuration:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eCreate instance with empty delimiter\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eVerify fallback to default $ delimiter\u003c/li\u003e\n\u003c/ul\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"'Multi-char%20delimiter'%3A%20%7B%0Atopic()%20%7B%0Areturn%20()%20%3D%3E%20%7B%0Aconst%20md%20%3D%20new%20Remarkable()%3B%0Amd.use(plugin%2C%20%7Bdelimiter%3A%20'%24%24'%7D)%3B%0Areturn%20md%3B%0A%7D%3B%0A%7D%2C%0A'Throws%20exception'%3A%20function(topic)%20%7B%0Aassert.throws(topic)%3B%0A%7D%0A%7D%2C\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e  \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Multi-char delimiter\u0026#x27;\u003c/span\u003e: {\n    \u003cspan class=\"hljs-title function_ inline\"\u003etopic\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-function inline\"\u003e() =\u0026gt;\u003c/span\u003e {\n        \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e md = \u003cspan class=\"hljs-keyword inline\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eRemarkable\u003c/span\u003e();\n        md.\u003cspan class=\"hljs-title function_ inline\"\u003euse\u003c/span\u003e(plugin, {\u003cspan class=\"hljs-attr inline\"\u003edelimiter\u003c/span\u003e: \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;$$\u0026#x27;\u003c/span\u003e});\n        \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e md;\n      };\n    },\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Throws exception\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003ethrows\u003c/span\u003e(topic);\n    }\n  },\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 25-36\u003c/strong\u003e: Test multi-character delimiter:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eTry using two-character delimiter\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003eassert.throws(topic)\u003c/code\u003e\u003c/strong\u003e: Node.js assertion library method, verify if function call throws exception\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003etopic\u003c/code\u003e: Function to test (here function returning Remarkable instance creation function)\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eIf function doesn’t throw exception, assertion fails\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"basic-text-rendering-tests\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#basic-text-rendering-tests\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Basic Text Rendering Tests\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Basic Text Rendering Tests\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"'Render%20plain%20text'%3A%20%7B%0Atopic%3A%20mdWithDollar.render('This%20is%20a%20test.')%2C%0A'Nothing%20done'%3A%20function(topic)%20%7B%0Aassert.equal(topic%2C%20'This%20is%20a%20test.%5Cn')%3B%0A%7D%0A%7D%2C\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e  \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Render plain text\u0026#x27;\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr inline\"\u003etopic\u003c/span\u003e: mdWithDollar.\u003cspan class=\"hljs-title function_ inline\"\u003erender\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;This is a test.\u0026#x27;\u003c/span\u003e),\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Nothing done\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003eequal\u003c/span\u003e(topic, \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026lt;p\u0026gt;This is a test.\u0026lt;/p\u0026gt;\\n\u0026#x27;\u003c/span\u003e);\n    }\n  },\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 37-42\u003c/strong\u003e: Test plain text rendering:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003emdWithDollar.render('This is a test.')\u003c/code\u003e\u003c/strong\u003e: Use Remarkable instance’s render method to process Markdown text\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003erender()\u003c/code\u003e: Remarkable core method, converts Markdown text to HTML\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eReturn value: Rendered HTML string\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003eassert.equal(actual, expected)\u003c/code\u003e\u003c/strong\u003e: Node.js assertion library method, verify two values are strictly equal\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eactual\u003c/code\u003e: Actually obtained value (render method return value)\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eexpected\u003c/code\u003e: Expected value ('\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003eThis is a test.\u003c/p\u003e\\n’)\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eEnsure plugin doesn’t affect normal text rendering\u003c/li\u003e\n\u003c/ul\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"'Render%20with%20single%20%24%20in%20text'%3A%20%7B%0Atopic%3A%20mdWithDollar.render('The%20car%20cost%20%2420%2C000%20new.')%2C%0A'Nothing%20done'%3A%20function(topic)%20%7B%0Aassert.equal(topic%2C%20'The%20car%20cost%20%2420%2C000%20new.%5Cn')%3B%0A%7D%0A%7D%2C\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e  \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Render with single $ in text\u0026#x27;\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr inline\"\u003etopic\u003c/span\u003e: mdWithDollar.\u003cspan class=\"hljs-title function_ inline\"\u003erender\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;The car cost $20,000 new.\u0026#x27;\u003c/span\u003e),\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Nothing done\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003eequal\u003c/span\u003e(topic, \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026lt;p\u0026gt;The car cost $20,000 new.\u0026lt;/p\u0026gt;\\n\u0026#x27;\u003c/span\u003e);\n    }\n  },\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 43-48\u003c/strong\u003e: Test single dollar sign:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eVerify single $ symbol not mistaken for mathematical formula marker\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eEnsure currency symbols in normal text display correctly\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"inline-mathematical-formula-tests\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#inline-mathematical-formula-tests\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Inline Mathematical Formula Tests\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Inline Mathematical Formula Tests\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"'Render%20%24...%24%20in%20text'%3A%20%7B%0Atopic%3A%20mdWithDollar.render('Equation%20%24x%20%2B%20y%24.')%2C%0A'Starts%20with%20%22Equation%20%22'%3A%20function(topic)%20%7B%0Aassert.isTrue(topic.startsWith('Equation%20'))%3B%0A%7D%2C%0A'Ends%20with%20%22.%22'%3A%20function(topic)%20%7B%0Aassert.isTrue(topic.endsWith('.%5Cn'))%3B%0A%7D%2C%0A'Contains%20math%20span'%3A%20function(topic)%20%7B%0Aassert.notEqual(topic.indexOf('')%2C%20-1)%3B%0A%7D%0A%7D%2C\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e  \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Render $...$ in text\u0026#x27;\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr inline\"\u003etopic\u003c/span\u003e: mdWithDollar.\u003cspan class=\"hljs-title function_ inline\"\u003erender\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Equation $x + y$.\u0026#x27;\u003c/span\u003e),\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Starts with \u0026quot;\u0026lt;p\u0026gt;Equation \u0026quot;\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003eisTrue\u003c/span\u003e(topic.\u003cspan class=\"hljs-title function_ inline\"\u003estartsWith\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026lt;p\u0026gt;Equation \u0026#x27;\u003c/span\u003e));\n    },\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Ends with \u0026quot;.\u0026lt;/p\u0026gt;\u0026quot;\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003eisTrue\u003c/span\u003e(topic.\u003cspan class=\"hljs-title function_ inline\"\u003eendsWith\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026lt;/span\u0026gt;.\u0026lt;/p\u0026gt;\\n\u0026#x27;\u003c/span\u003e));\n    },\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Contains math span\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003enotEqual\u003c/span\u003e(topic.\u003cspan class=\"hljs-title function_ inline\"\u003eindexOf\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026lt;span class=\u0026quot;katex\u0026quot;\u0026gt;\u0026#x27;\u003c/span\u003e), -\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e);\n    }\n  },\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 49-61\u003c/strong\u003e: Test basic inline mathematical formula:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003eassert.isTrue(condition)\u003c/code\u003e\u003c/strong\u003e: Node.js assertion library method, verify condition is truthy\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003etopic.startsWith('\u0026lt;p\u0026gt;Equation ')\u003c/code\u003e: JavaScript string method, check if string starts with specified prefix\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003etopic.endsWith('\u0026lt;/span\u0026gt;.\u0026lt;/p\u0026gt;\\n')\u003c/code\u003e: JavaScript string method, check if string ends with specified suffix\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003eassert.notEqual(actual, unexpected)\u003c/code\u003e\u003c/strong\u003e: Node.js assertion library method, verify two values are not equal\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003etopic.indexOf('\u0026lt;span class=\u0026quot;katex\u0026quot;\u0026gt;')\u003c/code\u003e: JavaScript string method, find substring position in string\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003e-1\u003c/code\u003e: indexOf method return value when not found\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eThis assertion ensures HTML contains KaTeX-rendered span element\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"'Render%20%24...%24%20in%20text%20with%20embedded%20%7B%24...%24%7D'%3A%20%7B%0Atopic%3A%20mdWithDollar.render('Equation%20%24%5C%5Ccolorbox%7Baqua%7D%7B%24F%3Dma%24%7D%24.')%2C%0A%2F%2F%20...%20similar%20assertions%0A%7D%2C\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e  \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Render $...$ in text with embedded {$...$}\u0026#x27;\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr inline\"\u003etopic\u003c/span\u003e: mdWithDollar.\u003cspan class=\"hljs-title function_ inline\"\u003erender\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Equation $\\\\colorbox{aqua}{$F=ma$}$.\u0026#x27;\u003c/span\u003e),\n    \u003cspan class=\"hljs-comment inline\"\u003e// ... similar assertions\u003c/span\u003e\n  },\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 62-74\u003c/strong\u003e: Test complex formula with nested braces:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eVerify plugin correctly handles nested brace structures\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eEnsure complex LaTeX commands render correctly\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"block-level-mathematical-formula-tests\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#block-level-mathematical-formula-tests\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Block-level Mathematical Formula Tests\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Block-level Mathematical Formula Tests\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"'Render%20%24%24...%24%24%20in%20text'%3A%20%7B%0Atopic%3A%20mdWithDollar.render('Before%5Cn%24%24%5Cnx%20%2B%20y%5Cn%24%24%5Cnafter.')%2C%0A'Starts%20with%20%22Before%20%22'%3A%20function(topic)%20%7B%0Aassert.isTrue(topic.startsWith('Before%5Cn'))%3B%0A%7D%2C%0A'Ends%20with%20%22after.%22'%3A%20function(topic)%20%7B%0Aassert.isTrue(topic.endsWith('%5Cnafter.%5Cn'))%3B%0A%7D%2C%0A'Contains%20math%20span'%3A%20function(topic)%20%7B%0Aassert.notEqual(topic.indexOf('')%2C%20-1)%3B%0A%7D%0A%7D%2C\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e  \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Render $$...$$ in text\u0026#x27;\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr inline\"\u003etopic\u003c/span\u003e: mdWithDollar.\u003cspan class=\"hljs-title function_ inline\"\u003erender\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Before\\n$$\\nx + y\\n$$\\nafter.\u0026#x27;\u003c/span\u003e),\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Starts with \u0026quot;\u0026lt;p\u0026gt;Before \u0026quot;\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003eisTrue\u003c/span\u003e(topic.\u003cspan class=\"hljs-title function_ inline\"\u003estartsWith\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026lt;p\u0026gt;Before\\n\u0026#x27;\u003c/span\u003e));\n    },\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Ends with \u0026quot;after.\u0026lt;/p\u0026gt;\u0026quot;\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003eisTrue\u003c/span\u003e(topic.\u003cspan class=\"hljs-title function_ inline\"\u003eendsWith\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026lt;/span\u0026gt;\\nafter.\u0026lt;/p\u0026gt;\\n\u0026#x27;\u003c/span\u003e));\n    },\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Contains math span\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003enotEqual\u003c/span\u003e(topic.\u003cspan class=\"hljs-title function_ inline\"\u003eindexOf\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026lt;span class=\u0026quot;katex-display\u0026quot;\u0026gt;\u0026#x27;\u003c/span\u003e), -\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e);\n    }\n  },\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 87-99\u003c/strong\u003e: Test block-level mathematical formula:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eVerify multi-line $$ blocks render correctly\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eEnsure katex-display class name is used\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"custom-delimiter-tests\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#custom-delimiter-tests\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Custom Delimiter Tests\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Custom Delimiter Tests\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"'Render%20%40...%40%20in%20text'%3A%20%7B%0Atopic%3A%20mdWithAt.render('Equation%20%40x%20%2B%20y%40.')%2C%0A%2F%2F%20...%20verify%20inline%20formula%20using%20%40%20delimiter%0A%7D%2C%0A'Render%20%40%40...%40%40%20in%20text'%3A%20%7B%0Atopic%3A%20mdWithAt.render('Before%20%40%40x%20%2B%20y%40%40%20after.')%2C%0A%2F%2F%20...%20verify%20block%20formula%20using%20%40%20delimiter%0A%7D%2C\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e  \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Render @...@ in text\u0026#x27;\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr inline\"\u003etopic\u003c/span\u003e: mdWithAt.\u003cspan class=\"hljs-title function_ inline\"\u003erender\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Equation @x + y@.\u0026#x27;\u003c/span\u003e),\n    \u003cspan class=\"hljs-comment inline\"\u003e// ... verify inline formula using @ delimiter\u003c/span\u003e\n  },\n  \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Render @@...@@ in text\u0026#x27;\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr inline\"\u003etopic\u003c/span\u003e: mdWithAt.\u003cspan class=\"hljs-title function_ inline\"\u003erender\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Before @@x + y@@ after.\u0026#x27;\u003c/span\u003e),\n    \u003cspan class=\"hljs-comment inline\"\u003e// ... verify block formula using @ delimiter\u003c/span\u003e\n  },\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 75-86 and 100-112\u003c/strong\u003e: Test custom delimiter:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eVerify plugin supports custom delimiters (@ instead of $)\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eEnsure both inline and block formulas work correctly with custom delimiter\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"error-handling-tests\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#error-handling-tests\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Error Handling Tests\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Error Handling Tests\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"'Incomplete%20inline%20expression%20(no%20closing%20delimiter)'%3A%20%7B%0Atopic%3A%20mdWithDollar.render('This%20has%20%24incomplete%20math%20expression.')%2C%0A'Original%20text%20preserved'%3A%20function(topic)%20%7B%0Aassert.equal(topic%2C%20'This%20has%20%24incomplete%20math%20expression.%5Cn')%3B%0A%7D%2C%0A'No%20KaTeX%20HTML%20generated'%3A%20function(topic)%20%7B%0Aassert.equal(topic.indexOf('')%2C%20-1)%3B%0A%7D%0A%7D%2C\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e  \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Incomplete inline expression (no closing delimiter)\u0026#x27;\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr inline\"\u003etopic\u003c/span\u003e: mdWithDollar.\u003cspan class=\"hljs-title function_ inline\"\u003erender\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;This has $incomplete math expression.\u0026#x27;\u003c/span\u003e),\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Original text preserved\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003eequal\u003c/span\u003e(topic, \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026lt;p\u0026gt;This has $incomplete math expression.\u0026lt;/p\u0026gt;\\n\u0026#x27;\u003c/span\u003e);\n    },\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;No KaTeX HTML generated\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003eequal\u003c/span\u003e(topic.\u003cspan class=\"hljs-title function_ inline\"\u003eindexOf\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026lt;span class=\u0026quot;katex\u0026quot;\u0026gt;\u0026#x27;\u003c/span\u003e), -\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e);\n    }\n  },\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 113-122\u003c/strong\u003e: Test incomplete inline expression:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eVerify original text preserved when missing end delimiter\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eEnsure no erroneous KaTeX HTML generated\u003c/li\u003e\n\u003c/ul\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"'Incomplete%20block%20expression%20(no%20closing%20delimiter)'%3A%20%7B%0Atopic%3A%20mdWithDollar.render('Before%5Cn%24%24%5Cnincomplete%20block%5Cnafter.')%2C%0A'Original%20text%20preserved'%3A%20function(topic)%20%7B%0Aassert.equal(topic%2C%20'Before%5Cn%24%24%5Cnincomplete%20block%5Cnafter.%5Cn')%3B%0A%7D%2C%0A'No%20KaTeX%20HTML%20generated'%3A%20function(topic)%20%7B%0Aassert.equal(topic.indexOf('')%2C%20-1)%3B%0A%7D%0A%7D%2C\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e  \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Incomplete block expression (no closing delimiter)\u0026#x27;\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr inline\"\u003etopic\u003c/span\u003e: mdWithDollar.\u003cspan class=\"hljs-title function_ inline\"\u003erender\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Before\\n$$\\nincomplete block\\nafter.\u0026#x27;\u003c/span\u003e),\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Original text preserved\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003eequal\u003c/span\u003e(topic, \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026lt;p\u0026gt;Before\\n$$\\nincomplete block\\nafter.\u0026lt;/p\u0026gt;\\n\u0026#x27;\u003c/span\u003e);\n    },\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;No KaTeX HTML generated\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003eequal\u003c/span\u003e(topic.\u003cspan class=\"hljs-title function_ inline\"\u003eindexOf\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026lt;span class=\u0026quot;katex-display\u0026quot;\u0026gt;\u0026#x27;\u003c/span\u003e), -\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e);\n    }\n  },\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 123-132\u003c/strong\u003e: Test incomplete block expression:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eVerify original text preserved when missing end marker\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eEnsure no partial mathematical formula HTML generated\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"content-cleanup-tests\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#content-cleanup-tests\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Content Cleanup Tests\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Content Cleanup Tests\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"'Original%20expression%20completely%20removed%20in%20inline%20math'%3A%20%7B%0Atopic%3A%20mdWithDollar.render('Test%20%24x%5E2%24%20here.')%2C%0A'No%20dollar%20signs%20in%20output'%3A%20function(topic)%20%7B%0A%2F%2F%20Should%20not%20contain%20the%20original%20%24%20delimiters%0Aassert.equal(topic.indexOf('%24x%5E2%24')%2C%20-1)%3B%0A%7D%2C%0A'Contains%20rendered%20math'%3A%20function(topic)%20%7B%0Aassert.notEqual(topic.indexOf('')%2C%20-1)%3B%0A%7D%2C%0A'Contains%20x%5E2%20in%20rendered%20form'%3A%20function(topic)%20%7B%0A%2F%2F%20KaTeX%20should%20render%20x%5E2%20as%20superscript%0Aassert.notEqual(topic.indexOf('x')%2C%20-1)%3B%0Aassert.notEqual(topic.indexOf('2')%2C%20-1)%3B%0A%7D%0A%7D%2C\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e  \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Original expression completely removed in inline math\u0026#x27;\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr inline\"\u003etopic\u003c/span\u003e: mdWithDollar.\u003cspan class=\"hljs-title function_ inline\"\u003erender\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Test $x^2$ here.\u0026#x27;\u003c/span\u003e),\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;No dollar signs in output\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {\n      \u003cspan class=\"hljs-comment inline\"\u003e// Should not contain the original $ delimiters\u003c/span\u003e\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003eequal\u003c/span\u003e(topic.\u003cspan class=\"hljs-title function_ inline\"\u003eindexOf\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;$x^2$\u0026#x27;\u003c/span\u003e), -\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e);\n    },\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Contains rendered math\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003enotEqual\u003c/span\u003e(topic.\u003cspan class=\"hljs-title function_ inline\"\u003eindexOf\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026lt;span class=\u0026quot;katex\u0026quot;\u0026gt;\u0026#x27;\u003c/span\u003e), -\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e);\n    },\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Contains x^2 in rendered form\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {\n      \u003cspan class=\"hljs-comment inline\"\u003e// KaTeX should render x^2 as superscript\u003c/span\u003e\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003enotEqual\u003c/span\u003e(topic.\u003cspan class=\"hljs-title function_ inline\"\u003eindexOf\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;x\u0026#x27;\u003c/span\u003e), -\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e);\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003enotEqual\u003c/span\u003e(topic.\u003cspan class=\"hljs-title function_ inline\"\u003eindexOf\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;2\u0026#x27;\u003c/span\u003e), -\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e);\n    }\n  },\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 133-149\u003c/strong\u003e: Test complete removal of original expression:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eVerify original $ delimiters don’t appear in output\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eEnsure content correctly converted to KaTeX HTML\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eVerify mathematical symbols render correctly\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"katex-annotation-preservation-tests\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#katex-annotation-preservation-tests\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to KaTeX Annotation Preservation Tests\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            KaTeX Annotation Preservation Tests\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"'Original%20expression%20completely%20removed%20in%20block%20math'%3A%20%7B%0Atopic%3A%20mdWithDollar.render('Before%5Cn%24%24%5Cn%5C%5Cfrac%7Ba%7D%7Bb%7D%5Cn%24%24%5Cnafter.')%2C%0A'No%20double%20dollar%20signs%20in%20output'%3A%20function(topic)%20%7B%0A%2F%2F%20Should%20not%20contain%20the%20original%20%24%24%20delimiters%0Aassert.equal(topic.indexOf('%24%24')%2C%20-1)%3B%0A%7D%2C%0A'Raw%20LaTeX%20preserved%20in%20annotation%20(correct%20behavior)'%3A%20function(topic)%20%7B%0A%2F%2F%20KaTeX%20preserves%20original%20LaTeX%20in%20annotation%20tags%20-%20this%20is%20correct%0Aassert.notEqual(topic.indexOf('%5C%5Cfrac%7Ba%7D%7Bb%7D')%2C%20-1)%3B%0Aassert.notEqual(topic.indexOf('')%2C%20-1)%3B%0A%7D%2C%0A'Contains%20rendered%20math'%3A%20function(topic)%20%7B%0Aassert.notEqual(topic.indexOf('')%2C%20-1)%3B%0A%7D%0A%7D%2C\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e  \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Original expression completely removed in block math\u0026#x27;\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr inline\"\u003etopic\u003c/span\u003e: mdWithDollar.\u003cspan class=\"hljs-title function_ inline\"\u003erender\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Before\\n$$\\n\\\\frac{a}{b}\\n$$\\nafter.\u0026#x27;\u003c/span\u003e),\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;No double dollar signs in output\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {\n      \u003cspan class=\"hljs-comment inline\"\u003e// Should not contain the original $$ delimiters\u003c/span\u003e\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003eequal\u003c/span\u003e(topic.\u003cspan class=\"hljs-title function_ inline\"\u003eindexOf\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;$$\u0026#x27;\u003c/span\u003e), -\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e);\n    },\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Raw LaTeX preserved in annotation (correct behavior)\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {\n      \u003cspan class=\"hljs-comment inline\"\u003e// KaTeX preserves original LaTeX in annotation tags - this is correct\u003c/span\u003e\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003enotEqual\u003c/span\u003e(topic.\u003cspan class=\"hljs-title function_ inline\"\u003eindexOf\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\\\\frac{a}{b}\u0026#x27;\u003c/span\u003e), -\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e);\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003enotEqual\u003c/span\u003e(topic.\u003cspan class=\"hljs-title function_ inline\"\u003eindexOf\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026lt;annotation encoding=\u0026quot;application/x-tex\u0026quot;\u0026gt;\u0026#x27;\u003c/span\u003e), -\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e);\n    },\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Contains rendered math\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003enotEqual\u003c/span\u003e(topic.\u003cspan class=\"hljs-title function_ inline\"\u003eindexOf\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026lt;span class=\u0026quot;katex-display\u0026quot;\u0026gt;\u0026#x27;\u003c/span\u003e), -\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e);\n    }\n  },\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 150-165\u003c/strong\u003e: Test block formula processing:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eVerify $$ delimiters removed\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eConfirm KaTeX preserves original LaTeX in annotation tags (this is correct behavior)\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eVerify contains rendered mathematical elements\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"multiple-expression-tests\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#multiple-expression-tests\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Multiple Expression Tests\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Multiple Expression Tests\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"'Multiple%20expressions%20all%20converted'%3A%20%7B%0Atopic%3A%20mdWithDollar.render('First%20%24a%2Bb%24%20and%20second%20%24c%2Bd%24%20expressions.')%2C%0A'No%20dollar%20signs%20remain'%3A%20function(topic)%20%7B%0Aassert.equal(topic.indexOf('%24a%2Bb%24')%2C%20-1)%3B%0Aassert.equal(topic.indexOf('%24c%2Bd%24')%2C%20-1)%3B%0A%7D%2C%0A'Two%20math%20spans%20created'%3A%20function(topic)%20%7B%0Aconst%20matches%20%3D%20topic.match(%2F%2Fg)%3B%0Aassert.equal(matches%20%3F%20matches.length%20%3A%200%2C%202)%3B%0A%7D%0A%7D%2C\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e  \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Multiple expressions all converted\u0026#x27;\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr inline\"\u003etopic\u003c/span\u003e: mdWithDollar.\u003cspan class=\"hljs-title function_ inline\"\u003erender\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;First $a+b$ and second $c+d$ expressions.\u0026#x27;\u003c/span\u003e),\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;No dollar signs remain\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003eequal\u003c/span\u003e(topic.\u003cspan class=\"hljs-title function_ inline\"\u003eindexOf\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;$a+b$\u0026#x27;\u003c/span\u003e), -\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e);\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003eequal\u003c/span\u003e(topic.\u003cspan class=\"hljs-title function_ inline\"\u003eindexOf\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;$c+d$\u0026#x27;\u003c/span\u003e), -\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e);\n    },\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Two math spans created\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e matches = topic.\u003cspan class=\"hljs-title function_ inline\"\u003ematch\u003c/span\u003e(\u003cspan class=\"hljs-regexp inline\"\u003e/\u0026lt;span class=\u0026quot;katex\u0026quot;\u0026gt;/g\u003c/span\u003e);\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003eequal\u003c/span\u003e(matches ? matches.\u003cspan class=\"hljs-property inline\"\u003elength\u003c/span\u003e : \u003cspan class=\"hljs-number inline\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number inline\"\u003e2\u003c/span\u003e);\n    }\n  },\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 166-177\u003c/strong\u003e: Test multiple mathematical expressions:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eVerify all original delimiters removed\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003etopic.match(/\u0026lt;span class=\u0026quot;katex\u0026quot;\u0026gt;/g)\u003c/code\u003e\u003c/strong\u003e: JavaScript string regex matching method\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003e/\u0026lt;span class=\u0026quot;katex\u0026quot;\u0026gt;/g\u003c/code\u003e: Global regex, find all KaTeX span tags\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003eg\u003c/code\u003e flag: Global match, return all matches instead of just first\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eReturn value: Array of matches or null (when no matches)\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eTernary operator \u003ccode\u003ematches ? matches.length : 0\u003c/code\u003e\u003c/strong\u003e: Safely get match count\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eIf matches not null, return array length\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eIf matches null (no matches), return 0\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eEnsure correct number (2) of mathematical span elements created\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"mixed-expression-tests\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#mixed-expression-tests\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Mixed Expression Tests\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Mixed Expression Tests\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"'Mixed%20inline%20and%20block%20expressions'%3A%20%7B%0Atopic%3A%20mdWithDollar.render('Inline%20%24x%24%20and%20block%3A%5Cn%24%24%5Cny%20%3D%20mx%20%2B%20b%5Cn%24%24%5Cndone.')%2C%0A'No%20original%20delimiters%20remain'%3A%20function(topic)%20%7B%0Aassert.equal(topic.indexOf('%24x%24')%2C%20-1)%3B%0Aassert.equal(topic.indexOf('%24%24')%2C%20-1)%3B%0A%2F%2F%20Note%3A%20%22y%20%3D%20mx%20%2B%20b%22%20will%20be%20preserved%20in%20KaTeX%20annotation%20-%20this%20is%20correct%0A%7D%2C%0A'Contains%20both%20inline%20and%20block%20math'%3A%20function(topic)%20%7B%0Aassert.notEqual(topic.indexOf('')%2C%20-1)%3B%0Aassert.notEqual(topic.indexOf('')%2C%20-1)%3B%0A%7D%2C%0A'LaTeX%20content%20preserved%20in%20annotations'%3A%20function(topic)%20%7B%0A%2F%2F%20KaTeX%20correctly%20preserves%20LaTeX%20in%20annotations%0Aassert.notEqual(topic.indexOf('x')%2C%20-1)%3B%0Aassert.notEqual(topic.indexOf('y%20%3D%20mx%20%2B%20b')%2C%20-1)%3B%0A%7D%0A%7D%2C\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e  \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Mixed inline and block expressions\u0026#x27;\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr inline\"\u003etopic\u003c/span\u003e: mdWithDollar.\u003cspan class=\"hljs-title function_ inline\"\u003erender\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Inline $x$ and block:\\n$$\\ny = mx + b\\n$$\\ndone.\u0026#x27;\u003c/span\u003e),\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;No original delimiters remain\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003eequal\u003c/span\u003e(topic.\u003cspan class=\"hljs-title function_ inline\"\u003eindexOf\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;$x$\u0026#x27;\u003c/span\u003e), -\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e);\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003eequal\u003c/span\u003e(topic.\u003cspan class=\"hljs-title function_ inline\"\u003eindexOf\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;$$\u0026#x27;\u003c/span\u003e), -\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e);\n      \u003cspan class=\"hljs-comment inline\"\u003e// Note: \u0026quot;y = mx + b\u0026quot; will be preserved in KaTeX annotation - this is correct\u003c/span\u003e\n    },\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Contains both inline and block math\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003enotEqual\u003c/span\u003e(topic.\u003cspan class=\"hljs-title function_ inline\"\u003eindexOf\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026lt;span class=\u0026quot;katex\u0026quot;\u0026gt;\u0026#x27;\u003c/span\u003e), -\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e);\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003enotEqual\u003c/span\u003e(topic.\u003cspan class=\"hljs-title function_ inline\"\u003eindexOf\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026lt;span class=\u0026quot;katex-display\u0026quot;\u0026gt;\u0026#x27;\u003c/span\u003e), -\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e);\n    },\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;LaTeX content preserved in annotations\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {\n      \u003cspan class=\"hljs-comment inline\"\u003e// KaTeX correctly preserves LaTeX in annotations\u003c/span\u003e\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003enotEqual\u003c/span\u003e(topic.\u003cspan class=\"hljs-title function_ inline\"\u003eindexOf\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026lt;annotation encoding=\u0026quot;application/x-tex\u0026quot;\u0026gt;x\u0026lt;/annotation\u0026gt;\u0026#x27;\u003c/span\u003e), -\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e);\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003enotEqual\u003c/span\u003e(topic.\u003cspan class=\"hljs-title function_ inline\"\u003eindexOf\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026lt;annotation encoding=\u0026quot;application/x-tex\u0026quot;\u0026gt;y = mx + b\u0026lt;/annotation\u0026gt;\u0026#x27;\u003c/span\u003e), -\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e);\n    }\n  },\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 178-194\u003c/strong\u003e: Test mixed inline and block expressions:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eVerify all original delimiters removed\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eEnsure both inline and block mathematical elements included\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eVerify LaTeX content correctly preserved in annotations\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"error-handling-configuration-tests\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#error-handling-configuration-tests\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Error Handling Configuration Tests\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Error Handling Configuration Tests\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"Here's%20the%20complete%20remaining%20content%20for%20the%20English%20translation%3A%0A%60%60%60markdown%0A'KaTeX%20error%20handling%20(throwOnError%3A%20false)'%3A%20%7B%0Atopic%3A%20mdWithDollar.render('Invalid%20math%3A%20%24%5C%5Cinvalidcommand%7Btest%7D%24.')%2C%0A'Renders%20without%20throwing'%3A%20function(topic)%20%7B%0A%2F%2F%20Should%20render%20something%20even%20with%20invalid%20LaTeX%20(due%20to%20throwOnError%3A%20false)%0Aassert.isTrue(topic.length%20%3E%200)%3B%0Aassert.notEqual(topic.indexOf('class%3D%22katex%22%3E')%2C%20-1)%3B%0A%7D%2C%0A'No%20original%20delimiters%20remain'%3A%20function(topic)%20%7B%0Aassert.equal(topic.indexOf('%24%5C%5Cinvalidcommand%7Btest%7D%24')%2C%20-1)%3B%0A%7D%0A%7D%2C\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"hljs-title class_ inline\"\u003eHere\u003c/span\u003e\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;s the complete remaining content for the English translation:\n\n```markdown\n  \u0026#x27;\u003c/span\u003e\u003cspan class=\"hljs-title class_ inline\"\u003eKaTeX\u003c/span\u003e error \u003cspan class=\"hljs-title function_ inline\"\u003ehandling\u003c/span\u003e (\u003cspan class=\"hljs-attr inline\"\u003ethrowOnError\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e)\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;: {\n    topic: mdWithDollar.render(\u0026#x27;\u003c/span\u003e\u003cspan class=\"hljs-title class_ inline\"\u003eInvalid\u003c/span\u003e \u003cspan class=\"hljs-attr inline\"\u003emath\u003c/span\u003e: $\\\\invalidcommand{test}$.\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;),\n    \u0026#x27;\u003c/span\u003e\u003cspan class=\"hljs-title class_ inline\"\u003eRenders\u003c/span\u003e without throwing\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;: function(topic) {\n      // Should render something even with invalid LaTeX (due to throwOnError: false)\n      assert.isTrue(topic.length \u0026gt; 0);\n      assert.notEqual(topic.indexOf(\u0026#x27;\u003c/span\u003e\u0026lt;span \u003cspan class=\"hljs-keyword inline\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string inline\"\u003e\u0026quot;katex\u0026quot;\u003c/span\u003e\u0026gt;\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;), -1);\n    },\n    \u0026#x27;\u003c/span\u003e\u003cspan class=\"hljs-title class_ inline\"\u003eNo\u003c/span\u003e original delimiters remain\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;: function(topic) {\n      assert.equal(topic.indexOf(\u0026#x27;\u003c/span\u003e$\\\\invalidcommand{test}$\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;), -1);\n    }\n  },\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 195-206\u003c/strong\u003e: Test KaTeX error handling:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eVerify invalid LaTeX commands don’t throw exceptions\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eEnsure still generates some output (error display)\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eVerify original delimiters removed\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"configuration-option-tests\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#configuration-option-tests\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Configuration Option Tests\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Configuration Option Tests\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"'Config%20with%20useTailwind%3Dfalse%20(default)'%3A%20%7B%0Atopic()%20%7B%0Aconst%20md%20%3D%20new%20Remarkable()%3B%0Amd.use(plugin%2C%20%7B%20useTailwind%3A%20false%20%7D)%3B%0Areturn%20md%3B%0A%7D%2C%0A'Configuration%20applied%20correctly'%3A%20function(topic)%20%7B%0A%2F%2F%20Test%20that%20configuration%20is%20accepted%20without%20error%0Aassert.isObject(topic)%3B%0A%7D%0A%7D%2C%0A'Config%20with%20useTailwind%3Dtrue'%3A%20%7B%0Atopic()%20%7B%0Aconst%20md%20%3D%20new%20Remarkable()%3B%0Amd.use(plugin%2C%20%7B%20useTailwind%3A%20true%20%7D)%3B%0Areturn%20md%3B%0A%7D%2C%0A'Configuration%20applied%20correctly'%3A%20function(topic)%20%7B%0A%2F%2F%20Test%20that%20configuration%20is%20accepted%20without%20error%0Aassert.isObject(topic)%3B%0A%7D%0A%7D%2C\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e  \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Config with useTailwind=false (default)\u0026#x27;\u003c/span\u003e: {\n    \u003cspan class=\"hljs-title function_ inline\"\u003etopic\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e md = \u003cspan class=\"hljs-keyword inline\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eRemarkable\u003c/span\u003e();\n      md.\u003cspan class=\"hljs-title function_ inline\"\u003euse\u003c/span\u003e(plugin, { \u003cspan class=\"hljs-attr inline\"\u003euseTailwind\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e });\n      \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e md;\n    },\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Configuration applied correctly\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {\n      \u003cspan class=\"hljs-comment inline\"\u003e// Test that configuration is accepted without error\u003c/span\u003e\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003eisObject\u003c/span\u003e(topic);\n    }\n  },\n  \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Config with useTailwind=true\u0026#x27;\u003c/span\u003e: {\n    \u003cspan class=\"hljs-title function_ inline\"\u003etopic\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e md = \u003cspan class=\"hljs-keyword inline\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eRemarkable\u003c/span\u003e();\n      md.\u003cspan class=\"hljs-title function_ inline\"\u003euse\u003c/span\u003e(plugin, { \u003cspan class=\"hljs-attr inline\"\u003euseTailwind\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003etrue\u003c/span\u003e });\n      \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e md;\n    },\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Configuration applied correctly\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {\n      \u003cspan class=\"hljs-comment inline\"\u003e// Test that configuration is accepted without error\u003c/span\u003e\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003eisObject\u003c/span\u003e(topic);\n    }\n  },\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 207-225\u003c/strong\u003e: Test Tailwind configuration options:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eVerify \u003ccode\u003euseTailwind: false\u003c/code\u003e configuration applied correctly\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eVerify \u003ccode\u003euseTailwind: true\u003c/code\u003e configuration applied correctly\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eEnsure configuration accepted without errors\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"styling-processing-tests\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#styling-processing-tests\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Styling Processing Tests\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Styling Processing Tests\n        \u003c/h3\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"'Aria-hidden%20processing%20with%20default%20styling'%3A%20%7B%0Atopic()%20%7B%0Aconst%20md%20%3D%20new%20Remarkable()%3B%0Amd.use(plugin%2C%20%7B%20useTailwind%3A%20false%20%7D)%3B%0A%2F%2F%20Create%20a%20mock%20rendered%20output%20with%20aria-hidden%20elements%0Aconst%20%7B%20applyCustomStyling%20%7D%20%3D%20require('.%2Futils')%3B%0Aconst%20mockHtml%20%3D%20'hidden%20content'%3B%0Areturn%20applyCustomStyling(mockHtml%2C%20%7B%20useTailwind%3A%20false%20%7D)%3B%0A%7D%2C%0A'Removes%20inline%20class%20and%20adds%20display%3Anone%20style'%3A%20function(topic)%20%7B%0Aassert.equal(topic.indexOf('class%3D%22inline%22')%2C%20-1)%3B%0Aassert.notEqual(topic.indexOf('style%3D%22display%3Anone%22')%2C%20-1)%3B%0A%7D%0A%7D%2C%0A'Aria-hidden%20processing%20with%20Tailwind%20styling'%3A%20%7B%0Atopic()%20%7B%0Aconst%20md%20%3D%20new%20Remarkable()%3B%0Amd.use(plugin%2C%20%7B%20useTailwind%3A%20true%20%7D)%3B%0A%2F%2F%20Create%20a%20mock%20rendered%20output%20with%20aria-hidden%20elements%0Aconst%20%7B%20applyCustomStyling%20%7D%20%3D%20require('.%2Futils')%3B%0Aconst%20mockHtml%20%3D%20'hidden%20content'%3B%0Areturn%20applyCustomStyling(mockHtml%2C%20%7B%20useTailwind%3A%20true%20%7D)%3B%0A%7D%2C%0A'Removes%20inline%20class%20and%20adds%20display%3Anone%20style'%3A%20function(topic)%20%7B%0Aassert.equal(topic.indexOf('class%3D%22inline%22')%2C%20-1)%3B%0Aassert.notEqual(topic.indexOf('style%3D%22display%3Anone%22')%2C%20-1)%3B%0A%7D%0A%7D\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e  \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Aria-hidden processing with default styling\u0026#x27;\u003c/span\u003e: {\n    \u003cspan class=\"hljs-title function_ inline\"\u003etopic\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e md = \u003cspan class=\"hljs-keyword inline\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eRemarkable\u003c/span\u003e();\n      md.\u003cspan class=\"hljs-title function_ inline\"\u003euse\u003c/span\u003e(plugin, { \u003cspan class=\"hljs-attr inline\"\u003euseTailwind\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e });\n      \u003cspan class=\"hljs-comment inline\"\u003e// Create a mock rendered output with aria-hidden elements\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e { applyCustomStyling } = \u003cspan class=\"hljs-built_in inline\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;./utils\u0026#x27;\u003c/span\u003e);\n      \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e mockHtml = \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026lt;span class=\u0026quot;inline\u0026quot; aria-hidden=\u0026quot;true\u0026quot;\u0026gt;hidden content\u0026lt;/span\u0026gt;\u0026#x27;\u003c/span\u003e;\n      \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eapplyCustomStyling\u003c/span\u003e(mockHtml, { \u003cspan class=\"hljs-attr inline\"\u003euseTailwind\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003efalse\u003c/span\u003e });\n    },\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Removes inline class and adds display:none style\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003eequal\u003c/span\u003e(topic.\u003cspan class=\"hljs-title function_ inline\"\u003eindexOf\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;class=\u0026quot;inline\u0026quot;\u0026#x27;\u003c/span\u003e), -\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e);\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003enotEqual\u003c/span\u003e(topic.\u003cspan class=\"hljs-title function_ inline\"\u003eindexOf\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;style=\u0026quot;display:none\u0026quot;\u0026#x27;\u003c/span\u003e), -\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e);\n    }\n  },\n  \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Aria-hidden processing with Tailwind styling\u0026#x27;\u003c/span\u003e: {\n    \u003cspan class=\"hljs-title function_ inline\"\u003etopic\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003e\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e md = \u003cspan class=\"hljs-keyword inline\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_ inline\"\u003eRemarkable\u003c/span\u003e();\n      md.\u003cspan class=\"hljs-title function_ inline\"\u003euse\u003c/span\u003e(plugin, { \u003cspan class=\"hljs-attr inline\"\u003euseTailwind\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003etrue\u003c/span\u003e });\n      \u003cspan class=\"hljs-comment inline\"\u003e// Create a mock rendered output with aria-hidden elements\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e { applyCustomStyling } = \u003cspan class=\"hljs-built_in inline\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;./utils\u0026#x27;\u003c/span\u003e);\n      \u003cspan class=\"hljs-keyword inline\"\u003econst\u003c/span\u003e mockHtml = \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;\u0026lt;span class=\u0026quot;inline\u0026quot; aria-hidden=\u0026quot;true\u0026quot;\u0026gt;hidden content\u0026lt;/span\u0026gt;\u0026#x27;\u003c/span\u003e;\n      \u003cspan class=\"hljs-keyword inline\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-title function_ inline\"\u003eapplyCustomStyling\u003c/span\u003e(mockHtml, { \u003cspan class=\"hljs-attr inline\"\u003euseTailwind\u003c/span\u003e: \u003cspan class=\"hljs-literal inline\"\u003etrue\u003c/span\u003e });\n    },\n    \u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;Removes inline class and adds display:none style\u0026#x27;\u003c/span\u003e: \u003cspan class=\"hljs-keyword inline\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params inline\"\u003etopic\u003c/span\u003e) {\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003eequal\u003c/span\u003e(topic.\u003cspan class=\"hljs-title function_ inline\"\u003eindexOf\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;class=\u0026quot;inline\u0026quot;\u0026#x27;\u003c/span\u003e), -\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e);\n      assert.\u003cspan class=\"hljs-title function_ inline\"\u003enotEqual\u003c/span\u003e(topic.\u003cspan class=\"hljs-title function_ inline\"\u003eindexOf\u003c/span\u003e(\u003cspan class=\"hljs-string inline\"\u003e\u0026#x27;style=\u0026quot;display:none\u0026quot;\u0026#x27;\u003c/span\u003e), -\u003cspan class=\"hljs-number inline\"\u003e1\u003c/span\u003e);\n    }\n  }\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLines 226-250\u003c/strong\u003e: Test aria-hidden element styling processing:\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003erequire('./utils')\u003c/code\u003e\u003c/strong\u003e: Re-import utils module to directly test applyCustomStyling function\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eMock HTML testing\u003c/strong\u003e: Create test HTML fragment containing aria-hidden attributes\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003eapplyCustomStyling(mockHtml, config)\u003c/code\u003e\u003c/strong\u003e: Call styling processing function\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003emockHtml\u003c/code\u003e: Mock KaTeX rendered HTML\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003econfig\u003c/code\u003e: Styling configuration object (containing useTailwind and other options)\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eTest styling processing behavior under different configurations\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eVerify accessibility improvements: inline class removed, display:none style added\u003c/li\u003e\n\u003c/ul\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"javascript\" data-code=\"%7D).export(module)%3B\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ejavascript\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode class=\"language-javascript\"\u003e}).\u003cspan class=\"hljs-title function_ inline\"\u003eexport\u003c/span\u003e(\u003cspan class=\"hljs-variable language_ inline\"\u003emodule\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eLine 251\u003c/strong\u003e: Export test suite module.\u003c/p\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003e\u003ccode\u003e.export(module)\u003c/code\u003e\u003c/strong\u003e: vows testing framework method, export test suite for execution by test runner\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003ccode\u003emodule\u003c/code\u003e: Node.js current module object\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003eThis enables test file to be run via command line tools\u003c/li\u003e\n\u003c/ul\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr class=\"border-0 h-px bg-gray-300 my-8\"\u003e\n\u003ch2 id=\"summary\" class=\"group relative text-3xl font-semibold mt-6 mb-3 text-foreground leading-tight\"\u003e\n            \u003ca href=\"#summary\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Summary\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Summary\n        \u003c/h2\u003e\n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003eThe core functionality of this plugin includes:\u003c/p\u003e\n\u003col class=\"list-decimal list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eFlexible delimiter support\u003c/strong\u003e: Supports custom delimiters (default $)\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eInline and block support\u003c/strong\u003e: Simultaneously supports \u003ccode\u003e$...$\u003c/code\u003e (inline) and \u003ccode\u003e$$...$$\u003c/code\u003e (block)\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eIntelligent parsing\u003c/strong\u003e: Correctly handles nested braces and escape characters\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eError handling\u003c/strong\u003e: Incomplete expressions preserve original text, invalid LaTeX displays errors without crashing\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eStyle customization\u003c/strong\u003e: Supports Tailwind CSS and custom styling processing\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eAccessibility\u003c/strong\u003e: Processes aria-hidden elements to improve accessibility\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"non-standard-library-function-usage-summary\" class=\"group relative text-2xl font-semibold mt-5 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#non-standard-library-function-usage-summary\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Non-Standard Library Function Usage Summary\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Non-Standard Library Function Usage Summary\n        \u003c/h3\u003e\n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003eThis plugin primarily relies on the following non-JavaScript standard library functions and APIs:\u003c/p\u003e\n\u003ch4 id=\"nodejs-ecosystem\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#nodejs-ecosystem\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Node.js Ecosystem\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Node.js Ecosystem\n        \u003c/h4\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eModule system\u003c/strong\u003e: \u003ccode\u003erequire()\u003c/code\u003e, \u003ccode\u003emodule.exports\u003c/code\u003e for module import/export\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eAssertion library\u003c/strong\u003e: \u003ccode\u003eassert.*\u003c/code\u003e method group for test verification\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"remarkable-markdown-processor\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#remarkable-markdown-processor\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Remarkable Markdown Processor\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Remarkable Markdown Processor\n        \u003c/h4\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eParser state management\u003c/strong\u003e: \u003ccode\u003estate.bMarks\u003c/code\u003e, \u003ccode\u003estate.tShift\u003c/code\u003e, \u003ccode\u003estate.eMarks\u003c/code\u003e and other properties manage text position information\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eText processing methods\u003c/strong\u003e: \u003ccode\u003estate.skipChars()\u003c/code\u003e, \u003ccode\u003estate.skipSpaces()\u003c/code\u003e, \u003ccode\u003estate.getLines()\u003c/code\u003e and other methods handle text parsing\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eToken management\u003c/strong\u003e: \u003ccode\u003estate.push()\u003c/code\u003e, \u003ccode\u003estate.tokens.push()\u003c/code\u003e for creating syntax tree nodes\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003ePlugin registration\u003c/strong\u003e: \u003ccode\u003emd.inline.ruler.push()\u003c/code\u003e, \u003ccode\u003emd.block.ruler.push()\u003c/code\u003e register parsing rules\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eRendering system\u003c/strong\u003e: \u003ccode\u003emd.renderer.rules.*\u003c/code\u003e define HTML rendering logic\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"katex-mathematical-rendering-library\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#katex-mathematical-rendering-library\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to KaTeX Mathematical Rendering Library\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            KaTeX Mathematical Rendering Library\n        \u003c/h4\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eCore rendering\u003c/strong\u003e: \u003ccode\u003ekatex.renderToString()\u003c/code\u003e converts LaTeX to HTML\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"vows-testing-framework\" class=\"group relative text-xl font-medium mt-4 mb-2 text-foreground leading-snug\"\u003e\n            \u003ca href=\"#vows-testing-framework\" class=\"absolute -left-6 top-0 opacity-0 group-hover:opacity-100 transition-opacity text-primary/60 hover:text-primary\" aria-label=\"Link to Vows Testing Framework\"\u003e\n                \u003csvg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                    \u003cpath fill-rule=\"evenodd\" d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 11.414-1.414 4 4 0 105.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 10-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\" clip-rule=\"evenodd\" /\u003e\n                \u003c/svg\u003e\n            \u003c/a\u003e\n            Vows Testing Framework\n        \u003c/h4\u003e\n\u003cul class=\"list-disc list-inside mb-4 pl-6 space-y-2\"\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eTest organization\u003c/strong\u003e: \u003ccode\u003evows.describe()\u003c/code\u003e, \u003ccode\u003e.addBatch()\u003c/code\u003e, \u003ccode\u003e.export()\u003c/code\u003e build test structure\u003c/li\u003e\n\u003cli class=\"text-foreground leading-relaxed\"\u003e\u003cstrong class=\"font-bold text-foreground\"\u003eBehavior verification\u003c/strong\u003e: Various assert methods for functionality verification\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp class=\"text-base leading-7 mb-4 text-foreground\"\u003eTests cover all major functionality and edge cases, ensuring deep understanding of plugin architecture and implementation through detailed function-level analysis.\u003c/p\u003e\n\n            \u003cdiv class=\"enhanced-codeblock relative mb-6 rounded-lg border bg-background border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm\" data-enhanced-codeblock=\"true\" data-language=\"\" data-code=\"This%20completes%20the%20full%20English%20translation%20of%20the%20%60remarkable-katex-plus.mdx%60%20file.%20The%20translation%20maintains%20all%20the%20technical%20details%2C%20code%20examples%2C%20and%20comprehensive%20explanations%20from%20the%20original%20Chinese%20version.\"\u003e\n                \u003cdiv class=\"codeblock-header flex items-center justify-between px-4 py-2 bg-surface border-b border-gray-200 dark:border-gray-700\"\u003e\n                    \u003cspan class=\"codeblock-language text-xs font-medium uppercase tracking-wide text-foreground opacity-70 inline\"\u003ecode\u003c/span\u003e\n                    \u003cbutton class=\"codeblock-copy-btn inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium border rounded transition-all duration-200 bg-background hover:bg-surface text-foreground hover:text-primary border-gray-300 dark:border-gray-600 hover:scale-105 active:scale-95\" title=\"Copy code\"\u003e\n                        \u003csvg class=\"copy-icon w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath d=\"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" /\u003e\n                            \u003cpath d=\"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z\" /\u003e\n                        \u003c/svg\u003e\n                        \u003csvg class=\"copied-icon w-4 h-4 hidden\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\u003e\n                            \u003cpath fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /\u003e\n                        \u003c/svg\u003e\n                        \u003cspan class=\"copy-text inline\"\u003eCopy\u003c/span\u003e\n                    \u003c/button\u003e\n                \u003c/div\u003e\n                \u003cpre class=\"codeblock-content p-4 overflow-x-auto font-mono text-sm leading-relaxed bg-surface text-foreground\"\u003e\u003ccode\u003e\nThis completes \u003cspan class=\"hljs-keyword inline\"\u003ethe\u003c/span\u003e full English translation \u003cspan class=\"hljs-keyword inline\"\u003eof\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003ethe\u003c/span\u003e `remarkable-katex-plus.mdx` \u003cspan class=\"hljs-built_in inline\"\u003efile\u003c/span\u003e. The translation maintains all \u003cspan class=\"hljs-keyword inline\"\u003ethe\u003c/span\u003e technical details, code examples, \u003cspan class=\"hljs-keyword inline\"\u003eand\u003c/span\u003e comprehensive explanations \u003cspan class=\"hljs-built_in inline\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-keyword inline\"\u003ethe\u003c/span\u003e original Chinese \u003cspan class=\"hljs-built_in inline\"\u003eversion\u003c/span\u003e.\u003c/code\u003e\u003c/pre\u003e\n            \u003c/div\u003e\n        \n"])</script><script>self.__next_f.push([1,"d:[\"$\",\"$L1d\",null,{\"htmlContent\":\"$1e\",\"frontMatter\":{\"title\":\"Complete Code Analysis of remarkable-katex-plus\",\"description\":\"Detailed analysis of the remarkable-katex-plus plugin code\",\"date\":\"2025-06-22\",\"author\":\"MilkWind\",\"tags\":[\"Code Analysis\",\"Plugin\"],\"references\":{}},\"readingTime\":\"29 min read\",\"category\":\"plugins\",\"tocItems\":[{\"id\":\"remarkable-katex-plus-plugin-code-analysis\",\"text\":\"Remarkable KaTeX Plus Plugin Code Analysis\",\"level\":1},{\"id\":\"overview\",\"text\":\"Overview\",\"level\":2},{\"id\":\"dependency-library-functions\",\"text\":\"Dependency Library Functions\",\"level\":2},{\"id\":\"nodejs-related-functions\",\"text\":\"Node.js Related Functions\",\"level\":3},{\"id\":\"katex-library-functions\",\"text\":\"KaTeX Library Functions\",\"level\":3},{\"id\":\"remarkable-parser-state-object-properties\",\"text\":\"Remarkable Parser State Object Properties\",\"level\":3},{\"id\":\"remarkable-parser-state-methods\",\"text\":\"Remarkable Parser State Methods\",\"level\":3},{\"id\":\"remarkable-plugin-api\",\"text\":\"Remarkable Plugin API\",\"level\":3},{\"id\":\"testing-framework-functions\",\"text\":\"Testing Framework Functions\",\"level\":3},{\"id\":\"indexjs-code-line-by-line-analysis\",\"text\":\"index.js Code Line-by-Line Analysis\",\"level\":2},{\"id\":\"file-header-and-module-declaration\",\"text\":\"File Header and Module Declaration\",\"level\":3},{\"id\":\"basic-configuration-and-variable-declaration\",\"text\":\"Basic Configuration and Variable Declaration\",\"level\":3},{\"id\":\"utility-module-import-and-styling-configuration\",\"text\":\"Utility Module Import and Styling Configuration\",\"level\":3},{\"id\":\"katex-rendering-function\",\"text\":\"KaTeX Rendering Function\",\"level\":3},{\"id\":\"block-level-katex-parsing-function\",\"text\":\"Block-level KaTeX Parsing Function\",\"level\":3},{\"id\":\"inline-katex-parsing-function\",\"text\":\"Inline KaTeX Parsing Function\",\"level\":3},{\"id\":\"plugin-registration\",\"text\":\"Plugin Registration\",\"level\":3},{\"id\":\"indextestjs-code-line-by-line-analysis\",\"text\":\"index.test.js Code Line-by-Line Analysis\",\"level\":2},{\"id\":\"test-file-header\",\"text\":\"Test File Header\",\"level\":3},{\"id\":\"test-instance-preparation\",\"text\":\"Test Instance Preparation\",\"level\":3},{\"id\":\"test-suite-start\",\"text\":\"Test Suite Start\",\"level\":3},{\"id\":\"configuration-tests\",\"text\":\"Configuration Tests\",\"level\":3},{\"id\":\"basic-text-rendering-tests\",\"text\":\"Basic Text Rendering Tests\",\"level\":3},{\"id\":\"inline-mathematical-formula-tests\",\"text\":\"Inline Mathematical Formula Tests\",\"level\":3},{\"id\":\"block-level-mathematical-formula-tests\",\"text\":\"Block-level Mathematical Formula Tests\",\"level\":3},{\"id\":\"custom-delimiter-tests\",\"text\":\"Custom Delimiter Tests\",\"level\":3},{\"id\":\"error-handling-tests\",\"text\":\"Error Handling Tests\",\"level\":3},{\"id\":\"content-cleanup-tests\",\"text\":\"Content Cleanup Tests\",\"level\":3},{\"id\":\"katex-annotation-preservation-tests\",\"text\":\"KaTeX Annotation Preservation Tests\",\"level\":3},{\"id\":\"multiple-expression-tests\",\"text\":\"Multiple Expression Tests\",\"level\":3},{\"id\":\"mixed-expression-tests\",\"text\":\"Mixed Expression Tests\",\"level\":3},{\"id\":\"error-handling-configuration-tests\",\"text\":\"Error Handling Configuration Tests\",\"level\":3},{\"id\":\"configuration-option-tests\",\"text\":\"Configuration Option Tests\",\"level\":3},{\"id\":\"styling-processing-tests\",\"text\":\"Styling Processing Tests\",\"level\":3},{\"id\":\"summary\",\"text\":\"Summary\",\"level\":2},{\"id\":\"non-standard-library-function-usage-summary\",\"text\":\"Non-Standard Library Function Usage Summary\",\"level\":3},{\"id\":\"nodejs-ecosystem\",\"text\":\"Node.js Ecosystem\",\"level\":4},{\"id\":\"remarkable-markdown-processor\",\"text\":\"Remarkable Markdown Processor\",\"level\":4},{\"id\":\"katex-mathematical-rendering-library\",\"text\":\"KaTeX Mathematical Rendering Library\",\"level\":4},{\"id\":\"vows-testing-framework\",\"text\":\"Vows Testing Framework\",\"level\":4}],\"translations\":{\"common\":{\"welcome\":\"Welcome\",\"loading\":\"Loading...\",\"error\":\"Something went wrong\",\"retry\":\"Try again\",\"theme\":\"Theme\",\"language\":\"Language\",\"light\":\"Light\",\"dark\":\"Dark\"},\"navigation\":{\"home\":\"Home\",\"personal\":\"Personal\",\"works\":\"Works\",\"contributions\":\"Contributions\",\"documents\":\"Documents\",\"about\":\"About\",\"contact\":\"Contact\"},\"personal\":{\"technicalSkills\":\"Technical Skills\",\"email\":\"Email\",\"github\":\"GitHub\",\"resume\":\"Resume\",\"codeRepository\":\"Code Repository\",\"loadingPersonalInfo\":\"Loading personal information...\",\"loadingResume\":\"Loading resume...\",\"closeResume\":\"Close Resume\",\"emailCopied\":\"Email copied to clipboard!\",\"galaxyDefaultDescription\":\"Expert in full-stack development, cross-platform architecture, AI technology integration, and high-performance system optimization\",\"skillGalaxy\":\"Skill Galaxy\",\"stirGalaxy\":\"Stir Galaxy\",\"stirring\":\"Stirring...\",\"fullStackEngineer\":\"MilkWind - Full Stack Engineer\",\"professionalProfile\":\"About Me\"},\"documents\":{\"technicalDocuments\":\"Technical Documents\",\"description\":\"Basic principles, code splitting, and some random thoughts.\",\"articles\":\"Articles\",\"categories\":\"Categories\",\"allCategories\":\"All Categories\",\"noArticlesFound\":\"No articles found\",\"noArticlesAvailable\":\"No articles available in English.\",\"noArticlesInCategory\":\"No articles found in the category.\",\"readMore\":\"Read more\",\"loadingDocuments\":\"Loading documents...\",\"backToDocuments\":\"← Back to Documents\",\"documentNotFound\":\"Document Not Found\",\"documentNotFoundDescription\":\"The requested document could not be found.\",\"technicalInsights\":\"Insights\",\"untitledDocument\":\"Untitled Document\",\"byAuthor\":\"By\",\"search\":\"Search articles...\",\"searchByTags\":\"Filter by tags\",\"searching\":\"Searching...\",\"noSearchResults\":\"No articles match your search criteria\",\"clearSearch\":\"Clear search\",\"selectedTags\":\"Selected tags\",\"allTags\":\"All tags\",\"searchInTitle\":\"Search in titles, descriptions, and content\",\"enterImmersiveMode\":\"Immersive Reading\",\"exitImmersiveMode\":\"Exit Immersive Mode\",\"immersiveReading\":\"Immersive Reading Mode\",\"exploreContent\":\"Explore content by category\",\"browseBy\":\"Browse by\",\"exploreAll\":\"All content in one place\",\"categoryDescription\":\"Articles in this category\",\"totalArticles\":\"Articles\",\"totalCategories\":\"Categories\",\"foundArticles\":\"Found articles\",\"categoriesWithResults\":\"Categories with results\"},\"works\":{\"workCases\":\"Work Cases\",\"projects\":\"Portfolio\",\"loadingProjects\":\"Loading projects...\",\"grid\":\"Grid\",\"stack\":\"Stack\",\"of\":\"of\",\"workCasesPageTitle\":\"Work Cases Page\",\"pageWorkingCorrectly\":\"This page is working! The routing is correct.\",\"try3DVersion\":\"Try 3D Version\",\"dragToScroll\":\"Drag to scroll\",\"dragToChange\":\"Drag to change\",\"swipeCards\":\"Swipe cards\",\"keyboardNav\":\"Keyboard navigation\"},\"contributions\":{\"contributionCases\":\"Open Source\",\"contributions\":\"Contributions\",\"loadingContributions\":\"Loading contributions...\",\"grid\":\"Grid\",\"stack\":\"Stack\",\"of\":\"of\",\"contributionCasesPageTitle\":\"Contribution Cases Page\",\"pageWorkingCorrectly\":\"This page is working! The routing is correct.\",\"try3DVersion\":\"Try 3D Version\",\"dragToScroll\":\"Drag to scroll\",\"dragToChange\":\"Drag to change\",\"swipeCards\":\"Swipe cards\",\"keyboardNav\":\"Keyboard navigation\"},\"contribution\":{\"contributionPreview\":\"Contribution Preview\",\"accessible\":\"Accessible\",\"code\":\"Code\",\"maintenance\":\"Maintenance\",\"enhancement\":\"Enhancement\",\"documentation\":\"Documentation\",\"community\":\"Community\",\"moreItems\":\"more\",\"technicalDetails\":\"Technical Details\",\"technologies\":\"Technologies:\",\"contributionDetail\":\"Contribution Detail\",\"description\":\"Description:\",\"seeDetails\":\"See Details\",\"github\":\"GitHub\",\"viewContribution\":\"View Contribution\",\"viewCode\":\"View Code\"},\"project\":{\"projectPreview\":\"Project Preview\",\"accessible\":\"Accessible\",\"tool\":\"Tool\",\"plugin\":\"Plugin\",\"toy\":\"Toy\",\"moreItems\":\"more\",\"technicalDetails\":\"Technical Details\",\"technologies\":\"Technologies:\",\"description\":\"Description:\",\"seeDetails\":\"See Details\",\"github\":\"GitHub\",\"gitee\":\"Gitee\",\"viewLiveDemo\":\"View Live Demo\",\"viewCode\":\"View Code\",\"access\":\"Access\",\"videos\":\"Videos\",\"watchVideo\":\"Watch Video\",\"hasVideo\":\"Has Video\"},\"codeblock\":{\"copy\":\"Copy\",\"copySuccess\":\"Code copied to clipboard!\",\"copyError\":\"Failed to copy code\",\"copyTooltip\":\"Copy code\"},\"toc\":{\"contents\":\"Contents\",\"autoScroll\":\"Auto-scroll to section\",\"collapse\":\"Collapse\",\"expand\":\"Expand\"},\"loading\":{\"loading\":\"LOADING\",\"preparingExperience\":\"Preparing experience\"}},\"lang\":\"en\",\"theme\":\"light\"}]\n"])</script><script>self.__next_f.push([1,"12:null\n"])</script><script>self.__next_f.push([1,"18:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n11:null\n"])</script><script>self.__next_f.push([1,"1c:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"Complete Code Analysis of remarkable-katex-plus | Interactive Portfolio\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Detailed analysis of the remarkable-katex-plus plugin code\"}],[\"$\",\"meta\",\"2\",{\"name\":\"author\",\"content\":\"Developer\"}],[\"$\",\"meta\",\"3\",{\"name\":\"keywords\",\"content\":\"portfolio,3D,interactive,web development,Three.js,Next.js\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:title\",\"content\":\"Complete Code Analysis of remarkable-katex-plus | Interactive Portfolio\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:description\",\"content\":\"Detailed analysis of the remarkable-katex-plus plugin code\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"7\",{\"property\":\"article:published_time\",\"content\":\"2025-06-22\"}],[\"$\",\"meta\",\"8\",{\"property\":\"article:tag\",\"content\":\"Code Analysis\"}],[\"$\",\"meta\",\"9\",{\"property\":\"article:tag\",\"content\":\"Plugin\"}],[\"$\",\"meta\",\"10\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"11\",{\"name\":\"twitter:title\",\"content\":\"Complete Code Analysis of remarkable-katex-plus | Interactive Portfolio\"}],[\"$\",\"meta\",\"12\",{\"name\":\"twitter:description\",\"content\":\"Detailed analysis of the remarkable-katex-plus plugin code\"}],[\"$\",\"link\",\"13\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"32x32\"}]],\"error\":null,\"digest\":\"$undefined\"}\n14:{\"metadata\":\"$1c:metadata\",\"error\":null,\"digest\":\"$undefined\"}\n"])</script></body></html>